{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","vizicities.min.js","webpack:/webpack/bootstrap 3023bfbcab9f1ed40594","webpack:///src/vizicities.js","webpack:///src/controls/index.js","webpack:///src/controls/Controls.Orbit.js","webpack:///~/eventemitter3/index.js","webpack:/external \"THREE\"","webpack:///src/vendor/OrbitControls.js","webpack:///~/hammerjs/hammer.js","webpack:/external \"TweenLite\"","webpack:///src/geo/Geo.js","webpack:///src/geo/LatLon.js","webpack:///src/geo/Point.js","webpack:///src/layer/Layer.js","webpack:///~/lodash.assign/index.js","webpack:///src/engine/Scene.js","webpack:///src/vendor/CSS3DRenderer.js","webpack:///src/vendor/CSS2DRenderer.js","webpack:///src/layer/LayerGroup.js","webpack:///src/layer/environment/EnvironmentLayer.js","webpack:///src/layer/environment/Skybox.js","webpack:///src/layer/environment/Sky.js","webpack:///~/lodash.throttle/index.js","webpack:///src/layer/tile/ImageTileLayer.js","webpack:///src/layer/tile/TileLayer.js","webpack:///src/layer/tile/TileCache.js","webpack:///~/lru-cache/index.js","webpack:///~/process/browser.js","webpack:///~/pseudomap/map.js","webpack:///~/pseudomap/pseudomap.js","webpack:///~/util/util.js","webpack:///~/util/support/types.js","webpack:///~/util/support/isBufferBrowser.js","webpack:///~/is-arguments/index.js","webpack:///~/is-generator-function/index.js","webpack:///~/inherits/inherits_browser.js","webpack:///~/lru-cache/~/yallist/yallist.js","webpack:///src/layer/tile/ImageTile.js","webpack:///src/layer/tile/Tile.js","webpack:///src/vendor/BoxHelper.js","webpack:///src/layer/tile/ImageTileLayerBaseMaterial.js","webpack:///src/layer/tile/GeoJSONTileLayer.js","webpack:///src/layer/tile/GeoJSONTile.js","webpack:///src/layer/GeoJSONLayer.js","webpack:///~/reqwest/reqwest.js","webpack:///src/util/GeoJSON.js","webpack:///~/topojson/build/topojson.js","webpack:///~/geojson-merge/index.js","webpack:///~/geojson-normalize/index.js","webpack:///~/earcut/src/earcut.js","webpack:///src/util/extrudePolygon.js","webpack:///src/util/Buffer.js","webpack:///src/engine/PickingMaterial.js","webpack:///src/engine/PickingShader.js","webpack:///src/layer/geometry/PolygonLayer.js","webpack:///src/layer/geometry/PolylineLayer.js","webpack:///src/layer/geometry/PointLayer.js","webpack:///src/layer/GeoJSONWorkerLayer.js","webpack:///src/util/Worker.js","webpack:///src/util/WorkerPool.js","webpack:///src/util/WorkerPoolWorker.js","webpack:///src/util/Stringify.js","webpack:///src/layer/tile/TopoJSONTileLayer.js","webpack:///src/layer/TopoJSONLayer.js","webpack:///src/layer/TopoJSONWorkerLayer.js","webpack:///src/util/index.js","webpack:///src/util/wrapNum.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_7__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_World","e","Error","code","_World2","_controlsIndex","_controlsIndex2","_geoGeoJs","_geoGeoJs2","_layerLayer","_layerLayer2","_layerLayerGroup","_layerEnvironmentEnvironmentLayer","_layerEnvironmentEnvironmentLayer2","_layerTileImageTileLayer","_layerTileImageTileLayer2","_layerTileGeoJSONTileLayer","_layerTileGeoJSONTileLayer2","_layerTileTopoJSONTileLayer","_layerTileTopoJSONTileLayer2","_layerTileGeoJSONTile","_layerTileGeoJSONTile2","_layerGeoJSONLayer","_layerGeoJSONLayer2","_layerTopoJSONLayer","_layerTopoJSONLayer2","_layerGeoJSONWorkerLayer","_layerGeoJSONWorkerLayer2","_layerTopoJSONWorkerLayer","_layerTopoJSONWorkerLayer2","_layerGeometryPolygonLayer","_layerGeometryPolygonLayer2","_layerGeometryPolylineLayer","_layerGeometryPolylineLayer2","_layerGeometryPointLayer","_layerGeometryPointLayer2","_geoPoint","_geoPoint2","_geoLatLon","_geoLatLon2","_enginePickingMaterial","_enginePickingMaterial2","_utilIndex","_utilIndex2","VIZI","version","World","world","Controls","Geo","Layer","layer","EnvironmentLayer","environmentLayer","ImageTileLayer","imageTileLayer","GeoJSONTileLayer","geoJSONTileLayer","GeoJSONTile","geoJSONTile","TopoJSONTileLayer","topoJSONTileLayer","GeoJSONLayer","geoJSONLayer","TopoJSONLayer","topoJSONLayer","GeoJSONWorkerLayer","geoJSONWorkerLayer","TopoJSONWorkerLayer","topoJSONWorkerLayer","PolygonLayer","polygonLayer","PolylineLayer","polylineLayer","PointLayer","pointLayer","Point","point","LatLon","latLon","PickingMaterial","Util","_ControlsOrbit","_ControlsOrbit2","Orbit","orbit","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","parent","getPrototypeOf","_eventemitter3","_eventemitter32","_three","_three2","_vendorOrbitControls","_vendorOrbitControls2","_TweenLite","_TweenLite2","_EventEmitter","lagSmoothing","_this","_controls","addEventListener","event","startPosition","clone","startPolar","getPolarAngle","startAzimuth","getAzimuthalAngle","_world","emit","endPosition","endPolar","endAzimuth","changed","Math","abs","distanceTo","animate","controls","deltaX","x","deltaY","y","z","panLeft","matrix","panUp","update","pointDelta","pan","metres","metresDelta","dollyIn","dollyOut","angle","theta","delta","rotateUp","angleDelta","rotateLeft","duration","zoom","animationTime","_flyTarget","Vector3","diff","subVectors","_flyTween","prev","onUpdate","tween","deltaZ","onComplete","onUpdateParams","onCompleteParams","callbackScope","ease","Power1","easeInOut","zoomTime","_zoomTweenIn","_zoomTweenOut","delay","latlon","noZoom","latLonToPoint","flyToPoint","addControls","_engine","_camera","_container","maxPolarAngle","_initEvents","Promise","resolve","dispose","noNew","EE","fn","context","once","EventEmitter","has","hasOwnProperty","prefix","_events","eventNames","name","events","names","push","slice","getOwnPropertySymbols","concat","listeners","exists","evt","available","l","ee","Array","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","j","on","listener","removeAllListeners","off","addListener","setMaxListeners","prefixed","_hammerjs","_hammerjs2","OrbitControls","domElement","getAutoRotationAngle","PI","scope","autoRotateSpeed","getZoomScale","pow","zoomSpeed","thetaDelta","phiDelta","dollyScale","PerspectiveCamera","scale","OrthographicCamera","max","minZoom","min","maxZoom","updateProjectionMatrix","zoomChanged","console","warn","enableZoom","handleMouseDownRotate","rotateStart","set","clientX","clientY","handleMouseDownDolly","dollyStart","handleMouseDownPan","panStart","handleMouseMoveRotate","rotateEnd","rotateDelta","element","document","body","clientWidth","rotateSpeed","clientHeight","copy","handleMouseMoveDolly","dollyEnd","dollyDelta","handleMouseMovePan","panEnd","panDelta","handleMouseUp","handleMouseWheel","wheelDelta","detail","handleKeyDown","keyCode","keys","UP","keyPanSpeed","dispatchEvent","endEvent","BOTTOM","LEFT","RIGHT","CTRL","KEY_STATE","handleKeyUp","handleTouchStartRotate","pointers","pageX","pageY","handleTouchStartDolly","dx","dy","distance","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","onMouseDown","enabled","preventDefault","button","mouseButtons","ORBIT","enablePan","state","STATE","PAN","enableRotate","ROTATE","ZOOM","DOLLY","NONE","onMouseMove","onMouseUp","startEvent","removeEventListener","onMouseWheel","stopPropagation","onKeyDown","enableKeys","onKeyUp","onTouchStart","touches","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","onTouchMove","onTouchEnd","onContextMenu","minDistance","maxDistance","Infinity","minPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","autoRotate","MOUSE","MIDDLE","target0","position0","position","zoom0","phi","reset","changeEvent","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","atan2","EPS","radius","add","panOffset","sin","cos","lookAt","distanceToSquared","dot","quaternion","window","type","Vector2","v","objectMatrix","te","elements","multiplyScalar","adjDist","targetDistance","tan","fov","right","left","top","bottom","hammer","direction","DIRECTION_ALL","enable","threshold","pointerType","EventDispatcher","center","noRotate","noPan","noKeys","staticMoving","constraint","dynamicDampingFactor","__WEBPACK_AMD_DEFINE_RESULT__","exportName","setTimeoutContext","timeout","setTimeout","bindFn","invokeArrayArg","arg","isArray","each","iterator","forEach","deprecate","method","message","deprecationMessage","stack","replace","log","inherit","child","base","properties","childP","baseP","_super","assign","boolOrFn","val","TYPE_FUNCTION","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","removeEventListeners","hasParent","node","parentNode","inStr","str","find","indexOf","trim","split","inArray","src","findByKey","toArray","uniqueArray","sort","results","values","a","b","prop","camelProp","toUpperCase","VENDOR_PREFIXES","uniqueId","_uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","Input","manager","callback","self","options","inputTarget","domHandler","ev","init","createInputInstance","Type","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","SUPPORT_ONLY_TOUCH","TouchInput","SUPPORT_TOUCH","TouchMouseInput","MouseInput","inputHandler","eventType","input","pointersLen","changedPointersLen","changedPointers","isFirst","INPUT_START","isFinal","INPUT_END","INPUT_CANCEL","session","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","now","deltaTime","getAngle","getDistance","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","getScale","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offsetDelta","prevDelta","velocity","velocityX","velocityY","last","lastInterval","COMPUTE_INTERVAL","round","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","p1","p2","PROPS_XY","start","end","PROPS_CLIENT_XY","evEl","MOUSE_ELEMENT_EVENTS","evWin","MOUSE_WINDOW_EVENTS","pressed","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","SingleTouchInput","evTarget","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","started","normalizeSingleTouches","all","changedTouches","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","INPUT_MOVE","identifier","targetTouches","changedTargetTouches","filter","touch","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","splice","DEDUP_TIMEOUT","isSyntheticEvent","t","DEDUP_DISTANCE","TouchAction","cleanTouchActions","actions","TOUCH_ACTION_NONE","hasPanX","TOUCH_ACTION_PAN_X","hasPanY","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_AUTO","getTouchActionProps","NATIVE_TOUCH_ACTION","touchMap","cssSupports","CSS","supports","Recognizer","defaults","STATE_POSSIBLE","simultaneous","requireFail","stateStr","STATE_CANCELLED","STATE_ENDED","STATE_CHANGED","STATE_BEGAN","directionStr","getRecognizerByNameIfManager","otherRecognizer","recognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","recognizers","preset","Manager","handlers","oldCssProps","touchAction","toggleCssProps","item","recognizeWith","requireFailure","style","cssProps","triggerDomEvent","data","gestureEvent","createEvent","initEvent","gesture","TEST_ELEMENT","createElement","Date","output","index","source","nextKey","extend","dest","merge","MOBILE_REGEX","test","navigator","userAgent","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","which","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","toLowerCase","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","TOUCH_INPUT_MAP","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_MAP","compute","getTouchAction","join","preventDefaults","prevented","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_RECOGNIZED","STATE_FAILED","dropRecognizeWith","dropRequireFailure","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","process","attrTest","optionPointers","isRecognized","isValid","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","stop","force","stopped","curRecognizer","existing","remove","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","_LatLon","_Point","R","MAX_LATITUDE","ECC","ECC2","multiplier","project","d","lat","lon","unproject","atan","exp","projected","pointToLatLon","_point","pointScale","accurate","k","rad","sinLat","sinLat2","cosLat","h","metresToProjected","projectedToMetres","projectedUnits","metresToWorld","projectedMetres","worldToMetres","worldUnits","realMetres","LN2","latlon1","latlon2","lat1","lat2","lon1","lon2","deltaLat","deltaLon","halfDeltaLat","halfDeltaLon","acos","bounds","alt","isNaN","lng","_add","_subtract","_lodashAssign","_lodashAssign2","_shortid","_shortid2","_engineScene","_vendorCSS3DRenderer","_vendorCSS2DRenderer","generate","outputToScene","_options","isOutput","_object3D","Object3D","_dom3D","_domObject3D","CSS3DObject","_dom2D","_domObject2D","CSS2DObject","addLayer","reject","_onAdd","then","_picking","getNextId","visible","_pickingMesh","children","geometry","material","map","removeDOM3D","removeDOM2D","func","thisArg","baseTimes","n","iteratee","result","overArg","transform","arrayLikeKeys","inherited","isArguments","String","skipIndexes","isIndex","assignValue","objValue","eq","baseKeys","isPrototype","nativeKeys","baseRest","nativeMax","array","otherArgs","copyObject","customizer","newValue","createAssigner","assigner","sources","guard","isIterateeCall","MAX_SAFE_INTEGER","reIsUint","isObject","isArrayLike","Ctor","proto","objectProto","other","isArrayLikeObject","propertyIsEnumerable","objectToString","argsTag","isLength","isFunction","isObjectLike","tag","funcTag","genTag","toString","nonEnumShadows","valueOf","scene","Scene","removeChild","CSS3DSprite","CSS3DRenderer","REVISION","_width","_height","_widthHalf","_heightHalf","Matrix4","cache","camera","objects","overflow","WebkitTransformStyle","MozTransformStyle","oTransformStyle","transformStyle","cameraElement","appendChild","setClearColor","getSize","width","height","setSize","epsilon","Number","EPSILON","getCameraCSSMatrix","getObjectCSSMatrix","renderObject","matrixWorldInverse","transpose","copyPosition","matrixWorld","cachedStyle","WebkitTransform","MozTransform","oTransform","render","degToRad","WebkitPerspective","MozPerspective","oPerspective","perspective","updateMatrixWorld","getInverse","CSS2DRenderer","vector","viewMatrix","viewProjectionMatrix","frustum","Frustum","setFromMatrixPosition","applyProjection","containsPoint","display","multiplyMatrices","projectionMatrix","setFromMatrix","_Layer2","_Layer3","LayerGroup","_Layer","_layers","layerIndex","removeLayer","layerGroup","_Skybox","_Skybox2","skybox","_initLights","_initSkybox","_skyboxLight","DirectionalLight","castShadow","shadow","near","far","mapSize","directionalLight","directionalLight2","directionalLight3","_skybox","_mesh","size","step","gridHelper","GridHelper","_Sky","_Sky2","_lodashThrottle","_lodashThrottle2","cubemap","vertexShader","fragmentShader","Skybox","light","_light","_settings","turbidity","reileigh","mieCoefficient","mieDirectionalG","luminance","inclination","azimuth","_updateUniforms","_throttledWorldUpdate","_update","_cubeCamera","CubeCamera","cubeTarget","renderTarget","_sky","_skyScene","mesh","_sunSphere","Mesh","SphereBufferGeometry","MeshBasicMaterial","color","skyboxUniforms","skyboxMat","ShaderMaterial","uniforms","side","BackSide","BoxGeometry","_updateSkybox","settings","sunPosition","intensity","updateCubeMap","_renderer","ShaderLib","Sky","skyShader","skyUniforms","UniformsUtils","skyMat","skyGeo","skyMesh","global","debounce","wait","invokeFunc","lastArgs","lastThis","lastInvokeTime","leadingEdge","timerId","timerExpired","leading","remainingWait","timeSinceLastCall","lastCallTime","timeSinceLastInvoke","maxing","nativeMin","maxWait","shouldInvoke","trailingEdge","trailing","cancel","flush","debounced","isInvoking","FUNC_ERROR_TEXT","toNumber","throttle","isSymbol","symbolTag","NAN","reTrim","isBinary","reIsBinary","reIsOctal","freeParseInt","reIsBadHex","parseInt","freeSelf","_TileLayer2","_TileLayer3","_ImageTile","_ImageTile2","_ImageTileLayerBaseMaterial","_TileLayer","path","_path","_calculateLOD","_onWorldUpdate","_outputTiles","_baseLayer","quadcode","_onWorldMove","_TileCache","_TileCache2","TileLayer","picking","maxCache","maxLOD","_destroy","_tileCache","tile","_destroyTile","_tileList","_minLOD","_maxLOD","_frustum","_tiles","_tilesPicking","addToPicking","getCamera","projScreenMatrix","getBounds","intersectsBox","Box3","_this2","_removeTiles","isReady","getMesh","getPickingMesh","_this3","_stop","_updateFrustum","checkList","_checklist","_requestTile","_divide","_quadcode","tileList","_tileInFrustum","dist","isAborted","requestTileAsync","missingTiles","_abortRequest","currentItem","getQuadcode","_screenSpaceError","minDepth","maxDepth","quality","error","getSide","getTile","_createTile","setTile","removeFromPicking","_lruCache","_lruCache2","TileCache","cacheLimit","onDestroyTile","_cache","tileCache","naiveLength","LRUCache","MAX","lc","LENGTH_CALCULATOR","ALLOW_STALE","stale","MAX_AGE","maxAge","DISPOSE","NO_DISPOSE_ON_SET","noDisposeOnSet","forEachStep","thisp","hit","isStale","del","doUse","CACHE","LRU_LIST","unshiftNode","LENGTH","walker","tail","removeNode","Entry","makeSymbol","Map","util","Yallist","hasSymbol","Symbol","env","_nodeLRUCacheForceNoSymbol","mL","allowStale","mA","lC","rforEach","head","next","dump","dumpLru","inspect","opts","extras","as","didFirst","unshift","peek","pop","load","arr","expiresAt","prune","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","run","Item","noop","nextTick","title","browser","argv","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","npm_package_name","npm_lifecycle_script","TEST_PSEUDOMAP","PseudoMap","clear","kv","same","_index","s","_data","res","entries","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","styles","arrayToHash","hash","idx","recurseTimes","ret","isString","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","RegExp","isDate","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","JSON","stringify","isNumber","isNull","match","line","substr","numLinesEst","reduce","cur","ar","isNullOrUndefined","re","isPrimitive","o","pad","timestamp","getHours","getMinutes","getSeconds","getDate","months","getMonth","callbackifyOnRejected","reason","cb","newReason","callbackify","original","callbackified","maybeCb","bind","rej","getOwnPropertyDescriptors","descriptors","formatRegExp","format","f","_","msg","deprecated","warned","throwDeprecation","traceDeprecation","trace","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","pid","bold","italic","underline","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","null","string","date","regexp","isNativeError","isBuffer","inherits","origin","kCustomPromisifiedSymbol","promisify","promiseResolve","promiseReject","promise","err","custom","uncurryThis","checkBoxedPrimitive","prototypeValueOf","isPromise","isArrayBufferView","ArrayBufferSupported","ArrayBuffer","isView","isTypedArray","isDataView","Uint8ArraySupported","SymbolToStringTagSupported","TypedArrayProto_toStringTag","isUint8Array","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isFloat32Array","isFloat64Array","isBigInt64Array","isBigUint64Array","ObjectToString","buffer","isMapToString","isMap","working","isSetToString","isSet","Set","isWeakMapToString","isWeakMap","WeakMap","isWeakSetToString","isWeakSet","isArrayBufferToString","isArrayBuffer","isDataViewToString","DataView","isSharedArrayBufferToString","isSharedArrayBuffer","SharedArrayBuffer","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","isNumberObject","numberValue","isStringObject","stringValue","isBooleanObject","booleanValue","isBigIntObject","BigIntSupported","bigIntValue","isSymbolObject","SymbolSupported","symbolValue","isBoxedPrimitive","isAnyArrayBuffer","isArgumentsObject","isGeneratorFunction","BigInt","toStringTag","Uint8Array","TypedArrayPrototype","Boolean","WeakSet","fill","readUInt8","hasToStringTag","toStr","isStandardArguments","isLegacyArguments","callee","supportsStandardArguments","fnToStr","isFnRegex","getProto","getGeneratorFunc","generatorFunc","GeneratorFunction","ctor","superCtor","super_","TempCtor","list","Node","pushNode","shift","forEachReverse","getReverse","mapReverse","initial","acc","reduceReverse","toArrayReverse","from","to","sliceReverse","reverse","_Tile2","_Tile3","_vendorBoxHelper","ImageTile","_Tile","_createMesh","_image","_center","geom","PlaneBufferGeometry","_side","_environment","MeshStandardMaterial","depthWrite","roughness","metalness","envMap","getRenderTarget","localMesh","receiveShadow","canvas","getContext","font","fillStyle","fillText","_tile","texture","Texture","magFilter","LinearFilter","minFilter","LinearMipMapLinearFilter","anisotropy","needsUpdate","transparent","urlParams","url","_getTileURL","image","_aborted","_texture","_ready","crossOrigin","imageTile","r2d","tileURLRegex","Tile","_layer","_quadcodeToTile","_boundsLatLon","_tileBoundsWGS84","_boundsWorld","_tileBoundsFromWGS84","_boundsToCenter","_centerLatlon","_getSide","_pointScale","destroyMesh","fromCharCode","floor","random","lastIndex","mask","q","boundsWGS84","sw","ne","_tile2lon","w","_tile2lat","BoxHelper","indices","Uint16Array","positions","Float32Array","BufferGeometry","setIndex","BufferAttribute","addAttribute","LineSegments","LineBasicMaterial","linewidth","box","setFromObject","isEmpty","attributes","computeBoundingSphere","colour","skyboxTarget","fillRect","_GeoJSONTile","_GeoJSONTile2","workers","_onControlsMove","_pauseOutput","_disableOutput","newOptions","attribution","_GeoJSONLayer","_GeoJSONWorkerLayer","_reqwest","_reqwest2","_utilGeoJSON","_utilGeoJSON2","_utilBuffer","_defaultStyle","defaultStyle","interactive","topojson","onEachFeature","polygonMaterial","onPolygonMesh","onPolygonBufferAttributes","polylineMaterial","onPolylineMesh","onPolylineBufferAttributes","pointGeometry","pointMaterial","onPointMesh","keepFeatures","_request","_geojsonLayer","_processTileData","headers","GeoJSONClass","addTo","_geojson","abort","_LayerGroup2","_LayerGroup3","_utilBuffer2","_geometryPolygonLayer","_geometryPolygonLayer2","_geometryPolylineLayer","_geometryPolylineLayer2","_geometryPointLayer","_geometryPointLayer2","_LayerGroup","geojson","THREE","_requestData","_processData","collectFeatures","features","layerPromises","feature","_featureToLayer","polygonAttributes","polygonOutlineAttributes","polygonAttributeLengths","normals","polygonFlat","polylineAttributes","polylineAttributeLengths","polylineFlat","pointAttributes","pointAttributeLengths","pointFlat","getBufferAttributes","outlineBufferAttributes","getOutlineBufferAttributes","isFlat","pickingIds","mergedPolygonOutlineAttributes","mergedPolygonAttributes","mergeAttributes","_setPolygonMesh","_polygonMesh","outlineRenderOrder","lineRenderOrder","renderOrder","outlineWidth","lineWidth","_setPolylineMesh","pickingMesh","mergedPolylineAttributes","_polylineMesh","mergedPointAttributes","_setPointMesh","_pointMesh","clearBufferAttributes","clearCoordinates","attributeLengths","flat","SetMesh","coordinates","onBufferAttributes","lineMaterial","__WEBPACK_AMD_DEFINE_FACTORY__","definition","succeed","r","protocol","protocolRe","exec","location","httpsRe","twoHundo","request","status","response","handleReadyState","success","_timedOut","readyState","onreadystatechange","setHeaders","http","defaultHeaders","isAFormData","FormData","requestedWith","contentType","setRequestHeader","setCredentials","withCredentials","generalCallback","lastValue","urlappend","handleJsonp","reqId","uniqid","cbkey","cbval","reqwest","getcallbackPrefix","cbreg","script","isIE10","async","htmlFor","onload","onclick","getRequest","toQueryString","sendWait","xhr","open","xDomainRequest","onerror","onprogress","send","Reqwest","setType","header","complete","resp","_completeHandlers","getResponseHeader","filteredResponse","globalSetupOptions","dataFilter","responseText","parse","eval","responseXML","parseError","errorCode","_responseArgs","_fulfilled","_successHandler","_fulfillmentHandlers","timedOut","_erred","_errorHandlers","normalize","serial","el","ch","ra","tagName","optCb","disabled","checked","selectedIndex","selected","eachFormElement","serializeSubtags","tags","fa","byTag","serializeQueryString","serializeArray","serializeHash","buildParams","traditional","rbracket","XHR2","ex","callbackPrefix","xmlHttpRequest","accept","*","xml","html","text","json","js","XMLHttpRequest","XDomainRequest","ActiveXObject","retry","fail","always","catch","serialize","opt","nodeType","trad","enc","encodeURIComponent","compat","ajaxSetup","_interopRequireWildcard","newObj","_topojson2","_geojsonMerge","_geojsonMerge2","_earcut","_earcut2","_extrudePolygon","_extrudePolygon2","Color","GeoJSON","outline","outlineColor","opacity","blending","NormalBlending","lineOpacity","lineTransparent","lineColor","lineBlending","_topojson","collections","tk","gk","lineStringAttributes","nextCoord","_coords","_colours","coordinate","g","vertices","colours","multiLineStringAttributes","coord","earcutData","_toEarcut","faces","_triangulate","holes","dimensions","groupedVertices","il","_colour","extruded","topColor","multiply","bottomColor","_vertices","_faces","face","fi","allFlat","sides","dim","holeIndex","contour","transformAbsolute","x0","y0","kx","ky","translate","transformRelative","x1","y1","bisect","lo","hi","mid","topology","geometries","feature$1","arc","points","arcs","absolute","ring","polygon","geometryType","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","stitchArcs","ends","p0","dp","fragmentByEnd","fragmentByStart","stitchedArcs","fragments","emptyIndex","fg","gf","meshArcs","geomsByArc","geoms","cartesianTriangleArea","triangle","area","mergeArcs","register","ring$$","polygonsByArc","polygons","components","component","neighbors","ki","indexesByArc","indexes","ij","ik","compareArea","minAreaHeap","down","heap","removed","presimplify","triangleArea","relative","triangles","maxArea","previous","inputs","memo","gj","GeometryCollection","Feature","FeatureCollection","earcut","holeIndices","hasHoles","outerLen","outerNode","linkedList","minX","minY","maxX","maxY","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","equals","filterPoints","again","steiner","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","zOrder","maxZ","prevZ","nextZ","intersects","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","qx","mx","my","tanMin","sortLinked","numMerges","pSize","qSize","inSize","leftmost","ax","ay","bx","by","cx","cy","px","py","intersectsPolygon","middleInside","q1","q2","inside","b2","an","bp","sum","deviation","polygonArea","trianglesArea","flatten","extrudePolygon","cells","topCells","full","sideCells","closed","bottomCells","_textEncoding","Buffer","mergeFloat32Arrays","arrays","Int32Array","_array","mergedArray","splitFloat32Array","subarray","mergeUint8Arrays","splitUint8Array","lengths","_attributes","mergedAttributes","lastLengths","createLineGeometry","lines","verticesCount","_pickingId","az","c1","computeBoundingBox","createGeometry","facesCount","pA","pB","pC","ab","bz","c2","cz","c3","cross","nx","ny","nz","textEncoder","TextEncoder","textDecoder","TextDecoder","stringToUint8Array","encode","uint8ArrayToString","decode","fillTypedArray","_PickingShader","_PickingShader2","linePadding","setPointSize","setPointScale","PickingShader","_geoGeo","_geoGeo2","_earcut3","_utilExtrudePolygon","_utilExtrudePolygon2","_coordinates","isSingle","_setCoordinates","_setPickingId","_addPickingEvents","SetBufferAttributes","_projectedCoordinates","_bufferAttributes","outlineAttributes","_outlineBufferAttributes","_flat","tops","pickingId","getPickingId","point2d","point3d","_bounds","_convertCoordinates","_projectedBounds","_projectCoordinates","_offset","ToEarcut","Triangulate","_tops","outlineColour","Set2DOutline","ToAttributes","_ring","verticeCount","first","Material","vertexColors","VertexColors","envMapIntensity","MeshPhongMaterial","ignoreDepth","t1","t2","t3","lineHeight","_PolygonLayer","pointColor","pointHeight","Geometry","geometryWidth","geometryHeight","_geometry","fromGeometry","_normals","normal","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","done","_utilWorker","_utilWorker2","_utilStringify","_utilStringify2","onEachFeatureWorker","onAddAttributes","onClick","_process","functionToString","transferrables","_execWorker","_originPoint","RequestGeoJSON","fc","originPoint","processPromises","_processPolygonResults","polylines","_processPolylineResults","_processPointResults","splitOutlinePositions","splitOutlineColors","splitPositions","splitNormals","splitColors","splitTops","splitProperties","flats","outlineObjects","polygonOutlineAttributeLengths","_addPicking","customAttribute","customAttributes","bufferAttributes","outputPromises","_results","polygonResult","outlineResult","_this4","_this5","_this6","_style","_properties","_pointGeometry","ProcessGeoJSON","stringToFunction","converted","polyline","polygonBufferPromises","polylineBufferPromises","pointBufferPromises","ProcessPolygons","ProcessPolylines","ProcessPoints","polygonPromises","outlinePositions","outlineColors","mergedOutlineAttributes","mergedProperties","polylinePromises","pointPromises","_WorkerPool","_WorkerPool2","Worker","pool","_maxWorkers","createWorkers","maxWorkers","workerScript","numThreads","_WorkerPoolWorker","_WorkerPoolWorker2","DEBUG","predicate","WorkerPool","tasks","workerPromises","createWorker","performance","worker","busy","deferred","task","processTasks","getFreeWorker","WorkerPoolWorker","ready","onStartup","onMessage","postMessage","payload","Stringify","_GeoJSONTileLayer2","_GeoJSONTileLayer3","_GeoJSONTileLayer","_GeoJSONLayer2","_GeoJSONLayer3","_GeoJSONWorkerLayer2","_GeoJSONWorkerLayer3","_wrapNum","_wrapNum2","_GeoJSON","_GeoJSON2","_Buffer","_Buffer2","_Worker","_Worker2","_Stringify","_Stringify2","wrapNum","range","includeMax"],"mappings":"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","file":"vizicities.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"THREE\"), require(\"TweenLite\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"THREE\", \"TweenLite\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VIZI\"] = factory(require(\"THREE\"), require(\"TweenLite\"));\n\telse\n\t\troot[\"VIZI\"] = factory(root[\"THREE\"], root[\"TweenLite\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"THREE\"), require(\"TweenLite\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"THREE\", \"TweenLite\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VIZI\"] = factory(require(\"THREE\"), require(\"TweenLite\"));\n\telse\n\t\troot[\"VIZI\"] = factory(root[\"THREE\"], root[\"TweenLite\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _World = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"./World\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tvar _controlsIndex = __webpack_require__(1);\n\t\n\tvar _controlsIndex2 = _interopRequireDefault(_controlsIndex);\n\t\n\tvar _geoGeoJs = __webpack_require__(8);\n\t\n\tvar _geoGeoJs2 = _interopRequireDefault(_geoGeoJs);\n\t\n\tvar _layerLayer = __webpack_require__(11);\n\t\n\tvar _layerLayer2 = _interopRequireDefault(_layerLayer);\n\t\n\tvar _layerLayerGroup = __webpack_require__(16);\n\t\n\tvar _layerLayerGroup2 = _interopRequireDefault(_layerLayerGroup);\n\t\n\tvar _layerEnvironmentEnvironmentLayer = __webpack_require__(17);\n\t\n\tvar _layerEnvironmentEnvironmentLayer2 = _interopRequireDefault(_layerEnvironmentEnvironmentLayer);\n\t\n\tvar _layerTileImageTileLayer = __webpack_require__(21);\n\t\n\tvar _layerTileImageTileLayer2 = _interopRequireDefault(_layerTileImageTileLayer);\n\t\n\tvar _layerTileGeoJSONTileLayer = __webpack_require__(39);\n\t\n\tvar _layerTileGeoJSONTileLayer2 = _interopRequireDefault(_layerTileGeoJSONTileLayer);\n\t\n\tvar _layerTileTopoJSONTileLayer = __webpack_require__(61);\n\t\n\tvar _layerTileTopoJSONTileLayer2 = _interopRequireDefault(_layerTileTopoJSONTileLayer);\n\t\n\tvar _layerTileGeoJSONTile = __webpack_require__(40);\n\t\n\tvar _layerTileGeoJSONTile2 = _interopRequireDefault(_layerTileGeoJSONTile);\n\t\n\tvar _layerGeoJSONLayer = __webpack_require__(41);\n\t\n\tvar _layerGeoJSONLayer2 = _interopRequireDefault(_layerGeoJSONLayer);\n\t\n\tvar _layerTopoJSONLayer = __webpack_require__(62);\n\t\n\tvar _layerTopoJSONLayer2 = _interopRequireDefault(_layerTopoJSONLayer);\n\t\n\tvar _layerGeoJSONWorkerLayer = __webpack_require__(56);\n\t\n\tvar _layerGeoJSONWorkerLayer2 = _interopRequireDefault(_layerGeoJSONWorkerLayer);\n\t\n\tvar _layerTopoJSONWorkerLayer = __webpack_require__(63);\n\t\n\tvar _layerTopoJSONWorkerLayer2 = _interopRequireDefault(_layerTopoJSONWorkerLayer);\n\t\n\tvar _layerGeometryPolygonLayer = __webpack_require__(53);\n\t\n\tvar _layerGeometryPolygonLayer2 = _interopRequireDefault(_layerGeometryPolygonLayer);\n\t\n\tvar _layerGeometryPolylineLayer = __webpack_require__(54);\n\t\n\tvar _layerGeometryPolylineLayer2 = _interopRequireDefault(_layerGeometryPolylineLayer);\n\t\n\tvar _layerGeometryPointLayer = __webpack_require__(55);\n\t\n\tvar _layerGeometryPointLayer2 = _interopRequireDefault(_layerGeometryPointLayer);\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _geoPoint2 = _interopRequireDefault(_geoPoint);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _geoLatLon2 = _interopRequireDefault(_geoLatLon);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\tvar _utilIndex = __webpack_require__(64);\n\t\n\tvar _utilIndex2 = _interopRequireDefault(_utilIndex);\n\t\n\tvar VIZI = {\n\t  version: '0.3',\n\t\n\t  // Public API\n\t  World: _World2['default'],\n\t  world: _World.world,\n\t  Controls: _controlsIndex2['default'],\n\t  Geo: _geoGeoJs2['default'],\n\t  Layer: _layerLayer2['default'],\n\t  layer: _layerLayer.layer,\n\t  EnvironmentLayer: _layerEnvironmentEnvironmentLayer2['default'],\n\t  environmentLayer: _layerEnvironmentEnvironmentLayer.environmentLayer,\n\t  ImageTileLayer: _layerTileImageTileLayer2['default'],\n\t  imageTileLayer: _layerTileImageTileLayer.imageTileLayer,\n\t  GeoJSONTileLayer: _layerTileGeoJSONTileLayer2['default'],\n\t  geoJSONTileLayer: _layerTileGeoJSONTileLayer.geoJSONTileLayer,\n\t  GeoJSONTile: _layerTileGeoJSONTile2['default'],\n\t  geoJSONTile: _layerTileGeoJSONTile.geoJSONTile,\n\t  TopoJSONTileLayer: _layerTileTopoJSONTileLayer2['default'],\n\t  topoJSONTileLayer: _layerTileTopoJSONTileLayer.topoJSONTileLayer,\n\t  GeoJSONLayer: _layerGeoJSONLayer2['default'],\n\t  geoJSONLayer: _layerGeoJSONLayer.geoJSONLayer,\n\t  TopoJSONLayer: _layerTopoJSONLayer2['default'],\n\t  topoJSONLayer: _layerTopoJSONLayer.topoJSONLayer,\n\t  GeoJSONWorkerLayer: _layerGeoJSONWorkerLayer2['default'],\n\t  geoJSONWorkerLayer: _layerGeoJSONWorkerLayer.geoJSONWorkerLayer,\n\t  TopoJSONWorkerLayer: _layerTopoJSONWorkerLayer2['default'],\n\t  topoJSONWorkerLayer: _layerTopoJSONWorkerLayer.topoJSONWorkerLayer,\n\t  PolygonLayer: _layerGeometryPolygonLayer2['default'],\n\t  polygonLayer: _layerGeometryPolygonLayer.polygonLayer,\n\t  PolylineLayer: _layerGeometryPolylineLayer2['default'],\n\t  polylineLayer: _layerGeometryPolylineLayer.polylineLayer,\n\t  PointLayer: _layerGeometryPointLayer2['default'],\n\t  pointLayer: _layerGeometryPointLayer.pointLayer,\n\t  Point: _geoPoint2['default'],\n\t  point: _geoPoint.point,\n\t  LatLon: _geoLatLon2['default'],\n\t  latLon: _geoLatLon.latLon,\n\t  PickingMaterial: _enginePickingMaterial2['default'],\n\t  Util: _utilIndex2['default']\n\t};\n\t\n\texports['default'] = VIZI;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _ControlsOrbit = __webpack_require__(2);\n\t\n\tvar _ControlsOrbit2 = _interopRequireDefault(_ControlsOrbit);\n\t\n\tvar Controls = {\n\t  Orbit: _ControlsOrbit2['default'],\n\t  orbit: _ControlsOrbit.orbit, orbit: _ControlsOrbit.orbit\n\t};\n\t\n\texports['default'] = Controls;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter3 = __webpack_require__(3);\n\t\n\tvar _eventemitter32 = _interopRequireDefault(_eventemitter3);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _vendorOrbitControls = __webpack_require__(5);\n\t\n\tvar _vendorOrbitControls2 = _interopRequireDefault(_vendorOrbitControls);\n\t\n\tvar _TweenLite = __webpack_require__(7);\n\t\n\tvar _TweenLite2 = _interopRequireDefault(_TweenLite);\n\t\n\tvar Orbit = (function (_EventEmitter) {\n\t  _inherits(Orbit, _EventEmitter);\n\t\n\t  function Orbit() {\n\t    _classCallCheck(this, Orbit);\n\t\n\t    _get(Object.getPrototypeOf(Orbit.prototype), 'constructor', this).call(this);\n\t\n\t    // Prevent animation from pausing when tab is inactive\n\t    _TweenLite2['default'].lagSmoothing(0);\n\t  }\n\t\n\t  // Proxy control events\n\t  //\n\t  // There's currently no distinction between pan, orbit and zoom events\n\t\n\t  _createClass(Orbit, [{\n\t    key: '_initEvents',\n\t    value: function _initEvents() {\n\t      var _this = this;\n\t\n\t      this._controls.addEventListener('start', function (event) {\n\t        _this.startPosition = _this._controls.target.clone();\n\t        _this.startPolar = _this._controls.getPolarAngle();\n\t        _this.startAzimuth = _this._controls.getAzimuthalAngle();\n\t\n\t        _this._world.emit('controlsMoveStart', event.target.target);\n\t      });\n\t\n\t      this._controls.addEventListener('change', function (event) {\n\t        _this._world.emit('controlsMove', event.target.target);\n\t      });\n\t\n\t      this._controls.addEventListener('end', function (event) {\n\t        var endPosition = _this._controls.target.clone();\n\t        var endPolar = _this._controls.getPolarAngle();\n\t        var endAzimuth = _this._controls.getAzimuthalAngle();\n\t\n\t        // Did controls change?\n\t        var changed = false;\n\t\n\t        // Panned\n\t        if (Math.abs(endPosition.distanceTo(_this.startPosition)) > 0) {\n\t          changed = true;\n\t        }\n\t\n\t        // Tilted\n\t        if (Math.abs(endPolar - _this.startPolar) > 0) {\n\t          changed = true;\n\t        }\n\t\n\t        // Obited\n\t        if (Math.abs(endAzimuth - _this.startAzimuth) > 0) {\n\t          changed = true;\n\t        }\n\t\n\t        _this._world.emit('controlsMoveEnd', event.target.target, changed);\n\t      });\n\t    }\n\t\n\t    // Moving the camera along the [x,y] axis based on a target position\n\t    // Positive x and y goes up and right\n\t  }, {\n\t    key: 'panTo',\n\t    value: function panTo(point, animate) {\n\t      var controls = this._controls;\n\t      var target = controls.target;\n\t\n\t      var deltaX = point.x - target.x;\n\t      var deltaY = point.y - target.z;\n\t\n\t      controls.panLeft(-deltaX, controls.object.matrix);\n\t      controls.panUp(-deltaY, controls.object.matrix);\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t  }, {\n\t    key: 'panBy',\n\t    value: function panBy(pointDelta, animate) {\n\t      this._controls.pan(-pointDelta.x, pointDelta.y);\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t\n\t    // Zooming the camera in and out\n\t  }, {\n\t    key: 'zoomTo',\n\t    value: function zoomTo(metres, animate) {}\n\t  }, {\n\t    key: 'zoomBy',\n\t    value: function zoomBy(metresDelta, animate) {\n\t      var controls = this._controls;\n\t\n\t      if (metresDelta < 0) {\n\t        controls.dollyIn(Math.abs(metresDelta));\n\t      } else {\n\t        controls.dollyOut(metresDelta);\n\t      }\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t\n\t    // Force camera to look at something other than the target\n\t  }, {\n\t    key: 'lookAt',\n\t    value: function lookAt(point, animate) {}\n\t\n\t    // Make camera look at the target\n\t  }, {\n\t    key: 'lookAtTarget',\n\t    value: function lookAtTarget() {}\n\t\n\t    // Tilt (up and down)\n\t    // 0 is straight down\n\t    // Math.PI / 180 * 90 is flat on the ground\n\t  }, {\n\t    key: 'tiltTo',\n\t    value: function tiltTo(angle, animate) {\n\t      var controls = this._controls;\n\t      var theta = controls.getPolarAngle();\n\t      var delta = angle - theta;\n\t      controls.rotateUp(-delta);\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t  }, {\n\t    key: 'tiltBy',\n\t    value: function tiltBy(angleDelta, animate) {\n\t      var controls = this._controls;\n\t      controls.rotateUp(-angleDelta);\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t\n\t    // Rotate (left and right)\n\t    // Right is positive, left negative\n\t  }, {\n\t    key: 'rotateTo',\n\t    value: function rotateTo(angle, animate) {\n\t      var controls = this._controls;\n\t      var theta = controls.getAzimuthalAngle();\n\t      var delta = angle - theta;\n\t      controls.rotateLeft(-delta);\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t\n\t    // Right is positive, left negative\n\t  }, {\n\t    key: 'rotateBy',\n\t    value: function rotateBy(angleDelta, animate) {\n\t      var controls = this._controls;\n\t      controls.rotateLeft(-angleDelta);\n\t\n\t      this.update();\n\t      this._world.emit('controlsMoveEnd', this._controls.target);\n\t    }\n\t\n\t    // Fly to the given point, animating pan and tilt/rotation to final position\n\t    // with nice zoom out and in\n\t    //\n\t    // TODO: Calling flyTo a second time before the previous animation has\n\t    // completed should immediately start the new animation from wherever the\n\t    // previous one has got to\n\t    //\n\t    // TODO: Long-distance pans should prevent the quadtree grid from trying to\n\t    // update by not firing the control update events every frame until the\n\t    // pan velocity calms down a bit\n\t    //\n\t    // TODO: Long-distance plans should zoom out further\n\t    //\n\t    // TODO: Return a promise?\n\t  }, {\n\t    key: 'flyToPoint',\n\t    value: function flyToPoint(point, duration, zoom) {\n\t      // Animation time in seconds\n\t      var animationTime = duration || 2;\n\t\n\t      this._flyTarget = new _three2['default'].Vector3(point.x, 0, point.y);\n\t\n\t      // Calculate delta from current position to fly target\n\t      var diff = new _three2['default'].Vector3().subVectors(this._controls.target, this._flyTarget);\n\t\n\t      this._flyTween = new _TweenLite2['default']({\n\t        x: 0,\n\t        z: 0,\n\t        // zoom: 0,\n\t        prev: {\n\t          x: 0,\n\t          z: 0\n\t        }\n\t      }, animationTime, {\n\t        x: diff.x,\n\t        z: diff.z,\n\t        // zoom: 1,\n\t        onUpdate: function onUpdate(tween) {\n\t          var controls = this._controls;\n\t\n\t          // Work out difference since last frame\n\t          var deltaX = tween.target.x - tween.target.prev.x;\n\t          var deltaZ = tween.target.z - tween.target.prev.z;\n\t\n\t          // Move some fraction toward the target point\n\t          controls.panLeft(deltaX, controls.object.matrix);\n\t          controls.panUp(deltaZ, controls.object.matrix);\n\t\n\t          tween.target.prev.x = tween.target.x;\n\t          tween.target.prev.z = tween.target.z;\n\t\n\t          // console.log(Math.sin((tween.target.zoom - 0.5) * Math.PI));\n\t\n\t          // TODO: Get zoom to dolly in and out on pan\n\t          // controls.object.zoom -= Math.sin((tween.target.zoom - 0.5) * Math.PI);\n\t          // controls.object.updateProjectionMatrix();\n\t        },\n\t        onComplete: function onComplete(tween) {\n\t          // console.log(`Arrived at flyTarget`);\n\t          this._flyTarget = null;\n\t        },\n\t        onUpdateParams: ['{self}'],\n\t        onCompleteParams: ['{self}'],\n\t        callbackScope: this,\n\t        ease: Power1.easeInOut\n\t      });\n\t\n\t      if (!zoom) {\n\t        return;\n\t      }\n\t\n\t      var zoomTime = animationTime / 2;\n\t\n\t      this._zoomTweenIn = new _TweenLite2['default']({\n\t        zoom: 0\n\t      }, zoomTime, {\n\t        zoom: 1,\n\t        onUpdate: function onUpdate(tween) {\n\t          var controls = this._controls;\n\t          controls.dollyIn(1 - 0.01 * tween.target.zoom);\n\t        },\n\t        onComplete: function onComplete(tween) {},\n\t        onUpdateParams: ['{self}'],\n\t        onCompleteParams: ['{self}'],\n\t        callbackScope: this,\n\t        ease: Power1.easeInOut\n\t      });\n\t\n\t      this._zoomTweenOut = new _TweenLite2['default']({\n\t        zoom: 0\n\t      }, zoomTime, {\n\t        zoom: 1,\n\t        delay: zoomTime,\n\t        onUpdate: function onUpdate(tween) {\n\t          var controls = this._controls;\n\t          controls.dollyOut(0.99 + 0.01 * tween.target.zoom);\n\t        },\n\t        onComplete: function onComplete(tween) {},\n\t        onUpdateParams: ['{self}'],\n\t        onCompleteParams: ['{self}'],\n\t        callbackScope: this,\n\t        ease: Power1.easeInOut\n\t      });\n\t    }\n\t\n\t    // TODO: Return a promise?\n\t  }, {\n\t    key: 'flyToLatLon',\n\t    value: function flyToLatLon(latlon, duration, noZoom) {\n\t      var point = this._world.latLonToPoint(latlon);\n\t      this.flyToPoint(point, duration, noZoom);\n\t    }\n\t\n\t    // TODO: Make this animate over a user-defined period of time\n\t    //\n\t    // Perhaps use TweenMax for now and implement as a more lightweight solution\n\t    // later on once it all works\n\t    // _animateFlyTo(delta) {\n\t    //   var controls = this._controls;\n\t    //\n\t    //   // this._controls.panLeft(50, controls._controls.object.matrix);\n\t    //   // this._controls.panUp(50, controls._controls.object.matrix);\n\t    //   // this._controls.dollyIn(this._controls.getZoomScale());\n\t    //   // this._controls.dollyOut(this._controls.getZoomScale());\n\t    //\n\t    //   // Calculate delta from current position to fly target\n\t    //   var diff = new THREE.Vector3().subVectors(this._controls.target, this._flyTarget);\n\t    //\n\t    //   // 1000 units per second\n\t    //   var speed = 1000 * (delta / 1000);\n\t    //\n\t    //   // Remove fly target after arrival and snap to target\n\t    //   if (diff.length() < 0.01) {\n\t    //     console.log(`Arrived at flyTarget`);\n\t    //     this._flyTarget = null;\n\t    //     speed = 1;\n\t    //   }\n\t    //\n\t    //   // Move some fraction toward the target point\n\t    //   controls.panLeft(diff.x * speed, controls.object.matrix);\n\t    //   controls.panUp(diff.z * speed, controls.object.matrix);\n\t    // }\n\t\n\t    // Proxy to OrbitControls.update()\n\t  }, {\n\t    key: 'update',\n\t    value: function update(delta) {\n\t      this._controls.update(delta);\n\t    }\n\t\n\t    // Add controls to world instance and store world reference\n\t  }, {\n\t    key: 'addTo',\n\t    value: function addTo(world) {\n\t      return world.addControls(this);\n\t    }\n\t\n\t    // Internal method called by World.addControls to actually add the controls\n\t  }, {\n\t    key: '_addToWorld',\n\t    value: function _addToWorld(world) {\n\t      this._world = world;\n\t\n\t      // TODO: Override panLeft and panUp methods to prevent panning on Y axis\n\t      // See: http://stackoverflow.com/a/26188674/997339\n\t      this._controls = new _vendorOrbitControls2['default'](world._engine._camera, world._container);\n\t\n\t      // 89 degrees\n\t      this._controls.maxPolarAngle = 1.5533;\n\t\n\t      // this._controls.enableDamping = true;\n\t      // this._controls.dampingFactor = 0.25;\n\t\n\t      this._initEvents();\n\t\n\t      // TODO: Remove now that this is a promise?\n\t      this.emit('added');\n\t\n\t      return Promise.resolve(this);\n\t    }\n\t\n\t    // Destroys the controls and removes them from memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      // TODO: Remove event listeners\n\t\n\t      this._controls.dispose();\n\t\n\t      this._world = null;\n\t      this._controls = null;\n\t    }\n\t  }]);\n\t\n\t  return Orbit;\n\t})(_eventemitter32['default']);\n\t\n\texports['default'] = Orbit;\n\t\n\tvar noNew = function noNew() {\n\t  return new Orbit();\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.orbit = noNew;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar has = Object.prototype.hasOwnProperty;\n\t\n\t//\n\t// We store our EE objects in a plain object whose properties are event names.\n\t// If `Object.create(null)` is not supported we prefix the event names with a\n\t// `~` to make sure that the built-in object properties are not overridden or\n\t// used as an attack vector.\n\t// We also assume that `Object.create(null)` is available when the event name\n\t// is an ES6 Symbol.\n\t//\n\tvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\t\n\t/**\n\t * Representation of a single EventEmitter function.\n\t *\n\t * @param {Function} fn Event handler to be called.\n\t * @param {Mixed} context Context for function execution.\n\t * @param {Boolean} [once=false] Only emit once\n\t * @api private\n\t */\n\tfunction EE(fn, context, once) {\n\t  this.fn = fn;\n\t  this.context = context;\n\t  this.once = once || false;\n\t}\n\t\n\t/**\n\t * Minimal EventEmitter interface that is molded against the Node.js\n\t * EventEmitter interface.\n\t *\n\t * @constructor\n\t * @api public\n\t */\n\tfunction EventEmitter() { /* Nothing to set */ }\n\t\n\t/**\n\t * Hold the assigned EventEmitters by name.\n\t *\n\t * @type {Object}\n\t * @private\n\t */\n\tEventEmitter.prototype._events = undefined;\n\t\n\t/**\n\t * Return an array listing the events for which the emitter has registered\n\t * listeners.\n\t *\n\t * @returns {Array}\n\t * @api public\n\t */\n\tEventEmitter.prototype.eventNames = function eventNames() {\n\t  var events = this._events\n\t    , names = []\n\t    , name;\n\t\n\t  if (!events) return names;\n\t\n\t  for (name in events) {\n\t    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n\t  }\n\t\n\t  if (Object.getOwnPropertySymbols) {\n\t    return names.concat(Object.getOwnPropertySymbols(events));\n\t  }\n\t\n\t  return names;\n\t};\n\t\n\t/**\n\t * Return a list of assigned event listeners.\n\t *\n\t * @param {String} event The events that should be listed.\n\t * @param {Boolean} exists We only need to know if there are listeners.\n\t * @returns {Array|Boolean}\n\t * @api public\n\t */\n\tEventEmitter.prototype.listeners = function listeners(event, exists) {\n\t  var evt = prefix ? prefix + event : event\n\t    , available = this._events && this._events[evt];\n\t\n\t  if (exists) return !!available;\n\t  if (!available) return [];\n\t  if (available.fn) return [available.fn];\n\t\n\t  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n\t    ee[i] = available[i].fn;\n\t  }\n\t\n\t  return ee;\n\t};\n\t\n\t/**\n\t * Emit an event to all registered event listeners.\n\t *\n\t * @param {String} event The name of the event.\n\t * @returns {Boolean} Indication if we've emitted an event.\n\t * @api public\n\t */\n\tEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n\t  var evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events || !this._events[evt]) return false;\n\t\n\t  var listeners = this._events[evt]\n\t    , len = arguments.length\n\t    , args\n\t    , i;\n\t\n\t  if ('function' === typeof listeners.fn) {\n\t    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\t\n\t    switch (len) {\n\t      case 1: return listeners.fn.call(listeners.context), true;\n\t      case 2: return listeners.fn.call(listeners.context, a1), true;\n\t      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n\t      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n\t      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n\t      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n\t    }\n\t\n\t    for (i = 1, args = new Array(len -1); i < len; i++) {\n\t      args[i - 1] = arguments[i];\n\t    }\n\t\n\t    listeners.fn.apply(listeners.context, args);\n\t  } else {\n\t    var length = listeners.length\n\t      , j;\n\t\n\t    for (i = 0; i < length; i++) {\n\t      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\t\n\t      switch (len) {\n\t        case 1: listeners[i].fn.call(listeners[i].context); break;\n\t        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n\t        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n\t        default:\n\t          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n\t            args[j - 1] = arguments[j];\n\t          }\n\t\n\t          listeners[i].fn.apply(listeners[i].context, args);\n\t      }\n\t    }\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\t/**\n\t * Register a new EventListener for the given event.\n\t *\n\t * @param {String} event Name of the event.\n\t * @param {Function} fn Callback function.\n\t * @param {Mixed} [context=this] The context of the function.\n\t * @api public\n\t */\n\tEventEmitter.prototype.on = function on(event, fn, context) {\n\t  var listener = new EE(fn, context || this)\n\t    , evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events) this._events = prefix ? {} : Object.create(null);\n\t  if (!this._events[evt]) this._events[evt] = listener;\n\t  else {\n\t    if (!this._events[evt].fn) this._events[evt].push(listener);\n\t    else this._events[evt] = [\n\t      this._events[evt], listener\n\t    ];\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Add an EventListener that's only called once.\n\t *\n\t * @param {String} event Name of the event.\n\t * @param {Function} fn Callback function.\n\t * @param {Mixed} [context=this] The context of the function.\n\t * @api public\n\t */\n\tEventEmitter.prototype.once = function once(event, fn, context) {\n\t  var listener = new EE(fn, context || this, true)\n\t    , evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events) this._events = prefix ? {} : Object.create(null);\n\t  if (!this._events[evt]) this._events[evt] = listener;\n\t  else {\n\t    if (!this._events[evt].fn) this._events[evt].push(listener);\n\t    else this._events[evt] = [\n\t      this._events[evt], listener\n\t    ];\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove event listeners.\n\t *\n\t * @param {String} event The event we want to remove.\n\t * @param {Function} fn The listener that we need to find.\n\t * @param {Mixed} context Only remove listeners matching this context.\n\t * @param {Boolean} once Only remove once listeners.\n\t * @api public\n\t */\n\tEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n\t  var evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events || !this._events[evt]) return this;\n\t\n\t  var listeners = this._events[evt]\n\t    , events = [];\n\t\n\t  if (fn) {\n\t    if (listeners.fn) {\n\t      if (\n\t           listeners.fn !== fn\n\t        || (once && !listeners.once)\n\t        || (context && listeners.context !== context)\n\t      ) {\n\t        events.push(listeners);\n\t      }\n\t    } else {\n\t      for (var i = 0, length = listeners.length; i < length; i++) {\n\t        if (\n\t             listeners[i].fn !== fn\n\t          || (once && !listeners[i].once)\n\t          || (context && listeners[i].context !== context)\n\t        ) {\n\t          events.push(listeners[i]);\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  //\n\t  // Reset the array, or remove it completely if we have no more listeners.\n\t  //\n\t  if (events.length) {\n\t    this._events[evt] = events.length === 1 ? events[0] : events;\n\t  } else {\n\t    delete this._events[evt];\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove all listeners or only the listeners for the specified event.\n\t *\n\t * @param {String} event The event want to remove all listeners for.\n\t * @api public\n\t */\n\tEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n\t  if (!this._events) return this;\n\t\n\t  if (event) delete this._events[prefix ? prefix + event : event];\n\t  else this._events = prefix ? {} : Object.create(null);\n\t\n\t  return this;\n\t};\n\t\n\t//\n\t// Alias methods names because people roll like that.\n\t//\n\tEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\tEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\t\n\t//\n\t// This function doesn't apply anymore.\n\t//\n\tEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n\t  return this;\n\t};\n\t\n\t//\n\t// Expose the prefix.\n\t//\n\tEventEmitter.prefixed = prefix;\n\t\n\t//\n\t// Expose the module.\n\t//\n\tif (true) {\n\t  module.exports = EventEmitter;\n\t}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\t\tvalue: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// jscs:disable\n\t/* eslint-disable */\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _hammerjs = __webpack_require__(6);\n\t\n\tvar _hammerjs2 = _interopRequireDefault(_hammerjs);\n\t\n\t/**\r\n\t * @author qiao / https://github.com/qiao\r\n\t * @author mrdoob / http://mrdoob.com\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author erich666 / http://erichaines.com\r\n\t */\n\t\n\t// This set of controls performs orbiting, dollying (zooming), and panning.\n\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n\t//\n\t//    Orbit - left mouse / touch: one finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\t\n\tvar OrbitControls = function OrbitControls(object, domElement) {\n\t\n\t\t\tthis.object = object;\n\t\n\t\t\tthis.domElement = domElement !== undefined ? domElement : document;\n\t\n\t\t\t// Set to false to disable this control\n\t\t\tthis.enabled = true;\n\t\n\t\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t\tthis.target = new _three2['default'].Vector3();\n\t\n\t\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\t\tthis.minDistance = 0;\n\t\t\tthis.maxDistance = Infinity;\n\t\n\t\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\t\tthis.minZoom = 0;\n\t\t\tthis.maxZoom = Infinity;\n\t\n\t\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t\t// Range is 0 to Math.PI radians.\n\t\t\tthis.minPolarAngle = 0; // radians\n\t\t\tthis.maxPolarAngle = Math.PI; // radians\n\t\n\t\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\t\tthis.minAzimuthAngle = -Infinity; // radians\n\t\t\tthis.maxAzimuthAngle = Infinity; // radians\n\t\n\t\t\t// Set to true to enable damping (inertia)\n\t\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.enableDamping = false;\n\t\t\tthis.dampingFactor = 0.25;\n\t\n\t\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t\t// Set to false to disable zooming\n\t\t\tthis.enableZoom = true;\n\t\t\tthis.zoomSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable rotating\n\t\t\tthis.enableRotate = true;\n\t\t\tthis.rotateSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable panning\n\t\t\tthis.enablePan = true;\n\t\t\tthis.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\t\n\t\t\t// Set to true to automatically rotate around the target\n\t\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.autoRotate = false;\n\t\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\t\n\t\t\t// Set to false to disable use of the keys\n\t\t\tthis.enableKeys = true;\n\t\n\t\t\t// The four arrow keys\n\t\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40, CTRL: 17 };\n\t\n\t\t\t// Mouse buttons\n\t\t\tthis.mouseButtons = { ORBIT: _three2['default'].MOUSE.LEFT, ZOOM: _three2['default'].MOUSE.MIDDLE, PAN: _three2['default'].MOUSE.RIGHT };\n\t\n\t\t\t// for reset\n\t\t\tthis.target0 = this.target.clone();\n\t\t\tthis.position0 = this.object.position.clone();\n\t\t\tthis.zoom0 = this.object.zoom;\n\t\n\t\t\t//\n\t\t\t// public methods\n\t\t\t//\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\t\treturn phi;\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\t\treturn theta;\n\t\t\t};\n\t\n\t\t\tthis.reset = function () {\n\t\n\t\t\t\t\tscope.target.copy(scope.target0);\n\t\t\t\t\tscope.object.position.copy(scope.position0);\n\t\t\t\t\tscope.object.zoom = scope.zoom0;\n\t\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\t\n\t\t\t\t\tscope.update();\n\t\n\t\t\t\t\tstate = STATE.NONE;\n\t\t\t};\n\t\n\t\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\t\tthis.update = (function () {\n\t\n\t\t\t\t\tvar offset = new _three2['default'].Vector3();\n\t\n\t\t\t\t\t// so camera.up is the orbit axis\n\t\t\t\t\tvar quat = new _three2['default'].Quaternion().setFromUnitVectors(object.up, new _three2['default'].Vector3(0, 1, 0));\n\t\t\t\t\tvar quatInverse = quat.clone().inverse();\n\t\n\t\t\t\t\tvar lastPosition = new _three2['default'].Vector3();\n\t\t\t\t\tvar lastQuaternion = new _three2['default'].Quaternion();\n\t\n\t\t\t\t\treturn function () {\n\t\n\t\t\t\t\t\t\tvar position = scope.object.position;\n\t\n\t\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\n\t\t\t\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\t\t\t\toffset.applyQuaternion(quat);\n\t\n\t\t\t\t\t\t\t// angle from z-axis around y-axis\n\t\n\t\t\t\t\t\t\ttheta = Math.atan2(offset.x, offset.z);\n\t\n\t\t\t\t\t\t\t// angle from y-axis\n\t\n\t\t\t\t\t\t\tphi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\t\n\t\t\t\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\t\n\t\t\t\t\t\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\ttheta += thetaDelta;\n\t\t\t\t\t\t\tphi += phiDelta;\n\t\n\t\t\t\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\t\t\t\ttheta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, theta));\n\t\n\t\t\t\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\t\t\t\tphi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, phi));\n\t\n\t\t\t\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\t\t\t\tphi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\t\n\t\t\t\t\t\t\tvar radius = offset.length() * scale;\n\t\n\t\t\t\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\t\t\t\tradius = Math.max(scope.minDistance, Math.min(scope.maxDistance, radius));\n\t\n\t\t\t\t\t\t\t// move target to panned location\n\t\t\t\t\t\t\tscope.target.add(panOffset);\n\t\n\t\t\t\t\t\t\toffset.x = radius * Math.sin(phi) * Math.sin(theta);\n\t\t\t\t\t\t\toffset.y = radius * Math.cos(phi);\n\t\t\t\t\t\t\toffset.z = radius * Math.sin(phi) * Math.cos(theta);\n\t\n\t\t\t\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\t\t\t\toffset.applyQuaternion(quatInverse);\n\t\n\t\t\t\t\t\t\tposition.copy(scope.target).add(offset);\n\t\n\t\t\t\t\t\t\tscope.object.lookAt(scope.target);\n\t\n\t\t\t\t\t\t\tif (scope.enableDamping === true) {\n\t\n\t\t\t\t\t\t\t\t\tthetaDelta *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t\t\t\tphiDelta *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\t\t\t\t\tphiDelta = 0;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tscale = 1;\n\t\t\t\t\t\t\tpanOffset.set(0, 0, 0);\n\t\n\t\t\t\t\t\t\t// update condition is:\n\t\t\t\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\n\t\t\t\t\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\t\n\t\t\t\t\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\t\n\t\t\t\t\t\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\t\t\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\t\t\t\t\t\tzoomChanged = false;\n\t\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t})();\n\t\n\t\t\tthis.dispose = function () {\n\t\n\t\t\t\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\t\t\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\t\t\t\tscope.domElement.removeEventListener('mousewheel', onMouseWheel, false);\n\t\t\t\t\tscope.domElement.removeEventListener('MozMousePixelScroll', onMouseWheel, false); // firefox\n\t\n\t\t\t\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\t\t\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\t\t\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\t\n\t\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\t\t\t\t\tdocument.removeEventListener('mouseout', onMouseUp, false);\n\t\n\t\t\t\t\twindow.removeEventListener('keydown', onKeyDown, false);\n\t\t\t\t\twindow.removeEventListener('keyup', onKeyUp, false);\n\t\n\t\t\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\t\t\t};\n\t\n\t\t\t//\n\t\t\t// internals\n\t\t\t//\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar changeEvent = { type: 'change' };\n\t\t\tvar startEvent = { type: 'start' };\n\t\t\tvar endEvent = { type: 'end' };\n\t\n\t\t\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\t\n\t\t\tvar KEY_STATE = { CTRL: false };\n\t\n\t\t\tvar state = STATE.NONE;\n\t\n\t\t\tvar EPS = 0.000001;\n\t\n\t\t\t// current position in spherical coordinates\n\t\t\tvar theta;\n\t\t\tvar phi;\n\t\n\t\t\tvar phiDelta = 0;\n\t\t\tvar thetaDelta = 0;\n\t\t\tvar scale = 1;\n\t\t\tvar panOffset = new _three2['default'].Vector3();\n\t\t\tvar zoomChanged = false;\n\t\n\t\t\tvar rotateStart = new _three2['default'].Vector2();\n\t\t\tvar rotateEnd = new _three2['default'].Vector2();\n\t\t\tvar rotateDelta = new _three2['default'].Vector2();\n\t\n\t\t\tvar panStart = new _three2['default'].Vector2();\n\t\t\tvar panEnd = new _three2['default'].Vector2();\n\t\t\tvar panDelta = new _three2['default'].Vector2();\n\t\n\t\t\tvar dollyStart = new _three2['default'].Vector2();\n\t\t\tvar dollyEnd = new _three2['default'].Vector2();\n\t\t\tvar dollyDelta = new _three2['default'].Vector2();\n\t\n\t\t\tfunction getAutoRotationAngle() {\n\t\n\t\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\t\t}\n\t\n\t\t\tfunction getZoomScale() {\n\t\n\t\t\t\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t\t\t}\n\t\n\t\t\tfunction rotateLeft(angle) {\n\t\n\t\t\t\t\tthetaDelta -= angle;\n\t\t\t}\n\t\n\t\t\tfunction rotateUp(angle) {\n\t\n\t\t\t\t\tphiDelta -= angle;\n\t\t\t}\n\t\n\t\t\tvar panLeft = (function () {\n\t\n\t\t\t\t\tvar v = new _three2['default'].Vector3();\n\t\n\t\t\t\t\t// return function panLeft( distance, objectMatrix ) {\n\t\t\t\t\t//\n\t\t\t\t\t// \tvar te = objectMatrix.elements;\n\t\t\t\t\t//\n\t\t\t\t\t// \t// get X column of objectMatrix\n\t\t\t\t\t// \tv.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\t\t\t\t//\n\t\t\t\t\t// \tv.multiplyScalar( - distance );\n\t\t\t\t\t//\n\t\t\t\t\t// \tpanOffset.add( v );\n\t\t\t\t\t//\n\t\t\t\t\t// };\n\t\n\t\t\t\t\t// Fixed panning to x/y plane\n\t\t\t\t\treturn function panLeft(distance, objectMatrix) {\n\t\t\t\t\t\t\tvar te = objectMatrix.elements;\n\t\t\t\t\t\t\t// var adjDist = distance / Math.cos(phi);\n\t\n\t\t\t\t\t\t\tv.set(te[0], 0, te[2]);\n\t\t\t\t\t\t\tv.multiplyScalar(-distance);\n\t\n\t\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t\t};\n\t\t\t})();\n\t\n\t\t\t// Fixed panning to x/y plane\n\t\t\tvar panUp = (function () {\n\t\n\t\t\t\t\tvar v = new _three2['default'].Vector3();\n\t\n\t\t\t\t\t// return function panUp( distance, objectMatrix ) {\n\t\t\t\t\t//\n\t\t\t\t\t// \tvar te = objectMatrix.elements;\n\t\t\t\t\t//\n\t\t\t\t\t// \t// get Y column of objectMatrix\n\t\t\t\t\t// \tv.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\t\t\t\t//\n\t\t\t\t\t// \tv.multiplyScalar( distance );\n\t\t\t\t\t//\n\t\t\t\t\t// \tpanOffset.add( v );\n\t\t\t\t\t//\n\t\t\t\t\t// };\n\t\n\t\t\t\t\treturn function panUp(distance, objectMatrix) {\n\t\t\t\t\t\t\tvar te = objectMatrix.elements;\n\t\t\t\t\t\t\tvar adjDist = distance / Math.cos(phi);\n\t\n\t\t\t\t\t\t\tv.set(te[4], 0, te[6]);\n\t\t\t\t\t\t\tv.multiplyScalar(adjDist);\n\t\n\t\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t\t};\n\t\t\t})();\n\t\n\t\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\t\tvar pan = (function () {\n\t\n\t\t\t\t\tvar offset = new _three2['default'].Vector3();\n\t\n\t\t\t\t\treturn function (deltaX, deltaY) {\n\t\n\t\t\t\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\t\t\t\tif (scope.object instanceof _three2['default'].PerspectiveCamera) {\n\t\n\t\t\t\t\t\t\t\t\t// perspective\n\t\t\t\t\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t\t\t\t\t\tvar targetDistance = offset.length();\n\t\n\t\t\t\t\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\t\t\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\t\n\t\t\t\t\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\t\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t\t} else if (scope.object instanceof _three2['default'].OrthographicCamera) {\n\t\n\t\t\t\t\t\t\t\t\t// orthographic\n\t\t\t\t\t\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth, scope.object.matrix);\n\t\t\t\t\t\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\t\t\t\t\t\tscope.enablePan = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t})();\n\t\n\t\t\tfunction dollyIn(dollyScale) {\n\t\n\t\t\t\t\tif (scope.object instanceof _three2['default'].PerspectiveCamera) {\n\t\n\t\t\t\t\t\t\tscale /= dollyScale;\n\t\t\t\t\t} else if (scope.object instanceof _three2['default'].OrthographicCamera) {\n\t\n\t\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction dollyOut(dollyScale) {\n\t\n\t\t\t\t\tif (scope.object instanceof _three2['default'].PerspectiveCamera) {\n\t\n\t\t\t\t\t\t\tscale *= dollyScale;\n\t\t\t\t\t} else if (scope.object instanceof _three2['default'].OrthographicCamera) {\n\t\n\t\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t//\n\t\t\t// event callbacks - update the object state\n\t\t\t//\n\t\n\t\t\tfunction handleMouseDownRotate(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseDownRotate' );\n\t\n\t\t\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t\t}\n\t\n\t\t\tfunction handleMouseDownDolly(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseDownDolly' );\n\t\n\t\t\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t\t}\n\t\n\t\t\tfunction handleMouseDownPan(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseDownPan' );\n\t\n\t\t\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t\t}\n\t\n\t\t\tfunction handleMouseMoveRotate(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseMoveRotate' );\n\t\n\t\t\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\t\n\t\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\t\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\t\n\t\t\t\t\trotateStart.copy(rotateEnd);\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleMouseMoveDolly(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseMoveDolly' );\n\t\n\t\t\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\t\n\t\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\t\n\t\t\t\t\tif (dollyDelta.y > 0) {\n\t\n\t\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t\t} else if (dollyDelta.y < 0) {\n\t\n\t\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t\t}\n\t\n\t\t\t\t\tdollyStart.copy(dollyEnd);\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleMouseMovePan(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseMovePan' );\n\t\n\t\t\t\t\tpanEnd.set(event.clientX, event.clientY);\n\t\n\t\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\t\n\t\t\t\t\tpan(panDelta.x, panDelta.y);\n\t\n\t\t\t\t\tpanStart.copy(panEnd);\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleMouseUp(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseUp' );\n\t\n\t\t\t}\n\t\n\t\t\tfunction handleMouseWheel(event) {\n\t\n\t\t\t\t\t//console.log( 'handleMouseWheel' );\n\t\n\t\t\t\t\tvar delta = 0;\n\t\n\t\t\t\t\tif (event.wheelDelta !== undefined) {\n\t\n\t\t\t\t\t\t\t// WebKit / Opera / Explorer 9\n\t\n\t\t\t\t\t\t\tdelta = event.wheelDelta;\n\t\t\t\t\t} else if (event.detail !== undefined) {\n\t\n\t\t\t\t\t\t\t// Firefox\n\t\n\t\t\t\t\t\t\tdelta = -event.detail;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (delta > 0) {\n\t\n\t\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t\t} else if (delta < 0) {\n\t\n\t\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t\t}\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleKeyDown(event) {\n\t\n\t\t\t\t\t//console.log( 'handleKeyDown' );\n\t\n\t\t\t\t\tswitch (event.keyCode) {\n\t\n\t\t\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase scope.keys.CTRL:\n\t\t\t\t\t\t\t\t\tKEY_STATE.CTRL = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction handleKeyUp(event) {\n\t\n\t\t\t\t\tswitch (event.keyCode) {\n\t\t\t\t\t\t\tcase scope.keys.CTRL:\n\t\t\t\t\t\t\t\t\tKEY_STATE.CTRL = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction handleTouchStartRotate(event) {\n\t\n\t\t\t\t\t//console.log( 'handleTouchStartRotate' );\n\t\n\t\t\t\t\trotateStart.set(event.pointers[0].pageX, event.pointers[0].pageY);\n\t\t\t}\n\t\n\t\t\tfunction handleTouchStartDolly(event) {\n\t\n\t\t\t\t\t//console.log( 'handleTouchStartDolly' );\n\t\n\t\t\t\t\tvar dx = event.pointers[0].pageX - event.pointers[1].pageX;\n\t\t\t\t\tvar dy = event.pointers[0].pageY - event.pointers[1].pageY;\n\t\n\t\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\t\n\t\t\t\t\tdollyStart.set(0, distance);\n\t\t\t}\n\t\n\t\t\tfunction handleTouchStartPan(event) {\n\t\n\t\t\t\t\t//console.log( 'handleTouchStartPan' );\n\t\n\t\t\t\t\tpanStart.set(event.deltaX, event.deltaY);\n\t\t\t}\n\t\n\t\t\tfunction handleTouchMoveRotate(event) {\n\t\n\t\t\t\t\t//console.log( 'handleTouchMoveRotate' );\n\t\n\t\t\t\t\trotateEnd.set(event.pointers[0].pageX, event.pointers[0].pageY);\n\t\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\t\n\t\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\t\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\t\n\t\t\t\t\trotateStart.copy(rotateEnd);\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleTouchMoveDolly(event) {\n\t\n\t\t\t\t\t//console.log( 'handleTouchMoveDolly' );\n\t\n\t\t\t\t\tvar dx = event.pointers[0].pageX - event.pointers[1].pageX;\n\t\t\t\t\tvar dy = event.pointers[0].pageY - event.pointers[1].pageY;\n\t\n\t\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\t\n\t\t\t\t\tdollyEnd.set(0, distance);\n\t\n\t\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\t\n\t\t\t\t\tif (dollyDelta.y > 0) {\n\t\n\t\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t\t} else if (dollyDelta.y < 0) {\n\t\n\t\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t\t}\n\t\n\t\t\t\t\tdollyStart.copy(dollyEnd);\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleTouchMovePan(event) {\n\t\n\t\t\t\t\t//console.log( 'handleTouchMovePan' );\n\t\n\t\t\t\t\tpanEnd.set(event.deltaX, event.deltaY);\n\t\n\t\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\t\n\t\t\t\t\tpan(panDelta.x, panDelta.y);\n\t\n\t\t\t\t\tpanStart.copy(panEnd);\n\t\n\t\t\t\t\tscope.update();\n\t\t\t}\n\t\n\t\t\tfunction handleTouchEnd(event) {}\n\t\n\t\t\t//console.log( 'handleTouchEnd' );\n\t\n\t\t\t//\n\t\t\t// event handlers - FSM: listen for events and reset state\n\t\t\t//\n\t\n\t\t\tfunction onMouseDown(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\t\tif (event.button === scope.mouseButtons.ORBIT) {\n\t\n\t\t\t\t\t\t\tif (KEY_STATE.CTRL) {\n\t\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\n\t\t\t\t\t\t\t\t\thandleMouseDownPan(event);\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.PAN;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\n\t\t\t\t\t\t\t\t\thandleMouseDownRotate(event);\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t} else if (event.button === scope.mouseButtons.ZOOM) {\n\t\n\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\n\t\t\t\t\t\t\thandleMouseDownDolly(event);\n\t\n\t\t\t\t\t\t\tstate = STATE.DOLLY;\n\t\t\t\t\t} else if (event.button === scope.mouseButtons.PAN) {\n\t\n\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\n\t\t\t\t\t\t\thandleMouseDownPan(event);\n\t\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (state !== STATE.NONE) {\n\t\n\t\t\t\t\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\t\t\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\t\t\t\t\t\t\tdocument.addEventListener('mouseout', onMouseUp, false);\n\t\n\t\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction onMouseMove(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\t\tif (state === STATE.ROTATE) {\n\t\n\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\n\t\t\t\t\t\t\thandleMouseMoveRotate(event);\n\t\t\t\t\t} else if (state === STATE.DOLLY) {\n\t\n\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\n\t\t\t\t\t\t\thandleMouseMoveDolly(event);\n\t\t\t\t\t} else if (state === STATE.PAN) {\n\t\n\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\n\t\t\t\t\t\t\thandleMouseMovePan(event);\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction onMouseUp(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\thandleMouseUp(event);\n\t\n\t\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\t\t\t\t\tdocument.removeEventListener('mouseout', onMouseUp, false);\n\t\n\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\n\t\t\t\t\tstate = STATE.NONE;\n\t\t\t}\n\t\n\t\t\tfunction onMouseWheel(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE) return;\n\t\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\t\thandleMouseWheel(event);\n\t\n\t\t\t\t\tscope.dispatchEvent(startEvent); // not sure why these are here...\n\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t\t}\n\t\n\t\t\tfunction onKeyDown(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\t\n\t\t\t\t\thandleKeyDown(event);\n\t\t\t}\n\t\n\t\t\tfunction onKeyUp(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\t\n\t\t\t\t\thandleKeyUp(event);\n\t\t\t}\n\t\n\t\t\tfunction onTouchStart(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tswitch (event.touches.length) {\n\t\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\t// one-fingered touch: rotate\n\t\n\t\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\n\t\t\t\t\t\t\t\t\thandleTouchStartRotate(event);\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t// two-fingered touch: dolly\n\t\n\t\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\n\t\t\t\t\t\t\t\t\thandleTouchStartDolly(event);\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\t\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\t// three-fingered touch: pan\n\t\n\t\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\n\t\t\t\t\t\t\t\t\thandleTouchStartPan(event);\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (state !== STATE.NONE) {\n\t\n\t\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction onTouchMove(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\t\tswitch (event.touches.length) {\n\t\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\t// one-fingered touch: rotate\n\t\n\t\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\t\n\t\t\t\t\t\t\t\t\thandleTouchMoveRotate(event);\n\t\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t// two-fingered touch: dolly\n\t\n\t\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\t\n\t\t\t\t\t\t\t\t\thandleTouchMoveDolly(event);\n\t\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\t// three-fingered touch: pan\n\t\n\t\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\t\n\t\t\t\t\t\t\t\t\thandleTouchMovePan(event);\n\t\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction onTouchEnd(event) {\n\t\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\thandleTouchEnd(event);\n\t\n\t\t\t\t\tscope.dispatchEvent(endEvent);\n\t\n\t\t\t\t\tstate = STATE.NONE;\n\t\t\t}\n\t\n\t\t\tfunction onContextMenu(event) {\n\t\n\t\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\n\t\t\t//\n\t\n\t\t\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\t\n\t\t\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\t\t\tscope.domElement.addEventListener('mousewheel', onMouseWheel, false);\n\t\t\tscope.domElement.addEventListener('MozMousePixelScroll', onMouseWheel, false); // firefox\n\t\n\t\t\t// scope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\t\t\t// scope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\t\t\t// scope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\t\n\t\t\tscope.hammer = new _hammerjs2['default'](scope.domElement);\n\t\n\t\t\tscope.hammer.get('pan').set({\n\t\t\t\t\tpointers: 0,\n\t\t\t\t\tdirection: _hammerjs2['default'].DIRECTION_ALL\n\t\t\t});\n\t\n\t\t\tscope.hammer.get('pinch').set({\n\t\t\t\t\tenable: true,\n\t\t\t\t\tthreshold: 0.1\n\t\t\t});\n\t\n\t\t\tscope.hammer.on('panstart', function (event) {\n\t\t\t\t\tif (scope.enabled === false) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (event.pointerType === 'mouse') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (event.pointers.length === 1) {\n\t\t\t\t\t\t\tif (scope.enablePan === false) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\thandleTouchStartPan(event);\n\t\t\t\t\t\t\t// panStart.set(event.deltaX, event.deltaY);\n\t\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\t\t\t\t} else if (event.pointers.length === 2) {\n\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\n\t\t\t\t\t\t\thandleTouchStartRotate(event);\n\t\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (state !== STATE.NONE) {\n\t\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tscope.hammer.on('panend', function (event) {\n\t\t\t\t\tif (event.pointerType === 'mouse') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tonTouchEnd(event);\n\t\t\t});\n\t\n\t\t\tscope.hammer.on('panmove', function (event) {\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tif (event.pointerType === 'mouse') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// event.preventDefault();\n\t\t\t\t\t// event.stopPropagation();\n\t\n\t\t\t\t\tif (event.pointers.length === 1) {\n\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\t\t\t\tif (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\t\n\t\t\t\t\t\t\thandleTouchMovePan(event);\n\t\n\t\t\t\t\t\t\t// panEnd.set( event.deltaX, event.deltaY );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// panDelta.subVectors( panEnd, panStart );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// pan( panDelta.x, panDelta.y );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// panStart.copy( panEnd );\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// scope.update();\n\t\t\t\t\t} else if (event.pointers.length === 2) {\n\t\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\t\n\t\t\t\t\t\t\t\t\thandleTouchMoveRotate(event);\n\t\t\t\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tscope.hammer.on('pinchstart', function (event) {\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tif (event.pointerType === 'mouse') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\n\t\t\t\t\thandleTouchStartDolly(event);\n\t\n\t\t\t\t\t// var dx = event.pointers[ 0 ].pageX - event.pointers[ 1 ].pageX;\n\t\t\t\t\t// var dy = event.pointers[ 0 ].pageY - event.pointers[ 1 ].pageY;\n\t\t\t\t\t//\n\t\t\t\t\t// var distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t//\n\t\t\t\t\t// dollyStart.set( 0, distance );\n\t\t\t\t\t//\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\t\n\t\t\t\t\tif (state !== STATE.NONE) {\n\t\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tscope.hammer.on('pinchend', function (event) {\n\t\t\t\t\tif (event.pointerType === 'mouse') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tonTouchEnd(event);\n\t\t\t});\n\t\n\t\t\tscope.hammer.on('pinchmove', function (event) {\n\t\t\t\t\tif (scope.enabled === false) return;\n\t\n\t\t\t\t\tif (event.pointerType === 'mouse') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// event.preventDefault();\n\t\t\t\t\t// event.stopPropagation();\n\t\n\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\t\n\t\t\t\t\thandleTouchMoveDolly(event);\n\t\n\t\t\t\t\t// var dx = event.pointers[ 0 ].pageX - event.pointers[ 1 ].pageX;\n\t\t\t\t\t// var dy = event.pointers[ 0 ].pageY - event.pointers[ 1 ].pageY;\n\t\t\t\t\t//\n\t\t\t\t\t// var distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t//\n\t\t\t\t\t// dollyEnd.set( 0, distance );\n\t\t\t\t\t//\n\t\t\t\t\t// dollyDelta.subVectors( dollyEnd, dollyStart );\n\t\t\t\t\t//\n\t\t\t\t\t// if ( dollyDelta.y > 0 ) {\n\t\t\t\t\t//\n\t\t\t\t\t// \tdollyOut( getZoomScale() );\n\t\t\t\t\t//\n\t\t\t\t\t// } else if ( dollyDelta.y < 0 ) {\n\t\t\t\t\t//\n\t\t\t\t\t// \tdollyIn( getZoomScale() );\n\t\t\t\t\t//\n\t\t\t\t\t// }\n\t\t\t\t\t//\n\t\t\t\t\t// dollyStart.copy( dollyEnd );\n\t\t\t\t\t//\n\t\t\t\t\t// scope.update();\n\t\t\t});\n\t\n\t\t\twindow.addEventListener('keydown', onKeyDown, false);\n\t\t\twindow.addEventListener('keyup', onKeyUp, false);\n\t\n\t\t\t// Expose controls methods for programmatic control\n\t\t\tthis.panLeft = panLeft;\n\t\t\tthis.panUp = panUp;\n\t\t\tthis.pan = pan;\n\t\t\tthis.dollyIn = dollyIn;\n\t\t\tthis.dollyOut = dollyOut;\n\t\t\tthis.getZoomScale = getZoomScale;\n\t\t\tthis.rotateLeft = rotateLeft;\n\t\t\tthis.rotateUp = rotateUp;\n\t\n\t\t\t// force an update at start\n\t\n\t\t\tthis.update();\n\t};\n\t\n\tOrbitControls.prototype = Object.create(_three2['default'].EventDispatcher.prototype);\n\tOrbitControls.prototype.constructor = _three2['default'].OrbitControls;\n\t\n\tObject.defineProperties(OrbitControls.prototype, {\n\t\n\t\t\tcenter: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .center has been renamed to .target');\n\t\t\t\t\t\t\treturn this.target;\n\t\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\t// backward compatibility\n\t\n\t\t\tnoZoom: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n\t\t\t\t\t\t\treturn !this.enableZoom;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tset: function set(value) {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n\t\t\t\t\t\t\tthis.enableZoom = !value;\n\t\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoRotate: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n\t\t\t\t\t\t\treturn !this.enableRotate;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tset: function set(value) {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n\t\t\t\t\t\t\tthis.enableRotate = !value;\n\t\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoPan: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n\t\t\t\t\t\t\treturn !this.enablePan;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tset: function set(value) {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n\t\t\t\t\t\t\tthis.enablePan = !value;\n\t\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoKeys: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n\t\t\t\t\t\t\treturn !this.enableKeys;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tset: function set(value) {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n\t\t\t\t\t\t\tthis.enableKeys = !value;\n\t\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tstaticMoving: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n\t\t\t\t\t\t\treturn !this.constraint.enableDamping;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tset: function set(value) {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n\t\t\t\t\t\t\tthis.constraint.enableDamping = !value;\n\t\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdynamicDampingFactor: {\n\t\n\t\t\t\t\tget: function get() {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n\t\t\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tset: function set(value) {\n\t\n\t\t\t\t\t\t\tconsole.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n\t\t\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t});\n\t\n\texports['default'] = OrbitControls;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/*! Hammer.JS - v2.0.7 - 2016-04-22\n\t * http://hammerjs.github.io/\n\t *\n\t * Copyright (c) 2016 Jorik Tangelder;\n\t * Licensed under the MIT license */\n\t(function(window, document, exportName, undefined) {\n\t  'use strict';\n\t\n\tvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\n\tvar TEST_ELEMENT = document.createElement('div');\n\t\n\tvar TYPE_FUNCTION = 'function';\n\t\n\tvar round = Math.round;\n\tvar abs = Math.abs;\n\tvar now = Date.now;\n\t\n\t/**\n\t * set a timeout with a given scope\n\t * @param {Function} fn\n\t * @param {Number} timeout\n\t * @param {Object} context\n\t * @returns {number}\n\t */\n\tfunction setTimeoutContext(fn, timeout, context) {\n\t    return setTimeout(bindFn(fn, context), timeout);\n\t}\n\t\n\t/**\n\t * if the argument is an array, we want to execute the fn on each entry\n\t * if it aint an array we don't want to do a thing.\n\t * this is used by all the methods that accept a single and array argument.\n\t * @param {*|Array} arg\n\t * @param {String} fn\n\t * @param {Object} [context]\n\t * @returns {Boolean}\n\t */\n\tfunction invokeArrayArg(arg, fn, context) {\n\t    if (Array.isArray(arg)) {\n\t        each(arg, context[fn], context);\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\t\n\t/**\n\t * walk objects and arrays\n\t * @param {Object} obj\n\t * @param {Function} iterator\n\t * @param {Object} context\n\t */\n\tfunction each(obj, iterator, context) {\n\t    var i;\n\t\n\t    if (!obj) {\n\t        return;\n\t    }\n\t\n\t    if (obj.forEach) {\n\t        obj.forEach(iterator, context);\n\t    } else if (obj.length !== undefined) {\n\t        i = 0;\n\t        while (i < obj.length) {\n\t            iterator.call(context, obj[i], i, obj);\n\t            i++;\n\t        }\n\t    } else {\n\t        for (i in obj) {\n\t            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n\t        }\n\t    }\n\t}\n\t\n\t/**\n\t * wrap a method with a deprecation warning and stack trace\n\t * @param {Function} method\n\t * @param {String} name\n\t * @param {String} message\n\t * @returns {Function} A new function wrapping the supplied method.\n\t */\n\tfunction deprecate(method, name, message) {\n\t    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n\t    return function() {\n\t        var e = new Error('get-stack-trace');\n\t        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n\t            .replace(/^\\s+at\\s+/gm, '')\n\t            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\t\n\t        var log = window.console && (window.console.warn || window.console.log);\n\t        if (log) {\n\t            log.call(window.console, deprecationMessage, stack);\n\t        }\n\t        return method.apply(this, arguments);\n\t    };\n\t}\n\t\n\t/**\n\t * extend object.\n\t * means that properties in dest will be overwritten by the ones in src.\n\t * @param {Object} target\n\t * @param {...Object} objects_to_assign\n\t * @returns {Object} target\n\t */\n\tvar assign;\n\tif (typeof Object.assign !== 'function') {\n\t    assign = function assign(target) {\n\t        if (target === undefined || target === null) {\n\t            throw new TypeError('Cannot convert undefined or null to object');\n\t        }\n\t\n\t        var output = Object(target);\n\t        for (var index = 1; index < arguments.length; index++) {\n\t            var source = arguments[index];\n\t            if (source !== undefined && source !== null) {\n\t                for (var nextKey in source) {\n\t                    if (source.hasOwnProperty(nextKey)) {\n\t                        output[nextKey] = source[nextKey];\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        return output;\n\t    };\n\t} else {\n\t    assign = Object.assign;\n\t}\n\t\n\t/**\n\t * extend object.\n\t * means that properties in dest will be overwritten by the ones in src.\n\t * @param {Object} dest\n\t * @param {Object} src\n\t * @param {Boolean} [merge=false]\n\t * @returns {Object} dest\n\t */\n\tvar extend = deprecate(function extend(dest, src, merge) {\n\t    var keys = Object.keys(src);\n\t    var i = 0;\n\t    while (i < keys.length) {\n\t        if (!merge || (merge && dest[keys[i]] === undefined)) {\n\t            dest[keys[i]] = src[keys[i]];\n\t        }\n\t        i++;\n\t    }\n\t    return dest;\n\t}, 'extend', 'Use `assign`.');\n\t\n\t/**\n\t * merge the values from src in the dest.\n\t * means that properties that exist in dest will not be overwritten by src\n\t * @param {Object} dest\n\t * @param {Object} src\n\t * @returns {Object} dest\n\t */\n\tvar merge = deprecate(function merge(dest, src) {\n\t    return extend(dest, src, true);\n\t}, 'merge', 'Use `assign`.');\n\t\n\t/**\n\t * simple class inheritance\n\t * @param {Function} child\n\t * @param {Function} base\n\t * @param {Object} [properties]\n\t */\n\tfunction inherit(child, base, properties) {\n\t    var baseP = base.prototype,\n\t        childP;\n\t\n\t    childP = child.prototype = Object.create(baseP);\n\t    childP.constructor = child;\n\t    childP._super = baseP;\n\t\n\t    if (properties) {\n\t        assign(childP, properties);\n\t    }\n\t}\n\t\n\t/**\n\t * simple function bind\n\t * @param {Function} fn\n\t * @param {Object} context\n\t * @returns {Function}\n\t */\n\tfunction bindFn(fn, context) {\n\t    return function boundFn() {\n\t        return fn.apply(context, arguments);\n\t    };\n\t}\n\t\n\t/**\n\t * let a boolean value also be a function that must return a boolean\n\t * this first item in args will be used as the context\n\t * @param {Boolean|Function} val\n\t * @param {Array} [args]\n\t * @returns {Boolean}\n\t */\n\tfunction boolOrFn(val, args) {\n\t    if (typeof val == TYPE_FUNCTION) {\n\t        return val.apply(args ? args[0] || undefined : undefined, args);\n\t    }\n\t    return val;\n\t}\n\t\n\t/**\n\t * use the val2 when val1 is undefined\n\t * @param {*} val1\n\t * @param {*} val2\n\t * @returns {*}\n\t */\n\tfunction ifUndefined(val1, val2) {\n\t    return (val1 === undefined) ? val2 : val1;\n\t}\n\t\n\t/**\n\t * addEventListener with multiple events at once\n\t * @param {EventTarget} target\n\t * @param {String} types\n\t * @param {Function} handler\n\t */\n\tfunction addEventListeners(target, types, handler) {\n\t    each(splitStr(types), function(type) {\n\t        target.addEventListener(type, handler, false);\n\t    });\n\t}\n\t\n\t/**\n\t * removeEventListener with multiple events at once\n\t * @param {EventTarget} target\n\t * @param {String} types\n\t * @param {Function} handler\n\t */\n\tfunction removeEventListeners(target, types, handler) {\n\t    each(splitStr(types), function(type) {\n\t        target.removeEventListener(type, handler, false);\n\t    });\n\t}\n\t\n\t/**\n\t * find if a node is in the given parent\n\t * @method hasParent\n\t * @param {HTMLElement} node\n\t * @param {HTMLElement} parent\n\t * @return {Boolean} found\n\t */\n\tfunction hasParent(node, parent) {\n\t    while (node) {\n\t        if (node == parent) {\n\t            return true;\n\t        }\n\t        node = node.parentNode;\n\t    }\n\t    return false;\n\t}\n\t\n\t/**\n\t * small indexOf wrapper\n\t * @param {String} str\n\t * @param {String} find\n\t * @returns {Boolean} found\n\t */\n\tfunction inStr(str, find) {\n\t    return str.indexOf(find) > -1;\n\t}\n\t\n\t/**\n\t * split string on whitespace\n\t * @param {String} str\n\t * @returns {Array} words\n\t */\n\tfunction splitStr(str) {\n\t    return str.trim().split(/\\s+/g);\n\t}\n\t\n\t/**\n\t * find if a array contains the object using indexOf or a simple polyFill\n\t * @param {Array} src\n\t * @param {String} find\n\t * @param {String} [findByKey]\n\t * @return {Boolean|Number} false when not found, or the index\n\t */\n\tfunction inArray(src, find, findByKey) {\n\t    if (src.indexOf && !findByKey) {\n\t        return src.indexOf(find);\n\t    } else {\n\t        var i = 0;\n\t        while (i < src.length) {\n\t            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n\t                return i;\n\t            }\n\t            i++;\n\t        }\n\t        return -1;\n\t    }\n\t}\n\t\n\t/**\n\t * convert array-like objects to real arrays\n\t * @param {Object} obj\n\t * @returns {Array}\n\t */\n\tfunction toArray(obj) {\n\t    return Array.prototype.slice.call(obj, 0);\n\t}\n\t\n\t/**\n\t * unique array with objects based on a key (like 'id') or just by the array's value\n\t * @param {Array} src [{id:1},{id:2},{id:1}]\n\t * @param {String} [key]\n\t * @param {Boolean} [sort=False]\n\t * @returns {Array} [{id:1},{id:2}]\n\t */\n\tfunction uniqueArray(src, key, sort) {\n\t    var results = [];\n\t    var values = [];\n\t    var i = 0;\n\t\n\t    while (i < src.length) {\n\t        var val = key ? src[i][key] : src[i];\n\t        if (inArray(values, val) < 0) {\n\t            results.push(src[i]);\n\t        }\n\t        values[i] = val;\n\t        i++;\n\t    }\n\t\n\t    if (sort) {\n\t        if (!key) {\n\t            results = results.sort();\n\t        } else {\n\t            results = results.sort(function sortUniqueArray(a, b) {\n\t                return a[key] > b[key];\n\t            });\n\t        }\n\t    }\n\t\n\t    return results;\n\t}\n\t\n\t/**\n\t * get the prefixed property\n\t * @param {Object} obj\n\t * @param {String} property\n\t * @returns {String|Undefined} prefixed\n\t */\n\tfunction prefixed(obj, property) {\n\t    var prefix, prop;\n\t    var camelProp = property[0].toUpperCase() + property.slice(1);\n\t\n\t    var i = 0;\n\t    while (i < VENDOR_PREFIXES.length) {\n\t        prefix = VENDOR_PREFIXES[i];\n\t        prop = (prefix) ? prefix + camelProp : property;\n\t\n\t        if (prop in obj) {\n\t            return prop;\n\t        }\n\t        i++;\n\t    }\n\t    return undefined;\n\t}\n\t\n\t/**\n\t * get a unique id\n\t * @returns {number} uniqueId\n\t */\n\tvar _uniqueId = 1;\n\tfunction uniqueId() {\n\t    return _uniqueId++;\n\t}\n\t\n\t/**\n\t * get the window object of an element\n\t * @param {HTMLElement} element\n\t * @returns {DocumentView|Window}\n\t */\n\tfunction getWindowForElement(element) {\n\t    var doc = element.ownerDocument || element;\n\t    return (doc.defaultView || doc.parentWindow || window);\n\t}\n\t\n\tvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\t\n\tvar SUPPORT_TOUCH = ('ontouchstart' in window);\n\tvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\n\tvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\t\n\tvar INPUT_TYPE_TOUCH = 'touch';\n\tvar INPUT_TYPE_PEN = 'pen';\n\tvar INPUT_TYPE_MOUSE = 'mouse';\n\tvar INPUT_TYPE_KINECT = 'kinect';\n\t\n\tvar COMPUTE_INTERVAL = 25;\n\t\n\tvar INPUT_START = 1;\n\tvar INPUT_MOVE = 2;\n\tvar INPUT_END = 4;\n\tvar INPUT_CANCEL = 8;\n\t\n\tvar DIRECTION_NONE = 1;\n\tvar DIRECTION_LEFT = 2;\n\tvar DIRECTION_RIGHT = 4;\n\tvar DIRECTION_UP = 8;\n\tvar DIRECTION_DOWN = 16;\n\t\n\tvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\n\tvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\n\tvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\t\n\tvar PROPS_XY = ['x', 'y'];\n\tvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\t\n\t/**\n\t * create new input type manager\n\t * @param {Manager} manager\n\t * @param {Function} callback\n\t * @returns {Input}\n\t * @constructor\n\t */\n\tfunction Input(manager, callback) {\n\t    var self = this;\n\t    this.manager = manager;\n\t    this.callback = callback;\n\t    this.element = manager.element;\n\t    this.target = manager.options.inputTarget;\n\t\n\t    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n\t    // so when disabled the input events are completely bypassed.\n\t    this.domHandler = function(ev) {\n\t        if (boolOrFn(manager.options.enable, [manager])) {\n\t            self.handler(ev);\n\t        }\n\t    };\n\t\n\t    this.init();\n\t\n\t}\n\t\n\tInput.prototype = {\n\t    /**\n\t     * should handle the inputEvent data and trigger the callback\n\t     * @virtual\n\t     */\n\t    handler: function() { },\n\t\n\t    /**\n\t     * bind the events\n\t     */\n\t    init: function() {\n\t        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n\t        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n\t        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n\t    },\n\t\n\t    /**\n\t     * unbind the events\n\t     */\n\t    destroy: function() {\n\t        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n\t        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n\t        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n\t    }\n\t};\n\t\n\t/**\n\t * create new input type manager\n\t * called by the Manager constructor\n\t * @param {Hammer} manager\n\t * @returns {Input}\n\t */\n\tfunction createInputInstance(manager) {\n\t    var Type;\n\t    var inputClass = manager.options.inputClass;\n\t\n\t    if (inputClass) {\n\t        Type = inputClass;\n\t    } else if (SUPPORT_POINTER_EVENTS) {\n\t        Type = PointerEventInput;\n\t    } else if (SUPPORT_ONLY_TOUCH) {\n\t        Type = TouchInput;\n\t    } else if (!SUPPORT_TOUCH) {\n\t        Type = MouseInput;\n\t    } else {\n\t        Type = TouchMouseInput;\n\t    }\n\t    return new (Type)(manager, inputHandler);\n\t}\n\t\n\t/**\n\t * handle input events\n\t * @param {Manager} manager\n\t * @param {String} eventType\n\t * @param {Object} input\n\t */\n\tfunction inputHandler(manager, eventType, input) {\n\t    var pointersLen = input.pointers.length;\n\t    var changedPointersLen = input.changedPointers.length;\n\t    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n\t    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\t\n\t    input.isFirst = !!isFirst;\n\t    input.isFinal = !!isFinal;\n\t\n\t    if (isFirst) {\n\t        manager.session = {};\n\t    }\n\t\n\t    // source event is the normalized value of the domEvents\n\t    // like 'touchstart, mouseup, pointerdown'\n\t    input.eventType = eventType;\n\t\n\t    // compute scale, rotation etc\n\t    computeInputData(manager, input);\n\t\n\t    // emit secret event\n\t    manager.emit('hammer.input', input);\n\t\n\t    manager.recognize(input);\n\t    manager.session.prevInput = input;\n\t}\n\t\n\t/**\n\t * extend the data with some usable properties like scale, rotate, velocity etc\n\t * @param {Object} manager\n\t * @param {Object} input\n\t */\n\tfunction computeInputData(manager, input) {\n\t    var session = manager.session;\n\t    var pointers = input.pointers;\n\t    var pointersLength = pointers.length;\n\t\n\t    // store the first input to calculate the distance and direction\n\t    if (!session.firstInput) {\n\t        session.firstInput = simpleCloneInputData(input);\n\t    }\n\t\n\t    // to compute scale and rotation we need to store the multiple touches\n\t    if (pointersLength > 1 && !session.firstMultiple) {\n\t        session.firstMultiple = simpleCloneInputData(input);\n\t    } else if (pointersLength === 1) {\n\t        session.firstMultiple = false;\n\t    }\n\t\n\t    var firstInput = session.firstInput;\n\t    var firstMultiple = session.firstMultiple;\n\t    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\t\n\t    var center = input.center = getCenter(pointers);\n\t    input.timeStamp = now();\n\t    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\t\n\t    input.angle = getAngle(offsetCenter, center);\n\t    input.distance = getDistance(offsetCenter, center);\n\t\n\t    computeDeltaXY(session, input);\n\t    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\t\n\t    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n\t    input.overallVelocityX = overallVelocity.x;\n\t    input.overallVelocityY = overallVelocity.y;\n\t    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\t\n\t    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n\t    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\t\n\t    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n\t        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\t\n\t    computeIntervalInputData(session, input);\n\t\n\t    // find the correct target\n\t    var target = manager.element;\n\t    if (hasParent(input.srcEvent.target, target)) {\n\t        target = input.srcEvent.target;\n\t    }\n\t    input.target = target;\n\t}\n\t\n\tfunction computeDeltaXY(session, input) {\n\t    var center = input.center;\n\t    var offset = session.offsetDelta || {};\n\t    var prevDelta = session.prevDelta || {};\n\t    var prevInput = session.prevInput || {};\n\t\n\t    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n\t        prevDelta = session.prevDelta = {\n\t            x: prevInput.deltaX || 0,\n\t            y: prevInput.deltaY || 0\n\t        };\n\t\n\t        offset = session.offsetDelta = {\n\t            x: center.x,\n\t            y: center.y\n\t        };\n\t    }\n\t\n\t    input.deltaX = prevDelta.x + (center.x - offset.x);\n\t    input.deltaY = prevDelta.y + (center.y - offset.y);\n\t}\n\t\n\t/**\n\t * velocity is calculated every x ms\n\t * @param {Object} session\n\t * @param {Object} input\n\t */\n\tfunction computeIntervalInputData(session, input) {\n\t    var last = session.lastInterval || input,\n\t        deltaTime = input.timeStamp - last.timeStamp,\n\t        velocity, velocityX, velocityY, direction;\n\t\n\t    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n\t        var deltaX = input.deltaX - last.deltaX;\n\t        var deltaY = input.deltaY - last.deltaY;\n\t\n\t        var v = getVelocity(deltaTime, deltaX, deltaY);\n\t        velocityX = v.x;\n\t        velocityY = v.y;\n\t        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n\t        direction = getDirection(deltaX, deltaY);\n\t\n\t        session.lastInterval = input;\n\t    } else {\n\t        // use latest velocity info if it doesn't overtake a minimum period\n\t        velocity = last.velocity;\n\t        velocityX = last.velocityX;\n\t        velocityY = last.velocityY;\n\t        direction = last.direction;\n\t    }\n\t\n\t    input.velocity = velocity;\n\t    input.velocityX = velocityX;\n\t    input.velocityY = velocityY;\n\t    input.direction = direction;\n\t}\n\t\n\t/**\n\t * create a simple clone from the input used for storage of firstInput and firstMultiple\n\t * @param {Object} input\n\t * @returns {Object} clonedInputData\n\t */\n\tfunction simpleCloneInputData(input) {\n\t    // make a simple copy of the pointers because we will get a reference if we don't\n\t    // we only need clientXY for the calculations\n\t    var pointers = [];\n\t    var i = 0;\n\t    while (i < input.pointers.length) {\n\t        pointers[i] = {\n\t            clientX: round(input.pointers[i].clientX),\n\t            clientY: round(input.pointers[i].clientY)\n\t        };\n\t        i++;\n\t    }\n\t\n\t    return {\n\t        timeStamp: now(),\n\t        pointers: pointers,\n\t        center: getCenter(pointers),\n\t        deltaX: input.deltaX,\n\t        deltaY: input.deltaY\n\t    };\n\t}\n\t\n\t/**\n\t * get the center of all the pointers\n\t * @param {Array} pointers\n\t * @return {Object} center contains `x` and `y` properties\n\t */\n\tfunction getCenter(pointers) {\n\t    var pointersLength = pointers.length;\n\t\n\t    // no need to loop when only one touch\n\t    if (pointersLength === 1) {\n\t        return {\n\t            x: round(pointers[0].clientX),\n\t            y: round(pointers[0].clientY)\n\t        };\n\t    }\n\t\n\t    var x = 0, y = 0, i = 0;\n\t    while (i < pointersLength) {\n\t        x += pointers[i].clientX;\n\t        y += pointers[i].clientY;\n\t        i++;\n\t    }\n\t\n\t    return {\n\t        x: round(x / pointersLength),\n\t        y: round(y / pointersLength)\n\t    };\n\t}\n\t\n\t/**\n\t * calculate the velocity between two points. unit is in px per ms.\n\t * @param {Number} deltaTime\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Object} velocity `x` and `y`\n\t */\n\tfunction getVelocity(deltaTime, x, y) {\n\t    return {\n\t        x: x / deltaTime || 0,\n\t        y: y / deltaTime || 0\n\t    };\n\t}\n\t\n\t/**\n\t * get the direction between two points\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Number} direction\n\t */\n\tfunction getDirection(x, y) {\n\t    if (x === y) {\n\t        return DIRECTION_NONE;\n\t    }\n\t\n\t    if (abs(x) >= abs(y)) {\n\t        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n\t    }\n\t    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n\t}\n\t\n\t/**\n\t * calculate the absolute distance between two points\n\t * @param {Object} p1 {x, y}\n\t * @param {Object} p2 {x, y}\n\t * @param {Array} [props] containing x and y keys\n\t * @return {Number} distance\n\t */\n\tfunction getDistance(p1, p2, props) {\n\t    if (!props) {\n\t        props = PROPS_XY;\n\t    }\n\t    var x = p2[props[0]] - p1[props[0]],\n\t        y = p2[props[1]] - p1[props[1]];\n\t\n\t    return Math.sqrt((x * x) + (y * y));\n\t}\n\t\n\t/**\n\t * calculate the angle between two coordinates\n\t * @param {Object} p1\n\t * @param {Object} p2\n\t * @param {Array} [props] containing x and y keys\n\t * @return {Number} angle\n\t */\n\tfunction getAngle(p1, p2, props) {\n\t    if (!props) {\n\t        props = PROPS_XY;\n\t    }\n\t    var x = p2[props[0]] - p1[props[0]],\n\t        y = p2[props[1]] - p1[props[1]];\n\t    return Math.atan2(y, x) * 180 / Math.PI;\n\t}\n\t\n\t/**\n\t * calculate the rotation degrees between two pointersets\n\t * @param {Array} start array of pointers\n\t * @param {Array} end array of pointers\n\t * @return {Number} rotation\n\t */\n\tfunction getRotation(start, end) {\n\t    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n\t}\n\t\n\t/**\n\t * calculate the scale factor between two pointersets\n\t * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n\t * @param {Array} start array of pointers\n\t * @param {Array} end array of pointers\n\t * @return {Number} scale\n\t */\n\tfunction getScale(start, end) {\n\t    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n\t}\n\t\n\tvar MOUSE_INPUT_MAP = {\n\t    mousedown: INPUT_START,\n\t    mousemove: INPUT_MOVE,\n\t    mouseup: INPUT_END\n\t};\n\t\n\tvar MOUSE_ELEMENT_EVENTS = 'mousedown';\n\tvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\t\n\t/**\n\t * Mouse events input\n\t * @constructor\n\t * @extends Input\n\t */\n\tfunction MouseInput() {\n\t    this.evEl = MOUSE_ELEMENT_EVENTS;\n\t    this.evWin = MOUSE_WINDOW_EVENTS;\n\t\n\t    this.pressed = false; // mousedown state\n\t\n\t    Input.apply(this, arguments);\n\t}\n\t\n\tinherit(MouseInput, Input, {\n\t    /**\n\t     * handle mouse events\n\t     * @param {Object} ev\n\t     */\n\t    handler: function MEhandler(ev) {\n\t        var eventType = MOUSE_INPUT_MAP[ev.type];\n\t\n\t        // on start we want to have the left mouse button down\n\t        if (eventType & INPUT_START && ev.button === 0) {\n\t            this.pressed = true;\n\t        }\n\t\n\t        if (eventType & INPUT_MOVE && ev.which !== 1) {\n\t            eventType = INPUT_END;\n\t        }\n\t\n\t        // mouse must be down\n\t        if (!this.pressed) {\n\t            return;\n\t        }\n\t\n\t        if (eventType & INPUT_END) {\n\t            this.pressed = false;\n\t        }\n\t\n\t        this.callback(this.manager, eventType, {\n\t            pointers: [ev],\n\t            changedPointers: [ev],\n\t            pointerType: INPUT_TYPE_MOUSE,\n\t            srcEvent: ev\n\t        });\n\t    }\n\t});\n\t\n\tvar POINTER_INPUT_MAP = {\n\t    pointerdown: INPUT_START,\n\t    pointermove: INPUT_MOVE,\n\t    pointerup: INPUT_END,\n\t    pointercancel: INPUT_CANCEL,\n\t    pointerout: INPUT_CANCEL\n\t};\n\t\n\t// in IE10 the pointer types is defined as an enum\n\tvar IE10_POINTER_TYPE_ENUM = {\n\t    2: INPUT_TYPE_TOUCH,\n\t    3: INPUT_TYPE_PEN,\n\t    4: INPUT_TYPE_MOUSE,\n\t    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n\t};\n\t\n\tvar POINTER_ELEMENT_EVENTS = 'pointerdown';\n\tvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\t\n\t// IE10 has prefixed support, and case-sensitive\n\tif (window.MSPointerEvent && !window.PointerEvent) {\n\t    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n\t    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n\t}\n\t\n\t/**\n\t * Pointer events input\n\t * @constructor\n\t * @extends Input\n\t */\n\tfunction PointerEventInput() {\n\t    this.evEl = POINTER_ELEMENT_EVENTS;\n\t    this.evWin = POINTER_WINDOW_EVENTS;\n\t\n\t    Input.apply(this, arguments);\n\t\n\t    this.store = (this.manager.session.pointerEvents = []);\n\t}\n\t\n\tinherit(PointerEventInput, Input, {\n\t    /**\n\t     * handle mouse events\n\t     * @param {Object} ev\n\t     */\n\t    handler: function PEhandler(ev) {\n\t        var store = this.store;\n\t        var removePointer = false;\n\t\n\t        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n\t        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n\t        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\t\n\t        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\t\n\t        // get index of the event in the store\n\t        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\t\n\t        // start and mouse must be down\n\t        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n\t            if (storeIndex < 0) {\n\t                store.push(ev);\n\t                storeIndex = store.length - 1;\n\t            }\n\t        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n\t            removePointer = true;\n\t        }\n\t\n\t        // it not found, so the pointer hasn't been down (so it's probably a hover)\n\t        if (storeIndex < 0) {\n\t            return;\n\t        }\n\t\n\t        // update the event in the store\n\t        store[storeIndex] = ev;\n\t\n\t        this.callback(this.manager, eventType, {\n\t            pointers: store,\n\t            changedPointers: [ev],\n\t            pointerType: pointerType,\n\t            srcEvent: ev\n\t        });\n\t\n\t        if (removePointer) {\n\t            // remove from the store\n\t            store.splice(storeIndex, 1);\n\t        }\n\t    }\n\t});\n\t\n\tvar SINGLE_TOUCH_INPUT_MAP = {\n\t    touchstart: INPUT_START,\n\t    touchmove: INPUT_MOVE,\n\t    touchend: INPUT_END,\n\t    touchcancel: INPUT_CANCEL\n\t};\n\t\n\tvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\n\tvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\t\n\t/**\n\t * Touch events input\n\t * @constructor\n\t * @extends Input\n\t */\n\tfunction SingleTouchInput() {\n\t    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n\t    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n\t    this.started = false;\n\t\n\t    Input.apply(this, arguments);\n\t}\n\t\n\tinherit(SingleTouchInput, Input, {\n\t    handler: function TEhandler(ev) {\n\t        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\t\n\t        // should we handle the touch events?\n\t        if (type === INPUT_START) {\n\t            this.started = true;\n\t        }\n\t\n\t        if (!this.started) {\n\t            return;\n\t        }\n\t\n\t        var touches = normalizeSingleTouches.call(this, ev, type);\n\t\n\t        // when done, reset the started state\n\t        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n\t            this.started = false;\n\t        }\n\t\n\t        this.callback(this.manager, type, {\n\t            pointers: touches[0],\n\t            changedPointers: touches[1],\n\t            pointerType: INPUT_TYPE_TOUCH,\n\t            srcEvent: ev\n\t        });\n\t    }\n\t});\n\t\n\t/**\n\t * @this {TouchInput}\n\t * @param {Object} ev\n\t * @param {Number} type flag\n\t * @returns {undefined|Array} [all, changed]\n\t */\n\tfunction normalizeSingleTouches(ev, type) {\n\t    var all = toArray(ev.touches);\n\t    var changed = toArray(ev.changedTouches);\n\t\n\t    if (type & (INPUT_END | INPUT_CANCEL)) {\n\t        all = uniqueArray(all.concat(changed), 'identifier', true);\n\t    }\n\t\n\t    return [all, changed];\n\t}\n\t\n\tvar TOUCH_INPUT_MAP = {\n\t    touchstart: INPUT_START,\n\t    touchmove: INPUT_MOVE,\n\t    touchend: INPUT_END,\n\t    touchcancel: INPUT_CANCEL\n\t};\n\t\n\tvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\t\n\t/**\n\t * Multi-user touch events input\n\t * @constructor\n\t * @extends Input\n\t */\n\tfunction TouchInput() {\n\t    this.evTarget = TOUCH_TARGET_EVENTS;\n\t    this.targetIds = {};\n\t\n\t    Input.apply(this, arguments);\n\t}\n\t\n\tinherit(TouchInput, Input, {\n\t    handler: function MTEhandler(ev) {\n\t        var type = TOUCH_INPUT_MAP[ev.type];\n\t        var touches = getTouches.call(this, ev, type);\n\t        if (!touches) {\n\t            return;\n\t        }\n\t\n\t        this.callback(this.manager, type, {\n\t            pointers: touches[0],\n\t            changedPointers: touches[1],\n\t            pointerType: INPUT_TYPE_TOUCH,\n\t            srcEvent: ev\n\t        });\n\t    }\n\t});\n\t\n\t/**\n\t * @this {TouchInput}\n\t * @param {Object} ev\n\t * @param {Number} type flag\n\t * @returns {undefined|Array} [all, changed]\n\t */\n\tfunction getTouches(ev, type) {\n\t    var allTouches = toArray(ev.touches);\n\t    var targetIds = this.targetIds;\n\t\n\t    // when there is only one touch, the process can be simplified\n\t    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n\t        targetIds[allTouches[0].identifier] = true;\n\t        return [allTouches, allTouches];\n\t    }\n\t\n\t    var i,\n\t        targetTouches,\n\t        changedTouches = toArray(ev.changedTouches),\n\t        changedTargetTouches = [],\n\t        target = this.target;\n\t\n\t    // get target touches from touches\n\t    targetTouches = allTouches.filter(function(touch) {\n\t        return hasParent(touch.target, target);\n\t    });\n\t\n\t    // collect touches\n\t    if (type === INPUT_START) {\n\t        i = 0;\n\t        while (i < targetTouches.length) {\n\t            targetIds[targetTouches[i].identifier] = true;\n\t            i++;\n\t        }\n\t    }\n\t\n\t    // filter changed touches to only contain touches that exist in the collected target ids\n\t    i = 0;\n\t    while (i < changedTouches.length) {\n\t        if (targetIds[changedTouches[i].identifier]) {\n\t            changedTargetTouches.push(changedTouches[i]);\n\t        }\n\t\n\t        // cleanup removed touches\n\t        if (type & (INPUT_END | INPUT_CANCEL)) {\n\t            delete targetIds[changedTouches[i].identifier];\n\t        }\n\t        i++;\n\t    }\n\t\n\t    if (!changedTargetTouches.length) {\n\t        return;\n\t    }\n\t\n\t    return [\n\t        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n\t        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n\t        changedTargetTouches\n\t    ];\n\t}\n\t\n\t/**\n\t * Combined touch and mouse input\n\t *\n\t * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n\t * This because touch devices also emit mouse events while doing a touch.\n\t *\n\t * @constructor\n\t * @extends Input\n\t */\n\t\n\tvar DEDUP_TIMEOUT = 2500;\n\tvar DEDUP_DISTANCE = 25;\n\t\n\tfunction TouchMouseInput() {\n\t    Input.apply(this, arguments);\n\t\n\t    var handler = bindFn(this.handler, this);\n\t    this.touch = new TouchInput(this.manager, handler);\n\t    this.mouse = new MouseInput(this.manager, handler);\n\t\n\t    this.primaryTouch = null;\n\t    this.lastTouches = [];\n\t}\n\t\n\tinherit(TouchMouseInput, Input, {\n\t    /**\n\t     * handle mouse and touch events\n\t     * @param {Hammer} manager\n\t     * @param {String} inputEvent\n\t     * @param {Object} inputData\n\t     */\n\t    handler: function TMEhandler(manager, inputEvent, inputData) {\n\t        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n\t            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\t\n\t        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n\t            return;\n\t        }\n\t\n\t        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n\t        if (isTouch) {\n\t            recordTouches.call(this, inputEvent, inputData);\n\t        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n\t            return;\n\t        }\n\t\n\t        this.callback(manager, inputEvent, inputData);\n\t    },\n\t\n\t    /**\n\t     * remove the event listeners\n\t     */\n\t    destroy: function destroy() {\n\t        this.touch.destroy();\n\t        this.mouse.destroy();\n\t    }\n\t});\n\t\n\tfunction recordTouches(eventType, eventData) {\n\t    if (eventType & INPUT_START) {\n\t        this.primaryTouch = eventData.changedPointers[0].identifier;\n\t        setLastTouch.call(this, eventData);\n\t    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n\t        setLastTouch.call(this, eventData);\n\t    }\n\t}\n\t\n\tfunction setLastTouch(eventData) {\n\t    var touch = eventData.changedPointers[0];\n\t\n\t    if (touch.identifier === this.primaryTouch) {\n\t        var lastTouch = {x: touch.clientX, y: touch.clientY};\n\t        this.lastTouches.push(lastTouch);\n\t        var lts = this.lastTouches;\n\t        var removeLastTouch = function() {\n\t            var i = lts.indexOf(lastTouch);\n\t            if (i > -1) {\n\t                lts.splice(i, 1);\n\t            }\n\t        };\n\t        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n\t    }\n\t}\n\t\n\tfunction isSyntheticEvent(eventData) {\n\t    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n\t    for (var i = 0; i < this.lastTouches.length; i++) {\n\t        var t = this.lastTouches[i];\n\t        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n\t        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n\t            return true;\n\t        }\n\t    }\n\t    return false;\n\t}\n\t\n\tvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\n\tvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\t\n\t// magical touchAction value\n\tvar TOUCH_ACTION_COMPUTE = 'compute';\n\tvar TOUCH_ACTION_AUTO = 'auto';\n\tvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\n\tvar TOUCH_ACTION_NONE = 'none';\n\tvar TOUCH_ACTION_PAN_X = 'pan-x';\n\tvar TOUCH_ACTION_PAN_Y = 'pan-y';\n\tvar TOUCH_ACTION_MAP = getTouchActionProps();\n\t\n\t/**\n\t * Touch Action\n\t * sets the touchAction property or uses the js alternative\n\t * @param {Manager} manager\n\t * @param {String} value\n\t * @constructor\n\t */\n\tfunction TouchAction(manager, value) {\n\t    this.manager = manager;\n\t    this.set(value);\n\t}\n\t\n\tTouchAction.prototype = {\n\t    /**\n\t     * set the touchAction value on the element or enable the polyfill\n\t     * @param {String} value\n\t     */\n\t    set: function(value) {\n\t        // find out the touch-action by the event handlers\n\t        if (value == TOUCH_ACTION_COMPUTE) {\n\t            value = this.compute();\n\t        }\n\t\n\t        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n\t            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n\t        }\n\t        this.actions = value.toLowerCase().trim();\n\t    },\n\t\n\t    /**\n\t     * just re-set the touchAction value\n\t     */\n\t    update: function() {\n\t        this.set(this.manager.options.touchAction);\n\t    },\n\t\n\t    /**\n\t     * compute the value for the touchAction property based on the recognizer's settings\n\t     * @returns {String} value\n\t     */\n\t    compute: function() {\n\t        var actions = [];\n\t        each(this.manager.recognizers, function(recognizer) {\n\t            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n\t                actions = actions.concat(recognizer.getTouchAction());\n\t            }\n\t        });\n\t        return cleanTouchActions(actions.join(' '));\n\t    },\n\t\n\t    /**\n\t     * this method is called on each input cycle and provides the preventing of the browser behavior\n\t     * @param {Object} input\n\t     */\n\t    preventDefaults: function(input) {\n\t        var srcEvent = input.srcEvent;\n\t        var direction = input.offsetDirection;\n\t\n\t        // if the touch action did prevented once this session\n\t        if (this.manager.session.prevented) {\n\t            srcEvent.preventDefault();\n\t            return;\n\t        }\n\t\n\t        var actions = this.actions;\n\t        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n\t        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n\t        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\t\n\t        if (hasNone) {\n\t            //do not prevent defaults if this is a tap gesture\n\t\n\t            var isTapPointer = input.pointers.length === 1;\n\t            var isTapMovement = input.distance < 2;\n\t            var isTapTouchTime = input.deltaTime < 250;\n\t\n\t            if (isTapPointer && isTapMovement && isTapTouchTime) {\n\t                return;\n\t            }\n\t        }\n\t\n\t        if (hasPanX && hasPanY) {\n\t            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n\t            return;\n\t        }\n\t\n\t        if (hasNone ||\n\t            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n\t            (hasPanX && direction & DIRECTION_VERTICAL)) {\n\t            return this.preventSrc(srcEvent);\n\t        }\n\t    },\n\t\n\t    /**\n\t     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n\t     * @param {Object} srcEvent\n\t     */\n\t    preventSrc: function(srcEvent) {\n\t        this.manager.session.prevented = true;\n\t        srcEvent.preventDefault();\n\t    }\n\t};\n\t\n\t/**\n\t * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n\t * @param {String} actions\n\t * @returns {*}\n\t */\n\tfunction cleanTouchActions(actions) {\n\t    // none\n\t    if (inStr(actions, TOUCH_ACTION_NONE)) {\n\t        return TOUCH_ACTION_NONE;\n\t    }\n\t\n\t    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n\t    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\t\n\t    // if both pan-x and pan-y are set (different recognizers\n\t    // for different directions, e.g. horizontal pan but vertical swipe?)\n\t    // we need none (as otherwise with pan-x pan-y combined none of these\n\t    // recognizers will work, since the browser would handle all panning\n\t    if (hasPanX && hasPanY) {\n\t        return TOUCH_ACTION_NONE;\n\t    }\n\t\n\t    // pan-x OR pan-y\n\t    if (hasPanX || hasPanY) {\n\t        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n\t    }\n\t\n\t    // manipulation\n\t    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n\t        return TOUCH_ACTION_MANIPULATION;\n\t    }\n\t\n\t    return TOUCH_ACTION_AUTO;\n\t}\n\t\n\tfunction getTouchActionProps() {\n\t    if (!NATIVE_TOUCH_ACTION) {\n\t        return false;\n\t    }\n\t    var touchMap = {};\n\t    var cssSupports = window.CSS && window.CSS.supports;\n\t    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\t\n\t        // If css.supports is not supported but there is native touch-action assume it supports\n\t        // all values. This is the case for IE 10 and 11.\n\t        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n\t    });\n\t    return touchMap;\n\t}\n\t\n\t/**\n\t * Recognizer flow explained; *\n\t * All recognizers have the initial state of POSSIBLE when a input session starts.\n\t * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n\t * Example session for mouse-input: mousedown -> mousemove -> mouseup\n\t *\n\t * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n\t * which determines with state it should be.\n\t *\n\t * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n\t * POSSIBLE to give it another change on the next cycle.\n\t *\n\t *               Possible\n\t *                  |\n\t *            +-----+---------------+\n\t *            |                     |\n\t *      +-----+-----+               |\n\t *      |           |               |\n\t *   Failed      Cancelled          |\n\t *                          +-------+------+\n\t *                          |              |\n\t *                      Recognized       Began\n\t *                                         |\n\t *                                      Changed\n\t *                                         |\n\t *                                  Ended/Recognized\n\t */\n\tvar STATE_POSSIBLE = 1;\n\tvar STATE_BEGAN = 2;\n\tvar STATE_CHANGED = 4;\n\tvar STATE_ENDED = 8;\n\tvar STATE_RECOGNIZED = STATE_ENDED;\n\tvar STATE_CANCELLED = 16;\n\tvar STATE_FAILED = 32;\n\t\n\t/**\n\t * Recognizer\n\t * Every recognizer needs to extend from this class.\n\t * @constructor\n\t * @param {Object} options\n\t */\n\tfunction Recognizer(options) {\n\t    this.options = assign({}, this.defaults, options || {});\n\t\n\t    this.id = uniqueId();\n\t\n\t    this.manager = null;\n\t\n\t    // default is enable true\n\t    this.options.enable = ifUndefined(this.options.enable, true);\n\t\n\t    this.state = STATE_POSSIBLE;\n\t\n\t    this.simultaneous = {};\n\t    this.requireFail = [];\n\t}\n\t\n\tRecognizer.prototype = {\n\t    /**\n\t     * @virtual\n\t     * @type {Object}\n\t     */\n\t    defaults: {},\n\t\n\t    /**\n\t     * set options\n\t     * @param {Object} options\n\t     * @return {Recognizer}\n\t     */\n\t    set: function(options) {\n\t        assign(this.options, options);\n\t\n\t        // also update the touchAction, in case something changed about the directions/enabled state\n\t        this.manager && this.manager.touchAction.update();\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * recognize simultaneous with an other recognizer.\n\t     * @param {Recognizer} otherRecognizer\n\t     * @returns {Recognizer} this\n\t     */\n\t    recognizeWith: function(otherRecognizer) {\n\t        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n\t            return this;\n\t        }\n\t\n\t        var simultaneous = this.simultaneous;\n\t        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\t        if (!simultaneous[otherRecognizer.id]) {\n\t            simultaneous[otherRecognizer.id] = otherRecognizer;\n\t            otherRecognizer.recognizeWith(this);\n\t        }\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n\t     * @param {Recognizer} otherRecognizer\n\t     * @returns {Recognizer} this\n\t     */\n\t    dropRecognizeWith: function(otherRecognizer) {\n\t        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n\t            return this;\n\t        }\n\t\n\t        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\t        delete this.simultaneous[otherRecognizer.id];\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * recognizer can only run when an other is failing\n\t     * @param {Recognizer} otherRecognizer\n\t     * @returns {Recognizer} this\n\t     */\n\t    requireFailure: function(otherRecognizer) {\n\t        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n\t            return this;\n\t        }\n\t\n\t        var requireFail = this.requireFail;\n\t        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\t        if (inArray(requireFail, otherRecognizer) === -1) {\n\t            requireFail.push(otherRecognizer);\n\t            otherRecognizer.requireFailure(this);\n\t        }\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * drop the requireFailure link. it does not remove the link on the other recognizer.\n\t     * @param {Recognizer} otherRecognizer\n\t     * @returns {Recognizer} this\n\t     */\n\t    dropRequireFailure: function(otherRecognizer) {\n\t        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n\t            return this;\n\t        }\n\t\n\t        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\t        var index = inArray(this.requireFail, otherRecognizer);\n\t        if (index > -1) {\n\t            this.requireFail.splice(index, 1);\n\t        }\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * has require failures boolean\n\t     * @returns {boolean}\n\t     */\n\t    hasRequireFailures: function() {\n\t        return this.requireFail.length > 0;\n\t    },\n\t\n\t    /**\n\t     * if the recognizer can recognize simultaneous with an other recognizer\n\t     * @param {Recognizer} otherRecognizer\n\t     * @returns {Boolean}\n\t     */\n\t    canRecognizeWith: function(otherRecognizer) {\n\t        return !!this.simultaneous[otherRecognizer.id];\n\t    },\n\t\n\t    /**\n\t     * You should use `tryEmit` instead of `emit` directly to check\n\t     * that all the needed recognizers has failed before emitting.\n\t     * @param {Object} input\n\t     */\n\t    emit: function(input) {\n\t        var self = this;\n\t        var state = this.state;\n\t\n\t        function emit(event) {\n\t            self.manager.emit(event, input);\n\t        }\n\t\n\t        // 'panstart' and 'panmove'\n\t        if (state < STATE_ENDED) {\n\t            emit(self.options.event + stateStr(state));\n\t        }\n\t\n\t        emit(self.options.event); // simple 'eventName' events\n\t\n\t        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n\t            emit(input.additionalEvent);\n\t        }\n\t\n\t        // panend and pancancel\n\t        if (state >= STATE_ENDED) {\n\t            emit(self.options.event + stateStr(state));\n\t        }\n\t    },\n\t\n\t    /**\n\t     * Check that all the require failure recognizers has failed,\n\t     * if true, it emits a gesture event,\n\t     * otherwise, setup the state to FAILED.\n\t     * @param {Object} input\n\t     */\n\t    tryEmit: function(input) {\n\t        if (this.canEmit()) {\n\t            return this.emit(input);\n\t        }\n\t        // it's failing anyway\n\t        this.state = STATE_FAILED;\n\t    },\n\t\n\t    /**\n\t     * can we emit?\n\t     * @returns {boolean}\n\t     */\n\t    canEmit: function() {\n\t        var i = 0;\n\t        while (i < this.requireFail.length) {\n\t            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n\t                return false;\n\t            }\n\t            i++;\n\t        }\n\t        return true;\n\t    },\n\t\n\t    /**\n\t     * update the recognizer\n\t     * @param {Object} inputData\n\t     */\n\t    recognize: function(inputData) {\n\t        // make a new copy of the inputData\n\t        // so we can change the inputData without messing up the other recognizers\n\t        var inputDataClone = assign({}, inputData);\n\t\n\t        // is is enabled and allow recognizing?\n\t        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n\t            this.reset();\n\t            this.state = STATE_FAILED;\n\t            return;\n\t        }\n\t\n\t        // reset when we've reached the end\n\t        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n\t            this.state = STATE_POSSIBLE;\n\t        }\n\t\n\t        this.state = this.process(inputDataClone);\n\t\n\t        // the recognizer has recognized a gesture\n\t        // so trigger an event\n\t        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n\t            this.tryEmit(inputDataClone);\n\t        }\n\t    },\n\t\n\t    /**\n\t     * return the state of the recognizer\n\t     * the actual recognizing happens in this method\n\t     * @virtual\n\t     * @param {Object} inputData\n\t     * @returns {Const} STATE\n\t     */\n\t    process: function(inputData) { }, // jshint ignore:line\n\t\n\t    /**\n\t     * return the preferred touch-action\n\t     * @virtual\n\t     * @returns {Array}\n\t     */\n\t    getTouchAction: function() { },\n\t\n\t    /**\n\t     * called when the gesture isn't allowed to recognize\n\t     * like when another is being recognized or it is disabled\n\t     * @virtual\n\t     */\n\t    reset: function() { }\n\t};\n\t\n\t/**\n\t * get a usable string, used as event postfix\n\t * @param {Const} state\n\t * @returns {String} state\n\t */\n\tfunction stateStr(state) {\n\t    if (state & STATE_CANCELLED) {\n\t        return 'cancel';\n\t    } else if (state & STATE_ENDED) {\n\t        return 'end';\n\t    } else if (state & STATE_CHANGED) {\n\t        return 'move';\n\t    } else if (state & STATE_BEGAN) {\n\t        return 'start';\n\t    }\n\t    return '';\n\t}\n\t\n\t/**\n\t * direction cons to string\n\t * @param {Const} direction\n\t * @returns {String}\n\t */\n\tfunction directionStr(direction) {\n\t    if (direction == DIRECTION_DOWN) {\n\t        return 'down';\n\t    } else if (direction == DIRECTION_UP) {\n\t        return 'up';\n\t    } else if (direction == DIRECTION_LEFT) {\n\t        return 'left';\n\t    } else if (direction == DIRECTION_RIGHT) {\n\t        return 'right';\n\t    }\n\t    return '';\n\t}\n\t\n\t/**\n\t * get a recognizer by name if it is bound to a manager\n\t * @param {Recognizer|String} otherRecognizer\n\t * @param {Recognizer} recognizer\n\t * @returns {Recognizer}\n\t */\n\tfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n\t    var manager = recognizer.manager;\n\t    if (manager) {\n\t        return manager.get(otherRecognizer);\n\t    }\n\t    return otherRecognizer;\n\t}\n\t\n\t/**\n\t * This recognizer is just used as a base for the simple attribute recognizers.\n\t * @constructor\n\t * @extends Recognizer\n\t */\n\tfunction AttrRecognizer() {\n\t    Recognizer.apply(this, arguments);\n\t}\n\t\n\tinherit(AttrRecognizer, Recognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof AttrRecognizer\n\t     */\n\t    defaults: {\n\t        /**\n\t         * @type {Number}\n\t         * @default 1\n\t         */\n\t        pointers: 1\n\t    },\n\t\n\t    /**\n\t     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n\t     * @memberof AttrRecognizer\n\t     * @param {Object} input\n\t     * @returns {Boolean} recognized\n\t     */\n\t    attrTest: function(input) {\n\t        var optionPointers = this.options.pointers;\n\t        return optionPointers === 0 || input.pointers.length === optionPointers;\n\t    },\n\t\n\t    /**\n\t     * Process the input and return the state for the recognizer\n\t     * @memberof AttrRecognizer\n\t     * @param {Object} input\n\t     * @returns {*} State\n\t     */\n\t    process: function(input) {\n\t        var state = this.state;\n\t        var eventType = input.eventType;\n\t\n\t        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n\t        var isValid = this.attrTest(input);\n\t\n\t        // on cancel input and we've recognized before, return STATE_CANCELLED\n\t        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n\t            return state | STATE_CANCELLED;\n\t        } else if (isRecognized || isValid) {\n\t            if (eventType & INPUT_END) {\n\t                return state | STATE_ENDED;\n\t            } else if (!(state & STATE_BEGAN)) {\n\t                return STATE_BEGAN;\n\t            }\n\t            return state | STATE_CHANGED;\n\t        }\n\t        return STATE_FAILED;\n\t    }\n\t});\n\t\n\t/**\n\t * Pan\n\t * Recognized when the pointer is down and moved in the allowed direction.\n\t * @constructor\n\t * @extends AttrRecognizer\n\t */\n\tfunction PanRecognizer() {\n\t    AttrRecognizer.apply(this, arguments);\n\t\n\t    this.pX = null;\n\t    this.pY = null;\n\t}\n\t\n\tinherit(PanRecognizer, AttrRecognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof PanRecognizer\n\t     */\n\t    defaults: {\n\t        event: 'pan',\n\t        threshold: 10,\n\t        pointers: 1,\n\t        direction: DIRECTION_ALL\n\t    },\n\t\n\t    getTouchAction: function() {\n\t        var direction = this.options.direction;\n\t        var actions = [];\n\t        if (direction & DIRECTION_HORIZONTAL) {\n\t            actions.push(TOUCH_ACTION_PAN_Y);\n\t        }\n\t        if (direction & DIRECTION_VERTICAL) {\n\t            actions.push(TOUCH_ACTION_PAN_X);\n\t        }\n\t        return actions;\n\t    },\n\t\n\t    directionTest: function(input) {\n\t        var options = this.options;\n\t        var hasMoved = true;\n\t        var distance = input.distance;\n\t        var direction = input.direction;\n\t        var x = input.deltaX;\n\t        var y = input.deltaY;\n\t\n\t        // lock to axis?\n\t        if (!(direction & options.direction)) {\n\t            if (options.direction & DIRECTION_HORIZONTAL) {\n\t                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n\t                hasMoved = x != this.pX;\n\t                distance = Math.abs(input.deltaX);\n\t            } else {\n\t                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n\t                hasMoved = y != this.pY;\n\t                distance = Math.abs(input.deltaY);\n\t            }\n\t        }\n\t        input.direction = direction;\n\t        return hasMoved && distance > options.threshold && direction & options.direction;\n\t    },\n\t\n\t    attrTest: function(input) {\n\t        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n\t            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n\t    },\n\t\n\t    emit: function(input) {\n\t\n\t        this.pX = input.deltaX;\n\t        this.pY = input.deltaY;\n\t\n\t        var direction = directionStr(input.direction);\n\t\n\t        if (direction) {\n\t            input.additionalEvent = this.options.event + direction;\n\t        }\n\t        this._super.emit.call(this, input);\n\t    }\n\t});\n\t\n\t/**\n\t * Pinch\n\t * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n\t * @constructor\n\t * @extends AttrRecognizer\n\t */\n\tfunction PinchRecognizer() {\n\t    AttrRecognizer.apply(this, arguments);\n\t}\n\t\n\tinherit(PinchRecognizer, AttrRecognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof PinchRecognizer\n\t     */\n\t    defaults: {\n\t        event: 'pinch',\n\t        threshold: 0,\n\t        pointers: 2\n\t    },\n\t\n\t    getTouchAction: function() {\n\t        return [TOUCH_ACTION_NONE];\n\t    },\n\t\n\t    attrTest: function(input) {\n\t        return this._super.attrTest.call(this, input) &&\n\t            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n\t    },\n\t\n\t    emit: function(input) {\n\t        if (input.scale !== 1) {\n\t            var inOut = input.scale < 1 ? 'in' : 'out';\n\t            input.additionalEvent = this.options.event + inOut;\n\t        }\n\t        this._super.emit.call(this, input);\n\t    }\n\t});\n\t\n\t/**\n\t * Press\n\t * Recognized when the pointer is down for x ms without any movement.\n\t * @constructor\n\t * @extends Recognizer\n\t */\n\tfunction PressRecognizer() {\n\t    Recognizer.apply(this, arguments);\n\t\n\t    this._timer = null;\n\t    this._input = null;\n\t}\n\t\n\tinherit(PressRecognizer, Recognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof PressRecognizer\n\t     */\n\t    defaults: {\n\t        event: 'press',\n\t        pointers: 1,\n\t        time: 251, // minimal time of the pointer to be pressed\n\t        threshold: 9 // a minimal movement is ok, but keep it low\n\t    },\n\t\n\t    getTouchAction: function() {\n\t        return [TOUCH_ACTION_AUTO];\n\t    },\n\t\n\t    process: function(input) {\n\t        var options = this.options;\n\t        var validPointers = input.pointers.length === options.pointers;\n\t        var validMovement = input.distance < options.threshold;\n\t        var validTime = input.deltaTime > options.time;\n\t\n\t        this._input = input;\n\t\n\t        // we only allow little movement\n\t        // and we've reached an end event, so a tap is possible\n\t        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n\t            this.reset();\n\t        } else if (input.eventType & INPUT_START) {\n\t            this.reset();\n\t            this._timer = setTimeoutContext(function() {\n\t                this.state = STATE_RECOGNIZED;\n\t                this.tryEmit();\n\t            }, options.time, this);\n\t        } else if (input.eventType & INPUT_END) {\n\t            return STATE_RECOGNIZED;\n\t        }\n\t        return STATE_FAILED;\n\t    },\n\t\n\t    reset: function() {\n\t        clearTimeout(this._timer);\n\t    },\n\t\n\t    emit: function(input) {\n\t        if (this.state !== STATE_RECOGNIZED) {\n\t            return;\n\t        }\n\t\n\t        if (input && (input.eventType & INPUT_END)) {\n\t            this.manager.emit(this.options.event + 'up', input);\n\t        } else {\n\t            this._input.timeStamp = now();\n\t            this.manager.emit(this.options.event, this._input);\n\t        }\n\t    }\n\t});\n\t\n\t/**\n\t * Rotate\n\t * Recognized when two or more pointer are moving in a circular motion.\n\t * @constructor\n\t * @extends AttrRecognizer\n\t */\n\tfunction RotateRecognizer() {\n\t    AttrRecognizer.apply(this, arguments);\n\t}\n\t\n\tinherit(RotateRecognizer, AttrRecognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof RotateRecognizer\n\t     */\n\t    defaults: {\n\t        event: 'rotate',\n\t        threshold: 0,\n\t        pointers: 2\n\t    },\n\t\n\t    getTouchAction: function() {\n\t        return [TOUCH_ACTION_NONE];\n\t    },\n\t\n\t    attrTest: function(input) {\n\t        return this._super.attrTest.call(this, input) &&\n\t            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n\t    }\n\t});\n\t\n\t/**\n\t * Swipe\n\t * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n\t * @constructor\n\t * @extends AttrRecognizer\n\t */\n\tfunction SwipeRecognizer() {\n\t    AttrRecognizer.apply(this, arguments);\n\t}\n\t\n\tinherit(SwipeRecognizer, AttrRecognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof SwipeRecognizer\n\t     */\n\t    defaults: {\n\t        event: 'swipe',\n\t        threshold: 10,\n\t        velocity: 0.3,\n\t        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n\t        pointers: 1\n\t    },\n\t\n\t    getTouchAction: function() {\n\t        return PanRecognizer.prototype.getTouchAction.call(this);\n\t    },\n\t\n\t    attrTest: function(input) {\n\t        var direction = this.options.direction;\n\t        var velocity;\n\t\n\t        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n\t            velocity = input.overallVelocity;\n\t        } else if (direction & DIRECTION_HORIZONTAL) {\n\t            velocity = input.overallVelocityX;\n\t        } else if (direction & DIRECTION_VERTICAL) {\n\t            velocity = input.overallVelocityY;\n\t        }\n\t\n\t        return this._super.attrTest.call(this, input) &&\n\t            direction & input.offsetDirection &&\n\t            input.distance > this.options.threshold &&\n\t            input.maxPointers == this.options.pointers &&\n\t            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n\t    },\n\t\n\t    emit: function(input) {\n\t        var direction = directionStr(input.offsetDirection);\n\t        if (direction) {\n\t            this.manager.emit(this.options.event + direction, input);\n\t        }\n\t\n\t        this.manager.emit(this.options.event, input);\n\t    }\n\t});\n\t\n\t/**\n\t * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n\t * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n\t * a single tap.\n\t *\n\t * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n\t * multi-taps being recognized.\n\t * @constructor\n\t * @extends Recognizer\n\t */\n\tfunction TapRecognizer() {\n\t    Recognizer.apply(this, arguments);\n\t\n\t    // previous time and center,\n\t    // used for tap counting\n\t    this.pTime = false;\n\t    this.pCenter = false;\n\t\n\t    this._timer = null;\n\t    this._input = null;\n\t    this.count = 0;\n\t}\n\t\n\tinherit(TapRecognizer, Recognizer, {\n\t    /**\n\t     * @namespace\n\t     * @memberof PinchRecognizer\n\t     */\n\t    defaults: {\n\t        event: 'tap',\n\t        pointers: 1,\n\t        taps: 1,\n\t        interval: 300, // max time between the multi-tap taps\n\t        time: 250, // max time of the pointer to be down (like finger on the screen)\n\t        threshold: 9, // a minimal movement is ok, but keep it low\n\t        posThreshold: 10 // a multi-tap can be a bit off the initial position\n\t    },\n\t\n\t    getTouchAction: function() {\n\t        return [TOUCH_ACTION_MANIPULATION];\n\t    },\n\t\n\t    process: function(input) {\n\t        var options = this.options;\n\t\n\t        var validPointers = input.pointers.length === options.pointers;\n\t        var validMovement = input.distance < options.threshold;\n\t        var validTouchTime = input.deltaTime < options.time;\n\t\n\t        this.reset();\n\t\n\t        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n\t            return this.failTimeout();\n\t        }\n\t\n\t        // we only allow little movement\n\t        // and we've reached an end event, so a tap is possible\n\t        if (validMovement && validTouchTime && validPointers) {\n\t            if (input.eventType != INPUT_END) {\n\t                return this.failTimeout();\n\t            }\n\t\n\t            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n\t            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\t\n\t            this.pTime = input.timeStamp;\n\t            this.pCenter = input.center;\n\t\n\t            if (!validMultiTap || !validInterval) {\n\t                this.count = 1;\n\t            } else {\n\t                this.count += 1;\n\t            }\n\t\n\t            this._input = input;\n\t\n\t            // if tap count matches we have recognized it,\n\t            // else it has began recognizing...\n\t            var tapCount = this.count % options.taps;\n\t            if (tapCount === 0) {\n\t                // no failing requirements, immediately trigger the tap event\n\t                // or wait as long as the multitap interval to trigger\n\t                if (!this.hasRequireFailures()) {\n\t                    return STATE_RECOGNIZED;\n\t                } else {\n\t                    this._timer = setTimeoutContext(function() {\n\t                        this.state = STATE_RECOGNIZED;\n\t                        this.tryEmit();\n\t                    }, options.interval, this);\n\t                    return STATE_BEGAN;\n\t                }\n\t            }\n\t        }\n\t        return STATE_FAILED;\n\t    },\n\t\n\t    failTimeout: function() {\n\t        this._timer = setTimeoutContext(function() {\n\t            this.state = STATE_FAILED;\n\t        }, this.options.interval, this);\n\t        return STATE_FAILED;\n\t    },\n\t\n\t    reset: function() {\n\t        clearTimeout(this._timer);\n\t    },\n\t\n\t    emit: function() {\n\t        if (this.state == STATE_RECOGNIZED) {\n\t            this._input.tapCount = this.count;\n\t            this.manager.emit(this.options.event, this._input);\n\t        }\n\t    }\n\t});\n\t\n\t/**\n\t * Simple way to create a manager with a default set of recognizers.\n\t * @param {HTMLElement} element\n\t * @param {Object} [options]\n\t * @constructor\n\t */\n\tfunction Hammer(element, options) {\n\t    options = options || {};\n\t    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n\t    return new Manager(element, options);\n\t}\n\t\n\t/**\n\t * @const {string}\n\t */\n\tHammer.VERSION = '2.0.7';\n\t\n\t/**\n\t * default settings\n\t * @namespace\n\t */\n\tHammer.defaults = {\n\t    /**\n\t     * set if DOM events are being triggered.\n\t     * But this is slower and unused by simple implementations, so disabled by default.\n\t     * @type {Boolean}\n\t     * @default false\n\t     */\n\t    domEvents: false,\n\t\n\t    /**\n\t     * The value for the touchAction property/fallback.\n\t     * When set to `compute` it will magically set the correct value based on the added recognizers.\n\t     * @type {String}\n\t     * @default compute\n\t     */\n\t    touchAction: TOUCH_ACTION_COMPUTE,\n\t\n\t    /**\n\t     * @type {Boolean}\n\t     * @default true\n\t     */\n\t    enable: true,\n\t\n\t    /**\n\t     * EXPERIMENTAL FEATURE -- can be removed/changed\n\t     * Change the parent input target element.\n\t     * If Null, then it is being set the to main element.\n\t     * @type {Null|EventTarget}\n\t     * @default null\n\t     */\n\t    inputTarget: null,\n\t\n\t    /**\n\t     * force an input class\n\t     * @type {Null|Function}\n\t     * @default null\n\t     */\n\t    inputClass: null,\n\t\n\t    /**\n\t     * Default recognizer setup when calling `Hammer()`\n\t     * When creating a new Manager these will be skipped.\n\t     * @type {Array}\n\t     */\n\t    preset: [\n\t        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n\t        [RotateRecognizer, {enable: false}],\n\t        [PinchRecognizer, {enable: false}, ['rotate']],\n\t        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n\t        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n\t        [TapRecognizer],\n\t        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n\t        [PressRecognizer]\n\t    ],\n\t\n\t    /**\n\t     * Some CSS properties can be used to improve the working of Hammer.\n\t     * Add them to this method and they will be set when creating a new Manager.\n\t     * @namespace\n\t     */\n\t    cssProps: {\n\t        /**\n\t         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n\t         * @type {String}\n\t         * @default 'none'\n\t         */\n\t        userSelect: 'none',\n\t\n\t        /**\n\t         * Disable the Windows Phone grippers when pressing an element.\n\t         * @type {String}\n\t         * @default 'none'\n\t         */\n\t        touchSelect: 'none',\n\t\n\t        /**\n\t         * Disables the default callout shown when you touch and hold a touch target.\n\t         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n\t         * a callout containing information about the link. This property allows you to disable that callout.\n\t         * @type {String}\n\t         * @default 'none'\n\t         */\n\t        touchCallout: 'none',\n\t\n\t        /**\n\t         * Specifies whether zooming is enabled. Used by IE10>\n\t         * @type {String}\n\t         * @default 'none'\n\t         */\n\t        contentZooming: 'none',\n\t\n\t        /**\n\t         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n\t         * @type {String}\n\t         * @default 'none'\n\t         */\n\t        userDrag: 'none',\n\t\n\t        /**\n\t         * Overrides the highlight color shown when the user taps a link or a JavaScript\n\t         * clickable element in iOS. This property obeys the alpha value, if specified.\n\t         * @type {String}\n\t         * @default 'rgba(0,0,0,0)'\n\t         */\n\t        tapHighlightColor: 'rgba(0,0,0,0)'\n\t    }\n\t};\n\t\n\tvar STOP = 1;\n\tvar FORCED_STOP = 2;\n\t\n\t/**\n\t * Manager\n\t * @param {HTMLElement} element\n\t * @param {Object} [options]\n\t * @constructor\n\t */\n\tfunction Manager(element, options) {\n\t    this.options = assign({}, Hammer.defaults, options || {});\n\t\n\t    this.options.inputTarget = this.options.inputTarget || element;\n\t\n\t    this.handlers = {};\n\t    this.session = {};\n\t    this.recognizers = [];\n\t    this.oldCssProps = {};\n\t\n\t    this.element = element;\n\t    this.input = createInputInstance(this);\n\t    this.touchAction = new TouchAction(this, this.options.touchAction);\n\t\n\t    toggleCssProps(this, true);\n\t\n\t    each(this.options.recognizers, function(item) {\n\t        var recognizer = this.add(new (item[0])(item[1]));\n\t        item[2] && recognizer.recognizeWith(item[2]);\n\t        item[3] && recognizer.requireFailure(item[3]);\n\t    }, this);\n\t}\n\t\n\tManager.prototype = {\n\t    /**\n\t     * set options\n\t     * @param {Object} options\n\t     * @returns {Manager}\n\t     */\n\t    set: function(options) {\n\t        assign(this.options, options);\n\t\n\t        // Options that need a little more setup\n\t        if (options.touchAction) {\n\t            this.touchAction.update();\n\t        }\n\t        if (options.inputTarget) {\n\t            // Clean up existing event listeners and reinitialize\n\t            this.input.destroy();\n\t            this.input.target = options.inputTarget;\n\t            this.input.init();\n\t        }\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * stop recognizing for this session.\n\t     * This session will be discarded, when a new [input]start event is fired.\n\t     * When forced, the recognizer cycle is stopped immediately.\n\t     * @param {Boolean} [force]\n\t     */\n\t    stop: function(force) {\n\t        this.session.stopped = force ? FORCED_STOP : STOP;\n\t    },\n\t\n\t    /**\n\t     * run the recognizers!\n\t     * called by the inputHandler function on every movement of the pointers (touches)\n\t     * it walks through all the recognizers and tries to detect the gesture that is being made\n\t     * @param {Object} inputData\n\t     */\n\t    recognize: function(inputData) {\n\t        var session = this.session;\n\t        if (session.stopped) {\n\t            return;\n\t        }\n\t\n\t        // run the touch-action polyfill\n\t        this.touchAction.preventDefaults(inputData);\n\t\n\t        var recognizer;\n\t        var recognizers = this.recognizers;\n\t\n\t        // this holds the recognizer that is being recognized.\n\t        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n\t        // if no recognizer is detecting a thing, it is set to `null`\n\t        var curRecognizer = session.curRecognizer;\n\t\n\t        // reset when the last recognizer is recognized\n\t        // or when we're in a new session\n\t        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n\t            curRecognizer = session.curRecognizer = null;\n\t        }\n\t\n\t        var i = 0;\n\t        while (i < recognizers.length) {\n\t            recognizer = recognizers[i];\n\t\n\t            // find out if we are allowed try to recognize the input for this one.\n\t            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n\t            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n\t            //      that is being recognized.\n\t            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n\t            //      this can be setup with the `recognizeWith()` method on the recognizer.\n\t            if (session.stopped !== FORCED_STOP && ( // 1\n\t                    !curRecognizer || recognizer == curRecognizer || // 2\n\t                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n\t                recognizer.recognize(inputData);\n\t            } else {\n\t                recognizer.reset();\n\t            }\n\t\n\t            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n\t            // current active recognizer. but only if we don't already have an active recognizer\n\t            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n\t                curRecognizer = session.curRecognizer = recognizer;\n\t            }\n\t            i++;\n\t        }\n\t    },\n\t\n\t    /**\n\t     * get a recognizer by its event name.\n\t     * @param {Recognizer|String} recognizer\n\t     * @returns {Recognizer|Null}\n\t     */\n\t    get: function(recognizer) {\n\t        if (recognizer instanceof Recognizer) {\n\t            return recognizer;\n\t        }\n\t\n\t        var recognizers = this.recognizers;\n\t        for (var i = 0; i < recognizers.length; i++) {\n\t            if (recognizers[i].options.event == recognizer) {\n\t                return recognizers[i];\n\t            }\n\t        }\n\t        return null;\n\t    },\n\t\n\t    /**\n\t     * add a recognizer to the manager\n\t     * existing recognizers with the same event name will be removed\n\t     * @param {Recognizer} recognizer\n\t     * @returns {Recognizer|Manager}\n\t     */\n\t    add: function(recognizer) {\n\t        if (invokeArrayArg(recognizer, 'add', this)) {\n\t            return this;\n\t        }\n\t\n\t        // remove existing\n\t        var existing = this.get(recognizer.options.event);\n\t        if (existing) {\n\t            this.remove(existing);\n\t        }\n\t\n\t        this.recognizers.push(recognizer);\n\t        recognizer.manager = this;\n\t\n\t        this.touchAction.update();\n\t        return recognizer;\n\t    },\n\t\n\t    /**\n\t     * remove a recognizer by name or instance\n\t     * @param {Recognizer|String} recognizer\n\t     * @returns {Manager}\n\t     */\n\t    remove: function(recognizer) {\n\t        if (invokeArrayArg(recognizer, 'remove', this)) {\n\t            return this;\n\t        }\n\t\n\t        recognizer = this.get(recognizer);\n\t\n\t        // let's make sure this recognizer exists\n\t        if (recognizer) {\n\t            var recognizers = this.recognizers;\n\t            var index = inArray(recognizers, recognizer);\n\t\n\t            if (index !== -1) {\n\t                recognizers.splice(index, 1);\n\t                this.touchAction.update();\n\t            }\n\t        }\n\t\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * bind event\n\t     * @param {String} events\n\t     * @param {Function} handler\n\t     * @returns {EventEmitter} this\n\t     */\n\t    on: function(events, handler) {\n\t        if (events === undefined) {\n\t            return;\n\t        }\n\t        if (handler === undefined) {\n\t            return;\n\t        }\n\t\n\t        var handlers = this.handlers;\n\t        each(splitStr(events), function(event) {\n\t            handlers[event] = handlers[event] || [];\n\t            handlers[event].push(handler);\n\t        });\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * unbind event, leave emit blank to remove all handlers\n\t     * @param {String} events\n\t     * @param {Function} [handler]\n\t     * @returns {EventEmitter} this\n\t     */\n\t    off: function(events, handler) {\n\t        if (events === undefined) {\n\t            return;\n\t        }\n\t\n\t        var handlers = this.handlers;\n\t        each(splitStr(events), function(event) {\n\t            if (!handler) {\n\t                delete handlers[event];\n\t            } else {\n\t                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n\t            }\n\t        });\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * emit event to the listeners\n\t     * @param {String} event\n\t     * @param {Object} data\n\t     */\n\t    emit: function(event, data) {\n\t        // we also want to trigger dom events\n\t        if (this.options.domEvents) {\n\t            triggerDomEvent(event, data);\n\t        }\n\t\n\t        // no handlers, so skip it all\n\t        var handlers = this.handlers[event] && this.handlers[event].slice();\n\t        if (!handlers || !handlers.length) {\n\t            return;\n\t        }\n\t\n\t        data.type = event;\n\t        data.preventDefault = function() {\n\t            data.srcEvent.preventDefault();\n\t        };\n\t\n\t        var i = 0;\n\t        while (i < handlers.length) {\n\t            handlers[i](data);\n\t            i++;\n\t        }\n\t    },\n\t\n\t    /**\n\t     * destroy the manager and unbinds all events\n\t     * it doesn't unbind dom events, that is the user own responsibility\n\t     */\n\t    destroy: function() {\n\t        this.element && toggleCssProps(this, false);\n\t\n\t        this.handlers = {};\n\t        this.session = {};\n\t        this.input.destroy();\n\t        this.element = null;\n\t    }\n\t};\n\t\n\t/**\n\t * add/remove the css properties as defined in manager.options.cssProps\n\t * @param {Manager} manager\n\t * @param {Boolean} add\n\t */\n\tfunction toggleCssProps(manager, add) {\n\t    var element = manager.element;\n\t    if (!element.style) {\n\t        return;\n\t    }\n\t    var prop;\n\t    each(manager.options.cssProps, function(value, name) {\n\t        prop = prefixed(element.style, name);\n\t        if (add) {\n\t            manager.oldCssProps[prop] = element.style[prop];\n\t            element.style[prop] = value;\n\t        } else {\n\t            element.style[prop] = manager.oldCssProps[prop] || '';\n\t        }\n\t    });\n\t    if (!add) {\n\t        manager.oldCssProps = {};\n\t    }\n\t}\n\t\n\t/**\n\t * trigger dom event\n\t * @param {String} event\n\t * @param {Object} data\n\t */\n\tfunction triggerDomEvent(event, data) {\n\t    var gestureEvent = document.createEvent('Event');\n\t    gestureEvent.initEvent(event, true, true);\n\t    gestureEvent.gesture = data;\n\t    data.target.dispatchEvent(gestureEvent);\n\t}\n\t\n\tassign(Hammer, {\n\t    INPUT_START: INPUT_START,\n\t    INPUT_MOVE: INPUT_MOVE,\n\t    INPUT_END: INPUT_END,\n\t    INPUT_CANCEL: INPUT_CANCEL,\n\t\n\t    STATE_POSSIBLE: STATE_POSSIBLE,\n\t    STATE_BEGAN: STATE_BEGAN,\n\t    STATE_CHANGED: STATE_CHANGED,\n\t    STATE_ENDED: STATE_ENDED,\n\t    STATE_RECOGNIZED: STATE_RECOGNIZED,\n\t    STATE_CANCELLED: STATE_CANCELLED,\n\t    STATE_FAILED: STATE_FAILED,\n\t\n\t    DIRECTION_NONE: DIRECTION_NONE,\n\t    DIRECTION_LEFT: DIRECTION_LEFT,\n\t    DIRECTION_RIGHT: DIRECTION_RIGHT,\n\t    DIRECTION_UP: DIRECTION_UP,\n\t    DIRECTION_DOWN: DIRECTION_DOWN,\n\t    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n\t    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n\t    DIRECTION_ALL: DIRECTION_ALL,\n\t\n\t    Manager: Manager,\n\t    Input: Input,\n\t    TouchAction: TouchAction,\n\t\n\t    TouchInput: TouchInput,\n\t    MouseInput: MouseInput,\n\t    PointerEventInput: PointerEventInput,\n\t    TouchMouseInput: TouchMouseInput,\n\t    SingleTouchInput: SingleTouchInput,\n\t\n\t    Recognizer: Recognizer,\n\t    AttrRecognizer: AttrRecognizer,\n\t    Tap: TapRecognizer,\n\t    Pan: PanRecognizer,\n\t    Swipe: SwipeRecognizer,\n\t    Pinch: PinchRecognizer,\n\t    Rotate: RotateRecognizer,\n\t    Press: PressRecognizer,\n\t\n\t    on: addEventListeners,\n\t    off: removeEventListeners,\n\t    each: each,\n\t    merge: merge,\n\t    extend: extend,\n\t    assign: assign,\n\t    inherit: inherit,\n\t    bindFn: bindFn,\n\t    prefixed: prefixed\n\t});\n\t\n\t// this prevents errors when Hammer is loaded in the presence of an AMD\n\t//  style loader but by script tag, not by the loader.\n\tvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\n\tfreeGlobal.Hammer = Hammer;\n\t\n\tif (true) {\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t        return Hammer;\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if (typeof module != 'undefined' && module.exports) {\n\t    module.exports = Hammer;\n\t} else {\n\t    window[exportName] = Hammer;\n\t}\n\t\n\t})(window, document, 'Hammer');\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _LatLon = __webpack_require__(9);\n\t\n\tvar _Point = __webpack_require__(10);\n\t\n\tvar Geo = {};\n\t\n\t// Radius / WGS84 semi-major axis\n\tGeo.R = 6378137;\n\tGeo.MAX_LATITUDE = 85.0511287798;\n\t\n\t// WGS84 eccentricity\n\tGeo.ECC = 0.081819191;\n\tGeo.ECC2 = 0.081819191 * 0.081819191;\n\t\n\t// Multiplier is used to expand or compress the WebGL coordinate space relative\n\t// to the EPSG:3857 / Pseudo-Mercator coordinate space (metres).\n\t//\n\t// This is useful for keeping coordinate calculations to smaller numbers and\n\t// helps increase accuracy of things like the z-buffer, object intersection,\n\t// and camera near and far clipping.\n\t//\n\t// A multiplier of 1 would mean a 1:1 mapping between WebGL and EPSG:3857\n\t// coordinates (1 EPSG:3857 metre === 1 WebGL unit)\n\t//\n\t// A multiplier of 0.1 would mean a 1:0.1 mapping between WebGL and EPSG:3857\n\t// coordinates (1 EPSG:3857 metre === 0.1 WebGL units)\n\tGeo.multiplier = 0.1;\n\t\n\tGeo.project = function (latlon) {\n\t  var d = Math.PI / 180;\n\t  var max = Geo.MAX_LATITUDE;\n\t  var lat = Math.max(Math.min(max, latlon.lat), -max);\n\t  var sin = Math.sin(lat * d);\n\t\n\t  return (0, _Point.point)(Geo.R * latlon.lon * d, Geo.R * Math.log((1 + sin) / (1 - sin)) / 2);\n\t}, Geo.unproject = function (point) {\n\t  var d = 180 / Math.PI;\n\t\n\t  return (0, _LatLon.latLon)((2 * Math.atan(Math.exp(point.y / Geo.R)) - Math.PI / 2) * d, point.x * d / Geo.R);\n\t};\n\t\n\t// Converts geo coords to pixel / WebGL ones\n\t// This just reverses the Y axis to match WebGL\n\tGeo.latLonToPoint = function (latlon) {\n\t  var projected = Geo.project(latlon);\n\t  projected.y *= -1;\n\t\n\t  projected.x *= Geo.multiplier;\n\t  projected.y *= Geo.multiplier;\n\t\n\t  return projected;\n\t};\n\t\n\t// Converts pixel / WebGL coords to geo coords\n\t// This just reverses the Y axis to match WebGL\n\tGeo.pointToLatLon = function (point) {\n\t  var _point = (0, _Point.point)(point.x, point.y * -1);\n\t\n\t  _point.x /= Geo.multiplier;\n\t  _point.y /= Geo.multiplier;\n\t\n\t  return Geo.unproject(_point);\n\t};\n\t\n\t// Scale factor for converting between real metres and projected metres\n\t//\n\t// projectedMetres = realMetres * pointScale\n\t// realMetres = projectedMetres / pointScale\n\t//\n\t// Accurate scale factor uses proper Web Mercator scaling\n\t// See pg.9: http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(notes).pdf\n\t// See: http://jsfiddle.net/robhawkes/yws924cf/\n\tGeo.pointScale = function (latlon, accurate) {\n\t  var rad = Math.PI / 180;\n\t\n\t  var k;\n\t\n\t  if (!accurate) {\n\t    k = 1 / Math.cos(latlon.lat * rad);\n\t\n\t    // [scaleX, scaleY]\n\t    return [k, k];\n\t  } else {\n\t    var lat = latlon.lat * rad;\n\t    var lon = latlon.lon * rad;\n\t\n\t    var a = Geo.R;\n\t\n\t    var sinLat = Math.sin(lat);\n\t    var sinLat2 = sinLat * sinLat;\n\t\n\t    var cosLat = Math.cos(lat);\n\t\n\t    // Radius meridian\n\t    var p = a * (1 - Geo.ECC2) / Math.pow(1 - Geo.ECC2 * sinLat2, 3 / 2);\n\t\n\t    // Radius prime meridian\n\t    var v = a / Math.sqrt(1 - Geo.ECC2 * sinLat2);\n\t\n\t    // Scale N/S\n\t    var h = a / p / cosLat;\n\t\n\t    // Scale E/W\n\t    k = a / v / cosLat;\n\t\n\t    // [scaleX, scaleY]\n\t    return [k, h];\n\t  }\n\t};\n\t\n\t// Convert real metres to projected units\n\t//\n\t// Latitude scale is chosen because it fluctuates more than longitude\n\tGeo.metresToProjected = function (metres, pointScale) {\n\t  return metres * pointScale[1];\n\t};\n\t\n\t// Convert projected units to real metres\n\t//\n\t// Latitude scale is chosen because it fluctuates more than longitude\n\tGeo.projectedToMetres = function (projectedUnits, pointScale) {\n\t  return projectedUnits / pointScale[1];\n\t};\n\t\n\t// Convert real metres to a value in world (WebGL) units\n\tGeo.metresToWorld = function (metres, pointScale) {\n\t  // Transform metres to projected metres using the latitude point scale\n\t  //\n\t  // Latitude scale is chosen because it fluctuates more than longitude\n\t  var projectedMetres = Geo.metresToProjected(metres, pointScale);\n\t  return projectedMetres * Geo.multiplier;\n\t};\n\t\n\t// Convert world (WebGL) units to a value in real metres\n\tGeo.worldToMetres = function (worldUnits, pointScale) {\n\t  var projectedUnits = worldUnits;\n\t  var realMetres = Geo.projectedToMetres(projectedUnits, pointScale);\n\t\n\t  return realMetres / Geo.multiplier;\n\t};\n\t\n\t// Returns the world width in pixels for a given zoom, assuming tile dimensions\n\t// of 256x256 pixels\n\tGeo.scale = function (zoom) {\n\t  return 256 * Math.pow(2, zoom);\n\t};\n\t\n\t// Returns zoom level for a given scale value\n\t// This only works with a scale value that is based on map pixel width\n\tGeo.zoom = function (scale) {\n\t  return Math.log(scale / 256) / Math.LN2;\n\t};\n\t\n\t// Distance between two geographical points using spherical law of cosines\n\t// approximation or Haversine\n\t//\n\t// See: http://www.movable-type.co.uk/scripts/latlong.html\n\tGeo.distance = function (latlon1, latlon2, accurate) {\n\t  var rad = Math.PI / 180;\n\t\n\t  var lat1;\n\t  var lat2;\n\t\n\t  var a;\n\t\n\t  if (!accurate) {\n\t    lat1 = latlon1.lat * rad;\n\t    lat2 = latlon2.lat * rad;\n\t\n\t    a = Math.sin(lat1) * Math.sin(lat2) + Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlon2.lon - latlon1.lon) * rad);\n\t\n\t    return Geo.R * Math.acos(Math.min(a, 1));\n\t  } else {\n\t    lat1 = latlon1.lat * rad;\n\t    lat2 = latlon2.lat * rad;\n\t\n\t    var lon1 = latlon1.lon * rad;\n\t    var lon2 = latlon2.lon * rad;\n\t\n\t    var deltaLat = lat2 - lat1;\n\t    var deltaLon = lon2 - lon1;\n\t\n\t    var halfDeltaLat = deltaLat / 2;\n\t    var halfDeltaLon = deltaLon / 2;\n\t\n\t    a = Math.sin(halfDeltaLat) * Math.sin(halfDeltaLat) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(halfDeltaLon) * Math.sin(halfDeltaLon);\n\t\n\t    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\t\n\t    return Geo.R * c;\n\t  }\n\t};\n\t\n\tGeo.bounds = (function () {\n\t  var d = Geo.R * Math.PI * Geo.multiplier;\n\t  return [[-d, -d], [d, d]];\n\t})();\n\t\n\texports['default'] = Geo;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t/*\r\n\t * LatLon is a helper class for ensuring consistent geographic coordinates.\r\n\t *\r\n\t * Based on:\r\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/LatLng.js\r\n\t */\n\t\n\tvar LatLon = (function () {\n\t  function LatLon(lat, lon, alt) {\n\t    _classCallCheck(this, LatLon);\n\t\n\t    if (isNaN(lat) || isNaN(lon)) {\n\t      throw new Error('Invalid LatLon object: (' + lat + ', ' + lon + ')');\n\t    }\n\t\n\t    this.lat = +lat;\n\t    this.lon = +lon;\n\t\n\t    if (alt !== undefined) {\n\t      this.alt = +alt;\n\t    }\n\t  }\n\t\n\t  _createClass(LatLon, [{\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new LatLon(this.lat, this.lon, this.alt);\n\t    }\n\t  }]);\n\t\n\t  return LatLon;\n\t})();\n\t\n\texports['default'] = LatLon;\n\t\n\t// Accepts (LatLon), ([lat, lon, alt]), ([lat, lon]) and (lat, lon, alt)\n\t// Also converts between lng and lon\n\tvar noNew = function noNew(a, b, c) {\n\t  if (a instanceof LatLon) {\n\t    return a;\n\t  }\n\t  if (Array.isArray(a) && typeof a[0] !== 'object') {\n\t    if (a.length === 3) {\n\t      return new LatLon(a[0], a[1], a[2]);\n\t    }\n\t    if (a.length === 2) {\n\t      return new LatLon(a[0], a[1]);\n\t    }\n\t    return null;\n\t  }\n\t  if (a === undefined || a === null) {\n\t    return a;\n\t  }\n\t  if (typeof a === 'object' && 'lat' in a) {\n\t    return new LatLon(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);\n\t  }\n\t  if (b === undefined) {\n\t    return null;\n\t  }\n\t  return new LatLon(a, b, c);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.latLon = noNew;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*\r\n\t * Point is a helper class for ensuring consistent world positions.\r\n\t *\r\n\t * Based on:\r\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/Point.js\r\n\t */\n\t\n\tvar Point = (function () {\n\t  function Point(x, y, round) {\n\t    _classCallCheck(this, Point);\n\t\n\t    this.x = round ? Math.round(x) : x;\n\t    this.y = round ? Math.round(y) : y;\n\t  }\n\t\n\t  _createClass(Point, [{\n\t    key: \"clone\",\n\t    value: function clone() {\n\t      return new Point(this.x, this.y);\n\t    }\n\t\n\t    // Non-destructive\n\t  }, {\n\t    key: \"add\",\n\t    value: function add(point) {\n\t      return this.clone()._add(_point(point));\n\t    }\n\t\n\t    // Destructive\n\t  }, {\n\t    key: \"_add\",\n\t    value: function _add(point) {\n\t      this.x += point.x;\n\t      this.y += point.y;\n\t      return this;\n\t    }\n\t\n\t    // Non-destructive\n\t  }, {\n\t    key: \"subtract\",\n\t    value: function subtract(point) {\n\t      return this.clone()._subtract(_point(point));\n\t    }\n\t\n\t    // Destructive\n\t  }, {\n\t    key: \"_subtract\",\n\t    value: function _subtract(point) {\n\t      this.x -= point.x;\n\t      this.y -= point.y;\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return Point;\n\t})();\n\t\n\texports[\"default\"] = Point;\n\t\n\t// Accepts (point), ([x, y]) and (x, y, round)\n\tvar _point = function _point(x, y, round) {\n\t  if (x instanceof Point) {\n\t    return x;\n\t  }\n\t  if (Array.isArray(x)) {\n\t    return new Point(x[0], x[1]);\n\t  }\n\t  if (x === undefined || x === null) {\n\t    return x;\n\t  }\n\t  return new Point(x, y, round);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.point = _point;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter3 = __webpack_require__(3);\n\t\n\tvar _eventemitter32 = _interopRequireDefault(_eventemitter3);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _shortid = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"shortid\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\n\tvar _shortid2 = _interopRequireDefault(_shortid);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _engineScene = __webpack_require__(13);\n\t\n\tvar _engineScene2 = _interopRequireDefault(_engineScene);\n\t\n\tvar _vendorCSS3DRenderer = __webpack_require__(14);\n\t\n\tvar _vendorCSS2DRenderer = __webpack_require__(15);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// TODO: Need a single move method that handles moving all the various object\n\t// layers so that the DOM layers stay in sync with the 3D layer\n\t\n\t// TODO: Double check that objects within the _object3D Object3D parent are frustum\n\t// culled even if the layer position stays at the default (0,0,0) and the child\n\t// objects are positioned much further away\n\t//\n\t// Or does the layer being at (0,0,0) prevent the child objects from being\n\t// culled because the layer parent is effectively always in view even if the\n\t// child is actually out of camera\n\t\n\tvar Layer = (function (_EventEmitter) {\n\t  _inherits(Layer, _EventEmitter);\n\t\n\t  function Layer(options) {\n\t    _classCallCheck(this, Layer);\n\t\n\t    _get(Object.getPrototypeOf(Layer.prototype), 'constructor', this).call(this);\n\t\n\t    var defaults = {\n\t      id: _shortid2['default'].generate(),\n\t      output: true,\n\t      outputToScene: true\n\t    };\n\t\n\t    this._options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    if (this.isOutput()) {\n\t      this._object3D = new _three2['default'].Object3D();\n\t\n\t      this._dom3D = document.createElement('div');\n\t      this._domObject3D = new _vendorCSS3DRenderer.CSS3DObject(this._dom3D);\n\t\n\t      this._dom2D = document.createElement('div');\n\t      this._domObject2D = new _vendorCSS2DRenderer.CSS2DObject(this._dom2D);\n\t    }\n\t  }\n\t\n\t  // Add THREE object directly to layer\n\t\n\t  _createClass(Layer, [{\n\t    key: 'add',\n\t    value: function add(object) {\n\t      this._object3D.add(object);\n\t    }\n\t\n\t    // Remove THREE object from to layer\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(object) {\n\t      this._object3D.remove(object);\n\t    }\n\t  }, {\n\t    key: 'addDOM3D',\n\t    value: function addDOM3D(object) {\n\t      this._domObject3D.add(object);\n\t    }\n\t  }, {\n\t    key: 'removeDOM3D',\n\t    value: function removeDOM3D(object) {\n\t      this._domObject3D.remove(object);\n\t    }\n\t  }, {\n\t    key: 'addDOM2D',\n\t    value: function addDOM2D(object) {\n\t      this._domObject2D.add(object);\n\t    }\n\t  }, {\n\t    key: 'removeDOM2D',\n\t    value: function removeDOM2D(object) {\n\t      this._domObject2D.remove(object);\n\t    }\n\t\n\t    // Add layer to world instance and store world reference\n\t  }, {\n\t    key: 'addTo',\n\t    value: function addTo(world) {\n\t      return world.addLayer(this);\n\t    }\n\t\n\t    // Internal method called by World.addLayer to actually add the layer\n\t  }, {\n\t    key: '_addToWorld',\n\t    value: function _addToWorld(world) {\n\t      var _this = this;\n\t\n\t      this._world = world;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _this._onAdd(world).then(function () {\n\t          _this.emit('added');\n\t          resolve(_this);\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t\n\t    // Must return a promise\n\t  }, {\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      return Promise.resolve(this);\n\t    }\n\t  }, {\n\t    key: 'getPickingId',\n\t    value: function getPickingId() {\n\t      if (this._world._engine._picking) {\n\t        return this._world._engine._picking.getNextId();\n\t      }\n\t\n\t      return false;\n\t    }\n\t\n\t    // TODO: Tidy this up and don't access so many private properties to work\n\t  }, {\n\t    key: 'addToPicking',\n\t    value: function addToPicking(object) {\n\t      if (!this._world._engine._picking) {\n\t        return;\n\t      }\n\t\n\t      this._world._engine._picking.add(object);\n\t    }\n\t  }, {\n\t    key: 'removeFromPicking',\n\t    value: function removeFromPicking(object) {\n\t      if (!this._world._engine._picking) {\n\t        return;\n\t      }\n\t\n\t      this._world._engine._picking.remove(object);\n\t    }\n\t  }, {\n\t    key: 'isOutput',\n\t    value: function isOutput() {\n\t      return this._options.output;\n\t    }\n\t  }, {\n\t    key: 'isOutputToScene',\n\t    value: function isOutputToScene() {\n\t      return this._options.outputToScene;\n\t    }\n\t\n\t    // TODO: Also hide any attached DOM layers\n\t  }, {\n\t    key: 'hide',\n\t    value: function hide() {\n\t      this._object3D.visible = false;\n\t\n\t      if (this._pickingMesh) {\n\t        this._pickingMesh.visible = false;\n\t      }\n\t    }\n\t\n\t    // TODO: Also show any attached DOM layers\n\t  }, {\n\t    key: 'show',\n\t    value: function show() {\n\t      this._object3D.visible = true;\n\t\n\t      if (this._pickingMesh) {\n\t        this._pickingMesh.visible = true;\n\t      }\n\t    }\n\t\n\t    // Destroys the layer and removes it from the scene and memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      if (this._object3D && this._object3D.children) {\n\t        // Remove everything else in the layer\n\t        var child;\n\t        for (var i = this._object3D.children.length - 1; i >= 0; i--) {\n\t          child = this._object3D.children[i];\n\t\n\t          if (!child) {\n\t            continue;\n\t          }\n\t\n\t          this.remove(child);\n\t\n\t          if (child.geometry) {\n\t            // Dispose of mesh and materials\n\t            child.geometry.dispose();\n\t            child.geometry = null;\n\t          }\n\t\n\t          if (child.material) {\n\t            if (child.material.map) {\n\t              child.material.map.dispose();\n\t              child.material.map = null;\n\t            }\n\t\n\t            child.material.dispose();\n\t            child.material = null;\n\t          }\n\t        }\n\t      }\n\t\n\t      if (this._domObject3D && this._domObject3D.children) {\n\t        // Remove everything else in the layer\n\t        var child;\n\t        for (var i = this._domObject3D.children.length - 1; i >= 0; i--) {\n\t          child = this._domObject3D.children[i];\n\t\n\t          if (!child) {\n\t            continue;\n\t          }\n\t\n\t          this.removeDOM3D(child);\n\t        }\n\t      }\n\t\n\t      if (this._domObject2D && this._domObject2D.children) {\n\t        // Remove everything else in the layer\n\t        var child;\n\t        for (var i = this._domObject2D.children.length - 1; i >= 0; i--) {\n\t          child = this._domObject2D.children[i];\n\t\n\t          if (!child) {\n\t            continue;\n\t          }\n\t\n\t          this.removeDOM2D(child);\n\t        }\n\t      }\n\t\n\t      this._domObject3D = null;\n\t      this._domObject2D = null;\n\t\n\t      this._world = null;\n\t      this._object3D = null;\n\t    }\n\t  }]);\n\t\n\t  return Layer;\n\t})(_eventemitter32['default']);\n\t\n\texports['default'] = Layer;\n\t\n\tvar noNew = function noNew(options) {\n\t  return new Layer(options);\n\t};\n\t\n\texports.layer = noNew;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * lodash (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n\t * Released under MIT license <https://lodash.com/license>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t */\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar MAX_SAFE_INTEGER = 9007199254740991;\n\t\n\t/** `Object#toString` result references. */\n\tvar argsTag = '[object Arguments]',\n\t    funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]';\n\t\n\t/** Used to detect unsigned integer values. */\n\tvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\t\n\t/**\n\t * A faster alternative to `Function#apply`, this function invokes `func`\n\t * with the `this` binding of `thisArg` and the arguments of `args`.\n\t *\n\t * @private\n\t * @param {Function} func The function to invoke.\n\t * @param {*} thisArg The `this` binding of `func`.\n\t * @param {Array} args The arguments to invoke `func` with.\n\t * @returns {*} Returns the result of `func`.\n\t */\n\tfunction apply(func, thisArg, args) {\n\t  switch (args.length) {\n\t    case 0: return func.call(thisArg);\n\t    case 1: return func.call(thisArg, args[0]);\n\t    case 2: return func.call(thisArg, args[0], args[1]);\n\t    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n\t  }\n\t  return func.apply(thisArg, args);\n\t}\n\t\n\t/**\n\t * The base implementation of `_.times` without support for iteratee shorthands\n\t * or max array length checks.\n\t *\n\t * @private\n\t * @param {number} n The number of times to invoke `iteratee`.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns the array of results.\n\t */\n\tfunction baseTimes(n, iteratee) {\n\t  var index = -1,\n\t      result = Array(n);\n\t\n\t  while (++index < n) {\n\t    result[index] = iteratee(index);\n\t  }\n\t  return result;\n\t}\n\t\n\t/**\n\t * Creates a unary function that invokes `func` with its argument transformed.\n\t *\n\t * @private\n\t * @param {Function} func The function to wrap.\n\t * @param {Function} transform The argument transform.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction overArg(func, transform) {\n\t  return function(arg) {\n\t    return func(transform(arg));\n\t  };\n\t}\n\t\n\t/** Used for built-in method references. */\n\tvar objectProto = Object.prototype;\n\t\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\t\n\t/**\n\t * Used to resolve the\n\t * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\t\n\t/** Built-in value references. */\n\tvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\t\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeKeys = overArg(Object.keys, Object),\n\t    nativeMax = Math.max;\n\t\n\t/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\n\tvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\t\n\t/**\n\t * Creates an array of the enumerable property names of the array-like `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @param {boolean} inherited Specify returning inherited property names.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction arrayLikeKeys(value, inherited) {\n\t  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n\t  // Safari 9 makes `arguments.length` enumerable in strict mode.\n\t  var result = (isArray(value) || isArguments(value))\n\t    ? baseTimes(value.length, String)\n\t    : [];\n\t\n\t  var length = result.length,\n\t      skipIndexes = !!length;\n\t\n\t  for (var key in value) {\n\t    if ((inherited || hasOwnProperty.call(value, key)) &&\n\t        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\t\n\t/**\n\t * Assigns `value` to `key` of `object` if the existing value is not equivalent\n\t * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * for equality comparisons.\n\t *\n\t * @private\n\t * @param {Object} object The object to modify.\n\t * @param {string} key The key of the property to assign.\n\t * @param {*} value The value to assign.\n\t */\n\tfunction assignValue(object, key, value) {\n\t  var objValue = object[key];\n\t  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n\t      (value === undefined && !(key in object))) {\n\t    object[key] = value;\n\t  }\n\t}\n\t\n\t/**\n\t * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction baseKeys(object) {\n\t  if (!isPrototype(object)) {\n\t    return nativeKeys(object);\n\t  }\n\t  var result = [];\n\t  for (var key in Object(object)) {\n\t    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\t\n\t/**\n\t * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n\t *\n\t * @private\n\t * @param {Function} func The function to apply a rest parameter to.\n\t * @param {number} [start=func.length-1] The start position of the rest parameter.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction baseRest(func, start) {\n\t  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n\t  return function() {\n\t    var args = arguments,\n\t        index = -1,\n\t        length = nativeMax(args.length - start, 0),\n\t        array = Array(length);\n\t\n\t    while (++index < length) {\n\t      array[index] = args[start + index];\n\t    }\n\t    index = -1;\n\t    var otherArgs = Array(start + 1);\n\t    while (++index < start) {\n\t      otherArgs[index] = args[index];\n\t    }\n\t    otherArgs[start] = array;\n\t    return apply(func, this, otherArgs);\n\t  };\n\t}\n\t\n\t/**\n\t * Copies properties of `source` to `object`.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy properties from.\n\t * @param {Array} props The property identifiers to copy.\n\t * @param {Object} [object={}] The object to copy properties to.\n\t * @param {Function} [customizer] The function to customize copied values.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copyObject(source, props, object, customizer) {\n\t  object || (object = {});\n\t\n\t  var index = -1,\n\t      length = props.length;\n\t\n\t  while (++index < length) {\n\t    var key = props[index];\n\t\n\t    var newValue = customizer\n\t      ? customizer(object[key], source[key], key, object, source)\n\t      : undefined;\n\t\n\t    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n\t  }\n\t  return object;\n\t}\n\t\n\t/**\n\t * Creates a function like `_.assign`.\n\t *\n\t * @private\n\t * @param {Function} assigner The function to assign values.\n\t * @returns {Function} Returns the new assigner function.\n\t */\n\tfunction createAssigner(assigner) {\n\t  return baseRest(function(object, sources) {\n\t    var index = -1,\n\t        length = sources.length,\n\t        customizer = length > 1 ? sources[length - 1] : undefined,\n\t        guard = length > 2 ? sources[2] : undefined;\n\t\n\t    customizer = (assigner.length > 3 && typeof customizer == 'function')\n\t      ? (length--, customizer)\n\t      : undefined;\n\t\n\t    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n\t      customizer = length < 3 ? undefined : customizer;\n\t      length = 1;\n\t    }\n\t    object = Object(object);\n\t    while (++index < length) {\n\t      var source = sources[index];\n\t      if (source) {\n\t        assigner(object, source, index, customizer);\n\t      }\n\t    }\n\t    return object;\n\t  });\n\t}\n\t\n\t/**\n\t * Checks if `value` is a valid array-like index.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n\t * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n\t */\n\tfunction isIndex(value, length) {\n\t  length = length == null ? MAX_SAFE_INTEGER : length;\n\t  return !!length &&\n\t    (typeof value == 'number' || reIsUint.test(value)) &&\n\t    (value > -1 && value % 1 == 0 && value < length);\n\t}\n\t\n\t/**\n\t * Checks if the given arguments are from an iteratee call.\n\t *\n\t * @private\n\t * @param {*} value The potential iteratee value argument.\n\t * @param {*} index The potential iteratee index or key argument.\n\t * @param {*} object The potential iteratee object argument.\n\t * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n\t *  else `false`.\n\t */\n\tfunction isIterateeCall(value, index, object) {\n\t  if (!isObject(object)) {\n\t    return false;\n\t  }\n\t  var type = typeof index;\n\t  if (type == 'number'\n\t        ? (isArrayLike(object) && isIndex(index, object.length))\n\t        : (type == 'string' && index in object)\n\t      ) {\n\t    return eq(object[index], value);\n\t  }\n\t  return false;\n\t}\n\t\n\t/**\n\t * Checks if `value` is likely a prototype object.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n\t */\n\tfunction isPrototype(value) {\n\t  var Ctor = value && value.constructor,\n\t      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\t\n\t  return value === proto;\n\t}\n\t\n\t/**\n\t * Performs a\n\t * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * comparison between two values to determine if they are equivalent.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t * @example\n\t *\n\t * var object = { 'a': 1 };\n\t * var other = { 'a': 1 };\n\t *\n\t * _.eq(object, object);\n\t * // => true\n\t *\n\t * _.eq(object, other);\n\t * // => false\n\t *\n\t * _.eq('a', 'a');\n\t * // => true\n\t *\n\t * _.eq('a', Object('a'));\n\t * // => false\n\t *\n\t * _.eq(NaN, NaN);\n\t * // => true\n\t */\n\tfunction eq(value, other) {\n\t  return value === other || (value !== value && other !== other);\n\t}\n\t\n\t/**\n\t * Checks if `value` is likely an `arguments` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArguments(function() { return arguments; }());\n\t * // => true\n\t *\n\t * _.isArguments([1, 2, 3]);\n\t * // => false\n\t */\n\tfunction isArguments(value) {\n\t  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n\t  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n\t    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as an `Array` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n\t * @example\n\t *\n\t * _.isArray([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArray(document.body.children);\n\t * // => false\n\t *\n\t * _.isArray('abc');\n\t * // => false\n\t *\n\t * _.isArray(_.noop);\n\t * // => false\n\t */\n\tvar isArray = Array.isArray;\n\t\n\t/**\n\t * Checks if `value` is array-like. A value is considered array-like if it's\n\t * not a function and has a `value.length` that's an integer greater than or\n\t * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLike(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLike('abc');\n\t * // => true\n\t *\n\t * _.isArrayLike(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLike(value) {\n\t  return value != null && isLength(value.length) && !isFunction(value);\n\t}\n\t\n\t/**\n\t * This method is like `_.isArrayLike` except that it also checks if `value`\n\t * is an object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array-like object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArrayLikeObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject('abc');\n\t * // => false\n\t *\n\t * _.isArrayLikeObject(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLikeObject(value) {\n\t  return isObjectLike(value) && isArrayLike(value);\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\t\n\t/**\n\t * Checks if `value` is a valid array-like length.\n\t *\n\t * **Note:** This method is loosely based on\n\t * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n\t * @example\n\t *\n\t * _.isLength(3);\n\t * // => true\n\t *\n\t * _.isLength(Number.MIN_VALUE);\n\t * // => false\n\t *\n\t * _.isLength(Infinity);\n\t * // => false\n\t *\n\t * _.isLength('3');\n\t * // => false\n\t */\n\tfunction isLength(value) {\n\t  return typeof value == 'number' &&\n\t    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n\t}\n\t\n\t/**\n\t * Checks if `value` is the\n\t * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n\t * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return !!value && typeof value == 'object';\n\t}\n\t\n\t/**\n\t * Assigns own enumerable string keyed properties of source objects to the\n\t * destination object. Source objects are applied from left to right.\n\t * Subsequent sources overwrite property assignments of previous sources.\n\t *\n\t * **Note:** This method mutates `object` and is loosely based on\n\t * [`Object.assign`](https://mdn.io/Object/assign).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.10.0\n\t * @category Object\n\t * @param {Object} object The destination object.\n\t * @param {...Object} [sources] The source objects.\n\t * @returns {Object} Returns `object`.\n\t * @see _.assignIn\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t * }\n\t *\n\t * function Bar() {\n\t *   this.c = 3;\n\t * }\n\t *\n\t * Foo.prototype.b = 2;\n\t * Bar.prototype.d = 4;\n\t *\n\t * _.assign({ 'a': 0 }, new Foo, new Bar);\n\t * // => { 'a': 1, 'c': 3 }\n\t */\n\tvar assign = createAssigner(function(object, source) {\n\t  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n\t    copyObject(source, keys(source), object);\n\t    return;\n\t  }\n\t  for (var key in source) {\n\t    if (hasOwnProperty.call(source, key)) {\n\t      assignValue(object, key, source[key]);\n\t    }\n\t  }\n\t});\n\t\n\t/**\n\t * Creates an array of the own enumerable property names of `object`.\n\t *\n\t * **Note:** Non-object values are coerced to objects. See the\n\t * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n\t * for more details.\n\t *\n\t * @static\n\t * @since 0.1.0\n\t * @memberOf _\n\t * @category Object\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t *   this.b = 2;\n\t * }\n\t *\n\t * Foo.prototype.c = 3;\n\t *\n\t * _.keys(new Foo);\n\t * // => ['a', 'b'] (iteration order is not guaranteed)\n\t *\n\t * _.keys('hi');\n\t * // => ['0', '1']\n\t */\n\tfunction keys(object) {\n\t  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n\t}\n\t\n\tmodule.exports = assign;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// This can be imported from anywhere and will still reference the same scene,\n\t// though there is a helper reference in Engine.scene\n\t\n\texports['default'] = (function () {\n\t  var scene = new _three2['default'].Scene();\n\t\n\t  // TODO: Re-enable when this works with the skybox\n\t  // scene.fog = new THREE.Fog(0xffffff, 1, 15000);\n\t  return scene;\n\t})();\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// jscs:disable\n\t/* eslint-disable */\n\t\n\t/**\r\n\t * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar CSS3DObject = function CSS3DObject(element) {\n\t\n\t\t_three2['default'].Object3D.call(this);\n\t\n\t\tthis.element = element;\n\t\tthis.element.style.position = 'absolute';\n\t\n\t\tthis.addEventListener('removed', function (event) {\n\t\n\t\t\tif (this.element.parentNode !== null) {\n\t\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t});\n\t};\n\t\n\tCSS3DObject.prototype = Object.create(_three2['default'].Object3D.prototype);\n\tCSS3DObject.prototype.constructor = CSS3DObject;\n\t\n\tvar CSS3DSprite = function CSS3DSprite(element) {\n\t\n\t\tCSS3DObject.call(this, element);\n\t};\n\t\n\tCSS3DSprite.prototype = Object.create(CSS3DObject.prototype);\n\tCSS3DSprite.prototype.constructor = CSS3DSprite;\n\t\n\t//\n\t\n\tvar CSS3DRenderer = function CSS3DRenderer() {\n\t\n\t\tconsole.log('THREE.CSS3DRenderer', _three2['default'].REVISION);\n\t\n\t\tvar _width, _height;\n\t\tvar _widthHalf, _heightHalf;\n\t\n\t\tvar matrix = new _three2['default'].Matrix4();\n\t\n\t\tvar cache = {\n\t\t\tcamera: { fov: 0, style: '' },\n\t\t\tobjects: {}\n\t\t};\n\t\n\t\tvar domElement = document.createElement('div');\n\t\tdomElement.style.overflow = 'hidden';\n\t\n\t\tdomElement.style.WebkitTransformStyle = 'preserve-3d';\n\t\tdomElement.style.MozTransformStyle = 'preserve-3d';\n\t\tdomElement.style.oTransformStyle = 'preserve-3d';\n\t\tdomElement.style.transformStyle = 'preserve-3d';\n\t\n\t\tthis.domElement = domElement;\n\t\n\t\tvar cameraElement = document.createElement('div');\n\t\n\t\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\n\t\tcameraElement.style.MozTransformStyle = 'preserve-3d';\n\t\tcameraElement.style.oTransformStyle = 'preserve-3d';\n\t\tcameraElement.style.transformStyle = 'preserve-3d';\n\t\n\t\tdomElement.appendChild(cameraElement);\n\t\n\t\tthis.setClearColor = function () {};\n\t\n\t\tthis.getSize = function () {\n\t\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\t\t};\n\t\n\t\tthis.setSize = function (width, height) {\n\t\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\t\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\t\n\t\t\tcameraElement.style.width = width + 'px';\n\t\t\tcameraElement.style.height = height + 'px';\n\t\t};\n\t\n\t\tvar epsilon = function epsilon(value) {\n\t\n\t\t\treturn Math.abs(value) < Number.EPSILON ? 0 : value;\n\t\t};\n\t\n\t\tvar getCameraCSSMatrix = function getCameraCSSMatrix(matrix) {\n\t\n\t\t\tvar elements = matrix.elements;\n\t\n\t\t\treturn 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(-elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(elements[6]) + ',' + epsilon(elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(-elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(-elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';\n\t\t};\n\t\n\t\tvar getObjectCSSMatrix = function getObjectCSSMatrix(matrix) {\n\t\n\t\t\tvar elements = matrix.elements;\n\t\n\t\t\treturn 'translate3d(-50%,-50%,0) matrix3d(' + epsilon(elements[0]) + ',' + epsilon(elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(-elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(-elements[6]) + ',' + epsilon(-elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';\n\t\t};\n\t\n\t\tvar renderObject = function renderObject(object, camera) {\n\t\n\t\t\tif (object instanceof CSS3DObject) {\n\t\n\t\t\t\tvar style;\n\t\n\t\t\t\tif (object instanceof CSS3DSprite) {\n\t\n\t\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\t\n\t\t\t\t\tmatrix.copy(camera.matrixWorldInverse);\n\t\t\t\t\tmatrix.transpose();\n\t\t\t\t\tmatrix.copyPosition(object.matrixWorld);\n\t\t\t\t\tmatrix.scale(object.scale);\n\t\n\t\t\t\t\tmatrix.elements[3] = 0;\n\t\t\t\t\tmatrix.elements[7] = 0;\n\t\t\t\t\tmatrix.elements[11] = 0;\n\t\t\t\t\tmatrix.elements[15] = 1;\n\t\n\t\t\t\t\tstyle = getObjectCSSMatrix(matrix);\n\t\t\t\t} else {\n\t\n\t\t\t\t\tstyle = getObjectCSSMatrix(object.matrixWorld);\n\t\t\t\t}\n\t\n\t\t\t\tvar element = object.element;\n\t\t\t\tvar cachedStyle = cache.objects[object.id];\n\t\n\t\t\t\tif (cachedStyle === undefined || cachedStyle !== style) {\n\t\n\t\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\t\telement.style.MozTransform = style;\n\t\t\t\t\telement.style.oTransform = style;\n\t\t\t\t\telement.style.transform = style;\n\t\n\t\t\t\t\tcache.objects[object.id] = style;\n\t\t\t\t}\n\t\n\t\t\t\tif (element.parentNode !== cameraElement) {\n\t\n\t\t\t\t\tcameraElement.appendChild(element);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var i = 0, l = object.children.length; i < l; i++) {\n\t\n\t\t\t\trenderObject(object.children[i], camera);\n\t\t\t}\n\t\t};\n\t\n\t\tthis.render = function (scene, camera) {\n\t\n\t\t\tvar fov = 0.5 / Math.tan(_three2['default'].Math.degToRad(camera.fov * 0.5)) * _height;\n\t\n\t\t\tif (cache.camera.fov !== fov) {\n\t\n\t\t\t\tdomElement.style.WebkitPerspective = fov + 'px';\n\t\t\t\tdomElement.style.MozPerspective = fov + 'px';\n\t\t\t\tdomElement.style.oPerspective = fov + 'px';\n\t\t\t\tdomElement.style.perspective = fov + 'px';\n\t\n\t\t\t\tcache.camera.fov = fov;\n\t\t\t}\n\t\n\t\t\tscene.updateMatrixWorld();\n\t\n\t\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\t\n\t\t\tcamera.matrixWorldInverse.getInverse(camera.matrixWorld);\n\t\n\t\t\tvar style = 'translate3d(0,0,' + fov + 'px)' + getCameraCSSMatrix(camera.matrixWorldInverse) + ' translate3d(' + _widthHalf + 'px,' + _heightHalf + 'px, 0)';\n\t\n\t\t\tif (cache.camera.style !== style) {\n\t\n\t\t\t\tcameraElement.style.WebkitTransform = style;\n\t\t\t\tcameraElement.style.MozTransform = style;\n\t\t\t\tcameraElement.style.oTransform = style;\n\t\t\t\tcameraElement.style.transform = style;\n\t\n\t\t\t\tcache.camera.style = style;\n\t\t\t}\n\t\n\t\t\trenderObject(scene, camera);\n\t\t};\n\t};\n\t\n\texports.CSS3DObject = CSS3DObject;\n\texports.CSS3DSprite = CSS3DSprite;\n\texports.CSS3DRenderer = CSS3DRenderer;\n\t\n\t_three2['default'].CSS3DObject = CSS3DObject;\n\t_three2['default'].CSS3DSprite = CSS3DSprite;\n\t_three2['default'].CSS3DRenderer = CSS3DRenderer;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// jscs:disable\n\t/* eslint-disable */\n\t\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar CSS2DObject = function CSS2DObject(element) {\n\t\n\t\t_three2['default'].Object3D.call(this);\n\t\n\t\tthis.element = element;\n\t\tthis.element.style.position = 'absolute';\n\t\n\t\tthis.addEventListener('removed', function (event) {\n\t\n\t\t\tif (this.element.parentNode !== null) {\n\t\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t});\n\t};\n\t\n\tCSS2DObject.prototype = Object.create(_three2['default'].Object3D.prototype);\n\tCSS2DObject.prototype.constructor = CSS2DObject;\n\t\n\t//\n\t\n\tvar CSS2DRenderer = function CSS2DRenderer() {\n\t\n\t\tconsole.log('THREE.CSS2DRenderer', _three2['default'].REVISION);\n\t\n\t\tvar _width, _height;\n\t\tvar _widthHalf, _heightHalf;\n\t\n\t\tvar vector = new _three2['default'].Vector3();\n\t\tvar viewMatrix = new _three2['default'].Matrix4();\n\t\tvar viewProjectionMatrix = new _three2['default'].Matrix4();\n\t\n\t\tvar frustum = new _three2['default'].Frustum();\n\t\n\t\tvar domElement = document.createElement('div');\n\t\tdomElement.style.overflow = 'hidden';\n\t\n\t\tthis.domElement = domElement;\n\t\n\t\tthis.setSize = function (width, height) {\n\t\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\t\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\t\t};\n\t\n\t\tvar renderObject = function renderObject(object, camera) {\n\t\n\t\t\tif (object instanceof CSS2DObject) {\n\t\n\t\t\t\tvector.setFromMatrixPosition(object.matrixWorld);\n\t\t\t\tvector.applyProjection(viewProjectionMatrix);\n\t\n\t\t\t\tvar element = object.element;\n\t\t\t\tvar style = 'translate(-50%,-50%) translate(' + (vector.x * _widthHalf + _widthHalf) + 'px,' + (-vector.y * _heightHalf + _heightHalf) + 'px)';\n\t\n\t\t\t\telement.style.WebkitTransform = style;\n\t\t\t\telement.style.MozTransform = style;\n\t\t\t\telement.style.oTransform = style;\n\t\t\t\telement.style.transform = style;\n\t\n\t\t\t\tif (element.parentNode !== domElement) {\n\t\n\t\t\t\t\tdomElement.appendChild(element);\n\t\t\t\t}\n\t\n\t\t\t\t// Hide if outside view frustum\n\t\t\t\tif (!frustum.containsPoint(object.position)) {\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t} else {\n\t\t\t\t\telement.style.display = 'block';\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (var i = 0, l = object.children.length; i < l; i++) {\n\t\n\t\t\t\trenderObject(object.children[i], camera);\n\t\t\t}\n\t\t};\n\t\n\t\tthis.render = function (scene, camera) {\n\t\n\t\t\tscene.updateMatrixWorld();\n\t\n\t\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\t\n\t\t\tcamera.matrixWorldInverse.getInverse(camera.matrixWorld);\n\t\n\t\t\tviewMatrix.copy(camera.matrixWorldInverse.getInverse(camera.matrixWorld));\n\t\t\tviewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, viewMatrix);\n\t\n\t\t\tfrustum.setFromMatrix(new _three2['default'].Matrix4().multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse));\n\t\n\t\t\trenderObject(scene, camera);\n\t\t};\n\t};\n\t\n\texports.CSS2DObject = CSS2DObject;\n\texports.CSS2DRenderer = CSS2DRenderer;\n\t\n\t_three2['default'].CSS2DObject = CSS2DObject;\n\t_three2['default'].CSS2DRenderer = CSS2DRenderer;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar LayerGroup = (function (_Layer) {\n\t  _inherits(LayerGroup, _Layer);\n\t\n\t  function LayerGroup(options) {\n\t    _classCallCheck(this, LayerGroup);\n\t\n\t    var defaults = {\n\t      output: false\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(LayerGroup.prototype), 'constructor', this).call(this, _options);\n\t\n\t    this._layers = [];\n\t  }\n\t\n\t  _createClass(LayerGroup, [{\n\t    key: 'addLayer',\n\t    value: function addLayer(layer) {\n\t      this._layers.push(layer);\n\t      return this._world.addLayer(layer);\n\t    }\n\t  }, {\n\t    key: 'removeLayer',\n\t    value: function removeLayer(layer) {\n\t      var layerIndex = this._layers.indexOf(layer);\n\t\n\t      if (layerIndex > -1) {\n\t        // Remove from this._layers\n\t        this._layers.splice(layerIndex, 1);\n\t      };\n\t\n\t      this._world.removeLayer(layer);\n\t    }\n\t  }, {\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      return Promise.resolve(this);\n\t    }\n\t\n\t    // Destroy the layers and remove them from the scene and memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      // TODO: Sometimes this is already null, find out why\n\t      if (this._layers) {\n\t        for (var i = 0; i < this._layers.length; i++) {\n\t          this._layers[i].destroy();\n\t        }\n\t\n\t        this._layers = null;\n\t      }\n\t\n\t      _get(Object.getPrototypeOf(LayerGroup.prototype), 'destroy', this).call(this);\n\t    }\n\t  }]);\n\t\n\t  return LayerGroup;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = LayerGroup;\n\t\n\tvar noNew = function noNew(options) {\n\t  return new LayerGroup(options);\n\t};\n\t\n\texports.layerGroup = noNew;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _Skybox = __webpack_require__(18);\n\t\n\tvar _Skybox2 = _interopRequireDefault(_Skybox);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\tvar EnvironmentLayer = (function (_Layer) {\n\t  _inherits(EnvironmentLayer, _Layer);\n\t\n\t  function EnvironmentLayer(options) {\n\t    _classCallCheck(this, EnvironmentLayer);\n\t\n\t    var defaults = {\n\t      skybox: false\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(EnvironmentLayer.prototype), 'constructor', this).call(this, _options);\n\t  }\n\t\n\t  _createClass(EnvironmentLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd() {\n\t      this._initLights();\n\t\n\t      if (this._options.skybox) {\n\t        this._initSkybox();\n\t      }\n\t\n\t      // this._initGrid();\n\t\n\t      return Promise.resolve(this);\n\t    }\n\t\n\t    // Not fleshed out or thought through yet\n\t    //\n\t    // Lights could potentially be put it their own 'layer' to keep this class\n\t    // much simpler and less messy\n\t  }, {\n\t    key: '_initLights',\n\t    value: function _initLights() {\n\t      // Position doesn't really matter (the angle is important), however it's\n\t      // used here so the helpers look more natural.\n\t\n\t      if (!this._options.skybox) {\n\t        var directionalLight = new _three2['default'].DirectionalLight(0xffffff, 1);\n\t        directionalLight.position.x = 10000;\n\t        directionalLight.position.y = 10000;\n\t        directionalLight.position.z = 10000;\n\t\n\t        // TODO: Get shadows working in non-PBR scenes\n\t\n\t        // directionalLight.castShadow = true;\n\t        //\n\t        // var d = 100;\n\t        // directionalLight.shadow.camera.left = -d;\n\t        // directionalLight.shadow.camera.right = d;\n\t        // directionalLight.shadow.camera.top = d;\n\t        // directionalLight.shadow.camera.bottom = -d;\n\t        //\n\t        // directionalLight.shadow.camera.near = 10;\n\t        // directionalLight.shadow.camera.far = 100;\n\t        //\n\t        // // TODO: Need to dial in on a good shadowmap size\n\t        // directionalLight.shadow.mapSize.width = 2048;\n\t        // directionalLight.shadow.mapSize.height = 2048;\n\t        //\n\t        // // directionalLight.shadowBias = -0.0010;\n\t        // // directionalLight.shadow.darkness = 0.15;\n\t\n\t        var directionalLight2 = new _three2['default'].DirectionalLight(0xffffff, 0.5);\n\t        directionalLight2.position.x = -10000;\n\t        directionalLight2.position.y = 10000;\n\t        directionalLight2.position.z = 0;\n\t\n\t        var directionalLight3 = new _three2['default'].DirectionalLight(0xffffff, 0.5);\n\t        directionalLight3.position.x = 10000;\n\t        directionalLight3.position.y = 10000;\n\t        directionalLight3.position.z = -10000;\n\t\n\t        this.add(directionalLight);\n\t        this.add(directionalLight2);\n\t        this.add(directionalLight3);\n\t\n\t        // var helper = new THREE.DirectionalLightHelper(directionalLight, 10);\n\t        // var helper2 = new THREE.DirectionalLightHelper(directionalLight2, 10);\n\t        // var helper3 = new THREE.DirectionalLightHelper(directionalLight3, 10);\n\t        //\n\t        // this.add(helper);\n\t        // this.add(helper2);\n\t        // this.add(helper3);\n\t      } else {\n\t          // Directional light that will be projected from the sun\n\t          this._skyboxLight = new _three2['default'].DirectionalLight(0xffffff, 1);\n\t\n\t          this._skyboxLight.castShadow = true;\n\t\n\t          var d = 10000;\n\t          this._skyboxLight.shadow.camera.left = -d;\n\t          this._skyboxLight.shadow.camera.right = d;\n\t          this._skyboxLight.shadow.camera.top = d;\n\t          this._skyboxLight.shadow.camera.bottom = -d;\n\t\n\t          this._skyboxLight.shadow.camera.near = 10000;\n\t          this._skyboxLight.shadow.camera.far = 70000;\n\t\n\t          // TODO: Need to dial in on a good shadowmap size\n\t          this._skyboxLight.shadow.mapSize.width = 2048;\n\t          this._skyboxLight.shadow.mapSize.height = 2048;\n\t\n\t          // this._skyboxLight.shadowBias = -0.0010;\n\t          // this._skyboxLight.shadow.darkness = 0.15;\n\t\n\t          // this._object3D.add(new THREE.CameraHelper(this._skyboxLight.shadow.camera));\n\t\n\t          this.add(this._skyboxLight);\n\t        }\n\t    }\n\t  }, {\n\t    key: '_initSkybox',\n\t    value: function _initSkybox() {\n\t      this._skybox = new _Skybox2['default'](this._world, this._skyboxLight);\n\t      this.add(this._skybox._mesh);\n\t    }\n\t\n\t    // Add grid helper for context during initial development\n\t  }, {\n\t    key: '_initGrid',\n\t    value: function _initGrid() {\n\t      var size = 4000;\n\t      var step = 100;\n\t\n\t      var gridHelper = new _three2['default'].GridHelper(size, step);\n\t      this.add(gridHelper);\n\t    }\n\t\n\t    // Clean up environment\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._skyboxLight = null;\n\t\n\t      if (this._skybox) {\n\t        this.remove(this._skybox._mesh);\n\t        this._skybox.destroy();\n\t        this._skybox = null;\n\t      }\n\t\n\t      _get(Object.getPrototypeOf(EnvironmentLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }]);\n\t\n\t  return EnvironmentLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = EnvironmentLayer;\n\t\n\tvar noNew = function noNew(options) {\n\t  return new EnvironmentLayer(options);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.environmentLayer = noNew;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _Sky = __webpack_require__(19);\n\t\n\tvar _Sky2 = _interopRequireDefault(_Sky);\n\t\n\tvar _lodashThrottle = __webpack_require__(20);\n\t\n\tvar _lodashThrottle2 = _interopRequireDefault(_lodashThrottle);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\tvar cubemap = {\n\t    vertexShader: ['varying vec3 vPosition;', 'void main() {', 'vPosition = position;', 'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n\t\n\t    fragmentShader: ['uniform samplerCube cubemap;', 'varying vec3 vPosition;', 'void main() {', 'gl_FragColor = textureCube(cubemap, normalize(vPosition));', '}'].join('\\n')\n\t};\n\t\n\tvar Skybox = (function () {\n\t    function Skybox(world, light) {\n\t        _classCallCheck(this, Skybox);\n\t\n\t        this._world = world;\n\t        this._light = light;\n\t\n\t        this._settings = {\n\t            distance: 38000,\n\t            turbidity: 10,\n\t            reileigh: 2,\n\t            mieCoefficient: 0.005,\n\t            mieDirectionalG: 0.8,\n\t            luminance: 1,\n\t            // 0.48 is a cracking dusk / sunset\n\t            // 0.4 is a beautiful early-morning / late-afternoon\n\t            // 0.2 is a nice day time\n\t            inclination: 0.48, // Elevation / inclination\n\t            azimuth: 0.25 };\n\t\n\t        // Facing front\n\t        this._initSkybox();\n\t        this._updateUniforms();\n\t        this._initEvents();\n\t    }\n\t\n\t    _createClass(Skybox, [{\n\t        key: '_initEvents',\n\t        value: function _initEvents() {\n\t            // Throttled to 1 per 100ms\n\t            this._throttledWorldUpdate = (0, _lodashThrottle2['default'])(this._update, 100);\n\t            this._world.on('preUpdate', this._throttledWorldUpdate, this);\n\t        }\n\t    }, {\n\t        key: '_initSkybox',\n\t        value: function _initSkybox() {\n\t            // Cube camera for skybox\n\t            this._cubeCamera = new _three2['default'].CubeCamera(1, 20000000, 128);\n\t\n\t            // Cube material\n\t            var cubeTarget = this._cubeCamera.renderTarget;\n\t\n\t            // Add Sky Mesh\n\t            this._sky = new _Sky2['default']();\n\t            this._skyScene = new _three2['default'].Scene();\n\t            this._skyScene.add(this._sky.mesh);\n\t\n\t            // Add Sun Helper\n\t            this._sunSphere = new _three2['default'].Mesh(new _three2['default'].SphereBufferGeometry(2000, 16, 8), new _three2['default'].MeshBasicMaterial({\n\t                color: 0xffffff\n\t            }));\n\t\n\t            // TODO: This isn't actually visible because it's not added to the layer\n\t            // this._sunSphere.visible = true;\n\t\n\t            var skyboxUniforms = {\n\t                cubemap: { type: 't', value: cubeTarget }\n\t            };\n\t\n\t            var skyboxMat = new _three2['default'].ShaderMaterial({\n\t                uniforms: skyboxUniforms,\n\t                vertexShader: cubemap.vertexShader,\n\t                fragmentShader: cubemap.fragmentShader,\n\t                side: _three2['default'].BackSide\n\t            });\n\t\n\t            this._mesh = new _three2['default'].Mesh(new _three2['default'].BoxGeometry(1900000, 1900000, 1900000), skyboxMat);\n\t\n\t            this._updateSkybox = true;\n\t        }\n\t    }, {\n\t        key: '_updateUniforms',\n\t        value: function _updateUniforms() {\n\t            var settings = this._settings;\n\t            var uniforms = this._sky.uniforms;\n\t            uniforms.turbidity.value = settings.turbidity;\n\t            uniforms.reileigh.value = settings.reileigh;\n\t            uniforms.luminance.value = settings.luminance;\n\t            uniforms.mieCoefficient.value = settings.mieCoefficient;\n\t            uniforms.mieDirectionalG.value = settings.mieDirectionalG;\n\t\n\t            var theta = Math.PI * (settings.inclination - 0.5);\n\t            var phi = 2 * Math.PI * (settings.azimuth - 0.5);\n\t\n\t            this._sunSphere.position.x = settings.distance * Math.cos(phi);\n\t            this._sunSphere.position.y = settings.distance * Math.sin(phi) * Math.sin(theta);\n\t            this._sunSphere.position.z = settings.distance * Math.sin(phi) * Math.cos(theta);\n\t\n\t            // Move directional light to sun position\n\t            this._light.position.copy(this._sunSphere.position);\n\t\n\t            this._sky.uniforms.sunPosition.value.copy(this._sunSphere.position);\n\t        }\n\t    }, {\n\t        key: '_update',\n\t        value: function _update(delta) {\n\t            if (this._updateSkybox) {\n\t                this._updateSkybox = false;\n\t            } else {\n\t                return;\n\t            }\n\t\n\t            // if (!this._angle) {\n\t            //   this._angle = 0;\n\t            // }\n\t            //\n\t            // // Animate inclination\n\t            // this._angle += Math.PI * delta;\n\t            // this._settings.inclination = 0.5 * (Math.sin(this._angle) / 2 + 0.5);\n\t\n\t            // Update light intensity depending on elevation of sun (day to night)\n\t            this._light.intensity = 1 - 0.95 * (this._settings.inclination / 0.5);\n\t\n\t            // // console.log(delta, this._angle, this._settings.inclination);\n\t            //\n\t            // TODO: Only do this when the uniforms have been changed\n\t            this._updateUniforms();\n\t\n\t            // TODO: Only do this when the cubemap has actually changed\n\t            this._cubeCamera.updateCubeMap(this._world._engine._renderer, this._skyScene);\n\t        }\n\t    }, {\n\t        key: 'getRenderTarget',\n\t        value: function getRenderTarget() {\n\t            return this._cubeCamera.renderTarget;\n\t        }\n\t    }, {\n\t        key: 'setInclination',\n\t        value: function setInclination(inclination) {\n\t            this._settings.inclination = inclination;\n\t            this._updateSkybox = true;\n\t        }\n\t\n\t        // Destroy the skybox and remove it from memory\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this._world.off('preUpdate', this._throttledWorldUpdate);\n\t            this._throttledWorldUpdate = null;\n\t\n\t            this._world = null;\n\t            this._light = null;\n\t\n\t            this._cubeCamera = null;\n\t\n\t            this._sky.mesh.geometry.dispose();\n\t            this._sky.mesh.geometry = null;\n\t\n\t            if (this._sky.mesh.material.map) {\n\t                this._sky.mesh.material.map.dispose();\n\t                this._sky.mesh.material.map = null;\n\t            }\n\t\n\t            this._sky.mesh.material.dispose();\n\t            this._sky.mesh.material = null;\n\t\n\t            this._sky.mesh = null;\n\t            this._sky = null;\n\t\n\t            this._skyScene = null;\n\t\n\t            this._sunSphere.geometry.dispose();\n\t            this._sunSphere.geometry = null;\n\t\n\t            if (this._sunSphere.material.map) {\n\t                this._sunSphere.material.map.dispose();\n\t                this._sunSphere.material.map = null;\n\t            }\n\t\n\t            this._sunSphere.material.dispose();\n\t            this._sunSphere.material = null;\n\t\n\t            this._sunSphere = null;\n\t\n\t            this._mesh.geometry.dispose();\n\t            this._mesh.geometry = null;\n\t\n\t            if (this._mesh.material.map) {\n\t                this._mesh.material.map.dispose();\n\t                this._mesh.material.map = null;\n\t            }\n\t\n\t            this._mesh.material.dispose();\n\t            this._mesh.material = null;\n\t        }\n\t    }]);\n\t\n\t    return Skybox;\n\t})();\n\t\n\texports['default'] = Skybox;\n\t\n\tvar noNew = function noNew(world, light) {\n\t    return new Skybox(world, light);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.skybox = noNew;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\t\t\tvalue: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// jscs:disable\n\t/*eslint eqeqeq:0*/\n\t\n\t/**\r\n\t * @author zz85 / https://github.com/zz85\r\n\t *\r\n\t * Based on 'A Practical Analytic Model for Daylight'\r\n\t * aka The Preetham Model, the de facto standard analytic skydome model\r\n\t * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\r\n\t *\r\n\t * First implemented by Simon Wallner\r\n\t * http://www.simonwallner.at/projects/atmospheric-scattering\r\n\t *\r\n\t * Improved by Martin Upitis\r\n\t * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\r\n\t *\r\n\t * Three.js integration by zz85 http://twitter.com/blurspline\r\n\t*/\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t_three2['default'].ShaderLib['sky'] = {\n\t\n\t\t\t\tuniforms: {\n\t\n\t\t\t\t\t\t\tluminance: { type: 'f', value: 1 },\n\t\t\t\t\t\t\tturbidity: { type: 'f', value: 2 },\n\t\t\t\t\t\t\treileigh: { type: 'f', value: 1 },\n\t\t\t\t\t\t\tmieCoefficient: { type: 'f', value: 0.005 },\n\t\t\t\t\t\t\tmieDirectionalG: { type: 'f', value: 0.8 },\n\t\t\t\t\t\t\tsunPosition: { type: 'v3', value: new _three2['default'].Vector3() }\n\t\n\t\t\t\t},\n\t\n\t\t\t\tvertexShader: ['varying vec3 vWorldPosition;', 'void main() {', 'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );', 'vWorldPosition = worldPosition.xyz;', 'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n\t\n\t\t\t\tfragmentShader: ['uniform sampler2D skySampler;', 'uniform vec3 sunPosition;', 'varying vec3 vWorldPosition;', 'vec3 cameraPos = vec3(0., 0., 0.);', '// uniform sampler2D sDiffuse;', '// const float turbidity = 10.0; //', '// const float reileigh = 2.; //', '// const float luminance = 1.0; //', '// const float mieCoefficient = 0.005;', '// const float mieDirectionalG = 0.8;', 'uniform float luminance;', 'uniform float turbidity;', 'uniform float reileigh;', 'uniform float mieCoefficient;', 'uniform float mieDirectionalG;', '// constants for atmospheric scattering', 'const float e = 2.71828182845904523536028747135266249775724709369995957;', 'const float pi = 3.141592653589793238462643383279502884197169;', 'const float n = 1.0003; // refractive index of air', 'const float N = 2.545E25; // number of molecules per unit volume for air at', '// 288.15K and 1013mb (sea level -45 celsius)', 'const float pn = 0.035;\t// depolatization factor for standard air', '// wavelength of used primaries, according to preetham', 'const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);', '// mie stuff', '// K coefficient for the primaries', 'const vec3 K = vec3(0.686, 0.678, 0.666);', 'const float v = 4.0;', '// optical length at zenith for molecules', 'const float rayleighZenithLength = 8.4E3;', 'const float mieZenithLength = 1.25E3;', 'const vec3 up = vec3(0.0, 1.0, 0.0);', 'const float EE = 1000.0;', 'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;', '// 66 arc seconds -> degrees, and the cosine of that', '// earth shadow hack', 'const float cutoffAngle = pi/1.95;', 'const float steepness = 1.5;', 'vec3 totalRayleigh(vec3 lambda)', '{', 'return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));', '}',\n\t\n\t\t\t\t// see http://blenderartists.org/forum/showthread.php?321110-Shaders-and-Skybox-madness\n\t\t\t\t'// A simplied version of the total Reayleigh scattering to works on browsers that use ANGLE', 'vec3 simplifiedRayleigh()', '{', 'return 0.0005 / vec3(94, 40, 18);',\n\t\t\t\t// return 0.00054532832366 / (3.0 * 2.545E25 * pow(vec3(680E-9, 550E-9, 450E-9), vec3(4.0)) * 6.245);\n\t\t\t\t'}', 'float rayleighPhase(float cosTheta)', '{\t ', 'return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));', '//\treturn (1.0 / (3.0*pi)) * (1.0 + pow(cosTheta, 2.0));', '//\treturn (3.0 / 4.0) * (1.0 + pow(cosTheta, 2.0));', '}', 'vec3 totalMie(vec3 lambda, vec3 K, float T)', '{', 'float c = (0.2 * T ) * 10E-18;', 'return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;', '}', 'float hgPhase(float cosTheta, float g)', '{', 'return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));', '}', 'float sunIntensity(float zenithAngleCos)', '{', 'return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));', '}', '// float logLuminance(vec3 c)', '// {', '// \treturn log(c.r * 0.2126 + c.g * 0.7152 + c.b * 0.0722);', '// }', '// Filmic ToneMapping http://filmicgames.com/archives/75', 'float A = 0.15;', 'float B = 0.50;', 'float C = 0.10;', 'float D = 0.20;', 'float E = 0.02;', 'float F = 0.30;', 'float W = 1000.0;', 'vec3 Uncharted2Tonemap(vec3 x)', '{', 'return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;', '}', 'void main() ', '{', 'float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);', '// luminance =  1.0 ;// vWorldPosition.y / 450000. + 0.5; //sunPosition.y / 450000. * 1. + 0.5;', '// gl_FragColor = vec4(sunfade, sunfade, sunfade, 1.0);', 'float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));', 'vec3 sunDirection = normalize(sunPosition);', 'float sunE = sunIntensity(dot(sunDirection, up));', '// extinction (absorbtion + out scattering) ', '// rayleigh coefficients',\n\t\n\t\t\t\t// 'vec3 betaR = totalRayleigh(lambda) * reileighCoefficient;',\n\t\t\t\t'vec3 betaR = simplifiedRayleigh() * reileighCoefficient;', '// mie coefficients', 'vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;', '// optical length', '// cutoff angle at 90 to avoid singularity in next formula.', 'float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));', 'float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));', 'float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));', '// combined extinction factor\t', 'vec3 Fex = exp(-(betaR * sR + betaM * sM));', '// in scattering', 'float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);', 'float rPhase = rayleighPhase(cosTheta*0.5+0.5);', 'vec3 betaRTheta = betaR * rPhase;', 'float mPhase = hgPhase(cosTheta, mieDirectionalG);', 'vec3 betaMTheta = betaM * mPhase;', 'vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));', 'Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));', '//nightsky', 'vec3 direction = normalize(vWorldPosition - cameraPos);', 'float theta = acos(direction.y); // elevation --> y-axis, [-pi/2, pi/2]', 'float phi = atan(direction.z, direction.x); // azimuth --> x-axis [-pi/2, pi/2]', 'vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);', '// vec3 L0 = texture2D(skySampler, uv).rgb+0.1 * Fex;', 'vec3 L0 = vec3(0.1) * Fex;', '// composition + solar disc', '//if (cosTheta > sunAngularDiameterCos)', 'float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);', '// if (normalize(vWorldPosition - cameraPos).y>0.0)', 'L0 += (sunE * 19000.0 * Fex)*sundisk;', 'vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));', 'vec3 texColor = (Lin+L0);   ', 'texColor *= 0.04 ;', 'texColor += vec3(0.0,0.001,0.0025)*0.3;', 'float g_fMaxLuminance = 1.0;', 'float fLumScaled = 0.1 / luminance;     ', 'float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled); ', 'float ExposureBias = fLumCompressed;', 'vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);', 'vec3 color = curr*whiteScale;', 'vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));', 'gl_FragColor.rgb = retColor;', 'gl_FragColor.a = 1.0;', '}'].join('\\n')\n\t\n\t};\n\t\n\tvar Sky = function Sky() {\n\t\n\t\t\t\tvar skyShader = _three2['default'].ShaderLib['sky'];\n\t\t\t\tvar skyUniforms = _three2['default'].UniformsUtils.clone(skyShader.uniforms);\n\t\n\t\t\t\tvar skyMat = new _three2['default'].ShaderMaterial({\n\t\t\t\t\t\t\tfragmentShader: skyShader.fragmentShader,\n\t\t\t\t\t\t\tvertexShader: skyShader.vertexShader,\n\t\t\t\t\t\t\tuniforms: skyUniforms,\n\t\t\t\t\t\t\tside: _three2['default'].BackSide\n\t\t\t\t});\n\t\n\t\t\t\tvar skyGeo = new _three2['default'].SphereBufferGeometry(450000, 32, 15);\n\t\t\t\tvar skyMesh = new _three2['default'].Mesh(skyGeo, skyMat);\n\t\n\t\t\t\t// Expose variables\n\t\t\t\tthis.mesh = skyMesh;\n\t\t\t\tthis.uniforms = skyUniforms;\n\t};\n\t\n\texports['default'] = Sky;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * lodash (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n\t * Released under MIT license <https://lodash.com/license>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t */\n\t\n\t/** Used as the `TypeError` message for \"Functions\" methods. */\n\tvar FUNC_ERROR_TEXT = 'Expected a function';\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar NAN = 0 / 0;\n\t\n\t/** `Object#toString` result references. */\n\tvar symbolTag = '[object Symbol]';\n\t\n\t/** Used to match leading and trailing whitespace. */\n\tvar reTrim = /^\\s+|\\s+$/g;\n\t\n\t/** Used to detect bad signed hexadecimal string values. */\n\tvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\t\n\t/** Used to detect binary string values. */\n\tvar reIsBinary = /^0b[01]+$/i;\n\t\n\t/** Used to detect octal string values. */\n\tvar reIsOctal = /^0o[0-7]+$/i;\n\t\n\t/** Built-in method references without a dependency on `root`. */\n\tvar freeParseInt = parseInt;\n\t\n\t/** Detect free variable `global` from Node.js. */\n\tvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\t\n\t/** Detect free variable `self`. */\n\tvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\t\n\t/** Used as a reference to the global object. */\n\tvar root = freeGlobal || freeSelf || Function('return this')();\n\t\n\t/** Used for built-in method references. */\n\tvar objectProto = Object.prototype;\n\t\n\t/**\n\t * Used to resolve the\n\t * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\t\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeMax = Math.max,\n\t    nativeMin = Math.min;\n\t\n\t/**\n\t * Gets the timestamp of the number of milliseconds that have elapsed since\n\t * the Unix epoch (1 January 1970 00:00:00 UTC).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 2.4.0\n\t * @category Date\n\t * @returns {number} Returns the timestamp.\n\t * @example\n\t *\n\t * _.defer(function(stamp) {\n\t *   console.log(_.now() - stamp);\n\t * }, _.now());\n\t * // => Logs the number of milliseconds it took for the deferred invocation.\n\t */\n\tvar now = function() {\n\t  return root.Date.now();\n\t};\n\t\n\t/**\n\t * Creates a debounced function that delays invoking `func` until after `wait`\n\t * milliseconds have elapsed since the last time the debounced function was\n\t * invoked. The debounced function comes with a `cancel` method to cancel\n\t * delayed `func` invocations and a `flush` method to immediately invoke them.\n\t * Provide `options` to indicate whether `func` should be invoked on the\n\t * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n\t * with the last arguments provided to the debounced function. Subsequent\n\t * calls to the debounced function return the result of the last `func`\n\t * invocation.\n\t *\n\t * **Note:** If `leading` and `trailing` options are `true`, `func` is\n\t * invoked on the trailing edge of the timeout only if the debounced function\n\t * is invoked more than once during the `wait` timeout.\n\t *\n\t * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n\t * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n\t *\n\t * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n\t * for details over the differences between `_.debounce` and `_.throttle`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Function\n\t * @param {Function} func The function to debounce.\n\t * @param {number} [wait=0] The number of milliseconds to delay.\n\t * @param {Object} [options={}] The options object.\n\t * @param {boolean} [options.leading=false]\n\t *  Specify invoking on the leading edge of the timeout.\n\t * @param {number} [options.maxWait]\n\t *  The maximum time `func` is allowed to be delayed before it's invoked.\n\t * @param {boolean} [options.trailing=true]\n\t *  Specify invoking on the trailing edge of the timeout.\n\t * @returns {Function} Returns the new debounced function.\n\t * @example\n\t *\n\t * // Avoid costly calculations while the window size is in flux.\n\t * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n\t *\n\t * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n\t * jQuery(element).on('click', _.debounce(sendMail, 300, {\n\t *   'leading': true,\n\t *   'trailing': false\n\t * }));\n\t *\n\t * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n\t * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n\t * var source = new EventSource('/stream');\n\t * jQuery(source).on('message', debounced);\n\t *\n\t * // Cancel the trailing debounced invocation.\n\t * jQuery(window).on('popstate', debounced.cancel);\n\t */\n\tfunction debounce(func, wait, options) {\n\t  var lastArgs,\n\t      lastThis,\n\t      maxWait,\n\t      result,\n\t      timerId,\n\t      lastCallTime,\n\t      lastInvokeTime = 0,\n\t      leading = false,\n\t      maxing = false,\n\t      trailing = true;\n\t\n\t  if (typeof func != 'function') {\n\t    throw new TypeError(FUNC_ERROR_TEXT);\n\t  }\n\t  wait = toNumber(wait) || 0;\n\t  if (isObject(options)) {\n\t    leading = !!options.leading;\n\t    maxing = 'maxWait' in options;\n\t    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n\t    trailing = 'trailing' in options ? !!options.trailing : trailing;\n\t  }\n\t\n\t  function invokeFunc(time) {\n\t    var args = lastArgs,\n\t        thisArg = lastThis;\n\t\n\t    lastArgs = lastThis = undefined;\n\t    lastInvokeTime = time;\n\t    result = func.apply(thisArg, args);\n\t    return result;\n\t  }\n\t\n\t  function leadingEdge(time) {\n\t    // Reset any `maxWait` timer.\n\t    lastInvokeTime = time;\n\t    // Start the timer for the trailing edge.\n\t    timerId = setTimeout(timerExpired, wait);\n\t    // Invoke the leading edge.\n\t    return leading ? invokeFunc(time) : result;\n\t  }\n\t\n\t  function remainingWait(time) {\n\t    var timeSinceLastCall = time - lastCallTime,\n\t        timeSinceLastInvoke = time - lastInvokeTime,\n\t        result = wait - timeSinceLastCall;\n\t\n\t    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n\t  }\n\t\n\t  function shouldInvoke(time) {\n\t    var timeSinceLastCall = time - lastCallTime,\n\t        timeSinceLastInvoke = time - lastInvokeTime;\n\t\n\t    // Either this is the first call, activity has stopped and we're at the\n\t    // trailing edge, the system time has gone backwards and we're treating\n\t    // it as the trailing edge, or we've hit the `maxWait` limit.\n\t    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n\t      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n\t  }\n\t\n\t  function timerExpired() {\n\t    var time = now();\n\t    if (shouldInvoke(time)) {\n\t      return trailingEdge(time);\n\t    }\n\t    // Restart the timer.\n\t    timerId = setTimeout(timerExpired, remainingWait(time));\n\t  }\n\t\n\t  function trailingEdge(time) {\n\t    timerId = undefined;\n\t\n\t    // Only invoke if we have `lastArgs` which means `func` has been\n\t    // debounced at least once.\n\t    if (trailing && lastArgs) {\n\t      return invokeFunc(time);\n\t    }\n\t    lastArgs = lastThis = undefined;\n\t    return result;\n\t  }\n\t\n\t  function cancel() {\n\t    if (timerId !== undefined) {\n\t      clearTimeout(timerId);\n\t    }\n\t    lastInvokeTime = 0;\n\t    lastArgs = lastCallTime = lastThis = timerId = undefined;\n\t  }\n\t\n\t  function flush() {\n\t    return timerId === undefined ? result : trailingEdge(now());\n\t  }\n\t\n\t  function debounced() {\n\t    var time = now(),\n\t        isInvoking = shouldInvoke(time);\n\t\n\t    lastArgs = arguments;\n\t    lastThis = this;\n\t    lastCallTime = time;\n\t\n\t    if (isInvoking) {\n\t      if (timerId === undefined) {\n\t        return leadingEdge(lastCallTime);\n\t      }\n\t      if (maxing) {\n\t        // Handle invocations in a tight loop.\n\t        timerId = setTimeout(timerExpired, wait);\n\t        return invokeFunc(lastCallTime);\n\t      }\n\t    }\n\t    if (timerId === undefined) {\n\t      timerId = setTimeout(timerExpired, wait);\n\t    }\n\t    return result;\n\t  }\n\t  debounced.cancel = cancel;\n\t  debounced.flush = flush;\n\t  return debounced;\n\t}\n\t\n\t/**\n\t * Creates a throttled function that only invokes `func` at most once per\n\t * every `wait` milliseconds. The throttled function comes with a `cancel`\n\t * method to cancel delayed `func` invocations and a `flush` method to\n\t * immediately invoke them. Provide `options` to indicate whether `func`\n\t * should be invoked on the leading and/or trailing edge of the `wait`\n\t * timeout. The `func` is invoked with the last arguments provided to the\n\t * throttled function. Subsequent calls to the throttled function return the\n\t * result of the last `func` invocation.\n\t *\n\t * **Note:** If `leading` and `trailing` options are `true`, `func` is\n\t * invoked on the trailing edge of the timeout only if the throttled function\n\t * is invoked more than once during the `wait` timeout.\n\t *\n\t * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n\t * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n\t *\n\t * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n\t * for details over the differences between `_.throttle` and `_.debounce`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Function\n\t * @param {Function} func The function to throttle.\n\t * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n\t * @param {Object} [options={}] The options object.\n\t * @param {boolean} [options.leading=true]\n\t *  Specify invoking on the leading edge of the timeout.\n\t * @param {boolean} [options.trailing=true]\n\t *  Specify invoking on the trailing edge of the timeout.\n\t * @returns {Function} Returns the new throttled function.\n\t * @example\n\t *\n\t * // Avoid excessively updating the position while scrolling.\n\t * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n\t *\n\t * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n\t * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n\t * jQuery(element).on('click', throttled);\n\t *\n\t * // Cancel the trailing throttled invocation.\n\t * jQuery(window).on('popstate', throttled.cancel);\n\t */\n\tfunction throttle(func, wait, options) {\n\t  var leading = true,\n\t      trailing = true;\n\t\n\t  if (typeof func != 'function') {\n\t    throw new TypeError(FUNC_ERROR_TEXT);\n\t  }\n\t  if (isObject(options)) {\n\t    leading = 'leading' in options ? !!options.leading : leading;\n\t    trailing = 'trailing' in options ? !!options.trailing : trailing;\n\t  }\n\t  return debounce(func, wait, {\n\t    'leading': leading,\n\t    'maxWait': wait,\n\t    'trailing': trailing\n\t  });\n\t}\n\t\n\t/**\n\t * Checks if `value` is the\n\t * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n\t * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return !!value && typeof value == 'object';\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `Symbol` primitive or object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n\t * @example\n\t *\n\t * _.isSymbol(Symbol.iterator);\n\t * // => true\n\t *\n\t * _.isSymbol('abc');\n\t * // => false\n\t */\n\tfunction isSymbol(value) {\n\t  return typeof value == 'symbol' ||\n\t    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n\t}\n\t\n\t/**\n\t * Converts `value` to a number.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to process.\n\t * @returns {number} Returns the number.\n\t * @example\n\t *\n\t * _.toNumber(3.2);\n\t * // => 3.2\n\t *\n\t * _.toNumber(Number.MIN_VALUE);\n\t * // => 5e-324\n\t *\n\t * _.toNumber(Infinity);\n\t * // => Infinity\n\t *\n\t * _.toNumber('3.2');\n\t * // => 3.2\n\t */\n\tfunction toNumber(value) {\n\t  if (typeof value == 'number') {\n\t    return value;\n\t  }\n\t  if (isSymbol(value)) {\n\t    return NAN;\n\t  }\n\t  if (isObject(value)) {\n\t    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n\t    value = isObject(other) ? (other + '') : other;\n\t  }\n\t  if (typeof value != 'string') {\n\t    return value === 0 ? value : +value;\n\t  }\n\t  value = value.replace(reTrim, '');\n\t  var isBinary = reIsBinary.test(value);\n\t  return (isBinary || reIsOctal.test(value))\n\t    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n\t    : (reIsBadHex.test(value) ? NAN : +value);\n\t}\n\t\n\tmodule.exports = throttle;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _TileLayer2 = __webpack_require__(22);\n\t\n\tvar _TileLayer3 = _interopRequireDefault(_TileLayer2);\n\t\n\tvar _ImageTile = __webpack_require__(35);\n\t\n\tvar _ImageTile2 = _interopRequireDefault(_ImageTile);\n\t\n\tvar _ImageTileLayerBaseMaterial = __webpack_require__(38);\n\t\n\tvar _ImageTileLayerBaseMaterial2 = _interopRequireDefault(_ImageTileLayerBaseMaterial);\n\t\n\tvar _lodashThrottle = __webpack_require__(20);\n\t\n\tvar _lodashThrottle2 = _interopRequireDefault(_lodashThrottle);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// DONE: Find a way to avoid the flashing caused by the gap between old tiles\n\t// being removed and the new tiles being ready for display\n\t//\n\t// DONE: Simplest first step for MVP would be to give each tile mesh the colour\n\t// of the basemap ground so it blends in a little more, or have a huge ground\n\t// plane underneath all the tiles that shows through between tile updates.\n\t//\n\t// Could keep the old tiles around until the new ones are ready, though they'd\n\t// probably need to be layered in a way so the old tiles don't overlap new ones,\n\t// which is similar to how Leaflet approaches this (it has 2 layers)\n\t//\n\t// Could keep the tile from the previous quadtree level visible until all 4\n\t// tiles at the new / current level have finished loading and are displayed.\n\t// Perhaps by keeping a map of tiles by quadcode and a boolean for each of the\n\t// child quadcodes showing whether they are loaded and in view. If all true then\n\t// remove the parent tile, otherwise keep it on a lower layer.\n\t\n\t// TODO: Load and display a base layer separate to the LOD grid that is at a low\n\t// resolution – used as a backup / background to fill in empty areas / distance\n\t\n\t// DONE: Fix the issue where some tiles just don't load, or at least the texture\n\t// never shows up – tends to happen if you quickly zoom in / out past it while\n\t// it's still loading, leaving a blank space\n\t\n\t// TODO: Optimise the request of many image tiles – look at how Leaflet and\n\t// OpenWebGlobe approach this (eg. batching, queues, etc)\n\t\n\t// TODO: Cancel pending tile requests if they get removed from view before they\n\t// reach a ready state (eg. cancel image requests, etc). Need to ensure that the\n\t// images are re-requested when the tile is next in scene (even if from cache)\n\t\n\t// TODO: Consider not performing an LOD calculation on every frame, instead only\n\t// on move end so panning, orbiting and zooming stays smooth. Otherwise it's\n\t// possible for performance to tank if you pan, orbit or zoom rapidly while all\n\t// the LOD calculations are being made and new tiles requested.\n\t//\n\t// Pending tiles should continue to be requested and output to the scene on each\n\t// frame, but no new LOD calculations should be made.\n\t\n\t// This tile layer both updates the quadtree and outputs tiles on every frame\n\t// (throttled to some amount)\n\t//\n\t// This is because the computational complexity of image tiles is generally low\n\t// and so there isn't much jank when running these calculations and outputs in\n\t// realtime\n\t//\n\t// The benefit to doing this is that the underlying map layer continues to\n\t// refresh and update during movement, which is an arguably better experience\n\t\n\tvar ImageTileLayer = (function (_TileLayer) {\n\t  _inherits(ImageTileLayer, _TileLayer);\n\t\n\t  function ImageTileLayer(path, options) {\n\t    _classCallCheck(this, ImageTileLayer);\n\t\n\t    var defaults = {\n\t      distance: 300000\n\t    };\n\t\n\t    options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(ImageTileLayer.prototype), 'constructor', this).call(this, options);\n\t\n\t    this._path = path;\n\t  }\n\t\n\t  _createClass(ImageTileLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _get(Object.getPrototypeOf(ImageTileLayer.prototype), '_onAdd', _this).call(_this, world).then(function () {\n\t          // TODO: Removed because it causes depth buffer intersection issues\n\t          // with layer on top for some reason. Need to work out why and fix.\n\t          //\n\t          // Add base layer\n\t          // var geom = new THREE.PlaneBufferGeometry(2000000, 2000000, 1);\n\t\n\t          // var baseMaterial;\n\t          // if (this._world._environment._skybox) {\n\t          //   baseMaterial = ImageTileLayerBaseMaterial('#f5f5f3', this._world._environment._skybox.getRenderTarget());\n\t          // } else {\n\t          //   baseMaterial = ImageTileLayerBaseMaterial('#f5f5f3');\n\t          // }\n\t\n\t          // var mesh = new THREE.Mesh(geom, baseMaterial);\n\t\n\t          // // Setting this causes a depth-buffer intersection issue on the\n\t          // // all-the-things example\n\t          // // mesh.renderOrder = -1;\n\t\n\t          // mesh.rotation.x = -90 * Math.PI / 180;\n\t\n\t          // // TODO: It might be overkill to receive a shadow on the base layer as it's\n\t          // // rarely seen (good to have if performance difference is negligible)\n\t          // mesh.receiveShadow = true;\n\t\n\t          // this._baseLayer = mesh;\n\t          // this.add(mesh);\n\t\n\t          // Trigger initial quadtree calculation on the next frame\n\t          //\n\t          // TODO: This is a hack to ensure the camera is all set up - a better\n\t          // solution should be found\n\t          setTimeout(function () {\n\t            _this._calculateLOD();\n\t            _this._initEvents();\n\t            resolve(_this);\n\t          }, 0);\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_initEvents',\n\t    value: function _initEvents() {\n\t      // Run LOD calculations based on render calls\n\t      //\n\t      // Throttled to 1 LOD calculation per 100ms\n\t      this._throttledWorldUpdate = (0, _lodashThrottle2['default'])(this._onWorldUpdate, 100);\n\t\n\t      this._world.on('preUpdate', this._throttledWorldUpdate, this);\n\t      // this._world.on('move', this._onWorldMove, this);\n\t    }\n\t  }, {\n\t    key: '_onWorldUpdate',\n\t    value: function _onWorldUpdate() {\n\t      this._calculateLOD();\n\t      this._outputTiles();\n\t    }\n\t  }, {\n\t    key: '_onWorldMove',\n\t    value: function _onWorldMove(latlon, point) {\n\t      // this._moveBaseLayer(point);\n\t    }\n\t  }, {\n\t    key: '_moveBaseLayer',\n\t    value: function _moveBaseLayer(point) {\n\t      this._baseLayer.position.x = point.x;\n\t      this._baseLayer.position.z = point.y;\n\t    }\n\t  }, {\n\t    key: '_createTile',\n\t    value: function _createTile(quadcode, layer) {\n\t      return new _ImageTile2['default'](quadcode, this._path, layer);\n\t    }\n\t\n\t    // Destroys the layer and removes it from the scene and memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._world.off('preUpdate', this._throttledWorldUpdate);\n\t      this._world.off('move', this._onWorldMove);\n\t\n\t      this._throttledWorldUpdate = null;\n\t\n\t      // Dispose of mesh and materials\n\t      // this._baseLayer.geometry.dispose();\n\t      // this._baseLayer.geometry = null;\n\t\n\t      // if (this._baseLayer.material.map) {\n\t      //   this._baseLayer.material.map.dispose();\n\t      //   this._baseLayer.material.map = null;\n\t      // }\n\t\n\t      // this._baseLayer.material.dispose();\n\t      // this._baseLayer.material = null;\n\t\n\t      // this._baseLayer = null;\n\t\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(ImageTileLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }]);\n\t\n\t  return ImageTileLayer;\n\t})(_TileLayer3['default']);\n\t\n\texports['default'] = ImageTileLayer;\n\t\n\tvar noNew = function noNew(path, options) {\n\t  return new ImageTileLayer(path, options);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.imageTileLayer = noNew;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _TileCache = __webpack_require__(23);\n\t\n\tvar _TileCache2 = _interopRequireDefault(_TileCache);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// TODO: Consider removing picking from TileLayer instances as there aren't\n\t// (m)any situations where it would be practical\n\t//\n\t// For example, how would you even know what picking IDs to listen to and what\n\t// to do with them?\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// TODO: Consider keeping a single TileLayer / LOD instance running by default\n\t// that keeps a standard LOD grid for other layers to utilise, rather than\n\t// having to create their own, unique LOD grid and duplicate calculations when\n\t// they're going to use the same grid setup anyway\n\t//\n\t// It still makes sense to be able to have a custom LOD grid for some layers as\n\t// they may want to customise things, maybe not even using a quadtree at all!\n\t//\n\t// Perhaps it makes sense to split out the quadtree stuff into a singleton and\n\t// pass in the necessary parameters each time for the calculation step.\n\t//\n\t// Either way, it seems silly to force layers to have to create a new LOD grid\n\t// each time and create extra, duplicated processing every frame.\n\t\n\t// TODO: Allow passing in of options to define min/max LOD and a distance to use\n\t// for culling tiles beyond that distance.\n\t\n\t// DONE: Prevent tiles from being loaded if they are further than a certain\n\t// distance from the camera and are unlikely to be seen anyway\n\t\n\t// TODO: Avoid performing LOD calculation when it isn't required. For example,\n\t// when nothing has changed since the last frame and there are no tiles to be\n\t// loaded or in need of rendering\n\t\n\t// TODO: Only remove tiles from the layer that aren't to be rendered in the\n\t// current frame – it seems excessive to remove all tiles and re-add them on\n\t// every single frame, even if it's just array manipulation\n\t\n\t// TODO: Fix LOD calculation so min and max LOD can be changed without causing\n\t// problems (eg. making min above 5 causes all sorts of issues)\n\t\n\t// TODO: Reuse THREE objects where possible instead of creating new instances\n\t// on every LOD calculation\n\t\n\t// TODO: Consider not using THREE or LatLon / Point objects in LOD calculations\n\t// to avoid creating unnecessary memory for garbage collection\n\t\n\t// TODO: Prioritise loading of tiles at highest level in the quadtree (those\n\t// closest to the camera) so visual inconsistancies during loading are minimised\n\t\n\tvar TileLayer = (function (_Layer) {\n\t  _inherits(TileLayer, _Layer);\n\t\n\t  function TileLayer(options) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, TileLayer);\n\t\n\t    var defaults = {\n\t      picking: false,\n\t      maxCache: 1000,\n\t      maxLOD: 18\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(TileLayer.prototype), 'constructor', this).call(this, _options);\n\t\n\t    this._destroy = false;\n\t\n\t    this._tileCache = new _TileCache2['default'](this._options.maxCache, function (tile) {\n\t      _this._destroyTile(tile);\n\t    });\n\t\n\t    // List of tiles from the previous LOD calculation\n\t    this._tileList = [];\n\t\n\t    // TODO: Work out why changing the minLOD causes loads of issues\n\t    this._minLOD = 3;\n\t    this._maxLOD = this._options.maxLOD;\n\t\n\t    this._frustum = new _three2['default'].Frustum();\n\t    this._tiles = new _three2['default'].Object3D();\n\t    this._tilesPicking = new _three2['default'].Object3D();\n\t  }\n\t\n\t  _createClass(TileLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      this.addToPicking(this._tilesPicking);\n\t      this.add(this._tiles);\n\t\n\t      return Promise.resolve();\n\t    }\n\t  }, {\n\t    key: '_updateFrustum',\n\t    value: function _updateFrustum() {\n\t      var camera = this._world.getCamera();\n\t      var projScreenMatrix = new _three2['default'].Matrix4();\n\t      projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\t\n\t      this._frustum.setFromMatrix(camera.projectionMatrix);\n\t      this._frustum.setFromMatrix(new _three2['default'].Matrix4().multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse));\n\t    }\n\t  }, {\n\t    key: '_tileInFrustum',\n\t    value: function _tileInFrustum(tile) {\n\t      var bounds = tile.getBounds();\n\t      return this._frustum.intersectsBox(new _three2['default'].Box3(new _three2['default'].Vector3(bounds[0], 0, bounds[3]), new _three2['default'].Vector3(bounds[2], 0, bounds[1])));\n\t    }\n\t\n\t    // Update and output tiles from the previous LOD checklist\n\t  }, {\n\t    key: '_outputTiles',\n\t    value: function _outputTiles() {\n\t      var _this2 = this;\n\t\n\t      if (!this._tiles || this._destroy) {\n\t        return;\n\t      }\n\t\n\t      // Remove all tiles from layer\n\t      this._removeTiles();\n\t\n\t      // Add / re-add tiles\n\t      this._tileList.forEach(function (tile) {\n\t        // Are the mesh and texture ready?\n\t        //\n\t        // If yes, continue\n\t        // If no, skip\n\t        if (!tile.isReady()) {\n\t          return;\n\t        }\n\t\n\t        // Add tile to layer (and to scene) if not already there\n\t        _this2._tiles.add(tile.getMesh());\n\t\n\t        if (tile.getPickingMesh()) {\n\t          _this2._tilesPicking.add(tile.getPickingMesh());\n\t        }\n\t      });\n\t\n\t      // Emit event notifying of new tiles\n\t      this.emit('tilesList', this._tileList.map(function (tile) {\n\t        return tile;\n\t      }));\n\t    }\n\t\n\t    // Works out tiles in the view frustum and stores them in an array\n\t    //\n\t    // Does not output the tiles, deferring this to _outputTiles()\n\t  }, {\n\t    key: '_calculateLOD',\n\t    value: function _calculateLOD() {\n\t      var _this3 = this;\n\t\n\t      if (this._stop || !this._world || this._destroy) {\n\t        return;\n\t      }\n\t\n\t      // var start = (performance || Date).now();\n\t\n\t      var camera = this._world.getCamera();\n\t\n\t      // 1. Update and retrieve camera frustum\n\t      this._updateFrustum(this._frustum, camera);\n\t\n\t      // 2. Add the four root items of the quadtree to a check list\n\t      var checkList = this._checklist;\n\t      checkList = [];\n\t      checkList.push(this._requestTile('0', this));\n\t      checkList.push(this._requestTile('1', this));\n\t      checkList.push(this._requestTile('2', this));\n\t      checkList.push(this._requestTile('3', this));\n\t\n\t      // 3. Call Divide, passing in the check list\n\t      this._divide(checkList);\n\t\n\t      // // 4. Remove all tiles from layer\n\t      //\n\t      // Moved to _outputTiles() for now\n\t      // this._removeTiles();\n\t\n\t      // Order tile-list by zoom so nearest tiles are requested first\n\t      checkList.sort(function (a, b) {\n\t        return a._quadcode.length < b._quadcode.length;\n\t      });\n\t\n\t      // 5. Filter the tiles remaining in the check list\n\t      var tileList = checkList.filter(function (tile, index) {\n\t        // Skip tile if it's not in the current view frustum\n\t        if (!_this3._tileInFrustum(tile)) {\n\t          return false;\n\t        }\n\t\n\t        if (_this3._options.distance && _this3._options.distance > 0) {\n\t          // TODO: Can probably speed this up\n\t          var center = tile.getCenter();\n\t          var dist = new _three2['default'].Vector3(center[0], 0, center[1]).sub(camera.position).length();\n\t\n\t          // Manual distance limit to cut down on tiles so far away\n\t          if (dist > _this3._options.distance) {\n\t            return false;\n\t          }\n\t        }\n\t\n\t        // Does the tile have a mesh?\n\t        //\n\t        // If yes, continue\n\t        // If no, generate tile mesh, request texture and skip\n\t        if (!tile.getMesh() || tile.isAborted()) {\n\t          tile.requestTileAsync();\n\t        }\n\t\n\t        return true;\n\t\n\t        // Are the mesh and texture ready?\n\t        //\n\t        // If yes, continue\n\t        // If no, skip\n\t        // if (!tile.isReady()) {\n\t        //   return;\n\t        // }\n\t        //\n\t        // // Add tile to layer (and to scene)\n\t        // this._tiles.add(tile.getMesh());\n\t      });\n\t\n\t      // Get list of tiles that were in the previous update but not the\n\t      // current one (for aborting requests, etc)\n\t      var missingTiles = this._tileList.filter(function (item) {\n\t        return tileList.indexOf(item) < 0;\n\t      });\n\t\n\t      // Abort tiles that are no longer in view\n\t      missingTiles.forEach(function (tile) {\n\t        return tile._abortRequest();\n\t      });\n\t\n\t      this._tileList = tileList;\n\t\n\t      // console.log((performance || Date).now() - start);\n\t    }\n\t  }, {\n\t    key: '_divide',\n\t    value: function _divide(checkList) {\n\t      var count = 0;\n\t      var currentItem;\n\t      var quadcode;\n\t\n\t      // 1. Loop until count equals check list length\n\t      while (count != checkList.length) {\n\t        currentItem = checkList[count];\n\t        quadcode = currentItem.getQuadcode();\n\t\n\t        // 2. Increase count and continue loop if quadcode equals max LOD / zoom\n\t        if (currentItem.length === this._maxLOD) {\n\t          count++;\n\t          continue;\n\t        }\n\t\n\t        // 3. Else, calculate screen-space error metric for quadcode\n\t        if (this._screenSpaceError(currentItem)) {\n\t          // 4. If error is sufficient...\n\t\n\t          // 4a. Remove parent item from the check list\n\t          checkList.splice(count, 1);\n\t\n\t          // 4b. Add 4 child items to the check list\n\t          checkList.push(this._requestTile(quadcode + '0', this));\n\t          checkList.push(this._requestTile(quadcode + '1', this));\n\t          checkList.push(this._requestTile(quadcode + '2', this));\n\t          checkList.push(this._requestTile(quadcode + '3', this));\n\t\n\t          // 4d. Continue the loop without increasing count\n\t          continue;\n\t        } else {\n\t          // 5. Else, increase count and continue loop\n\t          count++;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '_screenSpaceError',\n\t    value: function _screenSpaceError(tile) {\n\t      var minDepth = this._minLOD;\n\t      var maxDepth = this._maxLOD;\n\t\n\t      var quadcode = tile.getQuadcode();\n\t\n\t      var camera = this._world.getCamera();\n\t\n\t      // Tweak this value to refine specific point that each quad is subdivided\n\t      //\n\t      // It's used to multiple the dimensions of the tile sides before\n\t      // comparing against the tile distance from camera\n\t      var quality = 3.0;\n\t\n\t      // 1. Return false if quadcode length equals maxDepth (stop dividing)\n\t      if (quadcode.length === maxDepth) {\n\t        return false;\n\t      }\n\t\n\t      // 2. Return true if quadcode length is less than minDepth\n\t      if (quadcode.length < minDepth) {\n\t        return true;\n\t      }\n\t\n\t      // 3. Return false if quadcode bounds are not in view frustum\n\t      if (!this._tileInFrustum(tile)) {\n\t        return false;\n\t      }\n\t\n\t      var center = tile.getCenter();\n\t\n\t      // 4. Calculate screen-space error metric\n\t      // TODO: Use closest distance to one of the 4 tile corners\n\t      var dist = new _three2['default'].Vector3(center[0], 0, center[1]).sub(camera.position).length();\n\t\n\t      var error = quality * tile.getSide() / dist;\n\t\n\t      // 5. Return true if error is greater than 1.0, else return false\n\t      return error > 1.0;\n\t    }\n\t  }, {\n\t    key: '_removeTiles',\n\t    value: function _removeTiles() {\n\t      if (!this._tiles || !this._tiles.children) {\n\t        return;\n\t      }\n\t\n\t      for (var i = this._tiles.children.length - 1; i >= 0; i--) {\n\t        this._tiles.remove(this._tiles.children[i]);\n\t      }\n\t\n\t      if (!this._tilesPicking || !this._tilesPicking.children) {\n\t        return;\n\t      }\n\t\n\t      for (var i = this._tilesPicking.children.length - 1; i >= 0; i--) {\n\t        this._tilesPicking.remove(this._tilesPicking.children[i]);\n\t      }\n\t    }\n\t\n\t    // Return a new tile instance\n\t  }, {\n\t    key: '_createTile',\n\t    value: function _createTile(quadcode, layer) {}\n\t\n\t    // Get a cached tile or request a new one if not in cache\n\t  }, {\n\t    key: '_requestTile',\n\t    value: function _requestTile(quadcode, layer) {\n\t      var tile = this._tileCache.getTile(quadcode);\n\t\n\t      if (!tile) {\n\t        // Set up a brand new tile\n\t        tile = this._createTile(quadcode, layer);\n\t\n\t        // Add tile to cache, though it won't be ready yet as the data is being\n\t        // requested from various places asynchronously\n\t        this._tileCache.setTile(quadcode, tile);\n\t      }\n\t\n\t      return tile;\n\t    }\n\t  }, {\n\t    key: '_destroyTile',\n\t    value: function _destroyTile(tile) {\n\t      // Remove tile from scene\n\t      this._tiles.remove(tile.getMesh());\n\t\n\t      // Delete any references to the tile within this component\n\t\n\t      // Call destory on tile instance\n\t      tile.destroy();\n\t    }\n\t  }, {\n\t    key: 'show',\n\t    value: function show() {\n\t      this._stop = false;\n\t\n\t      if (this._tilesPicking) {\n\t        this._tilesPicking.visible = true;\n\t      }\n\t\n\t      this._calculateLOD();\n\t      _get(Object.getPrototypeOf(TileLayer.prototype), 'show', this).call(this);\n\t    }\n\t  }, {\n\t    key: 'hide',\n\t    value: function hide() {\n\t      this._stop = true;\n\t\n\t      if (this._tilesPicking) {\n\t        this._tilesPicking.visible = false;\n\t      }\n\t\n\t      _get(Object.getPrototypeOf(TileLayer.prototype), 'hide', this).call(this);\n\t    }\n\t\n\t    // Destroys the layer and removes it from the scene and memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._destroy = true;\n\t\n\t      if (this._tiles.children) {\n\t        // Remove all tiles\n\t        for (var i = this._tiles.children.length - 1; i >= 0; i--) {\n\t          this._tiles.remove(this._tiles.children[i]);\n\t        }\n\t      }\n\t\n\t      // Remove tile from picking scene\n\t      this.removeFromPicking(this._tilesPicking);\n\t\n\t      if (this._tilesPicking.children) {\n\t        // Remove all tiles\n\t        for (var i = this._tilesPicking.children.length - 1; i >= 0; i--) {\n\t          this._tilesPicking.remove(this._tilesPicking.children[i]);\n\t        }\n\t      }\n\t\n\t      this._tileCache.destroy();\n\t      this._tileCache = null;\n\t\n\t      this._tiles = null;\n\t      this._tilesPicking = null;\n\t      this._frustum = null;\n\t\n\t      _get(Object.getPrototypeOf(TileLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }]);\n\t\n\t  return TileLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = TileLayer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _lruCache = __webpack_require__(24);\n\t\n\tvar _lruCache2 = _interopRequireDefault(_lruCache);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// This process is based on a similar approach taken by OpenWebGlobe\n\t// See: https://github.com/OpenWebGlobe/WebViewer/blob/master/source/core/globecache.js\n\t\n\tvar TileCache = (function () {\n\t  function TileCache(cacheLimit, onDestroyTile) {\n\t    _classCallCheck(this, TileCache);\n\t\n\t    this._cache = (0, _lruCache2['default'])({\n\t      max: cacheLimit,\n\t      dispose: function dispose(key, tile) {\n\t        onDestroyTile(tile);\n\t      }\n\t    });\n\t  }\n\t\n\t  // Returns true if all specified tile providers are ready to be used\n\t  // Otherwise, returns false\n\t\n\t  _createClass(TileCache, [{\n\t    key: 'isReady',\n\t    value: function isReady() {\n\t      return false;\n\t    }\n\t\n\t    // Get a cached tile without requesting a new one\n\t  }, {\n\t    key: 'getTile',\n\t    value: function getTile(quadcode) {\n\t      return this._cache.get(quadcode);\n\t    }\n\t\n\t    // Add tile to cache\n\t  }, {\n\t    key: 'setTile',\n\t    value: function setTile(quadcode, tile) {\n\t      this._cache.set(quadcode, tile);\n\t    }\n\t\n\t    // Destroy the cache and remove it from memory\n\t    //\n\t    // TODO: Call destroy method on items in cache\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._cache.reset();\n\t      this._cache = null;\n\t    }\n\t  }]);\n\t\n\t  return TileCache;\n\t})();\n\t\n\texports['default'] = TileCache;\n\t\n\tvar noNew = function noNew(cacheLimit, onDestroyTile) {\n\t  return new TileCache(cacheLimit, onDestroyTile);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.tileCache = noNew;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {'use strict'\n\t\n\tmodule.exports = LRUCache\n\t\n\t// This will be a proper iterable 'Map' in engines that support it,\n\t// or a fakey-fake PseudoMap in older versions.\n\tvar Map = __webpack_require__(26)\n\tvar util = __webpack_require__(28)\n\t\n\t// A linked list to keep track of recently-used-ness\n\tvar Yallist = __webpack_require__(34)\n\t\n\t// use symbols if possible, otherwise just _props\n\tvar hasSymbol = typeof Symbol === 'function' && process.env._nodeLRUCacheForceNoSymbol !== '1'\n\tvar makeSymbol\n\tif (hasSymbol) {\n\t  makeSymbol = function (key) {\n\t    return Symbol(key)\n\t  }\n\t} else {\n\t  makeSymbol = function (key) {\n\t    return '_' + key\n\t  }\n\t}\n\t\n\tvar MAX = makeSymbol('max')\n\tvar LENGTH = makeSymbol('length')\n\tvar LENGTH_CALCULATOR = makeSymbol('lengthCalculator')\n\tvar ALLOW_STALE = makeSymbol('allowStale')\n\tvar MAX_AGE = makeSymbol('maxAge')\n\tvar DISPOSE = makeSymbol('dispose')\n\tvar NO_DISPOSE_ON_SET = makeSymbol('noDisposeOnSet')\n\tvar LRU_LIST = makeSymbol('lruList')\n\tvar CACHE = makeSymbol('cache')\n\t\n\tfunction naiveLength () { return 1 }\n\t\n\t// lruList is a yallist where the head is the youngest\n\t// item, and the tail is the oldest.  the list contains the Hit\n\t// objects as the entries.\n\t// Each Hit object has a reference to its Yallist.Node.  This\n\t// never changes.\n\t//\n\t// cache is a Map (or PseudoMap) that matches the keys to\n\t// the Yallist.Node object.\n\tfunction LRUCache (options) {\n\t  if (!(this instanceof LRUCache)) {\n\t    return new LRUCache(options)\n\t  }\n\t\n\t  if (typeof options === 'number') {\n\t    options = { max: options }\n\t  }\n\t\n\t  if (!options) {\n\t    options = {}\n\t  }\n\t\n\t  var max = this[MAX] = options.max\n\t  // Kind of weird to have a default max of Infinity, but oh well.\n\t  if (!max ||\n\t      !(typeof max === 'number') ||\n\t      max <= 0) {\n\t    this[MAX] = Infinity\n\t  }\n\t\n\t  var lc = options.length || naiveLength\n\t  if (typeof lc !== 'function') {\n\t    lc = naiveLength\n\t  }\n\t  this[LENGTH_CALCULATOR] = lc\n\t\n\t  this[ALLOW_STALE] = options.stale || false\n\t  this[MAX_AGE] = options.maxAge || 0\n\t  this[DISPOSE] = options.dispose\n\t  this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n\t  this.reset()\n\t}\n\t\n\t// resize the cache when the max changes.\n\tObject.defineProperty(LRUCache.prototype, 'max', {\n\t  set: function (mL) {\n\t    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n\t      mL = Infinity\n\t    }\n\t    this[MAX] = mL\n\t    trim(this)\n\t  },\n\t  get: function () {\n\t    return this[MAX]\n\t  },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'allowStale', {\n\t  set: function (allowStale) {\n\t    this[ALLOW_STALE] = !!allowStale\n\t  },\n\t  get: function () {\n\t    return this[ALLOW_STALE]\n\t  },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'maxAge', {\n\t  set: function (mA) {\n\t    if (!mA || !(typeof mA === 'number') || mA < 0) {\n\t      mA = 0\n\t    }\n\t    this[MAX_AGE] = mA\n\t    trim(this)\n\t  },\n\t  get: function () {\n\t    return this[MAX_AGE]\n\t  },\n\t  enumerable: true\n\t})\n\t\n\t// resize the cache when the lengthCalculator changes.\n\tObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n\t  set: function (lC) {\n\t    if (typeof lC !== 'function') {\n\t      lC = naiveLength\n\t    }\n\t    if (lC !== this[LENGTH_CALCULATOR]) {\n\t      this[LENGTH_CALCULATOR] = lC\n\t      this[LENGTH] = 0\n\t      this[LRU_LIST].forEach(function (hit) {\n\t        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n\t        this[LENGTH] += hit.length\n\t      }, this)\n\t    }\n\t    trim(this)\n\t  },\n\t  get: function () { return this[LENGTH_CALCULATOR] },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'length', {\n\t  get: function () { return this[LENGTH] },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'itemCount', {\n\t  get: function () { return this[LRU_LIST].length },\n\t  enumerable: true\n\t})\n\t\n\tLRUCache.prototype.rforEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = this[LRU_LIST].tail; walker !== null;) {\n\t    var prev = walker.prev\n\t    forEachStep(this, fn, walker, thisp)\n\t    walker = prev\n\t  }\n\t}\n\t\n\tfunction forEachStep (self, fn, node, thisp) {\n\t  var hit = node.value\n\t  if (isStale(self, hit)) {\n\t    del(self, node)\n\t    if (!self[ALLOW_STALE]) {\n\t      hit = undefined\n\t    }\n\t  }\n\t  if (hit) {\n\t    fn.call(thisp, hit.value, hit.key, self)\n\t  }\n\t}\n\t\n\tLRUCache.prototype.forEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = this[LRU_LIST].head; walker !== null;) {\n\t    var next = walker.next\n\t    forEachStep(this, fn, walker, thisp)\n\t    walker = next\n\t  }\n\t}\n\t\n\tLRUCache.prototype.keys = function () {\n\t  return this[LRU_LIST].toArray().map(function (k) {\n\t    return k.key\n\t  }, this)\n\t}\n\t\n\tLRUCache.prototype.values = function () {\n\t  return this[LRU_LIST].toArray().map(function (k) {\n\t    return k.value\n\t  }, this)\n\t}\n\t\n\tLRUCache.prototype.reset = function () {\n\t  if (this[DISPOSE] &&\n\t      this[LRU_LIST] &&\n\t      this[LRU_LIST].length) {\n\t    this[LRU_LIST].forEach(function (hit) {\n\t      this[DISPOSE](hit.key, hit.value)\n\t    }, this)\n\t  }\n\t\n\t  this[CACHE] = new Map() // hash of items by key\n\t  this[LRU_LIST] = new Yallist() // list of items in order of use recency\n\t  this[LENGTH] = 0 // length of items in the list\n\t}\n\t\n\tLRUCache.prototype.dump = function () {\n\t  return this[LRU_LIST].map(function (hit) {\n\t    if (!isStale(this, hit)) {\n\t      return {\n\t        k: hit.key,\n\t        v: hit.value,\n\t        e: hit.now + (hit.maxAge || 0)\n\t      }\n\t    }\n\t  }, this).toArray().filter(function (h) {\n\t    return h\n\t  })\n\t}\n\t\n\tLRUCache.prototype.dumpLru = function () {\n\t  return this[LRU_LIST]\n\t}\n\t\n\t/* istanbul ignore next */\n\tLRUCache.prototype.inspect = function (n, opts) {\n\t  var str = 'LRUCache {'\n\t  var extras = false\n\t\n\t  var as = this[ALLOW_STALE]\n\t  if (as) {\n\t    str += '\\n  allowStale: true'\n\t    extras = true\n\t  }\n\t\n\t  var max = this[MAX]\n\t  if (max && max !== Infinity) {\n\t    if (extras) {\n\t      str += ','\n\t    }\n\t    str += '\\n  max: ' + util.inspect(max, opts)\n\t    extras = true\n\t  }\n\t\n\t  var maxAge = this[MAX_AGE]\n\t  if (maxAge) {\n\t    if (extras) {\n\t      str += ','\n\t    }\n\t    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n\t    extras = true\n\t  }\n\t\n\t  var lc = this[LENGTH_CALCULATOR]\n\t  if (lc && lc !== naiveLength) {\n\t    if (extras) {\n\t      str += ','\n\t    }\n\t    str += '\\n  length: ' + util.inspect(this[LENGTH], opts)\n\t    extras = true\n\t  }\n\t\n\t  var didFirst = false\n\t  this[LRU_LIST].forEach(function (item) {\n\t    if (didFirst) {\n\t      str += ',\\n  '\n\t    } else {\n\t      if (extras) {\n\t        str += ',\\n'\n\t      }\n\t      didFirst = true\n\t      str += '\\n  '\n\t    }\n\t    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n\t    var val = { value: item.value }\n\t    if (item.maxAge !== maxAge) {\n\t      val.maxAge = item.maxAge\n\t    }\n\t    if (lc !== naiveLength) {\n\t      val.length = item.length\n\t    }\n\t    if (isStale(this, item)) {\n\t      val.stale = true\n\t    }\n\t\n\t    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n\t    str += key + ' => ' + val\n\t  })\n\t\n\t  if (didFirst || extras) {\n\t    str += '\\n'\n\t  }\n\t  str += '}'\n\t\n\t  return str\n\t}\n\t\n\tLRUCache.prototype.set = function (key, value, maxAge) {\n\t  maxAge = maxAge || this[MAX_AGE]\n\t\n\t  var now = maxAge ? Date.now() : 0\n\t  var len = this[LENGTH_CALCULATOR](value, key)\n\t\n\t  if (this[CACHE].has(key)) {\n\t    if (len > this[MAX]) {\n\t      del(this, this[CACHE].get(key))\n\t      return false\n\t    }\n\t\n\t    var node = this[CACHE].get(key)\n\t    var item = node.value\n\t\n\t    // dispose of the old one before overwriting\n\t    // split out into 2 ifs for better coverage tracking\n\t    if (this[DISPOSE]) {\n\t      if (!this[NO_DISPOSE_ON_SET]) {\n\t        this[DISPOSE](key, item.value)\n\t      }\n\t    }\n\t\n\t    item.now = now\n\t    item.maxAge = maxAge\n\t    item.value = value\n\t    this[LENGTH] += len - item.length\n\t    item.length = len\n\t    this.get(key)\n\t    trim(this)\n\t    return true\n\t  }\n\t\n\t  var hit = new Entry(key, value, len, now, maxAge)\n\t\n\t  // oversized objects fall out of cache automatically.\n\t  if (hit.length > this[MAX]) {\n\t    if (this[DISPOSE]) {\n\t      this[DISPOSE](key, value)\n\t    }\n\t    return false\n\t  }\n\t\n\t  this[LENGTH] += hit.length\n\t  this[LRU_LIST].unshift(hit)\n\t  this[CACHE].set(key, this[LRU_LIST].head)\n\t  trim(this)\n\t  return true\n\t}\n\t\n\tLRUCache.prototype.has = function (key) {\n\t  if (!this[CACHE].has(key)) return false\n\t  var hit = this[CACHE].get(key).value\n\t  if (isStale(this, hit)) {\n\t    return false\n\t  }\n\t  return true\n\t}\n\t\n\tLRUCache.prototype.get = function (key) {\n\t  return get(this, key, true)\n\t}\n\t\n\tLRUCache.prototype.peek = function (key) {\n\t  return get(this, key, false)\n\t}\n\t\n\tLRUCache.prototype.pop = function () {\n\t  var node = this[LRU_LIST].tail\n\t  if (!node) return null\n\t  del(this, node)\n\t  return node.value\n\t}\n\t\n\tLRUCache.prototype.del = function (key) {\n\t  del(this, this[CACHE].get(key))\n\t}\n\t\n\tLRUCache.prototype.load = function (arr) {\n\t  // reset the cache\n\t  this.reset()\n\t\n\t  var now = Date.now()\n\t  // A previous serialized cache has the most recent items first\n\t  for (var l = arr.length - 1; l >= 0; l--) {\n\t    var hit = arr[l]\n\t    var expiresAt = hit.e || 0\n\t    if (expiresAt === 0) {\n\t      // the item was created without expiration in a non aged cache\n\t      this.set(hit.k, hit.v)\n\t    } else {\n\t      var maxAge = expiresAt - now\n\t      // dont add already expired items\n\t      if (maxAge > 0) {\n\t        this.set(hit.k, hit.v, maxAge)\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tLRUCache.prototype.prune = function () {\n\t  var self = this\n\t  this[CACHE].forEach(function (value, key) {\n\t    get(self, key, false)\n\t  })\n\t}\n\t\n\tfunction get (self, key, doUse) {\n\t  var node = self[CACHE].get(key)\n\t  if (node) {\n\t    var hit = node.value\n\t    if (isStale(self, hit)) {\n\t      del(self, node)\n\t      if (!self[ALLOW_STALE]) hit = undefined\n\t    } else {\n\t      if (doUse) {\n\t        self[LRU_LIST].unshiftNode(node)\n\t      }\n\t    }\n\t    if (hit) hit = hit.value\n\t  }\n\t  return hit\n\t}\n\t\n\tfunction isStale (self, hit) {\n\t  if (!hit || (!hit.maxAge && !self[MAX_AGE])) {\n\t    return false\n\t  }\n\t  var stale = false\n\t  var diff = Date.now() - hit.now\n\t  if (hit.maxAge) {\n\t    stale = diff > hit.maxAge\n\t  } else {\n\t    stale = self[MAX_AGE] && (diff > self[MAX_AGE])\n\t  }\n\t  return stale\n\t}\n\t\n\tfunction trim (self) {\n\t  if (self[LENGTH] > self[MAX]) {\n\t    for (var walker = self[LRU_LIST].tail;\n\t      self[LENGTH] > self[MAX] && walker !== null;) {\n\t      // We know that we're about to delete this one, and also\n\t      // what the next least recently used key will be, so just\n\t      // go ahead and set it now.\n\t      var prev = walker.prev\n\t      del(self, walker)\n\t      walker = prev\n\t    }\n\t  }\n\t}\n\t\n\tfunction del (self, node) {\n\t  if (node) {\n\t    var hit = node.value\n\t    if (self[DISPOSE]) {\n\t      self[DISPOSE](hit.key, hit.value)\n\t    }\n\t    self[LENGTH] -= hit.length\n\t    self[CACHE].delete(hit.key)\n\t    self[LRU_LIST].removeNode(node)\n\t  }\n\t}\n\t\n\t// classy, since V8 prefers predictable objects.\n\tfunction Entry (key, value, length, now, maxAge) {\n\t  this.key = key\n\t  this.value = value\n\t  this.length = length\n\t  this.now = now\n\t  this.maxAge = maxAge || 0\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {if (process.env.npm_package_name === 'pseudomap' &&\n\t    process.env.npm_lifecycle_script === 'test')\n\t  process.env.TEST_PSEUDOMAP = 'true'\n\t\n\tif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n\t  module.exports = Map\n\t} else {\n\t  module.exports = __webpack_require__(27)\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty\n\t\n\tmodule.exports = PseudoMap\n\t\n\tfunction PseudoMap (set) {\n\t  if (!(this instanceof PseudoMap)) // whyyyyyyy\n\t    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\t\n\t  this.clear()\n\t\n\t  if (set) {\n\t    if ((set instanceof PseudoMap) ||\n\t        (typeof Map === 'function' && set instanceof Map))\n\t      set.forEach(function (value, key) {\n\t        this.set(key, value)\n\t      }, this)\n\t    else if (Array.isArray(set))\n\t      set.forEach(function (kv) {\n\t        this.set(kv[0], kv[1])\n\t      }, this)\n\t    else\n\t      throw new TypeError('invalid argument')\n\t  }\n\t}\n\t\n\tPseudoMap.prototype.forEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  Object.keys(this._data).forEach(function (k) {\n\t    if (k !== 'size')\n\t      fn.call(thisp, this._data[k].value, this._data[k].key)\n\t  }, this)\n\t}\n\t\n\tPseudoMap.prototype.has = function (k) {\n\t  return !!find(this._data, k)\n\t}\n\t\n\tPseudoMap.prototype.get = function (k) {\n\t  var res = find(this._data, k)\n\t  return res && res.value\n\t}\n\t\n\tPseudoMap.prototype.set = function (k, v) {\n\t  set(this._data, k, v)\n\t}\n\t\n\tPseudoMap.prototype.delete = function (k) {\n\t  var res = find(this._data, k)\n\t  if (res) {\n\t    delete this._data[res._index]\n\t    this._data.size--\n\t  }\n\t}\n\t\n\tPseudoMap.prototype.clear = function () {\n\t  var data = Object.create(null)\n\t  data.size = 0\n\t\n\t  Object.defineProperty(this, '_data', {\n\t    value: data,\n\t    enumerable: false,\n\t    configurable: true,\n\t    writable: false\n\t  })\n\t}\n\t\n\tObject.defineProperty(PseudoMap.prototype, 'size', {\n\t  get: function () {\n\t    return this._data.size\n\t  },\n\t  set: function (n) {},\n\t  enumerable: true,\n\t  configurable: true\n\t})\n\t\n\tPseudoMap.prototype.values =\n\tPseudoMap.prototype.keys =\n\tPseudoMap.prototype.entries = function () {\n\t  throw new Error('iterators are not implemented in this version')\n\t}\n\t\n\t// Either identical, or both NaN\n\tfunction same (a, b) {\n\t  return a === b || a !== a && b !== b\n\t}\n\t\n\tfunction Entry (k, v, i) {\n\t  this.key = k\n\t  this.value = v\n\t  this._index = i\n\t}\n\t\n\tfunction find (data, k) {\n\t  for (var i = 0, s = '_' + k, key = s;\n\t       hasOwnProperty.call(data, key);\n\t       key = s + i++) {\n\t    if (same(data[key].key, k))\n\t      return data[key]\n\t  }\n\t}\n\t\n\tfunction set (data, k, v) {\n\t  for (var i = 0, s = '_' + k, key = s;\n\t       hasOwnProperty.call(data, key);\n\t       key = s + i++) {\n\t    if (same(data[key].key, k)) {\n\t      data[key].value = v\n\t      return\n\t    }\n\t  }\n\t  data.size++\n\t  data[key] = new Entry(k, v, key)\n\t}\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n\t  function getOwnPropertyDescriptors(obj) {\n\t    var keys = Object.keys(obj);\n\t    var descriptors = {};\n\t    for (var i = 0; i < keys.length; i++) {\n\t      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n\t    }\n\t    return descriptors;\n\t  };\n\t\n\tvar formatRegExp = /%[sdj%]/g;\n\texports.format = function(f) {\n\t  if (!isString(f)) {\n\t    var objects = [];\n\t    for (var i = 0; i < arguments.length; i++) {\n\t      objects.push(inspect(arguments[i]));\n\t    }\n\t    return objects.join(' ');\n\t  }\n\t\n\t  var i = 1;\n\t  var args = arguments;\n\t  var len = args.length;\n\t  var str = String(f).replace(formatRegExp, function(x) {\n\t    if (x === '%%') return '%';\n\t    if (i >= len) return x;\n\t    switch (x) {\n\t      case '%s': return String(args[i++]);\n\t      case '%d': return Number(args[i++]);\n\t      case '%j':\n\t        try {\n\t          return JSON.stringify(args[i++]);\n\t        } catch (_) {\n\t          return '[Circular]';\n\t        }\n\t      default:\n\t        return x;\n\t    }\n\t  });\n\t  for (var x = args[i]; i < len; x = args[++i]) {\n\t    if (isNull(x) || !isObject(x)) {\n\t      str += ' ' + x;\n\t    } else {\n\t      str += ' ' + inspect(x);\n\t    }\n\t  }\n\t  return str;\n\t};\n\t\n\t\n\t// Mark that a method should not be used.\n\t// Returns a modified function which warns once by default.\n\t// If --no-deprecation is set, then it is a no-op.\n\texports.deprecate = function(fn, msg) {\n\t  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n\t    return fn;\n\t  }\n\t\n\t  // Allow for deprecating things in the process of starting up.\n\t  if (typeof process === 'undefined') {\n\t    return function() {\n\t      return exports.deprecate(fn, msg).apply(this, arguments);\n\t    };\n\t  }\n\t\n\t  var warned = false;\n\t  function deprecated() {\n\t    if (!warned) {\n\t      if (process.throwDeprecation) {\n\t        throw new Error(msg);\n\t      } else if (process.traceDeprecation) {\n\t        console.trace(msg);\n\t      } else {\n\t        console.error(msg);\n\t      }\n\t      warned = true;\n\t    }\n\t    return fn.apply(this, arguments);\n\t  }\n\t\n\t  return deprecated;\n\t};\n\t\n\t\n\tvar debugs = {};\n\tvar debugEnviron;\n\texports.debuglog = function(set) {\n\t  if (isUndefined(debugEnviron))\n\t    debugEnviron = process.env.NODE_DEBUG || '';\n\t  set = set.toUpperCase();\n\t  if (!debugs[set]) {\n\t    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n\t      var pid = process.pid;\n\t      debugs[set] = function() {\n\t        var msg = exports.format.apply(exports, arguments);\n\t        console.error('%s %d: %s', set, pid, msg);\n\t      };\n\t    } else {\n\t      debugs[set] = function() {};\n\t    }\n\t  }\n\t  return debugs[set];\n\t};\n\t\n\t\n\t/**\n\t * Echos the value of a value. Trys to print the value out\n\t * in the best way possible given the different types.\n\t *\n\t * @param {Object} obj The object to print out.\n\t * @param {Object} opts Optional options object that alters the output.\n\t */\n\t/* legacy: obj, showHidden, depth, colors*/\n\tfunction inspect(obj, opts) {\n\t  // default options\n\t  var ctx = {\n\t    seen: [],\n\t    stylize: stylizeNoColor\n\t  };\n\t  // legacy...\n\t  if (arguments.length >= 3) ctx.depth = arguments[2];\n\t  if (arguments.length >= 4) ctx.colors = arguments[3];\n\t  if (isBoolean(opts)) {\n\t    // legacy...\n\t    ctx.showHidden = opts;\n\t  } else if (opts) {\n\t    // got an \"options\" object\n\t    exports._extend(ctx, opts);\n\t  }\n\t  // set default options\n\t  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n\t  if (isUndefined(ctx.depth)) ctx.depth = 2;\n\t  if (isUndefined(ctx.colors)) ctx.colors = false;\n\t  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n\t  if (ctx.colors) ctx.stylize = stylizeWithColor;\n\t  return formatValue(ctx, obj, ctx.depth);\n\t}\n\texports.inspect = inspect;\n\t\n\t\n\t// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n\tinspect.colors = {\n\t  'bold' : [1, 22],\n\t  'italic' : [3, 23],\n\t  'underline' : [4, 24],\n\t  'inverse' : [7, 27],\n\t  'white' : [37, 39],\n\t  'grey' : [90, 39],\n\t  'black' : [30, 39],\n\t  'blue' : [34, 39],\n\t  'cyan' : [36, 39],\n\t  'green' : [32, 39],\n\t  'magenta' : [35, 39],\n\t  'red' : [31, 39],\n\t  'yellow' : [33, 39]\n\t};\n\t\n\t// Don't use 'blue' not visible on cmd.exe\n\tinspect.styles = {\n\t  'special': 'cyan',\n\t  'number': 'yellow',\n\t  'boolean': 'yellow',\n\t  'undefined': 'grey',\n\t  'null': 'bold',\n\t  'string': 'green',\n\t  'date': 'magenta',\n\t  // \"name\": intentionally not styling\n\t  'regexp': 'red'\n\t};\n\t\n\t\n\tfunction stylizeWithColor(str, styleType) {\n\t  var style = inspect.styles[styleType];\n\t\n\t  if (style) {\n\t    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n\t           '\\u001b[' + inspect.colors[style][1] + 'm';\n\t  } else {\n\t    return str;\n\t  }\n\t}\n\t\n\t\n\tfunction stylizeNoColor(str, styleType) {\n\t  return str;\n\t}\n\t\n\t\n\tfunction arrayToHash(array) {\n\t  var hash = {};\n\t\n\t  array.forEach(function(val, idx) {\n\t    hash[val] = true;\n\t  });\n\t\n\t  return hash;\n\t}\n\t\n\t\n\tfunction formatValue(ctx, value, recurseTimes) {\n\t  // Provide a hook for user-specified inspect functions.\n\t  // Check that value is an object with an inspect function on it\n\t  if (ctx.customInspect &&\n\t      value &&\n\t      isFunction(value.inspect) &&\n\t      // Filter out the util module, it's inspect function is special\n\t      value.inspect !== exports.inspect &&\n\t      // Also filter out any prototype objects using the circular check.\n\t      !(value.constructor && value.constructor.prototype === value)) {\n\t    var ret = value.inspect(recurseTimes, ctx);\n\t    if (!isString(ret)) {\n\t      ret = formatValue(ctx, ret, recurseTimes);\n\t    }\n\t    return ret;\n\t  }\n\t\n\t  // Primitive types cannot have properties\n\t  var primitive = formatPrimitive(ctx, value);\n\t  if (primitive) {\n\t    return primitive;\n\t  }\n\t\n\t  // Look up the keys of the object.\n\t  var keys = Object.keys(value);\n\t  var visibleKeys = arrayToHash(keys);\n\t\n\t  if (ctx.showHidden) {\n\t    keys = Object.getOwnPropertyNames(value);\n\t  }\n\t\n\t  // IE doesn't make error fields non-enumerable\n\t  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\t  if (isError(value)\n\t      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n\t    return formatError(value);\n\t  }\n\t\n\t  // Some type of object without properties can be shortcutted.\n\t  if (keys.length === 0) {\n\t    if (isFunction(value)) {\n\t      var name = value.name ? ': ' + value.name : '';\n\t      return ctx.stylize('[Function' + name + ']', 'special');\n\t    }\n\t    if (isRegExp(value)) {\n\t      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t    }\n\t    if (isDate(value)) {\n\t      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n\t    }\n\t    if (isError(value)) {\n\t      return formatError(value);\n\t    }\n\t  }\n\t\n\t  var base = '', array = false, braces = ['{', '}'];\n\t\n\t  // Make Array say that they are Array\n\t  if (isArray(value)) {\n\t    array = true;\n\t    braces = ['[', ']'];\n\t  }\n\t\n\t  // Make functions say that they are functions\n\t  if (isFunction(value)) {\n\t    var n = value.name ? ': ' + value.name : '';\n\t    base = ' [Function' + n + ']';\n\t  }\n\t\n\t  // Make RegExps say that they are RegExps\n\t  if (isRegExp(value)) {\n\t    base = ' ' + RegExp.prototype.toString.call(value);\n\t  }\n\t\n\t  // Make dates with properties first say the date\n\t  if (isDate(value)) {\n\t    base = ' ' + Date.prototype.toUTCString.call(value);\n\t  }\n\t\n\t  // Make error with message first say the error\n\t  if (isError(value)) {\n\t    base = ' ' + formatError(value);\n\t  }\n\t\n\t  if (keys.length === 0 && (!array || value.length == 0)) {\n\t    return braces[0] + base + braces[1];\n\t  }\n\t\n\t  if (recurseTimes < 0) {\n\t    if (isRegExp(value)) {\n\t      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t    } else {\n\t      return ctx.stylize('[Object]', 'special');\n\t    }\n\t  }\n\t\n\t  ctx.seen.push(value);\n\t\n\t  var output;\n\t  if (array) {\n\t    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n\t  } else {\n\t    output = keys.map(function(key) {\n\t      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n\t    });\n\t  }\n\t\n\t  ctx.seen.pop();\n\t\n\t  return reduceToSingleString(output, base, braces);\n\t}\n\t\n\t\n\tfunction formatPrimitive(ctx, value) {\n\t  if (isUndefined(value))\n\t    return ctx.stylize('undefined', 'undefined');\n\t  if (isString(value)) {\n\t    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n\t                                             .replace(/'/g, \"\\\\'\")\n\t                                             .replace(/\\\\\"/g, '\"') + '\\'';\n\t    return ctx.stylize(simple, 'string');\n\t  }\n\t  if (isNumber(value))\n\t    return ctx.stylize('' + value, 'number');\n\t  if (isBoolean(value))\n\t    return ctx.stylize('' + value, 'boolean');\n\t  // For some reason typeof null is \"object\", so special case here.\n\t  if (isNull(value))\n\t    return ctx.stylize('null', 'null');\n\t}\n\t\n\t\n\tfunction formatError(value) {\n\t  return '[' + Error.prototype.toString.call(value) + ']';\n\t}\n\t\n\t\n\tfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n\t  var output = [];\n\t  for (var i = 0, l = value.length; i < l; ++i) {\n\t    if (hasOwnProperty(value, String(i))) {\n\t      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n\t          String(i), true));\n\t    } else {\n\t      output.push('');\n\t    }\n\t  }\n\t  keys.forEach(function(key) {\n\t    if (!key.match(/^\\d+$/)) {\n\t      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n\t          key, true));\n\t    }\n\t  });\n\t  return output;\n\t}\n\t\n\t\n\tfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n\t  var name, str, desc;\n\t  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n\t  if (desc.get) {\n\t    if (desc.set) {\n\t      str = ctx.stylize('[Getter/Setter]', 'special');\n\t    } else {\n\t      str = ctx.stylize('[Getter]', 'special');\n\t    }\n\t  } else {\n\t    if (desc.set) {\n\t      str = ctx.stylize('[Setter]', 'special');\n\t    }\n\t  }\n\t  if (!hasOwnProperty(visibleKeys, key)) {\n\t    name = '[' + key + ']';\n\t  }\n\t  if (!str) {\n\t    if (ctx.seen.indexOf(desc.value) < 0) {\n\t      if (isNull(recurseTimes)) {\n\t        str = formatValue(ctx, desc.value, null);\n\t      } else {\n\t        str = formatValue(ctx, desc.value, recurseTimes - 1);\n\t      }\n\t      if (str.indexOf('\\n') > -1) {\n\t        if (array) {\n\t          str = str.split('\\n').map(function(line) {\n\t            return '  ' + line;\n\t          }).join('\\n').substr(2);\n\t        } else {\n\t          str = '\\n' + str.split('\\n').map(function(line) {\n\t            return '   ' + line;\n\t          }).join('\\n');\n\t        }\n\t      }\n\t    } else {\n\t      str = ctx.stylize('[Circular]', 'special');\n\t    }\n\t  }\n\t  if (isUndefined(name)) {\n\t    if (array && key.match(/^\\d+$/)) {\n\t      return str;\n\t    }\n\t    name = JSON.stringify('' + key);\n\t    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n\t      name = name.substr(1, name.length - 2);\n\t      name = ctx.stylize(name, 'name');\n\t    } else {\n\t      name = name.replace(/'/g, \"\\\\'\")\n\t                 .replace(/\\\\\"/g, '\"')\n\t                 .replace(/(^\"|\"$)/g, \"'\");\n\t      name = ctx.stylize(name, 'string');\n\t    }\n\t  }\n\t\n\t  return name + ': ' + str;\n\t}\n\t\n\t\n\tfunction reduceToSingleString(output, base, braces) {\n\t  var numLinesEst = 0;\n\t  var length = output.reduce(function(prev, cur) {\n\t    numLinesEst++;\n\t    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n\t    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n\t  }, 0);\n\t\n\t  if (length > 60) {\n\t    return braces[0] +\n\t           (base === '' ? '' : base + '\\n ') +\n\t           ' ' +\n\t           output.join(',\\n  ') +\n\t           ' ' +\n\t           braces[1];\n\t  }\n\t\n\t  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n\t}\n\t\n\t\n\t// NOTE: These type checking functions intentionally don't use `instanceof`\n\t// because it is fragile and can be easily faked with `Object.create()`.\n\texports.types = __webpack_require__(29);\n\t\n\tfunction isArray(ar) {\n\t  return Array.isArray(ar);\n\t}\n\texports.isArray = isArray;\n\t\n\tfunction isBoolean(arg) {\n\t  return typeof arg === 'boolean';\n\t}\n\texports.isBoolean = isBoolean;\n\t\n\tfunction isNull(arg) {\n\t  return arg === null;\n\t}\n\texports.isNull = isNull;\n\t\n\tfunction isNullOrUndefined(arg) {\n\t  return arg == null;\n\t}\n\texports.isNullOrUndefined = isNullOrUndefined;\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\texports.isNumber = isNumber;\n\t\n\tfunction isString(arg) {\n\t  return typeof arg === 'string';\n\t}\n\texports.isString = isString;\n\t\n\tfunction isSymbol(arg) {\n\t  return typeof arg === 'symbol';\n\t}\n\texports.isSymbol = isSymbol;\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\texports.isUndefined = isUndefined;\n\t\n\tfunction isRegExp(re) {\n\t  return isObject(re) && objectToString(re) === '[object RegExp]';\n\t}\n\texports.isRegExp = isRegExp;\n\texports.types.isRegExp = isRegExp;\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\texports.isObject = isObject;\n\t\n\tfunction isDate(d) {\n\t  return isObject(d) && objectToString(d) === '[object Date]';\n\t}\n\texports.isDate = isDate;\n\texports.types.isDate = isDate;\n\t\n\tfunction isError(e) {\n\t  return isObject(e) &&\n\t      (objectToString(e) === '[object Error]' || e instanceof Error);\n\t}\n\texports.isError = isError;\n\texports.types.isNativeError = isError;\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\texports.isFunction = isFunction;\n\t\n\tfunction isPrimitive(arg) {\n\t  return arg === null ||\n\t         typeof arg === 'boolean' ||\n\t         typeof arg === 'number' ||\n\t         typeof arg === 'string' ||\n\t         typeof arg === 'symbol' ||  // ES6 symbol\n\t         typeof arg === 'undefined';\n\t}\n\texports.isPrimitive = isPrimitive;\n\t\n\texports.isBuffer = __webpack_require__(30);\n\t\n\tfunction objectToString(o) {\n\t  return Object.prototype.toString.call(o);\n\t}\n\t\n\t\n\tfunction pad(n) {\n\t  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n\t}\n\t\n\t\n\tvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n\t              'Oct', 'Nov', 'Dec'];\n\t\n\t// 26 Feb 16:19:34\n\tfunction timestamp() {\n\t  var d = new Date();\n\t  var time = [pad(d.getHours()),\n\t              pad(d.getMinutes()),\n\t              pad(d.getSeconds())].join(':');\n\t  return [d.getDate(), months[d.getMonth()], time].join(' ');\n\t}\n\t\n\t\n\t// log is just a thin wrapper to console.log that prepends a timestamp\n\texports.log = function() {\n\t  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n\t};\n\t\n\t\n\t/**\n\t * Inherit the prototype methods from one constructor into another.\n\t *\n\t * The Function.prototype.inherits from lang.js rewritten as a standalone\n\t * function (not on Function.prototype). NOTE: If this file is to be loaded\n\t * during bootstrapping this function needs to be rewritten using some native\n\t * functions as prototype setup using normal JavaScript does not work as\n\t * expected during bootstrapping (see mirror.js in r114903).\n\t *\n\t * @param {function} ctor Constructor function which needs to inherit the\n\t *     prototype.\n\t * @param {function} superCtor Constructor function to inherit prototype from.\n\t */\n\texports.inherits = __webpack_require__(33);\n\t\n\texports._extend = function(origin, add) {\n\t  // Don't do anything if add isn't an object\n\t  if (!add || !isObject(add)) return origin;\n\t\n\t  var keys = Object.keys(add);\n\t  var i = keys.length;\n\t  while (i--) {\n\t    origin[keys[i]] = add[keys[i]];\n\t  }\n\t  return origin;\n\t};\n\t\n\tfunction hasOwnProperty(obj, prop) {\n\t  return Object.prototype.hasOwnProperty.call(obj, prop);\n\t}\n\t\n\tvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\t\n\texports.promisify = function promisify(original) {\n\t  if (typeof original !== 'function')\n\t    throw new TypeError('The \"original\" argument must be of type Function');\n\t\n\t  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n\t    var fn = original[kCustomPromisifiedSymbol];\n\t    if (typeof fn !== 'function') {\n\t      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n\t    }\n\t    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n\t      value: fn, enumerable: false, writable: false, configurable: true\n\t    });\n\t    return fn;\n\t  }\n\t\n\t  function fn() {\n\t    var promiseResolve, promiseReject;\n\t    var promise = new Promise(function (resolve, reject) {\n\t      promiseResolve = resolve;\n\t      promiseReject = reject;\n\t    });\n\t\n\t    var args = [];\n\t    for (var i = 0; i < arguments.length; i++) {\n\t      args.push(arguments[i]);\n\t    }\n\t    args.push(function (err, value) {\n\t      if (err) {\n\t        promiseReject(err);\n\t      } else {\n\t        promiseResolve(value);\n\t      }\n\t    });\n\t\n\t    try {\n\t      original.apply(this, args);\n\t    } catch (err) {\n\t      promiseReject(err);\n\t    }\n\t\n\t    return promise;\n\t  }\n\t\n\t  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\t\n\t  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n\t    value: fn, enumerable: false, writable: false, configurable: true\n\t  });\n\t  return Object.defineProperties(\n\t    fn,\n\t    getOwnPropertyDescriptors(original)\n\t  );\n\t}\n\t\n\texports.promisify.custom = kCustomPromisifiedSymbol\n\t\n\tfunction callbackifyOnRejected(reason, cb) {\n\t  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n\t  // Because `null` is a special error value in callbacks which means \"no error\n\t  // occurred\", we error-wrap so the callback consumer can distinguish between\n\t  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n\t  if (!reason) {\n\t    var newReason = new Error('Promise was rejected with a falsy value');\n\t    newReason.reason = reason;\n\t    reason = newReason;\n\t  }\n\t  return cb(reason);\n\t}\n\t\n\tfunction callbackify(original) {\n\t  if (typeof original !== 'function') {\n\t    throw new TypeError('The \"original\" argument must be of type Function');\n\t  }\n\t\n\t  // We DO NOT return the promise as it gives the user a false sense that\n\t  // the promise is actually somehow related to the callback's execution\n\t  // and that the callback throwing will reject the promise.\n\t  function callbackified() {\n\t    var args = [];\n\t    for (var i = 0; i < arguments.length; i++) {\n\t      args.push(arguments[i]);\n\t    }\n\t\n\t    var maybeCb = args.pop();\n\t    if (typeof maybeCb !== 'function') {\n\t      throw new TypeError('The last argument must be of type Function');\n\t    }\n\t    var self = this;\n\t    var cb = function() {\n\t      return maybeCb.apply(self, arguments);\n\t    };\n\t    // In true node style we process the callback on `nextTick` with all the\n\t    // implications (stack, `uncaughtException`, `async_hooks`)\n\t    original.apply(this, args)\n\t      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n\t            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n\t  }\n\t\n\t  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n\t  Object.defineProperties(callbackified,\n\t                          getOwnPropertyDescriptors(original));\n\t  return callbackified;\n\t}\n\texports.callbackify = callbackify;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Currently in sync with Node.js lib/internal/util/types.js\n\t// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\t\n\t'use strict';\n\t\n\tvar isBuffer = __webpack_require__(30);\n\t\n\tvar isArgumentsObject = __webpack_require__(31);\n\tvar isGeneratorFunction = __webpack_require__(32);\n\t\n\tfunction uncurryThis(f) {\n\t  return f.call.bind(f);\n\t}\n\t\n\tvar BigIntSupported = typeof BigInt !== 'undefined';\n\tvar SymbolSupported = typeof Symbol !== 'undefined';\n\tvar SymbolToStringTagSupported = SymbolSupported && typeof Symbol.toStringTag !== 'undefined';\n\tvar Uint8ArraySupported = typeof Uint8Array !== 'undefined';\n\tvar ArrayBufferSupported = typeof ArrayBuffer !== 'undefined';\n\t\n\tif (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t  var TypedArrayPrototype = Object.getPrototypeOf(Uint8Array.prototype);\n\t\n\t  var TypedArrayProto_toStringTag =\n\t      uncurryThis(\n\t        Object.getOwnPropertyDescriptor(TypedArrayPrototype,\n\t                                        Symbol.toStringTag).get);\n\t\n\t}\n\t\n\tvar ObjectToString = uncurryThis(Object.prototype.toString);\n\t\n\tvar numberValue = uncurryThis(Number.prototype.valueOf);\n\tvar stringValue = uncurryThis(String.prototype.valueOf);\n\tvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\t\n\tif (BigIntSupported) {\n\t  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n\t}\n\t\n\tif (SymbolSupported) {\n\t  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n\t}\n\t\n\tfunction checkBoxedPrimitive(value, prototypeValueOf) {\n\t  if (typeof value !== 'object') {\n\t    return false;\n\t  }\n\t  try {\n\t    prototypeValueOf(value);\n\t    return true;\n\t  } catch(e) {\n\t    return false;\n\t  }\n\t}\n\t\n\texports.isArgumentsObject = isArgumentsObject;\n\t\n\texports.isGeneratorFunction = isGeneratorFunction;\n\t\n\t// Taken from here and modified for better browser support\n\t// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\n\tfunction isPromise(input) {\n\t\treturn (\n\t\t\t(\n\t\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\t\tinput instanceof Promise\n\t\t\t) ||\n\t\t\t(\n\t\t\t\tinput !== null &&\n\t\t\t\ttypeof input === 'object' &&\n\t\t\t\ttypeof input.then === 'function' &&\n\t\t\t\ttypeof input.catch === 'function'\n\t\t\t)\n\t\t);\n\t}\n\texports.isPromise = isPromise;\n\t\n\tfunction isArrayBufferView(value) {\n\t  if (ArrayBufferSupported && ArrayBuffer.isView) {\n\t    return ArrayBuffer.isView(value);\n\t  }\n\t\n\t  return (\n\t    isTypedArray(value) ||\n\t    isDataView(value)\n\t  );\n\t}\n\texports.isArrayBufferView = isArrayBufferView;\n\t\n\tfunction isTypedArray(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) !== undefined;\n\t  } else {\n\t    return (\n\t      isUint8Array(value) ||\n\t      isUint8ClampedArray(value) ||\n\t      isUint16Array(value) ||\n\t      isUint32Array(value) ||\n\t      isInt8Array(value) ||\n\t      isInt16Array(value) ||\n\t      isInt32Array(value) ||\n\t      isFloat32Array(value) ||\n\t      isFloat64Array(value) ||\n\t      isBigInt64Array(value) ||\n\t      isBigUint64Array(value)\n\t    );\n\t  }\n\t}\n\texports.isTypedArray = isTypedArray;\n\t\n\tfunction isUint8Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Uint8Array';\n\t  } else {\n\t    return (\n\t      ObjectToString(value) === '[object Uint8Array]' ||\n\t      // If it's a Buffer instance _and_ has a `.buffer` property,\n\t      // this is an ArrayBuffer based buffer; thus it's an Uint8Array\n\t      // (Old Node.js had a custom non-Uint8Array implementation)\n\t      isBuffer(value) && value.buffer !== undefined\n\t    );\n\t  }\n\t}\n\texports.isUint8Array = isUint8Array;\n\t\n\tfunction isUint8ClampedArray(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Uint8ClampedArray';\n\t  } else {\n\t    return ObjectToString(value) === '[object Uint8ClampedArray]';\n\t  }\n\t}\n\texports.isUint8ClampedArray = isUint8ClampedArray;\n\t\n\tfunction isUint16Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Uint16Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Uint16Array]';\n\t  }\n\t}\n\texports.isUint16Array = isUint16Array;\n\t\n\tfunction isUint32Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Uint32Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Uint32Array]';\n\t  }\n\t}\n\texports.isUint32Array = isUint32Array;\n\t\n\tfunction isInt8Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Int8Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Int8Array]';\n\t  }\n\t}\n\texports.isInt8Array = isInt8Array;\n\t\n\tfunction isInt16Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Int16Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Int16Array]';\n\t  }\n\t}\n\texports.isInt16Array = isInt16Array;\n\t\n\tfunction isInt32Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Int32Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Int32Array]';\n\t  }\n\t}\n\texports.isInt32Array = isInt32Array;\n\t\n\tfunction isFloat32Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Float32Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Float32Array]';\n\t  }\n\t}\n\texports.isFloat32Array = isFloat32Array;\n\t\n\tfunction isFloat64Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'Float64Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object Float64Array]';\n\t  }\n\t}\n\texports.isFloat64Array = isFloat64Array;\n\t\n\tfunction isBigInt64Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'BigInt64Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object BigInt64Array]';\n\t  }\n\t}\n\texports.isBigInt64Array = isBigInt64Array;\n\t\n\tfunction isBigUint64Array(value) {\n\t  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n\t    return TypedArrayProto_toStringTag(value) === 'BigUint64Array';\n\t  } else {\n\t    return ObjectToString(value) === '[object BigUint64Array]';\n\t  }\n\t}\n\texports.isBigUint64Array = isBigUint64Array;\n\t\n\tfunction isMapToString(value) {\n\t  return ObjectToString(value) === '[object Map]';\n\t}\n\tisMapToString.working = (\n\t  typeof Map !== 'undefined' &&\n\t  isMapToString(new Map())\n\t);\n\t\n\tfunction isMap(value) {\n\t  if (typeof Map === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isMapToString.working\n\t    ? isMapToString(value)\n\t    : value instanceof Map;\n\t}\n\texports.isMap = isMap;\n\t\n\tfunction isSetToString(value) {\n\t  return ObjectToString(value) === '[object Set]';\n\t}\n\tisSetToString.working = (\n\t  typeof Set !== 'undefined' &&\n\t  isSetToString(new Set())\n\t);\n\tfunction isSet(value) {\n\t  if (typeof Set === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isSetToString.working\n\t    ? isSetToString(value)\n\t    : value instanceof Set;\n\t}\n\texports.isSet = isSet;\n\t\n\tfunction isWeakMapToString(value) {\n\t  return ObjectToString(value) === '[object WeakMap]';\n\t}\n\tisWeakMapToString.working = (\n\t  typeof WeakMap !== 'undefined' &&\n\t  isWeakMapToString(new WeakMap())\n\t);\n\tfunction isWeakMap(value) {\n\t  if (typeof WeakMap === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isWeakMapToString.working\n\t    ? isWeakMapToString(value)\n\t    : value instanceof WeakMap;\n\t}\n\texports.isWeakMap = isWeakMap;\n\t\n\tfunction isWeakSetToString(value) {\n\t  return ObjectToString(value) === '[object WeakSet]';\n\t}\n\tisWeakSetToString.working = (\n\t  typeof WeakSet !== 'undefined' &&\n\t  isWeakSetToString(new WeakSet())\n\t);\n\tfunction isWeakSet(value) {\n\t  return isWeakSetToString(value);\n\t  if (typeof WeakSet === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isWeakSetToString.working\n\t    ? isWeakSetToString(value)\n\t    : value instanceof WeakSet;\n\t}\n\texports.isWeakSet = isWeakSet;\n\t\n\tfunction isArrayBufferToString(value) {\n\t  return ObjectToString(value) === '[object ArrayBuffer]';\n\t}\n\tisArrayBufferToString.working = (\n\t  typeof ArrayBuffer !== 'undefined' &&\n\t  isArrayBufferToString(new ArrayBuffer())\n\t);\n\tfunction isArrayBuffer(value) {\n\t  if (typeof ArrayBuffer === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isArrayBufferToString.working\n\t    ? isArrayBufferToString(value)\n\t    : value instanceof ArrayBuffer;\n\t}\n\texports.isArrayBuffer = isArrayBuffer;\n\t\n\tfunction isDataViewToString(value) {\n\t  return ObjectToString(value) === '[object DataView]';\n\t}\n\tisDataViewToString.working = (\n\t  typeof ArrayBuffer !== 'undefined' &&\n\t  typeof DataView !== 'undefined' &&\n\t  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n\t);\n\tfunction isDataView(value) {\n\t  if (typeof DataView === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isDataViewToString.working\n\t    ? isDataViewToString(value)\n\t    : value instanceof DataView;\n\t}\n\texports.isDataView = isDataView;\n\t\n\tfunction isSharedArrayBufferToString(value) {\n\t  return ObjectToString(value) === '[object SharedArrayBuffer]';\n\t}\n\tisSharedArrayBufferToString.working = (\n\t  typeof SharedArrayBuffer !== 'undefined' &&\n\t  isSharedArrayBufferToString(new SharedArrayBuffer())\n\t);\n\tfunction isSharedArrayBuffer(value) {\n\t  if (typeof SharedArrayBuffer === 'undefined') {\n\t    return false;\n\t  }\n\t\n\t  return isSharedArrayBufferToString.working\n\t    ? isSharedArrayBufferToString(value)\n\t    : value instanceof SharedArrayBuffer;\n\t}\n\texports.isSharedArrayBuffer = isSharedArrayBuffer;\n\t\n\tfunction isAsyncFunction(value) {\n\t  return ObjectToString(value) === '[object AsyncFunction]';\n\t}\n\texports.isAsyncFunction = isAsyncFunction;\n\t\n\tfunction isMapIterator(value) {\n\t  return ObjectToString(value) === '[object Map Iterator]';\n\t}\n\texports.isMapIterator = isMapIterator;\n\t\n\tfunction isSetIterator(value) {\n\t  return ObjectToString(value) === '[object Set Iterator]';\n\t}\n\texports.isSetIterator = isSetIterator;\n\t\n\tfunction isGeneratorObject(value) {\n\t  return ObjectToString(value) === '[object Generator]';\n\t}\n\texports.isGeneratorObject = isGeneratorObject;\n\t\n\tfunction isWebAssemblyCompiledModule(value) {\n\t  return ObjectToString(value) === '[object WebAssembly.Module]';\n\t}\n\texports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\t\n\tfunction isNumberObject(value) {\n\t  return checkBoxedPrimitive(value, numberValue);\n\t}\n\texports.isNumberObject = isNumberObject;\n\t\n\tfunction isStringObject(value) {\n\t  return checkBoxedPrimitive(value, stringValue);\n\t}\n\texports.isStringObject = isStringObject;\n\t\n\tfunction isBooleanObject(value) {\n\t  return checkBoxedPrimitive(value, booleanValue);\n\t}\n\texports.isBooleanObject = isBooleanObject;\n\t\n\tfunction isBigIntObject(value) {\n\t  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n\t}\n\texports.isBigIntObject = isBigIntObject;\n\t\n\tfunction isSymbolObject(value) {\n\t  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n\t}\n\texports.isSymbolObject = isSymbolObject;\n\t\n\tfunction isBoxedPrimitive(value) {\n\t  return (\n\t    isNumberObject(value) ||\n\t    isStringObject(value) ||\n\t    isBooleanObject(value) ||\n\t    isBigIntObject(value) ||\n\t    isSymbolObject(value)\n\t  );\n\t}\n\texports.isBoxedPrimitive = isBoxedPrimitive;\n\t\n\tfunction isAnyArrayBuffer(value) {\n\t  return Uint8ArraySupported && (\n\t    isArrayBuffer(value) ||\n\t    isSharedArrayBuffer(value)\n\t  );\n\t}\n\texports.isAnyArrayBuffer = isAnyArrayBuffer;\n\t\n\t['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n\t  Object.defineProperty(exports, method, {\n\t    enumerable: false,\n\t    value: function() {\n\t      throw new Error(method + ' is not supported in userland');\n\t    }\n\t  });\n\t});\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function isBuffer(arg) {\n\t  return arg && typeof arg === 'object'\n\t    && typeof arg.copy === 'function'\n\t    && typeof arg.fill === 'function'\n\t    && typeof arg.readUInt8 === 'function';\n\t}\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\tvar toStr = Object.prototype.toString;\n\t\n\tvar isStandardArguments = function isArguments(value) {\n\t\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn toStr.call(value) === '[object Arguments]';\n\t};\n\t\n\tvar isLegacyArguments = function isArguments(value) {\n\t\tif (isStandardArguments(value)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn value !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value) !== '[object Array]' &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t};\n\t\n\tvar supportsStandardArguments = (function () {\n\t\treturn isStandardArguments(arguments);\n\t}());\n\t\n\tisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\t\n\tmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar toStr = Object.prototype.toString;\n\tvar fnToStr = Function.prototype.toString;\n\tvar isFnRegex = /^\\s*(?:function)?\\*/;\n\tvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\tvar getProto = Object.getPrototypeOf;\n\tvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\t\tif (!hasToStringTag) {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\treturn Function('return function*() {}')();\n\t\t} catch (e) {\n\t\t}\n\t};\n\tvar generatorFunc = getGeneratorFunc();\n\tvar GeneratorFunction = generatorFunc ? getProto(generatorFunc) : {};\n\t\n\tmodule.exports = function isGeneratorFunction(fn) {\n\t\tif (typeof fn !== 'function') {\n\t\t\treturn false;\n\t\t}\n\t\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!hasToStringTag) {\n\t\t\tvar str = toStr.call(fn);\n\t\t\treturn str === '[object GeneratorFunction]';\n\t\t}\n\t\treturn getProto(fn) === GeneratorFunction;\n\t};\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\tif (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t  };\n\t} else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n\t}\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = Yallist\n\t\n\tYallist.Node = Node\n\tYallist.create = Yallist\n\t\n\tfunction Yallist (list) {\n\t  var self = this\n\t  if (!(self instanceof Yallist)) {\n\t    self = new Yallist()\n\t  }\n\t\n\t  self.tail = null\n\t  self.head = null\n\t  self.length = 0\n\t\n\t  if (list && typeof list.forEach === 'function') {\n\t    list.forEach(function (item) {\n\t      self.push(item)\n\t    })\n\t  } else if (arguments.length > 0) {\n\t    for (var i = 0, l = arguments.length; i < l; i++) {\n\t      self.push(arguments[i])\n\t    }\n\t  }\n\t\n\t  return self\n\t}\n\t\n\tYallist.prototype.removeNode = function (node) {\n\t  if (node.list !== this) {\n\t    throw new Error('removing node which does not belong to this list')\n\t  }\n\t\n\t  var next = node.next\n\t  var prev = node.prev\n\t\n\t  if (next) {\n\t    next.prev = prev\n\t  }\n\t\n\t  if (prev) {\n\t    prev.next = next\n\t  }\n\t\n\t  if (node === this.head) {\n\t    this.head = next\n\t  }\n\t  if (node === this.tail) {\n\t    this.tail = prev\n\t  }\n\t\n\t  node.list.length--\n\t  node.next = null\n\t  node.prev = null\n\t  node.list = null\n\t}\n\t\n\tYallist.prototype.unshiftNode = function (node) {\n\t  if (node === this.head) {\n\t    return\n\t  }\n\t\n\t  if (node.list) {\n\t    node.list.removeNode(node)\n\t  }\n\t\n\t  var head = this.head\n\t  node.list = this\n\t  node.next = head\n\t  if (head) {\n\t    head.prev = node\n\t  }\n\t\n\t  this.head = node\n\t  if (!this.tail) {\n\t    this.tail = node\n\t  }\n\t  this.length++\n\t}\n\t\n\tYallist.prototype.pushNode = function (node) {\n\t  if (node === this.tail) {\n\t    return\n\t  }\n\t\n\t  if (node.list) {\n\t    node.list.removeNode(node)\n\t  }\n\t\n\t  var tail = this.tail\n\t  node.list = this\n\t  node.prev = tail\n\t  if (tail) {\n\t    tail.next = node\n\t  }\n\t\n\t  this.tail = node\n\t  if (!this.head) {\n\t    this.head = node\n\t  }\n\t  this.length++\n\t}\n\t\n\tYallist.prototype.push = function () {\n\t  for (var i = 0, l = arguments.length; i < l; i++) {\n\t    push(this, arguments[i])\n\t  }\n\t  return this.length\n\t}\n\t\n\tYallist.prototype.unshift = function () {\n\t  for (var i = 0, l = arguments.length; i < l; i++) {\n\t    unshift(this, arguments[i])\n\t  }\n\t  return this.length\n\t}\n\t\n\tYallist.prototype.pop = function () {\n\t  if (!this.tail) {\n\t    return undefined\n\t  }\n\t\n\t  var res = this.tail.value\n\t  this.tail = this.tail.prev\n\t  if (this.tail) {\n\t    this.tail.next = null\n\t  } else {\n\t    this.head = null\n\t  }\n\t  this.length--\n\t  return res\n\t}\n\t\n\tYallist.prototype.shift = function () {\n\t  if (!this.head) {\n\t    return undefined\n\t  }\n\t\n\t  var res = this.head.value\n\t  this.head = this.head.next\n\t  if (this.head) {\n\t    this.head.prev = null\n\t  } else {\n\t    this.tail = null\n\t  }\n\t  this.length--\n\t  return res\n\t}\n\t\n\tYallist.prototype.forEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = this.head, i = 0; walker !== null; i++) {\n\t    fn.call(thisp, walker.value, i, this)\n\t    walker = walker.next\n\t  }\n\t}\n\t\n\tYallist.prototype.forEachReverse = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n\t    fn.call(thisp, walker.value, i, this)\n\t    walker = walker.prev\n\t  }\n\t}\n\t\n\tYallist.prototype.get = function (n) {\n\t  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n\t    // abort out of the list early if we hit a cycle\n\t    walker = walker.next\n\t  }\n\t  if (i === n && walker !== null) {\n\t    return walker.value\n\t  }\n\t}\n\t\n\tYallist.prototype.getReverse = function (n) {\n\t  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n\t    // abort out of the list early if we hit a cycle\n\t    walker = walker.prev\n\t  }\n\t  if (i === n && walker !== null) {\n\t    return walker.value\n\t  }\n\t}\n\t\n\tYallist.prototype.map = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  var res = new Yallist()\n\t  for (var walker = this.head; walker !== null;) {\n\t    res.push(fn.call(thisp, walker.value, this))\n\t    walker = walker.next\n\t  }\n\t  return res\n\t}\n\t\n\tYallist.prototype.mapReverse = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  var res = new Yallist()\n\t  for (var walker = this.tail; walker !== null;) {\n\t    res.push(fn.call(thisp, walker.value, this))\n\t    walker = walker.prev\n\t  }\n\t  return res\n\t}\n\t\n\tYallist.prototype.reduce = function (fn, initial) {\n\t  var acc\n\t  var walker = this.head\n\t  if (arguments.length > 1) {\n\t    acc = initial\n\t  } else if (this.head) {\n\t    walker = this.head.next\n\t    acc = this.head.value\n\t  } else {\n\t    throw new TypeError('Reduce of empty list with no initial value')\n\t  }\n\t\n\t  for (var i = 0; walker !== null; i++) {\n\t    acc = fn(acc, walker.value, i)\n\t    walker = walker.next\n\t  }\n\t\n\t  return acc\n\t}\n\t\n\tYallist.prototype.reduceReverse = function (fn, initial) {\n\t  var acc\n\t  var walker = this.tail\n\t  if (arguments.length > 1) {\n\t    acc = initial\n\t  } else if (this.tail) {\n\t    walker = this.tail.prev\n\t    acc = this.tail.value\n\t  } else {\n\t    throw new TypeError('Reduce of empty list with no initial value')\n\t  }\n\t\n\t  for (var i = this.length - 1; walker !== null; i--) {\n\t    acc = fn(acc, walker.value, i)\n\t    walker = walker.prev\n\t  }\n\t\n\t  return acc\n\t}\n\t\n\tYallist.prototype.toArray = function () {\n\t  var arr = new Array(this.length)\n\t  for (var i = 0, walker = this.head; walker !== null; i++) {\n\t    arr[i] = walker.value\n\t    walker = walker.next\n\t  }\n\t  return arr\n\t}\n\t\n\tYallist.prototype.toArrayReverse = function () {\n\t  var arr = new Array(this.length)\n\t  for (var i = 0, walker = this.tail; walker !== null; i++) {\n\t    arr[i] = walker.value\n\t    walker = walker.prev\n\t  }\n\t  return arr\n\t}\n\t\n\tYallist.prototype.slice = function (from, to) {\n\t  to = to || this.length\n\t  if (to < 0) {\n\t    to += this.length\n\t  }\n\t  from = from || 0\n\t  if (from < 0) {\n\t    from += this.length\n\t  }\n\t  var ret = new Yallist()\n\t  if (to < from || to < 0) {\n\t    return ret\n\t  }\n\t  if (from < 0) {\n\t    from = 0\n\t  }\n\t  if (to > this.length) {\n\t    to = this.length\n\t  }\n\t  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n\t    walker = walker.next\n\t  }\n\t  for (; walker !== null && i < to; i++, walker = walker.next) {\n\t    ret.push(walker.value)\n\t  }\n\t  return ret\n\t}\n\t\n\tYallist.prototype.sliceReverse = function (from, to) {\n\t  to = to || this.length\n\t  if (to < 0) {\n\t    to += this.length\n\t  }\n\t  from = from || 0\n\t  if (from < 0) {\n\t    from += this.length\n\t  }\n\t  var ret = new Yallist()\n\t  if (to < from || to < 0) {\n\t    return ret\n\t  }\n\t  if (from < 0) {\n\t    from = 0\n\t  }\n\t  if (to > this.length) {\n\t    to = this.length\n\t  }\n\t  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n\t    walker = walker.prev\n\t  }\n\t  for (; walker !== null && i > from; i--, walker = walker.prev) {\n\t    ret.push(walker.value)\n\t  }\n\t  return ret\n\t}\n\t\n\tYallist.prototype.reverse = function () {\n\t  var head = this.head\n\t  var tail = this.tail\n\t  for (var walker = head; walker !== null; walker = walker.prev) {\n\t    var p = walker.prev\n\t    walker.prev = walker.next\n\t    walker.next = p\n\t  }\n\t  this.head = tail\n\t  this.tail = head\n\t  return this\n\t}\n\t\n\tfunction push (self, item) {\n\t  self.tail = new Node(item, self.tail, null, self)\n\t  if (!self.head) {\n\t    self.head = self.tail\n\t  }\n\t  self.length++\n\t}\n\t\n\tfunction unshift (self, item) {\n\t  self.head = new Node(item, null, self.head, self)\n\t  if (!self.tail) {\n\t    self.tail = self.head\n\t  }\n\t  self.length++\n\t}\n\t\n\tfunction Node (value, prev, next, list) {\n\t  if (!(this instanceof Node)) {\n\t    return new Node(value, prev, next, list)\n\t  }\n\t\n\t  this.list = list\n\t  this.value = value\n\t\n\t  if (prev) {\n\t    prev.next = this\n\t    this.prev = prev\n\t  } else {\n\t    this.prev = null\n\t  }\n\t\n\t  if (next) {\n\t    next.prev = this\n\t    this.next = next\n\t  } else {\n\t    this.next = null\n\t  }\n\t}\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Tile2 = __webpack_require__(36);\n\t\n\tvar _Tile3 = _interopRequireDefault(_Tile2);\n\t\n\tvar _vendorBoxHelper = __webpack_require__(37);\n\t\n\tvar _vendorBoxHelper2 = _interopRequireDefault(_vendorBoxHelper);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\tvar ImageTile = (function (_Tile) {\n\t    _inherits(ImageTile, _Tile);\n\t\n\t    function ImageTile(quadcode, path, layer) {\n\t        _classCallCheck(this, ImageTile);\n\t\n\t        _get(Object.getPrototypeOf(ImageTile.prototype), 'constructor', this).call(this, quadcode, path, layer);\n\t    }\n\t\n\t    // Request data for the tile\n\t\n\t    _createClass(ImageTile, [{\n\t        key: 'requestTileAsync',\n\t        value: function requestTileAsync() {\n\t            var _this = this;\n\t\n\t            // Making this asynchronous really speeds up the LOD framerate\n\t            setTimeout(function () {\n\t                if (!_this._mesh) {\n\t                    _this._mesh = _this._createMesh();\n\t                }\n\t\n\t                _this._requestTile();\n\t            }, 0);\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            // Cancel any pending requests\n\t            this._abortRequest();\n\t\n\t            // Clear image reference\n\t            this._image = null;\n\t\n\t            _get(Object.getPrototypeOf(ImageTile.prototype), 'destroy', this).call(this);\n\t        }\n\t    }, {\n\t        key: '_createMesh',\n\t        value: function _createMesh() {\n\t            // Something went wrong and the tile\n\t            //\n\t            // Possibly removed by the cache before loaded\n\t            if (!this._center) {\n\t                return;\n\t            }\n\t\n\t            var mesh = new _three2['default'].Object3D();\n\t            var geom = new _three2['default'].PlaneBufferGeometry(this._side, this._side, 1);\n\t\n\t            var material;\n\t            if (!this._world._environment._skybox) {\n\t                material = new _three2['default'].MeshBasicMaterial({\n\t                    depthWrite: false\n\t                });\n\t\n\t                // var material = new THREE.MeshPhongMaterial({\n\t                //   depthWrite: false\n\t                // });\n\t            } else {\n\t                    // Other MeshStandardMaterial settings\n\t                    //\n\t                    // material.envMapIntensity will change the amount of colour reflected(?)\n\t                    // from the environment map – can be greater than 1 for more intensity\n\t\n\t                    material = new _three2['default'].MeshStandardMaterial({\n\t                        depthWrite: false\n\t                    });\n\t                    material.roughness = 1;\n\t                    material.metalness = 0.1;\n\t                    material.envMap = this._world._environment._skybox.getRenderTarget();\n\t                }\n\t\n\t            var localMesh = new _three2['default'].Mesh(geom, material);\n\t            localMesh.rotation.x = -90 * Math.PI / 180;\n\t\n\t            localMesh.receiveShadow = true;\n\t\n\t            // Setting this causes a depth-buffer intersection issue on the\n\t            // all-the-things example\n\t            // localMesh.renderOrder = 2;\n\t\n\t            mesh.add(localMesh);\n\t\n\t            // Setting this causes a depth-buffer intersection issue on the\n\t            // all-the-things example\n\t            // mesh.renderOrder = 2;\n\t\n\t            mesh.position.x = this._center[0];\n\t            mesh.position.z = this._center[1];\n\t\n\t            // var box = new BoxHelper(localMesh);\n\t            // mesh.add(box);\n\t            //\n\t            // mesh.add(this._createDebugMesh());\n\t\n\t            return mesh;\n\t        }\n\t    }, {\n\t        key: '_createDebugMesh',\n\t        value: function _createDebugMesh() {\n\t            var canvas = document.createElement('canvas');\n\t            canvas.width = 256;\n\t            canvas.height = 256;\n\t\n\t            var context = canvas.getContext('2d');\n\t            context.font = 'Bold 20px Helvetica Neue, Verdana, Arial';\n\t            context.fillStyle = '#ff0000';\n\t            context.fillText(this._quadcode, 20, canvas.width / 2 - 5);\n\t            context.fillText(this._tile.toString(), 20, canvas.width / 2 + 25);\n\t\n\t            var texture = new _three2['default'].Texture(canvas);\n\t\n\t            // Silky smooth images when tilted\n\t            texture.magFilter = _three2['default'].LinearFilter;\n\t            texture.minFilter = _three2['default'].LinearMipMapLinearFilter;\n\t\n\t            // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t            texture.anisotropy = 4;\n\t\n\t            texture.needsUpdate = true;\n\t\n\t            var material = new _three2['default'].MeshBasicMaterial({\n\t                map: texture,\n\t                transparent: true,\n\t                depthWrite: false\n\t            });\n\t\n\t            var geom = new _three2['default'].PlaneBufferGeometry(this._side, this._side, 1);\n\t            var mesh = new _three2['default'].Mesh(geom, material);\n\t\n\t            mesh.rotation.x = -90 * Math.PI / 180;\n\t            mesh.position.y = 0.1;\n\t\n\t            return mesh;\n\t        }\n\t    }, {\n\t        key: '_requestTile',\n\t        value: function _requestTile() {\n\t            var _this2 = this;\n\t\n\t            var urlParams = {\n\t                x: this._tile[0],\n\t                y: this._tile[1],\n\t                z: this._tile[2]\n\t            };\n\t\n\t            var url = this._getTileURL(urlParams);\n\t\n\t            var image = document.createElement('img');\n\t\n\t            this._aborted = false;\n\t\n\t            image.addEventListener('load', function (event) {\n\t                if (_this2.isAborted()) {\n\t                    return;\n\t                }\n\t\n\t                var texture = new _three2['default'].Texture();\n\t\n\t                texture.image = image;\n\t                texture.needsUpdate = true;\n\t\n\t                // Silky smooth images when tilted\n\t                texture.magFilter = _three2['default'].LinearFilter;\n\t                texture.minFilter = _three2['default'].LinearMipMapLinearFilter;\n\t\n\t                // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t                texture.anisotropy = 4;\n\t\n\t                texture.needsUpdate = true;\n\t\n\t                // Something went wrong and the tile or its material is missing\n\t                //\n\t                // Possibly removed by the cache before the image loaded\n\t                if (!_this2._mesh || !_this2._mesh.children[0] || !_this2._mesh.children[0].material) {\n\t                    return;\n\t                }\n\t\n\t                _this2._mesh.children[0].material.map = texture;\n\t                _this2._mesh.children[0].material.needsUpdate = true;\n\t\n\t                _this2._texture = texture;\n\t                _this2._ready = true;\n\t            }, false);\n\t\n\t            // image.addEventListener('progress', event => {}, false);\n\t            // image.addEventListener('error', event => {}, false);\n\t\n\t            image.crossOrigin = '';\n\t\n\t            // Load image\n\t            image.src = url;\n\t\n\t            this._image = image;\n\t        }\n\t    }, {\n\t        key: '_abortRequest',\n\t        value: function _abortRequest() {\n\t            if (!this._image || this._ready) {\n\t                return;\n\t            }\n\t\n\t            this._aborted = true;\n\t\n\t            this._image.src = '';\n\t        }\n\t    }]);\n\t\n\t    return ImageTile;\n\t})(_Tile3['default']);\n\t\n\texports['default'] = ImageTile;\n\t\n\tvar noNew = function noNew(quadcode, path, layer) {\n\t    return new ImageTile(quadcode, path, layer);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.imageTile = noNew;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// Manages a single tile and its layers\n\t\n\tvar r2d = 180 / Math.PI;\n\t\n\tvar tileURLRegex = /\\{([szxy])\\}/g;\n\t\n\tvar Tile = (function () {\n\t  function Tile(quadcode, path, layer) {\n\t    _classCallCheck(this, Tile);\n\t\n\t    this._layer = layer;\n\t    this._world = layer._world;\n\t    this._quadcode = quadcode;\n\t    this._path = path;\n\t\n\t    this._ready = false;\n\t    this._aborted = false;\n\t\n\t    this._tile = this._quadcodeToTile(quadcode);\n\t\n\t    // Bottom-left and top-right bounds in WGS84 coordinates\n\t    this._boundsLatLon = this._tileBoundsWGS84(this._tile);\n\t\n\t    // Bottom-left and top-right bounds in world coordinates\n\t    this._boundsWorld = this._tileBoundsFromWGS84(this._boundsLatLon);\n\t\n\t    // Tile center in world coordinates\n\t    this._center = this._boundsToCenter(this._boundsWorld);\n\t\n\t    // Tile center in projected coordinates\n\t    this._centerLatlon = this._world.pointToLatLon((0, _geoPoint.point)(this._center[0], this._center[1]));\n\t\n\t    // Length of a tile side in world coorindates\n\t    this._side = this._getSide(this._boundsWorld);\n\t\n\t    // Point scale for tile (for unit conversion)\n\t    this._pointScale = this._world.pointScale(this._centerLatlon);\n\t  }\n\t\n\t  // Returns true if the tile mesh and texture are ready to be used\n\t  // Otherwise, returns false\n\t\n\t  _createClass(Tile, [{\n\t    key: 'isReady',\n\t    value: function isReady() {\n\t      return this._ready;\n\t    }\n\t  }, {\n\t    key: 'isAborted',\n\t    value: function isAborted() {\n\t      return this._aborted;\n\t    }\n\t\n\t    // Request data for the tile\n\t  }, {\n\t    key: 'requestTileAsync',\n\t    value: function requestTileAsync() {}\n\t  }, {\n\t    key: 'getQuadcode',\n\t    value: function getQuadcode() {\n\t      return this._quadcode;\n\t    }\n\t  }, {\n\t    key: 'getBounds',\n\t    value: function getBounds() {\n\t      return this._boundsWorld;\n\t    }\n\t  }, {\n\t    key: 'getCenter',\n\t    value: function getCenter() {\n\t      return this._center;\n\t    }\n\t  }, {\n\t    key: 'getSide',\n\t    value: function getSide() {\n\t      return this._side;\n\t    }\n\t  }, {\n\t    key: 'getMesh',\n\t    value: function getMesh() {\n\t      return this._mesh;\n\t    }\n\t  }, {\n\t    key: 'getPickingMesh',\n\t    value: function getPickingMesh() {\n\t      return this._pickingMesh;\n\t    }\n\t\n\t    // Destroys the tile and removes it from the layer and memory\n\t    //\n\t    // Ensure that this leaves no trace of the tile – no textures, no meshes,\n\t    // nothing in memory or the GPU\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      // console.log('Destroying tile', this._quadcode);\n\t\n\t      // Delete reference to layer and world\n\t      this._layer = null;\n\t      this._world = null;\n\t\n\t      // Delete location references\n\t      this._boundsLatLon = null;\n\t      this._boundsWorld = null;\n\t      this._center = null;\n\t\n\t      // Done if no mesh\n\t      if (!this._mesh && !this._pickingMesh) {\n\t        return;\n\t      }\n\t\n\t      this.destroyMesh(this._mesh);\n\t      this.destroyMesh(this._pickingMesh);\n\t\n\t      this._mesh = null;\n\t      this._pickingMesh = null;\n\t    }\n\t  }, {\n\t    key: 'destroyMesh',\n\t    value: function destroyMesh(mesh) {\n\t      var _this = this;\n\t\n\t      var dispose = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\t\n\t      if (mesh) {\n\t        if (mesh.children) {\n\t          mesh.children.forEach(function (child) {\n\t            mesh.remove(child);\n\t            _this.destroyMesh(child);\n\t          });\n\t        }\n\t\n\t        if (dispose) {\n\t          if (mesh.geometry) {\n\t            mesh.geometry.dispose();\n\t            mesh.geometry = null;\n\t          }\n\t\n\t          if (mesh.material) {\n\t            if (mesh.material.map) {\n\t              mesh.material.map.dispose();\n\t              mesh.material.map = null;\n\t            }\n\t\n\t            mesh.material.dispose();\n\t            mesh.material = null;\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '_createMesh',\n\t    value: function _createMesh() {}\n\t  }, {\n\t    key: '_createDebugMesh',\n\t    value: function _createDebugMesh() {}\n\t  }, {\n\t    key: '_getTileURL',\n\t    value: function _getTileURL(urlParams) {\n\t      if (!urlParams.s) {\n\t        // Default to a random choice of a, b or c\n\t        urlParams.s = String.fromCharCode(97 + Math.floor(Math.random() * 3));\n\t      }\n\t\n\t      tileURLRegex.lastIndex = 0;\n\t      return this._path.replace(tileURLRegex, function (value, key) {\n\t        // Replace with paramter, otherwise keep existing value\n\t        return urlParams[key];\n\t      });\n\t    }\n\t\n\t    // Convert from quadcode to TMS tile coordinates\n\t  }, {\n\t    key: '_quadcodeToTile',\n\t    value: function _quadcodeToTile(quadcode) {\n\t      var x = 0;\n\t      var y = 0;\n\t      var z = quadcode.length;\n\t\n\t      for (var i = z; i > 0; i--) {\n\t        var mask = 1 << i - 1;\n\t        var q = +quadcode[z - i];\n\t        if (q === 1) {\n\t          x |= mask;\n\t        }\n\t        if (q === 2) {\n\t          y |= mask;\n\t        }\n\t        if (q === 3) {\n\t          x |= mask;\n\t          y |= mask;\n\t        }\n\t      }\n\t\n\t      return [x, y, z];\n\t    }\n\t\n\t    // Convert WGS84 tile bounds to world coordinates\n\t  }, {\n\t    key: '_tileBoundsFromWGS84',\n\t    value: function _tileBoundsFromWGS84(boundsWGS84) {\n\t      var sw = this._layer._world.latLonToPoint((0, _geoLatLon.latLon)(boundsWGS84[1], boundsWGS84[0]));\n\t      var ne = this._layer._world.latLonToPoint((0, _geoLatLon.latLon)(boundsWGS84[3], boundsWGS84[2]));\n\t\n\t      return [sw.x, sw.y, ne.x, ne.y];\n\t    }\n\t\n\t    // Get tile bounds in WGS84 coordinates\n\t  }, {\n\t    key: '_tileBoundsWGS84',\n\t    value: function _tileBoundsWGS84(tile) {\n\t      var e = this._tile2lon(tile[0] + 1, tile[2]);\n\t      var w = this._tile2lon(tile[0], tile[2]);\n\t      var s = this._tile2lat(tile[1] + 1, tile[2]);\n\t      var n = this._tile2lat(tile[1], tile[2]);\n\t      return [w, s, e, n];\n\t    }\n\t  }, {\n\t    key: '_tile2lon',\n\t    value: function _tile2lon(x, z) {\n\t      return x / Math.pow(2, z) * 360 - 180;\n\t    }\n\t  }, {\n\t    key: '_tile2lat',\n\t    value: function _tile2lat(y, z) {\n\t      var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n\t      return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n\t    }\n\t  }, {\n\t    key: '_boundsToCenter',\n\t    value: function _boundsToCenter(bounds) {\n\t      var x = bounds[0] + (bounds[2] - bounds[0]) / 2;\n\t      var y = bounds[1] + (bounds[3] - bounds[1]) / 2;\n\t\n\t      return [x, y];\n\t    }\n\t  }, {\n\t    key: '_getSide',\n\t    value: function _getSide(bounds) {\n\t      return new _three2['default'].Vector3(bounds[0], 0, bounds[3]).sub(new _three2['default'].Vector3(bounds[0], 0, bounds[1])).length();\n\t    }\n\t  }]);\n\t\n\t  return Tile;\n\t})();\n\t\n\texports['default'] = Tile;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\t\tvalue: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// jscs:disable\n\t/* eslint-disable */\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\n\t\n\tBoxHelper = function (object) {\n\t\n\t\t\tvar indices = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]);\n\t\t\tvar positions = new Float32Array(8 * 3);\n\t\n\t\t\tvar geometry = new _three2['default'].BufferGeometry();\n\t\t\tgeometry.setIndex(new _three2['default'].BufferAttribute(indices, 1));\n\t\t\tgeometry.addAttribute('position', new _three2['default'].BufferAttribute(positions, 3));\n\t\n\t\t\t_three2['default'].LineSegments.call(this, geometry, new _three2['default'].LineBasicMaterial({ linewidth: 2, color: 0xff0000 }));\n\t\n\t\t\tif (object !== undefined) {\n\t\n\t\t\t\t\tthis.update(object);\n\t\t\t}\n\t};\n\t\n\tBoxHelper.prototype = Object.create(_three2['default'].LineSegments.prototype);\n\tBoxHelper.prototype.constructor = BoxHelper;\n\t\n\tBoxHelper.prototype.update = (function () {\n\t\n\t\t\tvar box = new _three2['default'].Box3();\n\t\n\t\t\treturn function (object) {\n\t\n\t\t\t\t\tbox.setFromObject(object);\n\t\n\t\t\t\t\tif (box.isEmpty()) return;\n\t\n\t\t\t\t\tvar min = box.min;\n\t\t\t\t\tvar max = box.max;\n\t\n\t\t\t\t\t/*\r\n\t      5____4\r\n\t    1/___0/|\r\n\t    | 6__|_7\r\n\t    2/___3/\r\n\t    \t\t0: max.x, max.y, max.z\r\n\t    1: min.x, max.y, max.z\r\n\t    2: min.x, min.y, max.z\r\n\t    3: max.x, min.y, max.z\r\n\t    4: max.x, max.y, min.z\r\n\t    5: min.x, max.y, min.z\r\n\t    6: min.x, min.y, min.z\r\n\t    7: max.x, min.y, min.z\r\n\t    */\n\t\n\t\t\t\t\tvar position = this.geometry.attributes.position;\n\t\t\t\t\tvar array = position.array;\n\t\n\t\t\t\t\tarray[0] = max.x;array[1] = max.y;array[2] = max.z;\n\t\t\t\t\tarray[3] = min.x;array[4] = max.y;array[5] = max.z;\n\t\t\t\t\tarray[6] = min.x;array[7] = min.y;array[8] = max.z;\n\t\t\t\t\tarray[9] = max.x;array[10] = min.y;array[11] = max.z;\n\t\t\t\t\tarray[12] = max.x;array[13] = max.y;array[14] = min.z;\n\t\t\t\t\tarray[15] = min.x;array[16] = max.y;array[17] = min.z;\n\t\t\t\t\tarray[18] = min.x;array[19] = min.y;array[20] = min.z;\n\t\t\t\t\tarray[21] = max.x;array[22] = min.y;array[23] = min.z;\n\t\n\t\t\t\t\tposition.needsUpdate = true;\n\t\n\t\t\t\t\tthis.geometry.computeBoundingSphere();\n\t\t\t};\n\t})();\n\t\n\texports['default'] = BoxHelper;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\texports['default'] = function (colour, skyboxTarget) {\n\t  var canvas = document.createElement('canvas');\n\t  canvas.width = 1;\n\t  canvas.height = 1;\n\t\n\t  var context = canvas.getContext('2d');\n\t  context.fillStyle = colour;\n\t  context.fillRect(0, 0, canvas.width, canvas.height);\n\t  // context.strokeStyle = '#D0D0CF';\n\t  // context.strokeRect(0, 0, canvas.width, canvas.height);\n\t\n\t  var texture = new _three2['default'].Texture(canvas);\n\t\n\t  // // Silky smooth images when tilted\n\t  // texture.magFilter = THREE.LinearFilter;\n\t  // texture.minFilter = THREE.LinearMipMapLinearFilter;\n\t  // //\n\t  // // // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t  // texture.anisotropy = 4;\n\t\n\t  // texture.wrapS = THREE.RepeatWrapping;\n\t  // texture.wrapT = THREE.RepeatWrapping;\n\t  // texture.repeat.set(segments, segments);\n\t\n\t  texture.needsUpdate = true;\n\t\n\t  var material;\n\t\n\t  if (!skyboxTarget) {\n\t    material = new _three2['default'].MeshBasicMaterial({\n\t      map: texture,\n\t      depthWrite: false\n\t    });\n\t  } else {\n\t    material = new _three2['default'].MeshStandardMaterial({\n\t      map: texture,\n\t      depthWrite: false\n\t    });\n\t    material.roughness = 1;\n\t    material.metalness = 0.1;\n\t    material.envMap = skyboxTarget;\n\t  }\n\t\n\t  return material;\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _TileLayer2 = __webpack_require__(22);\n\t\n\tvar _TileLayer3 = _interopRequireDefault(_TileLayer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _GeoJSONTile = __webpack_require__(40);\n\t\n\tvar _GeoJSONTile2 = _interopRequireDefault(_GeoJSONTile);\n\t\n\tvar _lodashThrottle = __webpack_require__(20);\n\t\n\tvar _lodashThrottle2 = _interopRequireDefault(_lodashThrottle);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// TODO: Offer on-the-fly slicing of static, non-tile-based GeoJSON files into a\n\t// tile grid using geojson-vt\n\t//\n\t// See: https://github.com/mapbox/geojson-vt\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// TODO: Consider pausing per-frame output during movement so there's little to\n\t// no jank caused by previous tiles still processing\n\t\n\t// This tile layer only updates the quadtree after world movement has occurred\n\t//\n\t// Tiles from previous quadtree updates are updated and outputted every frame\n\t// (or at least every frame, throttled to some amount)\n\t//\n\t// This is because the complexity of TopoJSON tiles requires a lot of processing\n\t// and so makes movement janky if updates occur every frame – only updating\n\t// after movement means frame drops are less obvious due to heavy processing\n\t// occurring while the view is generally stationary\n\t//\n\t// The downside is that until new tiles are requested and outputted you will\n\t// see blank spaces as you orbit and move around\n\t//\n\t// An added benefit is that it dramatically reduces the number of tiles being\n\t// requested over a period of time and the time it takes to go from request to\n\t// screen output\n\t//\n\t// It may be possible to perform these updates per-frame once Web Worker\n\t// processing is added\n\t\n\tvar GeoJSONTileLayer = (function (_TileLayer) {\n\t  _inherits(GeoJSONTileLayer, _TileLayer);\n\t\n\t  function GeoJSONTileLayer(path, options) {\n\t    _classCallCheck(this, GeoJSONTileLayer);\n\t\n\t    var defaults = {\n\t      maxLOD: 14,\n\t      distance: 30000,\n\t      workers: false\n\t    };\n\t\n\t    options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(GeoJSONTileLayer.prototype), 'constructor', this).call(this, options);\n\t\n\t    this.defaults = defaults;\n\t\n\t    this._path = path;\n\t  }\n\t\n\t  _createClass(GeoJSONTileLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _get(Object.getPrototypeOf(GeoJSONTileLayer.prototype), '_onAdd', _this).call(_this, world).then(function () {\n\t          // Trigger initial quadtree calculation on the next frame\n\t          //\n\t          // TODO: This is a hack to ensure the camera is all set up - a better\n\t          // solution should be found\n\t          setTimeout(function () {\n\t            _this._calculateLOD();\n\t            _this._initEvents();\n\t          }, 0);\n\t\n\t          resolve(_this);\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_initEvents',\n\t    value: function _initEvents() {\n\t      // Run LOD calculations based on render calls\n\t      //\n\t      // Throttled to 1 LOD calculation per 100ms\n\t      this._throttledWorldUpdate = (0, _lodashThrottle2['default'])(this._onWorldUpdate, 100);\n\t\n\t      this._world.on('preUpdate', this._throttledWorldUpdate, this);\n\t      this._world.on('move', this._onWorldMove, this);\n\t      this._world.on('controlsMove', this._onControlsMove, this);\n\t    }\n\t\n\t    // Update and output tiles each frame (throttled)\n\t  }, {\n\t    key: '_onWorldUpdate',\n\t    value: function _onWorldUpdate() {\n\t      if (this._pauseOutput || this._disableOutput) {\n\t        return;\n\t      }\n\t\n\t      this._outputTiles();\n\t    }\n\t\n\t    // Update tiles grid after world move, but don't output them\n\t  }, {\n\t    key: '_onWorldMove',\n\t    value: function _onWorldMove(latlon, point) {\n\t      if (this._disableOutput) {\n\t        return;\n\t      }\n\t\n\t      this._pauseOutput = false;\n\t      this._calculateLOD();\n\t    }\n\t\n\t    // Pause updates during control movement for less visual jank\n\t  }, {\n\t    key: '_onControlsMove',\n\t    value: function _onControlsMove() {\n\t      if (this._disableOutput) {\n\t        return;\n\t      }\n\t\n\t      this._pauseOutput = true;\n\t    }\n\t  }, {\n\t    key: '_createTile',\n\t    value: function _createTile(quadcode, layer) {\n\t      var newOptions = (0, _lodashAssign2['default'])({}, this.defaults, this._options, {\n\t        outputToScene: false\n\t      });\n\t\n\t      delete newOptions.attribution;\n\t\n\t      return new _GeoJSONTile2['default'](quadcode, this._path, layer, newOptions);\n\t    }\n\t  }, {\n\t    key: 'hide',\n\t    value: function hide() {\n\t      this._pauseOutput = true;\n\t      _get(Object.getPrototypeOf(GeoJSONTileLayer.prototype), 'hide', this).call(this);\n\t    }\n\t  }, {\n\t    key: 'show',\n\t    value: function show() {\n\t      this._pauseOutput = false;\n\t      _get(Object.getPrototypeOf(GeoJSONTileLayer.prototype), 'show', this).call(this);\n\t    }\n\t\n\t    // Destroys the layer and removes it from the scene and memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._world.off('preUpdate', this._throttledWorldUpdate);\n\t      this._world.off('move', this._onWorldMove);\n\t\n\t      this._throttledWorldUpdate = null;\n\t\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(GeoJSONTileLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }]);\n\t\n\t  return GeoJSONTileLayer;\n\t})(_TileLayer3['default']);\n\t\n\texports['default'] = GeoJSONTileLayer;\n\t\n\tvar noNew = function noNew(path, options) {\n\t  return new GeoJSONTileLayer(path, options);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.geoJSONTileLayer = noNew;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Tile2 = __webpack_require__(36);\n\t\n\tvar _Tile3 = _interopRequireDefault(_Tile2);\n\t\n\tvar _GeoJSONLayer = __webpack_require__(41);\n\t\n\tvar _GeoJSONWorkerLayer = __webpack_require__(56);\n\t\n\tvar _vendorBoxHelper = __webpack_require__(37);\n\t\n\tvar _vendorBoxHelper2 = _interopRequireDefault(_vendorBoxHelper);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _reqwest = __webpack_require__(42);\n\t\n\tvar _reqwest2 = _interopRequireDefault(_reqwest);\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\t// import Offset from 'polygon-offset';\n\t\n\tvar _utilGeoJSON = __webpack_require__(44);\n\t\n\tvar _utilGeoJSON2 = _interopRequireDefault(_utilGeoJSON);\n\t\n\tvar _utilBuffer = __webpack_require__(50);\n\t\n\tvar _utilBuffer2 = _interopRequireDefault(_utilBuffer);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\t// TODO: Map picking IDs to some reference within the tile data / geometry so\n\t// that something useful can be done when an object is picked / clicked on\n\t\n\t// TODO: Make sure nothing is left behind in the heap after calling destroy()\n\t\n\t// TODO: Perform tile request and processing in a Web Worker\n\t//\n\t// Use Operative (https://github.com/padolsey/operative)\n\t//\n\t// Would it make sense to have the worker functionality defined in a static\n\t// method so it only gets initialised once and not on every tile instance?\n\t//\n\t// Otherwise, worker processing logic would have to go in the tile layer so not\n\t// to waste loads of time setting up a brand new worker with three.js for each\n\t// tile every single time.\n\t//\n\t// Unsure of the best way to get three.js and VIZI into the worker\n\t//\n\t// Would need to set up a CRS / projection identical to the world instance\n\t//\n\t// Is it possible to bypass requirements on external script by having multiple\n\t// simple worker methods that each take enough inputs to perform a single task\n\t// without requiring VIZI or three.js? So long as the heaviest logic is done in\n\t// the worker and transferrable objects are used then it should be better than\n\t// nothing. Would probably still need things like earcut...\n\t//\n\t// After all, the three.js logic and object creation will still need to be\n\t// done on the main thread regardless so the worker should try to do as much as\n\t// possible with as few dependencies as possible.\n\t//\n\t// Have a look at how this is done in Tangram before implementing anything as\n\t// the approach there is pretty similar and robust.\n\t\n\tvar GeoJSONTile = (function (_Tile) {\n\t  _inherits(GeoJSONTile, _Tile);\n\t\n\t  function GeoJSONTile(quadcode, path, layer, options) {\n\t    _classCallCheck(this, GeoJSONTile);\n\t\n\t    _get(Object.getPrototypeOf(GeoJSONTile.prototype), 'constructor', this).call(this, quadcode, path, layer);\n\t\n\t    this._defaultStyle = _utilGeoJSON2['default'].defaultStyle;\n\t\n\t    var defaults = {\n\t      workers: false,\n\t      output: true,\n\t      outputToScene: false,\n\t      interactive: false,\n\t      topojson: false,\n\t      filter: null,\n\t      onEachFeature: null,\n\t      polygonMaterial: null,\n\t      onPolygonMesh: null,\n\t      onPolygonBufferAttributes: null,\n\t      polylineMaterial: null,\n\t      onPolylineMesh: null,\n\t      onPolylineBufferAttributes: null,\n\t      pointGeometry: null,\n\t      pointMaterial: null,\n\t      onPointMesh: null,\n\t      style: _utilGeoJSON2['default'].defaultStyle,\n\t      keepFeatures: false\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    if (typeof options.style === 'function') {\n\t      _options.style = options.style;\n\t    } else {\n\t      _options.style = (0, _lodashAssign2['default'])({}, defaults.style, options.style);\n\t    }\n\t\n\t    this._options = _options;\n\t  }\n\t\n\t  // Request data for the tile\n\t\n\t  _createClass(GeoJSONTile, [{\n\t    key: 'requestTileAsync',\n\t    value: function requestTileAsync() {\n\t      var _this = this;\n\t\n\t      // Making this asynchronous really speeds up the LOD framerate\n\t      setTimeout(function () {\n\t        if (!_this._mesh) {\n\t          _this._mesh = _this._createMesh();\n\t          // this._shadowCanvas = this._createShadowCanvas();\n\t        }\n\t\n\t        _this._requestTile();\n\t      }, 0);\n\t    }\n\t\n\t    // TODO: Destroy GeoJSONLayer\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      // Cancel any pending requests\n\t      this._abortRequest();\n\t\n\t      // Clear request reference\n\t      this._request = null;\n\t\n\t      if (this._geojsonLayer) {\n\t        this._geojsonLayer.destroy();\n\t        this._geojsonLayer = null;\n\t      }\n\t\n\t      this._mesh = null;\n\t\n\t      // TODO: Properly dispose of picking mesh\n\t      this._pickingMesh = null;\n\t\n\t      _get(Object.getPrototypeOf(GeoJSONTile.prototype), 'destroy', this).call(this);\n\t    }\n\t  }, {\n\t    key: '_createMesh',\n\t    value: function _createMesh() {\n\t      // Something went wrong and the tile\n\t      //\n\t      // Possibly removed by the cache before loaded\n\t      if (!this._center) {\n\t        return;\n\t      }\n\t\n\t      var mesh = new _three2['default'].Object3D();\n\t      // mesh.add(this._createDebugMesh());\n\t\n\t      return mesh;\n\t    }\n\t  }, {\n\t    key: '_createDebugMesh',\n\t    value: function _createDebugMesh() {\n\t      var canvas = document.createElement('canvas');\n\t      canvas.width = 256;\n\t      canvas.height = 256;\n\t\n\t      var context = canvas.getContext('2d');\n\t      context.font = 'Bold 20px Helvetica Neue, Verdana, Arial';\n\t      context.fillStyle = '#ff0000';\n\t      context.fillText(this._quadcode, 20, canvas.width / 2 - 5);\n\t      context.fillText(this._tile.toString(), 20, canvas.width / 2 + 25);\n\t\n\t      var texture = new _three2['default'].Texture(canvas);\n\t\n\t      // Silky smooth images when tilted\n\t      texture.magFilter = _three2['default'].LinearFilter;\n\t      texture.minFilter = _three2['default'].LinearMipMapLinearFilter;\n\t\n\t      // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t      texture.anisotropy = 4;\n\t\n\t      texture.needsUpdate = true;\n\t\n\t      var material = new _three2['default'].MeshBasicMaterial({\n\t        map: texture,\n\t        transparent: true,\n\t        depthWrite: false\n\t      });\n\t\n\t      var geom = new _three2['default'].PlaneBufferGeometry(this._side, this._side, 1);\n\t      var mesh = new _three2['default'].Mesh(geom, material);\n\t\n\t      mesh.rotation.x = -90 * Math.PI / 180;\n\t      mesh.position.y = 0.1;\n\t\n\t      return mesh;\n\t    }\n\t\n\t    // _createShadowCanvas() {\n\t    //   var canvas = document.createElement('canvas');\n\t    //\n\t    //   // Rendered at a low resolution and later scaled up for a low-quality blur\n\t    //   canvas.width = 512;\n\t    //   canvas.height = 512;\n\t    //\n\t    //   return canvas;\n\t    // }\n\t\n\t    // _addShadow(coordinates) {\n\t    //   var ctx = this._shadowCanvas.getContext('2d');\n\t    //   var width = this._shadowCanvas.width;\n\t    //   var height = this._shadowCanvas.height;\n\t    //\n\t    //   var _coords;\n\t    //   var _offset;\n\t    //   var offset = new Offset();\n\t    //\n\t    //   // Transform coordinates to shadowCanvas space and draw on canvas\n\t    //   coordinates.forEach((ring, index) => {\n\t    //     ctx.beginPath();\n\t    //\n\t    //     _coords = ring.map(coord => {\n\t    //       var xFrac = (coord[0] - this._boundsWorld[0]) / this._side;\n\t    //       var yFrac = (coord[1] - this._boundsWorld[3]) / this._side;\n\t    //       return [xFrac * width, yFrac * height];\n\t    //     });\n\t    //\n\t    //     if (index > 0) {\n\t    //       _offset = _coords;\n\t    //     } else {\n\t    //       _offset = offset.data(_coords).padding(1.3);\n\t    //     }\n\t    //\n\t    //     // TODO: This is super flaky and crashes the browser if run on anything\n\t    //     // put the outer ring (potentially due to winding)\n\t    //     _offset.forEach((coord, index) => {\n\t    //       // var xFrac = (coord[0] - this._boundsWorld[0]) / this._side;\n\t    //       // var yFrac = (coord[1] - this._boundsWorld[3]) / this._side;\n\t    //\n\t    //       if (index === 0) {\n\t    //         ctx.moveTo(coord[0], coord[1]);\n\t    //       } else {\n\t    //         ctx.lineTo(coord[0], coord[1]);\n\t    //       }\n\t    //     });\n\t    //\n\t    //     ctx.closePath();\n\t    //   });\n\t    //\n\t    //   ctx.fillStyle = 'rgba(80, 80, 80, 0.7)';\n\t    //   ctx.fill();\n\t    // }\n\t\n\t  }, {\n\t    key: '_requestTile',\n\t    value: function _requestTile() {\n\t      var _this2 = this;\n\t\n\t      var urlParams = {\n\t        x: this._tile[0],\n\t        y: this._tile[1],\n\t        z: this._tile[2]\n\t      };\n\t\n\t      var url = this._getTileURL(urlParams);\n\t\n\t      this._aborted = false;\n\t\n\t      if (!this._options.workers) {\n\t        this._request = (0, _reqwest2['default'])({\n\t          url: url,\n\t          type: 'json',\n\t          crossOrigin: true,\n\t          headers: this._options.headers\n\t        }).then(function (res) {\n\t          // Clear request reference\n\t          _this2._request = null;\n\t          _this2._processTileData(res);\n\t        })['catch'](function (err) {\n\t          // Clear request reference\n\t          _this2._request = null;\n\t        });\n\t      } else {\n\t        this._processTileData(url);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_processTileData',\n\t    value: function _processTileData(data) {\n\t      var _this3 = this;\n\t\n\t      // console.time(this._tile);\n\t\n\t      var GeoJSONClass = !this._options.workers ? _GeoJSONLayer.geoJSONLayer : _GeoJSONWorkerLayer.geoJSONWorkerLayer;\n\t\n\t      // Using this creates a huge amount of memory due to the quantity of tiles\n\t      this._geojsonLayer = GeoJSONClass(data, this._options);\n\t      this._geojsonLayer.addTo(this._world).then(function () {\n\t        // TODO: This never seems to be called on worker layers. Find out why.\n\t        if (_this3.isAborted()) {\n\t          // this._geojsonLayer._aborted = true;\n\t          // this._geojsonLayer = null;\n\t          return;\n\t        }\n\t\n\t        // TODO: This is a hack to stop old tile meshes hanging around. Fix or\n\t        // move to somewhere more robust.\n\t        //\n\t        // Could potentially just overwrite mesh on first index each time\n\t        //\n\t        // This makes some worker tiles to not appear properly – showing the\n\t        // points mesh but not the polygon mesh, etc.\n\t        //\n\t        // Only do this for non-worker layers for now as it seems to cause issues\n\t        // with worker tiles showing for a moment and then disappearing forever\n\t        if (!_this3._options.workers) {\n\t          _this3.destroyMesh(_this3._mesh);\n\t        }\n\t\n\t        // TOSO: Work out if the picking mesh needs destroying here\n\t        // this.destroyMesh(this._pickingMesh);\n\t\n\t        _this3._mesh.add(_this3._geojsonLayer._object3D);\n\t        _this3._pickingMesh = _this3._geojsonLayer._pickingMesh;\n\t\n\t        // Free the GeoJSON memory as we don't need it\n\t        //\n\t        // TODO: This should probably be a method within GeoJSONLayer\n\t        if (_this3._geojsonLayer._geojson) {\n\t          _this3._geojsonLayer._geojson = null;\n\t        }\n\t\n\t        // TODO: Fix or store shadow canvas stuff and get rid of this code\n\t        // Draw footprint on shadow canvas\n\t        //\n\t        // TODO: Disabled for the time-being until it can be sped up / moved to\n\t        // a worker\n\t        // this._addShadow(coordinates);\n\t\n\t        // Output shadow canvas\n\t\n\t        // TODO: Disabled for the time-being until it can be sped up / moved to\n\t        // a worker\n\t\n\t        // var texture = new THREE.Texture(this._shadowCanvas);\n\t        //\n\t        // // Silky smooth images when tilted\n\t        // texture.magFilter = THREE.LinearFilter;\n\t        // texture.minFilter = THREE.LinearMipMapLinearFilter;\n\t        //\n\t        // // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t        // texture.anisotropy = 4;\n\t        //\n\t        // texture.needsUpdate = true;\n\t        //\n\t        // var material;\n\t        // if (!this._world._environment._skybox) {\n\t        //   material = new THREE.MeshBasicMaterial({\n\t        //     map: texture,\n\t        //     transparent: true,\n\t        //     depthWrite: false\n\t        //   });\n\t        // } else {\n\t        //   material = new THREE.MeshStandardMaterial({\n\t        //     map: texture,\n\t        //     transparent: true,\n\t        //     depthWrite: false\n\t        //   });\n\t        //   material.roughness = 1;\n\t        //   material.metalness = 0.1;\n\t        //   material.envMap = this._world._environment._skybox.getRenderTarget();\n\t        // }\n\t        //\n\t        // var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\n\t        // var mesh = new THREE.Mesh(geom, material);\n\t        //\n\t        // mesh.castShadow = false;\n\t        // mesh.receiveShadow = false;\n\t        // mesh.renderOrder = 1;\n\t        //\n\t        // mesh.rotation.x = -90 * Math.PI / 180;\n\t        //\n\t        // this._mesh.add(mesh);\n\t\n\t        _this3._ready = true;\n\t        // console.timeEnd(this._tile);\n\t      })['catch'](function (err) {\n\t        console.error(err);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_abortRequest',\n\t    value: function _abortRequest() {\n\t      if (!this._request && !this._options.workers || this._ready) {\n\t        return;\n\t      }\n\t\n\t      this._aborted = true;\n\t\n\t      if (this._request) {\n\t        this._request.abort();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return GeoJSONTile;\n\t})(_Tile3['default']);\n\t\n\texports['default'] = GeoJSONTile;\n\t\n\tvar noNew = function noNew(quadcode, path, layer, options) {\n\t  return new GeoJSONTile(quadcode, path, layer, options);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.geoJSONTile = noNew;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// TODO: Consider adopting GeoJSON CSS\n\t// http://wiki.openstreetmap.org/wiki/Geojson_CSS\n\t\n\t// TODO: Allow interaction to be defined per-layer to save on resources\n\t//\n\t// For example, only allow polygons to be interactive via a polygonInteractive\n\t// option\n\t\n\tvar _LayerGroup2 = __webpack_require__(16);\n\t\n\tvar _LayerGroup3 = _interopRequireDefault(_LayerGroup2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _reqwest = __webpack_require__(42);\n\t\n\tvar _reqwest2 = _interopRequireDefault(_reqwest);\n\t\n\tvar _utilGeoJSON = __webpack_require__(44);\n\t\n\tvar _utilGeoJSON2 = _interopRequireDefault(_utilGeoJSON);\n\t\n\tvar _utilBuffer = __webpack_require__(50);\n\t\n\tvar _utilBuffer2 = _interopRequireDefault(_utilBuffer);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\tvar _geometryPolygonLayer = __webpack_require__(53);\n\t\n\tvar _geometryPolygonLayer2 = _interopRequireDefault(_geometryPolygonLayer);\n\t\n\tvar _geometryPolylineLayer = __webpack_require__(54);\n\t\n\tvar _geometryPolylineLayer2 = _interopRequireDefault(_geometryPolylineLayer);\n\t\n\tvar _geometryPointLayer = __webpack_require__(55);\n\t\n\tvar _geometryPointLayer2 = _interopRequireDefault(_geometryPointLayer);\n\t\n\tvar GeoJSONLayer = (function (_LayerGroup) {\n\t  _inherits(GeoJSONLayer, _LayerGroup);\n\t\n\t  function GeoJSONLayer(geojson, options) {\n\t    _classCallCheck(this, GeoJSONLayer);\n\t\n\t    var defaults = {\n\t      output: false,\n\t      interactive: false,\n\t      topojson: false,\n\t      filter: null,\n\t      onEachFeature: null,\n\t      polygonMaterial: null,\n\t      onPolygonMesh: null,\n\t      onPolygonBufferAttributes: null,\n\t      polylineMaterial: null,\n\t      onPolylineMesh: null,\n\t      onPolylineBufferAttributes: null,\n\t      pointGeometry: null,\n\t      pointMaterial: null,\n\t      onPointMesh: null,\n\t      style: _utilGeoJSON2['default'].defaultStyle,\n\t      keepFeatures: true\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    if (typeof options.style === 'function') {\n\t      _options.style = options.style;\n\t    } else {\n\t      _options.style = (0, _lodashAssign2['default'])({}, defaults.style, options.style);\n\t    }\n\t\n\t    _get(Object.getPrototypeOf(GeoJSONLayer.prototype), 'constructor', this).call(this, _options);\n\t\n\t    this._geojson = geojson;\n\t  }\n\t\n\t  _createClass(GeoJSONLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      // Only add to picking mesh if this layer is controlling output\n\t      //\n\t      // Otherwise, assume another component will eventually add a mesh to\n\t      // the picking scene\n\t      if (this.isOutput()) {\n\t        this._pickingMesh = new THREE.Object3D();\n\t        this.addToPicking(this._pickingMesh);\n\t      }\n\t\n\t      // Request data from URL if needed\n\t      if (typeof this._geojson === 'string') {\n\t        return this._requestData(this._geojson);\n\t      } else {\n\t        // Process and add GeoJSON to layer\n\t        return this._processData(this._geojson);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_requestData',\n\t    value: function _requestData(url) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _this._request = (0, _reqwest2['default'])({\n\t          url: url,\n\t          type: 'json',\n\t          crossOrigin: true\n\t        }).then(function (res) {\n\t          // Clear request reference\n\t          _this._request = null;\n\t          _this._processData(res).then(function () {\n\t            resolve(_this);\n\t          });\n\t        })['catch'](function (err) {\n\t          console.error(err);\n\t\n\t          // Clear request reference\n\t          _this._request = null;\n\t\n\t          reject(err);\n\t        });\n\t      });\n\t    }\n\t\n\t    // TODO: Wrap into a helper method so this isn't duplicated in the tiled\n\t    // GeoJSON output layer\n\t    //\n\t    // Need to be careful as to not make it impossible to fork this off into a\n\t    // worker script at a later stage\n\t  }, {\n\t    key: '_processData',\n\t    value: function _processData(data) {\n\t      var _this2 = this;\n\t\n\t      return new Promise(function (resolve) {\n\t        // Collects features into a single FeatureCollection\n\t        //\n\t        // Also converts TopoJSON to GeoJSON if instructed\n\t        _this2._geojson = _utilGeoJSON2['default'].collectFeatures(data, _this2._options.topojson);\n\t\n\t        // TODO: Check that GeoJSON is valid / usable\n\t\n\t        var features = _this2._geojson.features;\n\t\n\t        // Run filter, if provided\n\t        if (_this2._options.filter) {\n\t          features = _this2._geojson.features.filter(_this2._options.filter);\n\t        }\n\t\n\t        var defaults = {};\n\t\n\t        // Assume that a style won't be set per feature\n\t        var style = _this2._options.style;\n\t\n\t        var layerPromises = [];\n\t\n\t        var options;\n\t        features.forEach(function (feature) {\n\t          // Get per-feature style object, if provided\n\t          if (typeof _this2._options.style === 'function') {\n\t            style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, _this2._options.style(feature));\n\t          }\n\t\n\t          options = (0, _lodashAssign2['default'])({}, defaults, {\n\t            // If merging feature layers, stop them outputting themselves\n\t            // If not, let feature layers output themselves to the world\n\t            output: !_this2.isOutput(),\n\t            interactive: _this2._options.interactive,\n\t            style: style\n\t          });\n\t\n\t          var layer = _this2._featureToLayer(feature, options);\n\t\n\t          if (!layer) {\n\t            return;\n\t          }\n\t\n\t          // Sometimes you don't want to store a reference to the feature\n\t          //\n\t          // For example, to save memory when being used by tile layers\n\t          if (_this2._options.keepFeatures) {\n\t            layer.feature = feature;\n\t          }\n\t\n\t          // If defined, call a function for each feature\n\t          //\n\t          // This is commonly used for adding event listeners from the user script\n\t          if (_this2._options.onEachFeature) {\n\t            _this2._options.onEachFeature(feature, layer);\n\t          }\n\t\n\t          // TODO: Make this a promise array and only continue on completion\n\t          layerPromises.push(_this2.addLayer(layer));\n\t        });\n\t\n\t        Promise.all(layerPromises).then(function (results) {\n\t          // If merging layers do that now, otherwise skip as the geometry layers\n\t          // should have already outputted themselves\n\t          if (!_this2.isOutput()) {\n\t            resolve();\n\t            return;\n\t          }\n\t\n\t          // From here on we can assume that we want to merge the layers\n\t\n\t          var polygonAttributes = [];\n\t          var polygonOutlineAttributes = [];\n\t          var polygonAttributeLengths = {\n\t            positions: 3,\n\t            normals: 3,\n\t            colors: 3\n\t          };\n\t          var polygonFlat = true;\n\t\n\t          var polylineAttributes = [];\n\t          var polylineAttributeLengths = {\n\t            positions: 3,\n\t            colors: 3\n\t          };\n\t          var polylineFlat = true;\n\t\n\t          var pointAttributes = [];\n\t          var pointAttributeLengths = {\n\t            positions: 3,\n\t            normals: 3,\n\t            colors: 3\n\t          };\n\t          var pointFlat = true;\n\t\n\t          _this2._layers.forEach(function (layer) {\n\t            if (layer instanceof _geometryPolygonLayer2['default']) {\n\t              polygonAttributes.push(layer.getBufferAttributes());\n\t\n\t              var outlineBufferAttributes = layer.getOutlineBufferAttributes();\n\t              if (outlineBufferAttributes) {\n\t                polygonOutlineAttributes.push(outlineBufferAttributes);\n\t              }\n\t\n\t              if (polygonFlat && !layer.isFlat()) {\n\t                polygonFlat = false;\n\t              }\n\t\n\t              if (_this2._options.interactive) {\n\t                polygonAttributeLengths.pickingIds = 1;\n\t              }\n\t            } else if (layer instanceof _geometryPolylineLayer2['default']) {\n\t              polylineAttributes.push(layer.getBufferAttributes());\n\t\n\t              if (polylineFlat && !layer.isFlat()) {\n\t                polylineFlat = false;\n\t              }\n\t\n\t              if (_this2._options.interactive) {\n\t                polylineAttributeLengths.pickingIds = 1;\n\t              }\n\t            } else if (layer instanceof _geometryPointLayer2['default']) {\n\t              pointAttributes.push(layer.getBufferAttributes());\n\t\n\t              if (pointFlat && !layer.isFlat()) {\n\t                pointFlat = false;\n\t              }\n\t\n\t              if (_this2._options.interactive) {\n\t                pointAttributeLengths.pickingIds = 1;\n\t              }\n\t            }\n\t          });\n\t\n\t          var style;\n\t\n\t          if (polygonAttributes.length > 0) {\n\t            var mergedPolygonAttributes = _utilBuffer2['default'].mergeAttributes(polygonAttributes);\n\t\n\t            var mergedPolygonOutlineAttributes;\n\t            if (polygonOutlineAttributes.length > 0) {\n\t              mergedPolygonOutlineAttributes = _utilBuffer2['default'].mergeAttributes(polygonOutlineAttributes);\n\t            }\n\t\n\t            style = typeof _this2._options.style === 'function' ? _this2._options.style(_this2._geojson.features[0]) : _this2._options.style;\n\t            style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t            _this2._setPolygonMesh(mergedPolygonAttributes, polygonAttributeLengths, style, polygonFlat).then(function (result) {\n\t              _this2._polygonMesh = result.mesh;\n\t              _this2.add(_this2._polygonMesh);\n\t\n\t              if (mergedPolygonOutlineAttributes) {\n\t                style = typeof _this2._options.style === 'function' ? _this2._options.style(_this2._geojson.features[0]) : _this2._options.style;\n\t                style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t                if (style.outlineRenderOrder !== undefined) {\n\t                  style.lineRenderOrder = style.outlineRenderOrder;\n\t                } else {\n\t                  style.lineRenderOrder = style.renderOrder ? style.renderOrder + 1 : 4;\n\t                }\n\t\n\t                if (style.outlineWidth) {\n\t                  style.lineWidth = style.outlineWidth;\n\t                }\n\t\n\t                _this2._setPolylineMesh(mergedPolygonOutlineAttributes, polylineAttributeLengths, style, true).then(function (result) {\n\t                  _this2.add(result.mesh);\n\t                });\n\t              }\n\t\n\t              if (result.pickingMesh) {\n\t                _this2._pickingMesh.add(result.pickingMesh);\n\t              }\n\t            });\n\t          }\n\t\n\t          if (polylineAttributes.length > 0) {\n\t            var mergedPolylineAttributes = _utilBuffer2['default'].mergeAttributes(polylineAttributes);\n\t\n\t            style = typeof _this2._options.style === 'function' ? _this2._options.style(_this2._geojson.features[0]) : _this2._options.style;\n\t            style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t            _this2._setPolylineMesh(mergedPolylineAttributes, polylineAttributeLengths, style, polylineFlat).then(function (result) {\n\t              _this2._polylineMesh = result.mesh;\n\t              _this2.add(_this2._polylineMesh);\n\t\n\t              if (result.pickingMesh) {\n\t                _this2._pickingMesh.add(result.pickingMesh);\n\t              }\n\t            });\n\t          }\n\t\n\t          if (pointAttributes.length > 0) {\n\t            var mergedPointAttributes = _utilBuffer2['default'].mergeAttributes(pointAttributes);\n\t\n\t            style = typeof _this2._options.style === 'function' ? _this2._options.style(_this2._geojson.features[0]) : _this2._options.style;\n\t            style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t            _this2._setPointMesh(mergedPointAttributes, pointAttributeLengths, style, pointFlat).then(function (result) {\n\t              _this2._pointMesh = result.mesh;\n\t              _this2.add(_this2._pointMesh);\n\t\n\t              if (result.pickingMesh) {\n\t                _this2._pickingMesh.add(result.pickingMesh);\n\t              }\n\t            });\n\t          }\n\t\n\t          // Clean up layers\n\t          //\n\t          // TODO: Are there ever situations where the unmerged buffer attributes\n\t          // and coordinates would still be required?\n\t          _this2._layers.forEach(function (layer) {\n\t            layer.clearBufferAttributes();\n\t            layer.clearCoordinates();\n\t          });\n\t\n\t          resolve();\n\t        });\n\t      });\n\t    }\n\t\n\t    // Create and store mesh from buffer attributes\n\t    //\n\t    // TODO: Probably remove this and call static method directly as it's just a proxy\n\t  }, {\n\t    key: '_setPolygonMesh',\n\t    value: function _setPolygonMesh(attributes, attributeLengths, style, flat) {\n\t      return _geometryPolygonLayer2['default'].SetMesh(attributes, attributeLengths, flat, style, this._options, this._world._environment._skybox);\n\t    }\n\t  }, {\n\t    key: '_setPolylineMesh',\n\t    value: function _setPolylineMesh(attributes, attributeLengths, style, flat) {\n\t      return _geometryPolylineLayer2['default'].SetMesh(attributes, attributeLengths, flat, style, this._options);\n\t    }\n\t  }, {\n\t    key: '_setPointMesh',\n\t    value: function _setPointMesh(attributes, attributeLengths, style, flat) {\n\t      return _geometryPointLayer2['default'].SetMesh(attributes, attributeLengths, flat, style, this._options);\n\t    }\n\t\n\t    // TODO: Support all GeoJSON geometry types\n\t  }, {\n\t    key: '_featureToLayer',\n\t    value: function _featureToLayer(feature, options) {\n\t      var geometry = feature.geometry;\n\t      var coordinates = geometry.coordinates ? geometry.coordinates : null;\n\t\n\t      if (!coordinates || !geometry) {\n\t        return;\n\t      }\n\t\n\t      if (geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\n\t        // Get material instance to use for polygon, if provided\n\t        if (typeof this._options.polygonMaterial === 'function') {\n\t          options.polygonMaterial = this._options.polygonMaterial(feature);\n\t        }\n\t\n\t        if (typeof this._options.onPolygonMesh === 'function') {\n\t          options.onPolygonMesh = this._options.onPolygonMesh;\n\t        }\n\t\n\t        // Pass onBufferAttributes callback, if defined\n\t        if (typeof this._options.onPolygonBufferAttributes === 'function') {\n\t          options.onBufferAttributes = this._options.onPolygonBufferAttributes;\n\t        }\n\t\n\t        return new _geometryPolygonLayer2['default'](coordinates, options);\n\t      }\n\t\n\t      if (geometry.type === 'LineString' || geometry.type === 'MultiLineString') {\n\t        // Get material instance to use for line, if provided\n\t        if (typeof this._options.lineMaterial === 'function') {\n\t          options.lineMaterial = this._options.lineMaterial(feature);\n\t        }\n\t\n\t        if (typeof this._options.onPolylineMesh === 'function') {\n\t          options.onPolylineMesh = this._options.onPolylineMesh;\n\t        }\n\t\n\t        // Pass onBufferAttributes callback, if defined\n\t        if (typeof this._options.onPolylineBufferAttributes === 'function') {\n\t          options.onBufferAttributes = this._options.onPolylineBufferAttributes;\n\t        }\n\t\n\t        return new _geometryPolylineLayer2['default'](coordinates, options);\n\t      }\n\t\n\t      if (geometry.type === 'Point' || geometry.type === 'MultiPoint') {\n\t        // Get geometry object to use for point, if provided\n\t        if (typeof this._options.pointGeometry === 'function') {\n\t          options.pointGeometry = this._options.pointGeometry(feature);\n\t        }\n\t\n\t        // Get material instance to use for point, if provided\n\t        if (typeof this._options.pointMaterial === 'function') {\n\t          options.pointMaterial = this._options.pointMaterial(feature);\n\t        }\n\t\n\t        if (typeof this._options.onPointMesh === 'function') {\n\t          options.onPointMesh = this._options.onPointMesh;\n\t        }\n\t\n\t        return new _geometryPointLayer2['default'](coordinates, options);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_abortRequest',\n\t    value: function _abortRequest() {\n\t      if (!this._request) {\n\t        return;\n\t      }\n\t\n\t      this._request.abort();\n\t    }\n\t\n\t    // Destroy the layers and remove them from the scene and memory\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      // Cancel any pending requests\n\t      this._abortRequest();\n\t\n\t      // Clear request reference\n\t      this._request = null;\n\t\n\t      this._geojson = null;\n\t\n\t      if (this._pickingMesh) {\n\t        // TODO: Properly dispose of picking mesh\n\t        this._pickingMesh = null;\n\t      }\n\t\n\t      if (this._polygonMesh) {\n\t        this._polygonMesh = null;\n\t      }\n\t\n\t      if (this._polylineMesh) {\n\t        this._polylineMesh = null;\n\t      }\n\t\n\t      if (this._pointMesh) {\n\t        this._pointMesh = null;\n\t      }\n\t\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(GeoJSONLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }]);\n\t\n\t  return GeoJSONLayer;\n\t})(_LayerGroup3['default']);\n\t\n\texports['default'] = GeoJSONLayer;\n\t\n\tvar noNew = function noNew(geojson, options) {\n\t  return new GeoJSONLayer(geojson, options);\n\t};\n\t\n\texports.geoJSONLayer = noNew;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t  * Reqwest! A general purpose XHR connection manager\n\t  * license MIT (c) Dustin Diaz 2015\n\t  * https://github.com/ded/reqwest\n\t  */\n\t\n\t!function (name, context, definition) {\n\t  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n\t  else if (true) !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t  else context[name] = definition()\n\t}('reqwest', this, function () {\n\t\n\t  var context = this\n\t\n\t  if ('window' in context) {\n\t    var doc = document\n\t      , byTag = 'getElementsByTagName'\n\t      , head = doc[byTag]('head')[0]\n\t  } else {\n\t    var XHR2\n\t    try {\n\t      XHR2 = __webpack_require__(43)\n\t    } catch (ex) {\n\t      throw new Error('Peer dependency `xhr2` required! Please npm install xhr2')\n\t    }\n\t  }\n\t\n\t\n\t  var httpsRe = /^http/\n\t    , protocolRe = /(^\\w+):\\/\\//\n\t    , twoHundo = /^(20\\d|1223)$/ //http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n\t    , readyState = 'readyState'\n\t    , contentType = 'Content-Type'\n\t    , requestedWith = 'X-Requested-With'\n\t    , uniqid = 0\n\t    , callbackPrefix = 'reqwest_' + (+new Date())\n\t    , lastValue // data stored by the most recent JSONP callback\n\t    , xmlHttpRequest = 'XMLHttpRequest'\n\t    , xDomainRequest = 'XDomainRequest'\n\t    , noop = function () {}\n\t\n\t    , isArray = typeof Array.isArray == 'function'\n\t        ? Array.isArray\n\t        : function (a) {\n\t            return a instanceof Array\n\t          }\n\t\n\t    , defaultHeaders = {\n\t          'contentType': 'application/x-www-form-urlencoded'\n\t        , 'requestedWith': xmlHttpRequest\n\t        , 'accept': {\n\t              '*':  'text/javascript, text/html, application/xml, text/xml, */*'\n\t            , 'xml':  'application/xml, text/xml'\n\t            , 'html': 'text/html'\n\t            , 'text': 'text/plain'\n\t            , 'json': 'application/json, text/javascript'\n\t            , 'js':   'application/javascript, text/javascript'\n\t          }\n\t      }\n\t\n\t    , xhr = function(o) {\n\t        // is it x-domain\n\t        if (o['crossOrigin'] === true) {\n\t          var xhr = context[xmlHttpRequest] ? new XMLHttpRequest() : null\n\t          if (xhr && 'withCredentials' in xhr) {\n\t            return xhr\n\t          } else if (context[xDomainRequest]) {\n\t            return new XDomainRequest()\n\t          } else {\n\t            throw new Error('Browser does not support cross-origin requests')\n\t          }\n\t        } else if (context[xmlHttpRequest]) {\n\t          return new XMLHttpRequest()\n\t        } else if (XHR2) {\n\t          return new XHR2()\n\t        } else {\n\t          return new ActiveXObject('Microsoft.XMLHTTP')\n\t        }\n\t      }\n\t    , globalSetupOptions = {\n\t        dataFilter: function (data) {\n\t          return data\n\t        }\n\t      }\n\t\n\t  function succeed(r) {\n\t    var protocol = protocolRe.exec(r.url)\n\t    protocol = (protocol && protocol[1]) || context.location.protocol\n\t    return httpsRe.test(protocol) ? twoHundo.test(r.request.status) : !!r.request.response\n\t  }\n\t\n\t  function handleReadyState(r, success, error) {\n\t    return function () {\n\t      // use _aborted to mitigate against IE err c00c023f\n\t      // (can't read props on aborted request objects)\n\t      if (r._aborted) return error(r.request)\n\t      if (r._timedOut) return error(r.request, 'Request is aborted: timeout')\n\t      if (r.request && r.request[readyState] == 4) {\n\t        r.request.onreadystatechange = noop\n\t        if (succeed(r)) success(r.request)\n\t        else\n\t          error(r.request)\n\t      }\n\t    }\n\t  }\n\t\n\t  function setHeaders(http, o) {\n\t    var headers = o['headers'] || {}\n\t      , h\n\t\n\t    headers['Accept'] = headers['Accept']\n\t      || defaultHeaders['accept'][o['type']]\n\t      || defaultHeaders['accept']['*']\n\t\n\t    var isAFormData = typeof FormData !== 'undefined' && (o['data'] instanceof FormData);\n\t    // breaks cross-origin requests with legacy browsers\n\t    if (!o['crossOrigin'] && !headers[requestedWith]) headers[requestedWith] = defaultHeaders['requestedWith']\n\t    if (!headers[contentType] && !isAFormData) headers[contentType] = o['contentType'] || defaultHeaders['contentType']\n\t    for (h in headers)\n\t      headers.hasOwnProperty(h) && 'setRequestHeader' in http && http.setRequestHeader(h, headers[h])\n\t  }\n\t\n\t  function setCredentials(http, o) {\n\t    if (typeof o['withCredentials'] !== 'undefined' && typeof http.withCredentials !== 'undefined') {\n\t      http.withCredentials = !!o['withCredentials']\n\t    }\n\t  }\n\t\n\t  function generalCallback(data) {\n\t    lastValue = data\n\t  }\n\t\n\t  function urlappend (url, s) {\n\t    return url + (/\\?/.test(url) ? '&' : '?') + s\n\t  }\n\t\n\t  function handleJsonp(o, fn, err, url) {\n\t    var reqId = uniqid++\n\t      , cbkey = o['jsonpCallback'] || 'callback' // the 'callback' key\n\t      , cbval = o['jsonpCallbackName'] || reqwest.getcallbackPrefix(reqId)\n\t      , cbreg = new RegExp('((^|\\\\?|&)' + cbkey + ')=([^&]+)')\n\t      , match = url.match(cbreg)\n\t      , script = doc.createElement('script')\n\t      , loaded = 0\n\t      , isIE10 = navigator.userAgent.indexOf('MSIE 10.0') !== -1\n\t\n\t    if (match) {\n\t      if (match[3] === '?') {\n\t        url = url.replace(cbreg, '$1=' + cbval) // wildcard callback func name\n\t      } else {\n\t        cbval = match[3] // provided callback func name\n\t      }\n\t    } else {\n\t      url = urlappend(url, cbkey + '=' + cbval) // no callback details, add 'em\n\t    }\n\t\n\t    context[cbval] = generalCallback\n\t\n\t    script.type = 'text/javascript'\n\t    script.src = url\n\t    script.async = true\n\t    if (typeof script.onreadystatechange !== 'undefined' && !isIE10) {\n\t      // need this for IE due to out-of-order onreadystatechange(), binding script\n\t      // execution to an event listener gives us control over when the script\n\t      // is executed. See http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n\t      script.htmlFor = script.id = '_reqwest_' + reqId\n\t    }\n\t\n\t    script.onload = script.onreadystatechange = function () {\n\t      if ((script[readyState] && script[readyState] !== 'complete' && script[readyState] !== 'loaded') || loaded) {\n\t        return false\n\t      }\n\t      script.onload = script.onreadystatechange = null\n\t      script.onclick && script.onclick()\n\t      // Call the user callback with the last value stored and clean up values and scripts.\n\t      fn(lastValue)\n\t      lastValue = undefined\n\t      head.removeChild(script)\n\t      loaded = 1\n\t    }\n\t\n\t    // Add the script to the DOM head\n\t    head.appendChild(script)\n\t\n\t    // Enable JSONP timeout\n\t    return {\n\t      abort: function () {\n\t        script.onload = script.onreadystatechange = null\n\t        err({}, 'Request is aborted: timeout', {})\n\t        lastValue = undefined\n\t        head.removeChild(script)\n\t        loaded = 1\n\t      }\n\t    }\n\t  }\n\t\n\t  function getRequest(fn, err) {\n\t    var o = this.o\n\t      , method = (o['method'] || 'GET').toUpperCase()\n\t      , url = typeof o === 'string' ? o : o['url']\n\t      // convert non-string objects to query-string form unless o['processData'] is false\n\t      , data = (o['processData'] !== false && o['data'] && typeof o['data'] !== 'string')\n\t        ? reqwest.toQueryString(o['data'])\n\t        : (o['data'] || null)\n\t      , http\n\t      , sendWait = false\n\t\n\t    // if we're working on a GET request and we have data then we should append\n\t    // query string to end of URL and not post data\n\t    if ((o['type'] == 'jsonp' || method == 'GET') && data) {\n\t      url = urlappend(url, data)\n\t      data = null\n\t    }\n\t\n\t    if (o['type'] == 'jsonp') return handleJsonp(o, fn, err, url)\n\t\n\t    // get the xhr from the factory if passed\n\t    // if the factory returns null, fall-back to ours\n\t    http = (o.xhr && o.xhr(o)) || xhr(o)\n\t\n\t    http.open(method, url, o['async'] === false ? false : true)\n\t    setHeaders(http, o)\n\t    setCredentials(http, o)\n\t    if (context[xDomainRequest] && http instanceof context[xDomainRequest]) {\n\t        http.onload = fn\n\t        http.onerror = err\n\t        // NOTE: see\n\t        // http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/30ef3add-767c-4436-b8a9-f1ca19b4812e\n\t        http.onprogress = function() {}\n\t        sendWait = true\n\t    } else {\n\t      http.onreadystatechange = handleReadyState(this, fn, err)\n\t    }\n\t    o['before'] && o['before'](http)\n\t    if (sendWait) {\n\t      setTimeout(function () {\n\t        http.send(data)\n\t      }, 200)\n\t    } else {\n\t      http.send(data)\n\t    }\n\t    return http\n\t  }\n\t\n\t  function Reqwest(o, fn) {\n\t    this.o = o\n\t    this.fn = fn\n\t\n\t    init.apply(this, arguments)\n\t  }\n\t\n\t  function setType(header) {\n\t    // json, javascript, text/plain, text/html, xml\n\t    if (header === null) return undefined; //In case of no content-type.\n\t    if (header.match('json')) return 'json'\n\t    if (header.match('javascript')) return 'js'\n\t    if (header.match('text')) return 'html'\n\t    if (header.match('xml')) return 'xml'\n\t  }\n\t\n\t  function init(o, fn) {\n\t\n\t    this.url = typeof o == 'string' ? o : o['url']\n\t    this.timeout = null\n\t\n\t    // whether request has been fulfilled for purpose\n\t    // of tracking the Promises\n\t    this._fulfilled = false\n\t    // success handlers\n\t    this._successHandler = function(){}\n\t    this._fulfillmentHandlers = []\n\t    // error handlers\n\t    this._errorHandlers = []\n\t    // complete (both success and fail) handlers\n\t    this._completeHandlers = []\n\t    this._erred = false\n\t    this._responseArgs = {}\n\t\n\t    var self = this\n\t\n\t    fn = fn || function () {}\n\t\n\t    if (o['timeout']) {\n\t      this.timeout = setTimeout(function () {\n\t        timedOut()\n\t      }, o['timeout'])\n\t    }\n\t\n\t    if (o['success']) {\n\t      this._successHandler = function () {\n\t        o['success'].apply(o, arguments)\n\t      }\n\t    }\n\t\n\t    if (o['error']) {\n\t      this._errorHandlers.push(function () {\n\t        o['error'].apply(o, arguments)\n\t      })\n\t    }\n\t\n\t    if (o['complete']) {\n\t      this._completeHandlers.push(function () {\n\t        o['complete'].apply(o, arguments)\n\t      })\n\t    }\n\t\n\t    function complete (resp) {\n\t      o['timeout'] && clearTimeout(self.timeout)\n\t      self.timeout = null\n\t      while (self._completeHandlers.length > 0) {\n\t        self._completeHandlers.shift()(resp)\n\t      }\n\t    }\n\t\n\t    function success (resp) {\n\t      var type = o['type'] || resp && setType(resp.getResponseHeader('Content-Type')) // resp can be undefined in IE\n\t      resp = (type !== 'jsonp') ? self.request : resp\n\t      // use global data filter on response text\n\t      var filteredResponse = globalSetupOptions.dataFilter(resp.responseText, type)\n\t        , r = filteredResponse\n\t      try {\n\t        resp.responseText = r\n\t      } catch (e) {\n\t        // can't assign this in IE<=8, just ignore\n\t      }\n\t      if (r) {\n\t        switch (type) {\n\t        case 'json':\n\t          try {\n\t            resp = context.JSON ? context.JSON.parse(r) : eval('(' + r + ')')\n\t          } catch (err) {\n\t            return error(resp, 'Could not parse JSON in response', err)\n\t          }\n\t          break\n\t        case 'js':\n\t          resp = eval(r)\n\t          break\n\t        case 'html':\n\t          resp = r\n\t          break\n\t        case 'xml':\n\t          resp = resp.responseXML\n\t              && resp.responseXML.parseError // IE trololo\n\t              && resp.responseXML.parseError.errorCode\n\t              && resp.responseXML.parseError.reason\n\t            ? null\n\t            : resp.responseXML\n\t          break\n\t        }\n\t      }\n\t\n\t      self._responseArgs.resp = resp\n\t      self._fulfilled = true\n\t      fn(resp)\n\t      self._successHandler(resp)\n\t      while (self._fulfillmentHandlers.length > 0) {\n\t        resp = self._fulfillmentHandlers.shift()(resp)\n\t      }\n\t\n\t      complete(resp)\n\t    }\n\t\n\t    function timedOut() {\n\t      self._timedOut = true\n\t      self.request.abort()\n\t    }\n\t\n\t    function error(resp, msg, t) {\n\t      resp = self.request\n\t      self._responseArgs.resp = resp\n\t      self._responseArgs.msg = msg\n\t      self._responseArgs.t = t\n\t      self._erred = true\n\t      while (self._errorHandlers.length > 0) {\n\t        self._errorHandlers.shift()(resp, msg, t)\n\t      }\n\t      complete(resp)\n\t    }\n\t\n\t    this.request = getRequest.call(this, success, error)\n\t  }\n\t\n\t  Reqwest.prototype = {\n\t    abort: function () {\n\t      this._aborted = true\n\t      this.request.abort()\n\t    }\n\t\n\t  , retry: function () {\n\t      init.call(this, this.o, this.fn)\n\t    }\n\t\n\t    /**\n\t     * Small deviation from the Promises A CommonJs specification\n\t     * http://wiki.commonjs.org/wiki/Promises/A\n\t     */\n\t\n\t    /**\n\t     * `then` will execute upon successful requests\n\t     */\n\t  , then: function (success, fail) {\n\t      success = success || function () {}\n\t      fail = fail || function () {}\n\t      if (this._fulfilled) {\n\t        this._responseArgs.resp = success(this._responseArgs.resp)\n\t      } else if (this._erred) {\n\t        fail(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n\t      } else {\n\t        this._fulfillmentHandlers.push(success)\n\t        this._errorHandlers.push(fail)\n\t      }\n\t      return this\n\t    }\n\t\n\t    /**\n\t     * `always` will execute whether the request succeeds or fails\n\t     */\n\t  , always: function (fn) {\n\t      if (this._fulfilled || this._erred) {\n\t        fn(this._responseArgs.resp)\n\t      } else {\n\t        this._completeHandlers.push(fn)\n\t      }\n\t      return this\n\t    }\n\t\n\t    /**\n\t     * `fail` will execute when the request fails\n\t     */\n\t  , fail: function (fn) {\n\t      if (this._erred) {\n\t        fn(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n\t      } else {\n\t        this._errorHandlers.push(fn)\n\t      }\n\t      return this\n\t    }\n\t  , 'catch': function (fn) {\n\t      return this.fail(fn)\n\t    }\n\t  }\n\t\n\t  function reqwest(o, fn) {\n\t    return new Reqwest(o, fn)\n\t  }\n\t\n\t  // normalize newline variants according to spec -> CRLF\n\t  function normalize(s) {\n\t    return s ? s.replace(/\\r?\\n/g, '\\r\\n') : ''\n\t  }\n\t\n\t  function serial(el, cb) {\n\t    var n = el.name\n\t      , t = el.tagName.toLowerCase()\n\t      , optCb = function (o) {\n\t          // IE gives value=\"\" even where there is no value attribute\n\t          // 'specified' ref: http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-862529273\n\t          if (o && !o['disabled'])\n\t            cb(n, normalize(o['attributes']['value'] && o['attributes']['value']['specified'] ? o['value'] : o['text']))\n\t        }\n\t      , ch, ra, val, i\n\t\n\t    // don't serialize elements that are disabled or without a name\n\t    if (el.disabled || !n) return\n\t\n\t    switch (t) {\n\t    case 'input':\n\t      if (!/reset|button|image|file/i.test(el.type)) {\n\t        ch = /checkbox/i.test(el.type)\n\t        ra = /radio/i.test(el.type)\n\t        val = el.value\n\t        // WebKit gives us \"\" instead of \"on\" if a checkbox has no value, so correct it here\n\t        ;(!(ch || ra) || el.checked) && cb(n, normalize(ch && val === '' ? 'on' : val))\n\t      }\n\t      break\n\t    case 'textarea':\n\t      cb(n, normalize(el.value))\n\t      break\n\t    case 'select':\n\t      if (el.type.toLowerCase() === 'select-one') {\n\t        optCb(el.selectedIndex >= 0 ? el.options[el.selectedIndex] : null)\n\t      } else {\n\t        for (i = 0; el.length && i < el.length; i++) {\n\t          el.options[i].selected && optCb(el.options[i])\n\t        }\n\t      }\n\t      break\n\t    }\n\t  }\n\t\n\t  // collect up all form elements found from the passed argument elements all\n\t  // the way down to child elements; pass a '<form>' or form fields.\n\t  // called with 'this'=callback to use for serial() on each element\n\t  function eachFormElement() {\n\t    var cb = this\n\t      , e, i\n\t      , serializeSubtags = function (e, tags) {\n\t          var i, j, fa\n\t          for (i = 0; i < tags.length; i++) {\n\t            fa = e[byTag](tags[i])\n\t            for (j = 0; j < fa.length; j++) serial(fa[j], cb)\n\t          }\n\t        }\n\t\n\t    for (i = 0; i < arguments.length; i++) {\n\t      e = arguments[i]\n\t      if (/input|select|textarea/i.test(e.tagName)) serial(e, cb)\n\t      serializeSubtags(e, [ 'input', 'select', 'textarea' ])\n\t    }\n\t  }\n\t\n\t  // standard query string style serialization\n\t  function serializeQueryString() {\n\t    return reqwest.toQueryString(reqwest.serializeArray.apply(null, arguments))\n\t  }\n\t\n\t  // { 'name': 'value', ... } style serialization\n\t  function serializeHash() {\n\t    var hash = {}\n\t    eachFormElement.apply(function (name, value) {\n\t      if (name in hash) {\n\t        hash[name] && !isArray(hash[name]) && (hash[name] = [hash[name]])\n\t        hash[name].push(value)\n\t      } else hash[name] = value\n\t    }, arguments)\n\t    return hash\n\t  }\n\t\n\t  // [ { name: 'name', value: 'value' }, ... ] style serialization\n\t  reqwest.serializeArray = function () {\n\t    var arr = []\n\t    eachFormElement.apply(function (name, value) {\n\t      arr.push({name: name, value: value})\n\t    }, arguments)\n\t    return arr\n\t  }\n\t\n\t  reqwest.serialize = function () {\n\t    if (arguments.length === 0) return ''\n\t    var opt, fn\n\t      , args = Array.prototype.slice.call(arguments, 0)\n\t\n\t    opt = args.pop()\n\t    opt && opt.nodeType && args.push(opt) && (opt = null)\n\t    opt && (opt = opt.type)\n\t\n\t    if (opt == 'map') fn = serializeHash\n\t    else if (opt == 'array') fn = reqwest.serializeArray\n\t    else fn = serializeQueryString\n\t\n\t    return fn.apply(null, args)\n\t  }\n\t\n\t  reqwest.toQueryString = function (o, trad) {\n\t    var prefix, i\n\t      , traditional = trad || false\n\t      , s = []\n\t      , enc = encodeURIComponent\n\t      , add = function (key, value) {\n\t          // If value is a function, invoke it and return its value\n\t          value = ('function' === typeof value) ? value() : (value == null ? '' : value)\n\t          s[s.length] = enc(key) + '=' + enc(value)\n\t        }\n\t    // If an array was passed in, assume that it is an array of form elements.\n\t    if (isArray(o)) {\n\t      for (i = 0; o && i < o.length; i++) add(o[i]['name'], o[i]['value'])\n\t    } else {\n\t      // If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t      // did it), otherwise encode params recursively.\n\t      for (prefix in o) {\n\t        if (o.hasOwnProperty(prefix)) buildParams(prefix, o[prefix], traditional, add)\n\t      }\n\t    }\n\t\n\t    // spaces should be + according to spec\n\t    return s.join('&').replace(/%20/g, '+')\n\t  }\n\t\n\t  function buildParams(prefix, obj, traditional, add) {\n\t    var name, i, v\n\t      , rbracket = /\\[\\]$/\n\t\n\t    if (isArray(obj)) {\n\t      // Serialize array item.\n\t      for (i = 0; obj && i < obj.length; i++) {\n\t        v = obj[i]\n\t        if (traditional || rbracket.test(prefix)) {\n\t          // Treat each array item as a scalar.\n\t          add(prefix, v)\n\t        } else {\n\t          buildParams(prefix + '[' + (typeof v === 'object' ? i : '') + ']', v, traditional, add)\n\t        }\n\t      }\n\t    } else if (obj && obj.toString() === '[object Object]') {\n\t      // Serialize object item.\n\t      for (name in obj) {\n\t        buildParams(prefix + '[' + name + ']', obj[name], traditional, add)\n\t      }\n\t\n\t    } else {\n\t      // Serialize scalar item.\n\t      add(prefix, obj)\n\t    }\n\t  }\n\t\n\t  reqwest.getcallbackPrefix = function () {\n\t    return callbackPrefix\n\t  }\n\t\n\t  // jQuery and Zepto compatibility, differences can be remapped here so you can call\n\t  // .ajax.compat(options, callback)\n\t  reqwest.compat = function (o, fn) {\n\t    if (o) {\n\t      o['type'] && (o['method'] = o['type']) && delete o['type']\n\t      o['dataType'] && (o['type'] = o['dataType'])\n\t      o['jsonpCallback'] && (o['jsonpCallbackName'] = o['jsonpCallback']) && delete o['jsonpCallback']\n\t      o['jsonp'] && (o['jsonpCallback'] = o['jsonp'])\n\t    }\n\t    return new Reqwest(o, fn)\n\t  }\n\t\n\t  reqwest.ajaxSetup = function (options) {\n\t    options = options || {}\n\t    for (var k in options) {\n\t      globalSetupOptions[k] = options[k]\n\t    }\n\t  }\n\t\n\t  return reqwest\n\t});\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\r\n\t * GeoJSON helpers for handling data and generating objects\r\n\t */\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _topojson2 = __webpack_require__(45);\n\t\n\tvar topojson = _interopRequireWildcard(_topojson2);\n\t\n\tvar _geojsonMerge = __webpack_require__(46);\n\t\n\tvar _geojsonMerge2 = _interopRequireDefault(_geojsonMerge);\n\t\n\tvar _earcut = __webpack_require__(48);\n\t\n\tvar _earcut2 = _interopRequireDefault(_earcut);\n\t\n\tvar _extrudePolygon = __webpack_require__(49);\n\t\n\tvar _extrudePolygon2 = _interopRequireDefault(_extrudePolygon);\n\t\n\t// TODO: Make it so height can be per-coordinate / point but connected together\n\t// as a linestring (eg. GPS points with an elevation at each point)\n\t//\n\t// This isn't really valid GeoJSON so perhaps something best left to an external\n\t// component for now, until a better approach can be considered\n\t//\n\t// See: http://lists.geojson.org/pipermail/geojson-geojson.org/2009-June/000489.html\n\t\n\t// Light and dark colours used for poor-mans AO gradient on object sides\n\tvar light = new _three2['default'].Color(0xffffff);\n\tvar shadow = new _three2['default'].Color(0x666666);\n\t\n\tvar GeoJSON = (function () {\n\t  var defaultStyle = {\n\t    color: '#ffffff',\n\t    outline: false,\n\t    outlineColor: '#000000',\n\t    transparent: false,\n\t    opacity: 1,\n\t    blending: _three2['default'].NormalBlending,\n\t    height: 0,\n\t    lineOpacity: 1,\n\t    lineTransparent: false,\n\t    lineColor: '#ffffff',\n\t    lineWidth: 1,\n\t    lineBlending: _three2['default'].NormalBlending\n\t  };\n\t\n\t  // Attempts to merge together multiple GeoJSON Features or FeatureCollections\n\t  // into a single FeatureCollection\n\t  var collectFeatures = function collectFeatures(data, _topojson) {\n\t    var collections = [];\n\t\n\t    if (_topojson) {\n\t      // TODO: Allow TopoJSON objects to be overridden as an option\n\t\n\t      // If not overridden, merge all features from all objects\n\t      for (var tk in data.objects) {\n\t        collections.push(topojson.feature(data, data.objects[tk]));\n\t      }\n\t\n\t      return (0, _geojsonMerge2['default'])(collections);\n\t    } else {\n\t      // If root doesn't have a type then let's see if there are features in the\n\t      // next step down\n\t      if (!data.type) {\n\t        // TODO: Allow GeoJSON objects to be overridden as an option\n\t\n\t        // If not overridden, merge all features from all objects\n\t        for (var gk in data) {\n\t          if (!data[gk].type) {\n\t            continue;\n\t          }\n\t\n\t          collections.push(data[gk]);\n\t        }\n\t\n\t        return (0, _geojsonMerge2['default'])(collections);\n\t      } else if (Array.isArray(data)) {\n\t        return (0, _geojsonMerge2['default'])(data);\n\t      } else {\n\t        return data;\n\t      }\n\t    }\n\t  };\n\t\n\t  // TODO: This is only used by GeoJSONTile so either roll it into that or\n\t  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\n\t  var lineStringAttributes = function lineStringAttributes(coordinates, colour, height) {\n\t    var _coords = [];\n\t    var _colours = [];\n\t\n\t    var nextCoord;\n\t\n\t    // Connect coordinate with the next to make a pair\n\t    //\n\t    // LineSegments requires pairs of vertices so repeat the last point if\n\t    // there's an odd number of vertices\n\t    coordinates.forEach(function (coordinate, index) {\n\t      _colours.push([colour.r, colour.g, colour.b]);\n\t      _coords.push([coordinate[0], height, coordinate[1]]);\n\t\n\t      nextCoord = coordinates[index + 1] ? coordinates[index + 1] : coordinate;\n\t\n\t      _colours.push([colour.r, colour.g, colour.b]);\n\t      _coords.push([nextCoord[0], height, nextCoord[1]]);\n\t    });\n\t\n\t    return {\n\t      vertices: _coords,\n\t      colours: _colours\n\t    };\n\t  };\n\t\n\t  // TODO: This is only used by GeoJSONTile so either roll it into that or\n\t  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\n\t  var multiLineStringAttributes = function multiLineStringAttributes(coordinates, colour, height) {\n\t    var _coords = [];\n\t    var _colours = [];\n\t\n\t    var result;\n\t    coordinates.forEach(function (coordinate) {\n\t      result = lineStringAttributes(coordinate, colour, height);\n\t\n\t      result.vertices.forEach(function (coord) {\n\t        _coords.push(coord);\n\t      });\n\t\n\t      result.colours.forEach(function (colour) {\n\t        _colours.push(colour);\n\t      });\n\t    });\n\t\n\t    return {\n\t      vertices: _coords,\n\t      colours: _colours\n\t    };\n\t  };\n\t\n\t  // TODO: This is only used by GeoJSONTile so either roll it into that or\n\t  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\n\t  var polygonAttributes = function polygonAttributes(coordinates, colour, height) {\n\t    var earcutData = _toEarcut(coordinates);\n\t\n\t    var faces = _triangulate(earcutData.vertices, earcutData.holes, earcutData.dimensions);\n\t\n\t    var groupedVertices = [];\n\t    for (i = 0, il = earcutData.vertices.length; i < il; i += earcutData.dimensions) {\n\t      groupedVertices.push(earcutData.vertices.slice(i, i + earcutData.dimensions));\n\t    }\n\t\n\t    var extruded = (0, _extrudePolygon2['default'])(groupedVertices, faces, {\n\t      bottom: 0,\n\t      top: height\n\t    });\n\t\n\t    var topColor = colour.clone().multiply(light);\n\t    var bottomColor = colour.clone().multiply(shadow);\n\t\n\t    var _vertices = extruded.positions;\n\t    var _faces = [];\n\t    var _colours = [];\n\t\n\t    var _colour;\n\t    extruded.top.forEach(function (face, fi) {\n\t      _colour = [];\n\t\n\t      _colour.push([colour.r, colour.g, colour.b]);\n\t      _colour.push([colour.r, colour.g, colour.b]);\n\t      _colour.push([colour.r, colour.g, colour.b]);\n\t\n\t      _faces.push(face);\n\t      _colours.push(_colour);\n\t    });\n\t\n\t    var allFlat = true;\n\t\n\t    if (extruded.sides) {\n\t      if (allFlat) {\n\t        allFlat = false;\n\t      }\n\t\n\t      // Set up colours for every vertex with poor-mans AO on the sides\n\t      extruded.sides.forEach(function (face, fi) {\n\t        _colour = [];\n\t\n\t        // First face is always bottom-bottom-top\n\t        if (fi % 2 === 0) {\n\t          _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\n\t          _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\n\t          _colour.push([topColor.r, topColor.g, topColor.b]);\n\t          // Reverse winding for the second face\n\t          // top-top-bottom\n\t        } else {\n\t            _colour.push([topColor.r, topColor.g, topColor.b]);\n\t            _colour.push([topColor.r, topColor.g, topColor.b]);\n\t            _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\n\t          }\n\t\n\t        _faces.push(face);\n\t        _colours.push(_colour);\n\t      });\n\t    }\n\t\n\t    // Skip bottom as there's no point rendering it\n\t    // allFaces.push(extruded.faces);\n\t\n\t    return {\n\t      vertices: _vertices,\n\t      faces: _faces,\n\t      colours: _colours,\n\t      flat: allFlat\n\t    };\n\t  };\n\t\n\t  // TODO: This is only used by GeoJSONTile so either roll it into that or\n\t  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\n\t  var _toEarcut = function _toEarcut(data) {\n\t    var dim = data[0][0].length;\n\t    var result = { vertices: [], holes: [], dimensions: dim };\n\t    var holeIndex = 0;\n\t\n\t    for (var i = 0; i < data.length; i++) {\n\t      for (var j = 0; j < data[i].length; j++) {\n\t        for (var d = 0; d < dim; d++) {\n\t          result.vertices.push(data[i][j][d]);\n\t        }\n\t      }\n\t      if (i > 0) {\n\t        holeIndex += data[i - 1].length;\n\t        result.holes.push(holeIndex);\n\t      }\n\t    }\n\t\n\t    return result;\n\t  };\n\t\n\t  // TODO: This is only used by GeoJSONTile so either roll it into that or\n\t  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\n\t  var _triangulate = function _triangulate(contour, holes, dim) {\n\t    // console.time('earcut');\n\t\n\t    var faces = (0, _earcut2['default'])(contour, holes, dim);\n\t    var result = [];\n\t\n\t    for (i = 0, il = faces.length; i < il; i += 3) {\n\t      result.push(faces.slice(i, i + 3));\n\t    }\n\t\n\t    // console.timeEnd('earcut');\n\t\n\t    return result;\n\t  };\n\t\n\t  return {\n\t    defaultStyle: defaultStyle,\n\t    collectFeatures: collectFeatures,\n\t    lineStringAttributes: lineStringAttributes,\n\t    multiLineStringAttributes: multiLineStringAttributes,\n\t    polygonAttributes: polygonAttributes\n\t  };\n\t})();\n\t\n\texports['default'] = GeoJSON;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t(function (global, factory) {\n\t   true ? factory(exports) :\n\t  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t  (factory((global.topojson = global.topojson || {})));\n\t}(this, (function (exports) { 'use strict';\n\t\n\tfunction noop() {}\n\t\n\tfunction transformAbsolute(transform) {\n\t  if (!transform) return noop;\n\t  var x0,\n\t      y0,\n\t      kx = transform.scale[0],\n\t      ky = transform.scale[1],\n\t      dx = transform.translate[0],\n\t      dy = transform.translate[1];\n\t  return function(point, i) {\n\t    if (!i) x0 = y0 = 0;\n\t    point[0] = (x0 += point[0]) * kx + dx;\n\t    point[1] = (y0 += point[1]) * ky + dy;\n\t  };\n\t}\n\t\n\tfunction transformRelative(transform) {\n\t  if (!transform) return noop;\n\t  var x0,\n\t      y0,\n\t      kx = transform.scale[0],\n\t      ky = transform.scale[1],\n\t      dx = transform.translate[0],\n\t      dy = transform.translate[1];\n\t  return function(point, i) {\n\t    if (!i) x0 = y0 = 0;\n\t    var x1 = Math.round((point[0] - dx) / kx),\n\t        y1 = Math.round((point[1] - dy) / ky);\n\t    point[0] = x1 - x0;\n\t    point[1] = y1 - y0;\n\t    x0 = x1;\n\t    y0 = y1;\n\t  };\n\t}\n\t\n\tfunction reverse(array, n) {\n\t  var t, j = array.length, i = j - n;\n\t  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n\t}\n\t\n\tfunction bisect(a, x) {\n\t  var lo = 0, hi = a.length;\n\t  while (lo < hi) {\n\t    var mid = lo + hi >>> 1;\n\t    if (a[mid] < x) lo = mid + 1;\n\t    else hi = mid;\n\t  }\n\t  return lo;\n\t}\n\t\n\tfunction feature(topology, o) {\n\t  return o.type === \"GeometryCollection\" ? {\n\t    type: \"FeatureCollection\",\n\t    features: o.geometries.map(function(o) { return feature$1(topology, o); })\n\t  } : feature$1(topology, o);\n\t}\n\t\n\tfunction feature$1(topology, o) {\n\t  var f = {\n\t    type: \"Feature\",\n\t    id: o.id,\n\t    properties: o.properties || {},\n\t    geometry: object(topology, o)\n\t  };\n\t  if (o.id == null) delete f.id;\n\t  return f;\n\t}\n\t\n\tfunction object(topology, o) {\n\t  var absolute = transformAbsolute(topology.transform),\n\t      arcs = topology.arcs;\n\t\n\t  function arc(i, points) {\n\t    if (points.length) points.pop();\n\t    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length, p; k < n; ++k) {\n\t      points.push(p = a[k].slice());\n\t      absolute(p, k);\n\t    }\n\t    if (i < 0) reverse(points, n);\n\t  }\n\t\n\t  function point(p) {\n\t    p = p.slice();\n\t    absolute(p, 0);\n\t    return p;\n\t  }\n\t\n\t  function line(arcs) {\n\t    var points = [];\n\t    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n\t    if (points.length < 2) points.push(points[0].slice());\n\t    return points;\n\t  }\n\t\n\t  function ring(arcs) {\n\t    var points = line(arcs);\n\t    while (points.length < 4) points.push(points[0].slice());\n\t    return points;\n\t  }\n\t\n\t  function polygon(arcs) {\n\t    return arcs.map(ring);\n\t  }\n\t\n\t  function geometry(o) {\n\t    var t = o.type;\n\t    return t === \"GeometryCollection\" ? {type: t, geometries: o.geometries.map(geometry)}\n\t        : t in geometryType ? {type: t, coordinates: geometryType[t](o)}\n\t        : null;\n\t  }\n\t\n\t  var geometryType = {\n\t    Point: function(o) { return point(o.coordinates); },\n\t    MultiPoint: function(o) { return o.coordinates.map(point); },\n\t    LineString: function(o) { return line(o.arcs); },\n\t    MultiLineString: function(o) { return o.arcs.map(line); },\n\t    Polygon: function(o) { return polygon(o.arcs); },\n\t    MultiPolygon: function(o) { return o.arcs.map(polygon); }\n\t  };\n\t\n\t  return geometry(o);\n\t}\n\t\n\tfunction stitchArcs(topology, arcs) {\n\t  var stitchedArcs = {},\n\t      fragmentByStart = {},\n\t      fragmentByEnd = {},\n\t      fragments = [],\n\t      emptyIndex = -1;\n\t\n\t  // Stitch empty arcs first, since they may be subsumed by other arcs.\n\t  arcs.forEach(function(i, j) {\n\t    var arc = topology.arcs[i < 0 ? ~i : i], t;\n\t    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n\t      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n\t    }\n\t  });\n\t\n\t  arcs.forEach(function(i) {\n\t    var e = ends(i),\n\t        start = e[0],\n\t        end = e[1],\n\t        f, g;\n\t\n\t    if (f = fragmentByEnd[start]) {\n\t      delete fragmentByEnd[f.end];\n\t      f.push(i);\n\t      f.end = end;\n\t      if (g = fragmentByStart[end]) {\n\t        delete fragmentByStart[g.start];\n\t        var fg = g === f ? f : f.concat(g);\n\t        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n\t      } else {\n\t        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n\t      }\n\t    } else if (f = fragmentByStart[end]) {\n\t      delete fragmentByStart[f.start];\n\t      f.unshift(i);\n\t      f.start = start;\n\t      if (g = fragmentByEnd[start]) {\n\t        delete fragmentByEnd[g.end];\n\t        var gf = g === f ? f : g.concat(f);\n\t        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n\t      } else {\n\t        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n\t      }\n\t    } else {\n\t      f = [i];\n\t      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n\t    }\n\t  });\n\t\n\t  function ends(i) {\n\t    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n\t    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n\t    else p1 = arc[arc.length - 1];\n\t    return i < 0 ? [p1, p0] : [p0, p1];\n\t  }\n\t\n\t  function flush(fragmentByEnd, fragmentByStart) {\n\t    for (var k in fragmentByEnd) {\n\t      var f = fragmentByEnd[k];\n\t      delete fragmentByStart[f.start];\n\t      delete f.start;\n\t      delete f.end;\n\t      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n\t      fragments.push(f);\n\t    }\n\t  }\n\t\n\t  flush(fragmentByEnd, fragmentByStart);\n\t  flush(fragmentByStart, fragmentByEnd);\n\t  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\t\n\t  return fragments;\n\t}\n\t\n\tfunction mesh(topology) {\n\t  return object(topology, meshArcs.apply(this, arguments));\n\t}\n\t\n\tfunction meshArcs(topology, o, filter) {\n\t  var arcs = [];\n\t\n\t  function arc(i) {\n\t    var j = i < 0 ? ~i : i;\n\t    (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n\t  }\n\t\n\t  function line(arcs) {\n\t    arcs.forEach(arc);\n\t  }\n\t\n\t  function polygon(arcs) {\n\t    arcs.forEach(line);\n\t  }\n\t\n\t  function geometry(o) {\n\t    if (o.type === \"GeometryCollection\") o.geometries.forEach(geometry);\n\t    else if (o.type in geometryType) geom = o, geometryType[o.type](o.arcs);\n\t  }\n\t\n\t  if (arguments.length > 1) {\n\t    var geomsByArc = [],\n\t        geom;\n\t\n\t    var geometryType = {\n\t      LineString: line,\n\t      MultiLineString: polygon,\n\t      Polygon: polygon,\n\t      MultiPolygon: function(arcs) { arcs.forEach(polygon); }\n\t    };\n\t\n\t    geometry(o);\n\t\n\t    geomsByArc.forEach(arguments.length < 3\n\t        ? function(geoms) { arcs.push(geoms[0].i); }\n\t        : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n\t  } else {\n\t    for (var i = 0, n = topology.arcs.length; i < n; ++i) arcs.push(i);\n\t  }\n\t\n\t  return {type: \"MultiLineString\", arcs: stitchArcs(topology, arcs)};\n\t}\n\t\n\tfunction cartesianTriangleArea(triangle) {\n\t  var a = triangle[0], b = triangle[1], c = triangle[2];\n\t  return Math.abs((a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]));\n\t}\n\t\n\tfunction ring(ring) {\n\t  var i = -1,\n\t      n = ring.length,\n\t      a,\n\t      b = ring[n - 1],\n\t      area = 0;\n\t\n\t  while (++i < n) {\n\t    a = b;\n\t    b = ring[i];\n\t    area += a[0] * b[1] - a[1] * b[0];\n\t  }\n\t\n\t  return area / 2;\n\t}\n\t\n\tfunction merge(topology) {\n\t  return object(topology, mergeArcs.apply(this, arguments));\n\t}\n\t\n\tfunction mergeArcs(topology, objects) {\n\t  var polygonsByArc = {},\n\t      polygons = [],\n\t      components = [];\n\t\n\t  objects.forEach(function(o) {\n\t    if (o.type === \"Polygon\") register(o.arcs);\n\t    else if (o.type === \"MultiPolygon\") o.arcs.forEach(register);\n\t  });\n\t\n\t  function register(polygon) {\n\t    polygon.forEach(function(ring$$) {\n\t      ring$$.forEach(function(arc) {\n\t        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n\t      });\n\t    });\n\t    polygons.push(polygon);\n\t  }\n\t\n\t  function area(ring$$) {\n\t    return Math.abs(ring(object(topology, {type: \"Polygon\", arcs: [ring$$]}).coordinates[0]));\n\t  }\n\t\n\t  polygons.forEach(function(polygon) {\n\t    if (!polygon._) {\n\t      var component = [],\n\t          neighbors = [polygon];\n\t      polygon._ = 1;\n\t      components.push(component);\n\t      while (polygon = neighbors.pop()) {\n\t        component.push(polygon);\n\t        polygon.forEach(function(ring$$) {\n\t          ring$$.forEach(function(arc) {\n\t            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n\t              if (!polygon._) {\n\t                polygon._ = 1;\n\t                neighbors.push(polygon);\n\t              }\n\t            });\n\t          });\n\t        });\n\t      }\n\t    }\n\t  });\n\t\n\t  polygons.forEach(function(polygon) {\n\t    delete polygon._;\n\t  });\n\t\n\t  return {\n\t    type: \"MultiPolygon\",\n\t    arcs: components.map(function(polygons) {\n\t      var arcs = [], n;\n\t\n\t      // Extract the exterior (unique) arcs.\n\t      polygons.forEach(function(polygon) {\n\t        polygon.forEach(function(ring$$) {\n\t          ring$$.forEach(function(arc) {\n\t            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n\t              arcs.push(arc);\n\t            }\n\t          });\n\t        });\n\t      });\n\t\n\t      // Stitch the arcs into one or more rings.\n\t      arcs = stitchArcs(topology, arcs);\n\t\n\t      // If more than one ring is returned,\n\t      // at most one of these rings can be the exterior;\n\t      // choose the one with the greatest absolute area.\n\t      if ((n = arcs.length) > 1) {\n\t        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n\t          if ((ki = area(arcs[i])) > k) {\n\t            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n\t          }\n\t        }\n\t      }\n\t\n\t      return arcs;\n\t    })\n\t  };\n\t}\n\t\n\tfunction neighbors(objects) {\n\t  var indexesByArc = {}, // arc index -> array of object indexes\n\t      neighbors = objects.map(function() { return []; });\n\t\n\t  function line(arcs, i) {\n\t    arcs.forEach(function(a) {\n\t      if (a < 0) a = ~a;\n\t      var o = indexesByArc[a];\n\t      if (o) o.push(i);\n\t      else indexesByArc[a] = [i];\n\t    });\n\t  }\n\t\n\t  function polygon(arcs, i) {\n\t    arcs.forEach(function(arc) { line(arc, i); });\n\t  }\n\t\n\t  function geometry(o, i) {\n\t    if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n\t    else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n\t  }\n\t\n\t  var geometryType = {\n\t    LineString: line,\n\t    MultiLineString: polygon,\n\t    Polygon: polygon,\n\t    MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n\t  };\n\t\n\t  objects.forEach(geometry);\n\t\n\t  for (var i in indexesByArc) {\n\t    for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n\t      for (var k = j + 1; k < m; ++k) {\n\t        var ij = indexes[j], ik = indexes[k], n;\n\t        if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n\t        if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n\t      }\n\t    }\n\t  }\n\t\n\t  return neighbors;\n\t}\n\t\n\tfunction compareArea(a, b) {\n\t  return a[1][2] - b[1][2];\n\t}\n\t\n\tfunction minAreaHeap() {\n\t  var heap = {},\n\t      array = [],\n\t      size = 0;\n\t\n\t  heap.push = function(object) {\n\t    up(array[object._ = size] = object, size++);\n\t    return size;\n\t  };\n\t\n\t  heap.pop = function() {\n\t    if (size <= 0) return;\n\t    var removed = array[0], object;\n\t    if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n\t    return removed;\n\t  };\n\t\n\t  heap.remove = function(removed) {\n\t    var i = removed._, object;\n\t    if (array[i] !== removed) return; // invalid request\n\t    if (i !== --size) object = array[size], (compareArea(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n\t    return i;\n\t  };\n\t\n\t  function up(object, i) {\n\t    while (i > 0) {\n\t      var j = ((i + 1) >> 1) - 1,\n\t          parent = array[j];\n\t      if (compareArea(object, parent) >= 0) break;\n\t      array[parent._ = i] = parent;\n\t      array[object._ = i = j] = object;\n\t    }\n\t  }\n\t\n\t  function down(object, i) {\n\t    while (true) {\n\t      var r = (i + 1) << 1,\n\t          l = r - 1,\n\t          j = i,\n\t          child = array[j];\n\t      if (l < size && compareArea(array[l], child) < 0) child = array[j = l];\n\t      if (r < size && compareArea(array[r], child) < 0) child = array[j = r];\n\t      if (j === i) break;\n\t      array[child._ = i] = child;\n\t      array[object._ = i = j] = object;\n\t    }\n\t  }\n\t\n\t  return heap;\n\t}\n\t\n\tfunction presimplify(topology, triangleArea) {\n\t  var absolute = transformAbsolute(topology.transform),\n\t      relative = transformRelative(topology.transform),\n\t      heap = minAreaHeap();\n\t\n\t  if (!triangleArea) triangleArea = cartesianTriangleArea;\n\t\n\t  topology.arcs.forEach(function(arc) {\n\t    var triangles = [],\n\t        maxArea = 0,\n\t        triangle,\n\t        i,\n\t        n,\n\t        p;\n\t\n\t    // To store each point’s effective area, we create a new array rather than\n\t    // extending the passed-in point to workaround a Chrome/V8 bug (getting\n\t    // stuck in smi mode). For midpoints, the initial effective area of\n\t    // Infinity will be computed in the next step.\n\t    for (i = 0, n = arc.length; i < n; ++i) {\n\t      p = arc[i];\n\t      absolute(arc[i] = [p[0], p[1], Infinity], i);\n\t    }\n\t\n\t    for (i = 1, n = arc.length - 1; i < n; ++i) {\n\t      triangle = arc.slice(i - 1, i + 2);\n\t      triangle[1][2] = triangleArea(triangle);\n\t      triangles.push(triangle);\n\t      heap.push(triangle);\n\t    }\n\t\n\t    for (i = 0, n = triangles.length; i < n; ++i) {\n\t      triangle = triangles[i];\n\t      triangle.previous = triangles[i - 1];\n\t      triangle.next = triangles[i + 1];\n\t    }\n\t\n\t    while (triangle = heap.pop()) {\n\t      var previous = triangle.previous,\n\t          next = triangle.next;\n\t\n\t      // If the area of the current point is less than that of the previous point\n\t      // to be eliminated, use the latter's area instead. This ensures that the\n\t      // current point cannot be eliminated without eliminating previously-\n\t      // eliminated points.\n\t      if (triangle[1][2] < maxArea) triangle[1][2] = maxArea;\n\t      else maxArea = triangle[1][2];\n\t\n\t      if (previous) {\n\t        previous.next = next;\n\t        previous[2] = triangle[2];\n\t        update(previous);\n\t      }\n\t\n\t      if (next) {\n\t        next.previous = previous;\n\t        next[0] = triangle[0];\n\t        update(next);\n\t      }\n\t    }\n\t\n\t    arc.forEach(relative);\n\t  });\n\t\n\t  function update(triangle) {\n\t    heap.remove(triangle);\n\t    triangle[1][2] = triangleArea(triangle);\n\t    heap.push(triangle);\n\t  }\n\t\n\t  return topology;\n\t}\n\t\n\tvar version = \"1.6.27\";\n\t\n\texports.version = version;\n\texports.mesh = mesh;\n\texports.meshArcs = meshArcs;\n\texports.merge = merge;\n\texports.mergeArcs = mergeArcs;\n\texports.feature = feature;\n\texports.neighbors = neighbors;\n\texports.presimplify = presimplify;\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\t})));\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar normalize = __webpack_require__(47);\n\t\n\tmodule.exports = function(inputs) {\n\t    return {\n\t        type: 'FeatureCollection',\n\t        features: inputs.reduce(function(memo, input) {\n\t            return memo.concat(normalize(input).features);\n\t        }, [])\n\t    };\n\t};\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = normalize;\n\t\n\tvar types = {\n\t    Point: 'geometry',\n\t    MultiPoint: 'geometry',\n\t    LineString: 'geometry',\n\t    MultiLineString: 'geometry',\n\t    Polygon: 'geometry',\n\t    MultiPolygon: 'geometry',\n\t    GeometryCollection: 'geometry',\n\t    Feature: 'feature',\n\t    FeatureCollection: 'featurecollection'\n\t};\n\t\n\t/**\n\t * Normalize a GeoJSON feature into a FeatureCollection.\n\t *\n\t * @param {object} gj geojson data\n\t * @returns {object} normalized geojson data\n\t */\n\tfunction normalize(gj) {\n\t    if (!gj || !gj.type) return null;\n\t    var type = types[gj.type];\n\t    if (!type) return null;\n\t\n\t    if (type === 'geometry') {\n\t        return {\n\t            type: 'FeatureCollection',\n\t            features: [{\n\t                type: 'Feature',\n\t                properties: {},\n\t                geometry: gj\n\t            }]\n\t        };\n\t    } else if (type === 'feature') {\n\t        return {\n\t            type: 'FeatureCollection',\n\t            features: [gj]\n\t        };\n\t    } else if (type === 'featurecollection') {\n\t        return gj;\n\t    }\n\t}\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = earcut;\n\tmodule.exports.default = earcut;\n\t\n\tfunction earcut(data, holeIndices, dim) {\n\t\n\t    dim = dim || 2;\n\t\n\t    var hasHoles = holeIndices && holeIndices.length,\n\t        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n\t        outerNode = linkedList(data, 0, outerLen, dim, true),\n\t        triangles = [];\n\t\n\t    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\t\n\t    var minX, minY, maxX, maxY, x, y, invSize;\n\t\n\t    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\t\n\t    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t    if (data.length > 80 * dim) {\n\t        minX = maxX = data[0];\n\t        minY = maxY = data[1];\n\t\n\t        for (var i = dim; i < outerLen; i += dim) {\n\t            x = data[i];\n\t            y = data[i + 1];\n\t            if (x < minX) minX = x;\n\t            if (y < minY) minY = y;\n\t            if (x > maxX) maxX = x;\n\t            if (y > maxY) maxY = y;\n\t        }\n\t\n\t        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t        invSize = Math.max(maxX - minX, maxY - minY);\n\t        invSize = invSize !== 0 ? 1 / invSize : 0;\n\t    }\n\t\n\t    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\t\n\t    return triangles;\n\t}\n\t\n\t// create a circular doubly linked list from polygon points in the specified winding order\n\tfunction linkedList(data, start, end, dim, clockwise) {\n\t    var i, last;\n\t\n\t    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n\t        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n\t    } else {\n\t        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n\t    }\n\t\n\t    if (last && equals(last, last.next)) {\n\t        removeNode(last);\n\t        last = last.next;\n\t    }\n\t\n\t    return last;\n\t}\n\t\n\t// eliminate colinear or duplicate points\n\tfunction filterPoints(start, end) {\n\t    if (!start) return start;\n\t    if (!end) end = start;\n\t\n\t    var p = start,\n\t        again;\n\t    do {\n\t        again = false;\n\t\n\t        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n\t            removeNode(p);\n\t            p = end = p.prev;\n\t            if (p === p.next) break;\n\t            again = true;\n\t\n\t        } else {\n\t            p = p.next;\n\t        }\n\t    } while (again || p !== end);\n\t\n\t    return end;\n\t}\n\t\n\t// main ear slicing loop which triangulates a polygon (given as a linked list)\n\tfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n\t    if (!ear) return;\n\t\n\t    // interlink polygon nodes in z-order\n\t    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\t\n\t    var stop = ear,\n\t        prev, next;\n\t\n\t    // iterate through ears, slicing them one by one\n\t    while (ear.prev !== ear.next) {\n\t        prev = ear.prev;\n\t        next = ear.next;\n\t\n\t        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n\t            // cut off the triangle\n\t            triangles.push(prev.i / dim);\n\t            triangles.push(ear.i / dim);\n\t            triangles.push(next.i / dim);\n\t\n\t            removeNode(ear);\n\t\n\t            // skipping the next vertex leads to less sliver triangles\n\t            ear = next.next;\n\t            stop = next.next;\n\t\n\t            continue;\n\t        }\n\t\n\t        ear = next;\n\t\n\t        // if we looped through the whole remaining polygon and can't find any more ears\n\t        if (ear === stop) {\n\t            // try filtering points and slicing again\n\t            if (!pass) {\n\t                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\t\n\t            // if this didn't work, try curing all small self-intersections locally\n\t            } else if (pass === 1) {\n\t                ear = cureLocalIntersections(ear, triangles, dim);\n\t                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\t\n\t            // as a last resort, try splitting the remaining polygon into two\n\t            } else if (pass === 2) {\n\t                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n\t            }\n\t\n\t            break;\n\t        }\n\t    }\n\t}\n\t\n\t// check whether a polygon node forms a valid ear with adjacent nodes\n\tfunction isEar(ear) {\n\t    var a = ear.prev,\n\t        b = ear,\n\t        c = ear.next;\n\t\n\t    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\t\n\t    // now make sure we don't have other points inside the potential ear\n\t    var p = ear.next.next;\n\t\n\t    while (p !== ear.prev) {\n\t        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n\t            area(p.prev, p, p.next) >= 0) return false;\n\t        p = p.next;\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction isEarHashed(ear, minX, minY, invSize) {\n\t    var a = ear.prev,\n\t        b = ear,\n\t        c = ear.next;\n\t\n\t    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\t\n\t    // triangle bbox; min & max are calculated like this for speed\n\t    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n\t        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n\t        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n\t        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\t\n\t    // z-order range for the current triangle bbox;\n\t    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n\t        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\t\n\t    var p = ear.prevZ,\n\t        n = ear.nextZ;\n\t\n\t    // look for points inside the triangle in both directions\n\t    while (p && p.z >= minZ && n && n.z <= maxZ) {\n\t        if (p !== ear.prev && p !== ear.next &&\n\t            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n\t            area(p.prev, p, p.next) >= 0) return false;\n\t        p = p.prevZ;\n\t\n\t        if (n !== ear.prev && n !== ear.next &&\n\t            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n\t            area(n.prev, n, n.next) >= 0) return false;\n\t        n = n.nextZ;\n\t    }\n\t\n\t    // look for remaining points in decreasing z-order\n\t    while (p && p.z >= minZ) {\n\t        if (p !== ear.prev && p !== ear.next &&\n\t            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n\t            area(p.prev, p, p.next) >= 0) return false;\n\t        p = p.prevZ;\n\t    }\n\t\n\t    // look for remaining points in increasing z-order\n\t    while (n && n.z <= maxZ) {\n\t        if (n !== ear.prev && n !== ear.next &&\n\t            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n\t            area(n.prev, n, n.next) >= 0) return false;\n\t        n = n.nextZ;\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\t// go through all polygon nodes and cure small local self-intersections\n\tfunction cureLocalIntersections(start, triangles, dim) {\n\t    var p = start;\n\t    do {\n\t        var a = p.prev,\n\t            b = p.next.next;\n\t\n\t        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\t\n\t            triangles.push(a.i / dim);\n\t            triangles.push(p.i / dim);\n\t            triangles.push(b.i / dim);\n\t\n\t            // remove two nodes involved\n\t            removeNode(p);\n\t            removeNode(p.next);\n\t\n\t            p = start = b;\n\t        }\n\t        p = p.next;\n\t    } while (p !== start);\n\t\n\t    return p;\n\t}\n\t\n\t// try splitting polygon into two and triangulate them independently\n\tfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n\t    // look for a valid diagonal that divides the polygon into two\n\t    var a = start;\n\t    do {\n\t        var b = a.next.next;\n\t        while (b !== a.prev) {\n\t            if (a.i !== b.i && isValidDiagonal(a, b)) {\n\t                // split the polygon in two by the diagonal\n\t                var c = splitPolygon(a, b);\n\t\n\t                // filter colinear points around the cuts\n\t                a = filterPoints(a, a.next);\n\t                c = filterPoints(c, c.next);\n\t\n\t                // run earcut on each half\n\t                earcutLinked(a, triangles, dim, minX, minY, invSize);\n\t                earcutLinked(c, triangles, dim, minX, minY, invSize);\n\t                return;\n\t            }\n\t            b = b.next;\n\t        }\n\t        a = a.next;\n\t    } while (a !== start);\n\t}\n\t\n\t// link every hole into the outer loop, producing a single-ring polygon without holes\n\tfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n\t    var queue = [],\n\t        i, len, start, end, list;\n\t\n\t    for (i = 0, len = holeIndices.length; i < len; i++) {\n\t        start = holeIndices[i] * dim;\n\t        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n\t        list = linkedList(data, start, end, dim, false);\n\t        if (list === list.next) list.steiner = true;\n\t        queue.push(getLeftmost(list));\n\t    }\n\t\n\t    queue.sort(compareX);\n\t\n\t    // process holes from left to right\n\t    for (i = 0; i < queue.length; i++) {\n\t        eliminateHole(queue[i], outerNode);\n\t        outerNode = filterPoints(outerNode, outerNode.next);\n\t    }\n\t\n\t    return outerNode;\n\t}\n\t\n\tfunction compareX(a, b) {\n\t    return a.x - b.x;\n\t}\n\t\n\t// find a bridge between vertices that connects hole with an outer ring and and link it\n\tfunction eliminateHole(hole, outerNode) {\n\t    outerNode = findHoleBridge(hole, outerNode);\n\t    if (outerNode) {\n\t        var b = splitPolygon(outerNode, hole);\n\t        filterPoints(b, b.next);\n\t    }\n\t}\n\t\n\t// David Eberly's algorithm for finding a bridge between hole and outer polygon\n\tfunction findHoleBridge(hole, outerNode) {\n\t    var p = outerNode,\n\t        hx = hole.x,\n\t        hy = hole.y,\n\t        qx = -Infinity,\n\t        m;\n\t\n\t    // find a segment intersected by a ray from the hole's leftmost point to the left;\n\t    // segment's endpoint with lesser x will be potential connection point\n\t    do {\n\t        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n\t            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n\t            if (x <= hx && x > qx) {\n\t                qx = x;\n\t                if (x === hx) {\n\t                    if (hy === p.y) return p;\n\t                    if (hy === p.next.y) return p.next;\n\t                }\n\t                m = p.x < p.next.x ? p : p.next;\n\t            }\n\t        }\n\t        p = p.next;\n\t    } while (p !== outerNode);\n\t\n\t    if (!m) return null;\n\t\n\t    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\t\n\t    // look for points inside the triangle of hole point, segment intersection and endpoint;\n\t    // if there are no points found, we have a valid connection;\n\t    // otherwise choose the point of the minimum angle with the ray as connection point\n\t\n\t    var stop = m,\n\t        mx = m.x,\n\t        my = m.y,\n\t        tanMin = Infinity,\n\t        tan;\n\t\n\t    p = m.next;\n\t\n\t    while (p !== stop) {\n\t        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n\t                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\t\n\t            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\t\n\t            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n\t                m = p;\n\t                tanMin = tan;\n\t            }\n\t        }\n\t\n\t        p = p.next;\n\t    }\n\t\n\t    return m;\n\t}\n\t\n\t// interlink polygon nodes in z-order\n\tfunction indexCurve(start, minX, minY, invSize) {\n\t    var p = start;\n\t    do {\n\t        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n\t        p.prevZ = p.prev;\n\t        p.nextZ = p.next;\n\t        p = p.next;\n\t    } while (p !== start);\n\t\n\t    p.prevZ.nextZ = null;\n\t    p.prevZ = null;\n\t\n\t    sortLinked(p);\n\t}\n\t\n\t// Simon Tatham's linked list merge sort algorithm\n\t// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n\tfunction sortLinked(list) {\n\t    var i, p, q, e, tail, numMerges, pSize, qSize,\n\t        inSize = 1;\n\t\n\t    do {\n\t        p = list;\n\t        list = null;\n\t        tail = null;\n\t        numMerges = 0;\n\t\n\t        while (p) {\n\t            numMerges++;\n\t            q = p;\n\t            pSize = 0;\n\t            for (i = 0; i < inSize; i++) {\n\t                pSize++;\n\t                q = q.nextZ;\n\t                if (!q) break;\n\t            }\n\t            qSize = inSize;\n\t\n\t            while (pSize > 0 || (qSize > 0 && q)) {\n\t\n\t                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n\t                    e = p;\n\t                    p = p.nextZ;\n\t                    pSize--;\n\t                } else {\n\t                    e = q;\n\t                    q = q.nextZ;\n\t                    qSize--;\n\t                }\n\t\n\t                if (tail) tail.nextZ = e;\n\t                else list = e;\n\t\n\t                e.prevZ = tail;\n\t                tail = e;\n\t            }\n\t\n\t            p = q;\n\t        }\n\t\n\t        tail.nextZ = null;\n\t        inSize *= 2;\n\t\n\t    } while (numMerges > 1);\n\t\n\t    return list;\n\t}\n\t\n\t// z-order of a point given coords and inverse of the longer side of data bbox\n\tfunction zOrder(x, y, minX, minY, invSize) {\n\t    // coords are transformed into non-negative 15-bit integer range\n\t    x = 32767 * (x - minX) * invSize;\n\t    y = 32767 * (y - minY) * invSize;\n\t\n\t    x = (x | (x << 8)) & 0x00FF00FF;\n\t    x = (x | (x << 4)) & 0x0F0F0F0F;\n\t    x = (x | (x << 2)) & 0x33333333;\n\t    x = (x | (x << 1)) & 0x55555555;\n\t\n\t    y = (y | (y << 8)) & 0x00FF00FF;\n\t    y = (y | (y << 4)) & 0x0F0F0F0F;\n\t    y = (y | (y << 2)) & 0x33333333;\n\t    y = (y | (y << 1)) & 0x55555555;\n\t\n\t    return x | (y << 1);\n\t}\n\t\n\t// find the leftmost node of a polygon ring\n\tfunction getLeftmost(start) {\n\t    var p = start,\n\t        leftmost = start;\n\t    do {\n\t        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n\t        p = p.next;\n\t    } while (p !== start);\n\t\n\t    return leftmost;\n\t}\n\t\n\t// check if a point lies within a convex triangle\n\tfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n\t    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n\t           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n\t           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n\t}\n\t\n\t// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\n\tfunction isValidDiagonal(a, b) {\n\t    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n\t           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n\t}\n\t\n\t// signed area of a triangle\n\tfunction area(p, q, r) {\n\t    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n\t}\n\t\n\t// check if two points are equal\n\tfunction equals(p1, p2) {\n\t    return p1.x === p2.x && p1.y === p2.y;\n\t}\n\t\n\t// check if two segments intersect\n\tfunction intersects(p1, q1, p2, q2) {\n\t    if ((equals(p1, q1) && equals(p2, q2)) ||\n\t        (equals(p1, q2) && equals(p2, q1))) return true;\n\t    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n\t           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n\t}\n\t\n\t// check if a polygon diagonal intersects any polygon segments\n\tfunction intersectsPolygon(a, b) {\n\t    var p = a;\n\t    do {\n\t        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t                intersects(p, p.next, a, b)) return true;\n\t        p = p.next;\n\t    } while (p !== a);\n\t\n\t    return false;\n\t}\n\t\n\t// check if a polygon diagonal is locally inside the polygon\n\tfunction locallyInside(a, b) {\n\t    return area(a.prev, a, a.next) < 0 ?\n\t        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n\t        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n\t}\n\t\n\t// check if the middle point of a polygon diagonal is inside the polygon\n\tfunction middleInside(a, b) {\n\t    var p = a,\n\t        inside = false,\n\t        px = (a.x + b.x) / 2,\n\t        py = (a.y + b.y) / 2;\n\t    do {\n\t        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n\t                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n\t            inside = !inside;\n\t        p = p.next;\n\t    } while (p !== a);\n\t\n\t    return inside;\n\t}\n\t\n\t// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n\t// if one belongs to the outer ring and another to a hole, it merges it into a single ring\n\tfunction splitPolygon(a, b) {\n\t    var a2 = new Node(a.i, a.x, a.y),\n\t        b2 = new Node(b.i, b.x, b.y),\n\t        an = a.next,\n\t        bp = b.prev;\n\t\n\t    a.next = b;\n\t    b.prev = a;\n\t\n\t    a2.next = an;\n\t    an.prev = a2;\n\t\n\t    b2.next = a2;\n\t    a2.prev = b2;\n\t\n\t    bp.next = b2;\n\t    b2.prev = bp;\n\t\n\t    return b2;\n\t}\n\t\n\t// create a node and optionally link it with previous one (in a circular doubly linked list)\n\tfunction insertNode(i, x, y, last) {\n\t    var p = new Node(i, x, y);\n\t\n\t    if (!last) {\n\t        p.prev = p;\n\t        p.next = p;\n\t\n\t    } else {\n\t        p.next = last.next;\n\t        p.prev = last;\n\t        last.next.prev = p;\n\t        last.next = p;\n\t    }\n\t    return p;\n\t}\n\t\n\tfunction removeNode(p) {\n\t    p.next.prev = p.prev;\n\t    p.prev.next = p.next;\n\t\n\t    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n\t    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n\t}\n\t\n\tfunction Node(i, x, y) {\n\t    // vertex index in coordinates array\n\t    this.i = i;\n\t\n\t    // vertex coordinates\n\t    this.x = x;\n\t    this.y = y;\n\t\n\t    // previous and next vertex nodes in a polygon ring\n\t    this.prev = null;\n\t    this.next = null;\n\t\n\t    // z-order curve value\n\t    this.z = null;\n\t\n\t    // previous and next nodes in z-order\n\t    this.prevZ = null;\n\t    this.nextZ = null;\n\t\n\t    // indicates whether this is a steiner point\n\t    this.steiner = false;\n\t}\n\t\n\t// return a percentage difference between the polygon area and its triangulation area;\n\t// used to verify correctness of triangulation\n\tearcut.deviation = function (data, holeIndices, dim, triangles) {\n\t    var hasHoles = holeIndices && holeIndices.length;\n\t    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\t\n\t    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n\t    if (hasHoles) {\n\t        for (var i = 0, len = holeIndices.length; i < len; i++) {\n\t            var start = holeIndices[i] * dim;\n\t            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n\t            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n\t        }\n\t    }\n\t\n\t    var trianglesArea = 0;\n\t    for (i = 0; i < triangles.length; i += 3) {\n\t        var a = triangles[i] * dim;\n\t        var b = triangles[i + 1] * dim;\n\t        var c = triangles[i + 2] * dim;\n\t        trianglesArea += Math.abs(\n\t            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n\t            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n\t    }\n\t\n\t    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n\t        Math.abs((trianglesArea - polygonArea) / polygonArea);\n\t};\n\t\n\tfunction signedArea(data, start, end, dim) {\n\t    var sum = 0;\n\t    for (var i = start, j = end - dim; i < end; i += dim) {\n\t        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n\t        j = i;\n\t    }\n\t    return sum;\n\t}\n\t\n\t// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\n\tearcut.flatten = function (data) {\n\t    var dim = data[0][0].length,\n\t        result = {vertices: [], holes: [], dimensions: dim},\n\t        holeIndex = 0;\n\t\n\t    for (var i = 0; i < data.length; i++) {\n\t        for (var j = 0; j < data[i].length; j++) {\n\t            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n\t        }\n\t        if (i > 0) {\n\t            holeIndex += data[i - 1].length;\n\t            result.holes.push(holeIndex);\n\t        }\n\t    }\n\t    return result;\n\t};\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\r\n\t * Extrude a polygon given its vertices and triangulated faces\r\n\t *\r\n\t * Based on:\r\n\t * https://github.com/freeman-lab/extrude\r\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar extrudePolygon = function extrudePolygon(points, faces, _options) {\n\t  var defaults = {\n\t    top: 1,\n\t    bottom: 0,\n\t    closed: true\n\t  };\n\t\n\t  var options = (0, _lodashAssign2['default'])({}, defaults, _options);\n\t\n\t  var n = points.length;\n\t  var positions;\n\t  var cells;\n\t  var topCells;\n\t  var bottomCells;\n\t  var sideCells;\n\t\n\t  // If bottom and top values are identical then return the flat shape\n\t  options.top === options.bottom ? flat() : full();\n\t\n\t  function flat() {\n\t    positions = points.map(function (p) {\n\t      return [p[0], options.top, p[1]];\n\t    });\n\t    cells = faces;\n\t    topCells = faces;\n\t  }\n\t\n\t  function full() {\n\t    positions = [];\n\t    points.forEach(function (p) {\n\t      positions.push([p[0], options.top, p[1]]);\n\t    });\n\t    points.forEach(function (p) {\n\t      positions.push([p[0], options.bottom, p[1]]);\n\t    });\n\t\n\t    cells = [];\n\t    for (var i = 0; i < n; i++) {\n\t      if (i === n - 1) {\n\t        cells.push([i + n, n, i]);\n\t        cells.push([0, i, n]);\n\t      } else {\n\t        cells.push([i + n, i + n + 1, i]);\n\t        cells.push([i + 1, i, i + n + 1]);\n\t      }\n\t    }\n\t\n\t    sideCells = [].concat(cells);\n\t\n\t    if (options.closed) {\n\t      var top = faces;\n\t      var bottom = top.map(function (p) {\n\t        return p.map(function (v) {\n\t          return v + n;\n\t        });\n\t      });\n\t      bottom = bottom.map(function (p) {\n\t        return [p[0], p[2], p[1]];\n\t      });\n\t      cells = cells.concat(top).concat(bottom);\n\t\n\t      topCells = top;\n\t      bottomCells = bottom;\n\t    }\n\t  }\n\t\n\t  return {\n\t    positions: positions,\n\t    faces: cells,\n\t    top: topCells,\n\t    bottom: bottomCells,\n\t    sides: sideCells\n\t  };\n\t};\n\t\n\texports['default'] = extrudePolygon;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\r\n\t * BufferGeometry helpers\r\n\t */\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _textEncoding = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"text-encoding\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\n\tvar Buffer = (function () {\n\t  // Merge TypedArrays of the same type\n\t  // Returns merged array as well as indexes for splitting the array\n\t  var mergeFloat32Arrays = function mergeFloat32Arrays(arrays) {\n\t    var size = 0;\n\t    var map = new Int32Array(arrays.length * 2);\n\t\n\t    var lastIndex = 0;\n\t    var length;\n\t\n\t    // Find size of each array\n\t    arrays.forEach(function (_array, index) {\n\t      length = _array.length;\n\t      size += length;\n\t      map.set([lastIndex, lastIndex + length], index * 2);\n\t      lastIndex += length;\n\t    });\n\t\n\t    // Create a new array of total size\n\t    var mergedArray = new Float32Array(size);\n\t\n\t    // Add each array to the new array\n\t    arrays.forEach(function (_array, index) {\n\t      mergedArray.set(_array, map[index * 2]);\n\t    });\n\t\n\t    return [mergedArray, map];\n\t  };\n\t\n\t  var splitFloat32Array = function splitFloat32Array(data) {\n\t    var arr = data[0];\n\t    var map = data[1];\n\t\n\t    var start;\n\t    var arrays = [];\n\t\n\t    // Iterate over map\n\t    for (var i = 0; i < map.length / 2; i++) {\n\t      start = i * 2;\n\t      arrays.push(arr.subarray(map[start], map[start + 1]));\n\t    }\n\t\n\t    return arrays;\n\t  };\n\t\n\t  // TODO: Create a generic method that can work for any typed array\n\t  var mergeUint8Arrays = function mergeUint8Arrays(arrays) {\n\t    var size = 0;\n\t    var map = new Int32Array(arrays.length * 2);\n\t\n\t    var lastIndex = 0;\n\t    var length;\n\t\n\t    // Find size of each array\n\t    arrays.forEach(function (_array, index) {\n\t      length = _array.length;\n\t      size += length;\n\t      map.set([lastIndex, lastIndex + length], index * 2);\n\t      lastIndex += length;\n\t    });\n\t\n\t    // Create a new array of total size\n\t    var mergedArray = new Uint8Array(size);\n\t\n\t    // Add each array to the new array\n\t    arrays.forEach(function (_array, index) {\n\t      mergedArray.set(_array, map[index * 2]);\n\t    });\n\t\n\t    return [mergedArray, map];\n\t  };\n\t\n\t  // TODO: Dedupe with splitFloat32Array\n\t  var splitUint8Array = function splitUint8Array(data) {\n\t    var arr = data[0];\n\t    var map = data[1];\n\t\n\t    var start;\n\t    var arrays = [];\n\t\n\t    // Iterate over map\n\t    for (var i = 0; i < map.length / 2; i++) {\n\t      start = i * 2;\n\t      arrays.push(arr.subarray(map[start], map[start + 1]));\n\t    }\n\t\n\t    return arrays;\n\t  };\n\t\n\t  // Merge multiple attribute objects into a single attribute object\n\t  //\n\t  // Attribute objects must all use the same attribute keys\n\t  var mergeAttributes = function mergeAttributes(attributes) {\n\t    var lengths = {};\n\t\n\t    // Find array lengths\n\t    attributes.forEach(function (_attributes) {\n\t      for (var k in _attributes) {\n\t        if (!lengths[k]) {\n\t          lengths[k] = 0;\n\t        }\n\t\n\t        lengths[k] += _attributes[k].length;\n\t      }\n\t    });\n\t\n\t    var mergedAttributes = {};\n\t\n\t    // Set up arrays to merge into\n\t    for (var k in lengths) {\n\t      mergedAttributes[k] = new Float32Array(lengths[k]);\n\t    }\n\t\n\t    var lastLengths = {};\n\t\n\t    attributes.forEach(function (_attributes) {\n\t      for (var k in _attributes) {\n\t        if (!lastLengths[k]) {\n\t          lastLengths[k] = 0;\n\t        }\n\t\n\t        mergedAttributes[k].set(_attributes[k], lastLengths[k]);\n\t\n\t        lastLengths[k] += _attributes[k].length;\n\t      }\n\t    });\n\t\n\t    return mergedAttributes;\n\t  };\n\t\n\t  var createLineGeometry = function createLineGeometry(lines, offset) {\n\t    var geometry = new _three2['default'].BufferGeometry();\n\t\n\t    var vertices = new Float32Array(lines.verticesCount * 3);\n\t    var colours = new Float32Array(lines.verticesCount * 3);\n\t\n\t    var pickingIds;\n\t    if (lines.pickingIds) {\n\t      // One component per vertex (1)\n\t      pickingIds = new Float32Array(lines.verticesCount);\n\t    }\n\t\n\t    var _vertices;\n\t    var _colour;\n\t    var _pickingId;\n\t\n\t    var lastIndex = 0;\n\t\n\t    for (var i = 0; i < lines.vertices.length; i++) {\n\t      _vertices = lines.vertices[i];\n\t      _colour = lines.colours[i];\n\t\n\t      if (pickingIds) {\n\t        _pickingId = lines.pickingIds[i];\n\t      }\n\t\n\t      for (var j = 0; j < _vertices.length; j++) {\n\t        var ax = _vertices[j][0] + offset.x;\n\t        var ay = _vertices[j][1];\n\t        var az = _vertices[j][2] + offset.y;\n\t\n\t        var c1 = _colour[j];\n\t\n\t        vertices[lastIndex * 3 + 0] = ax;\n\t        vertices[lastIndex * 3 + 1] = ay;\n\t        vertices[lastIndex * 3 + 2] = az;\n\t\n\t        colours[lastIndex * 3 + 0] = c1[0];\n\t        colours[lastIndex * 3 + 1] = c1[1];\n\t        colours[lastIndex * 3 + 2] = c1[2];\n\t\n\t        if (pickingIds) {\n\t          pickingIds[lastIndex] = _pickingId;\n\t        }\n\t\n\t        lastIndex++;\n\t      }\n\t    }\n\t\n\t    // itemSize = 3 because there are 3 values (components) per vertex\n\t    geometry.addAttribute('position', new _three2['default'].BufferAttribute(vertices, 3));\n\t    geometry.addAttribute('color', new _three2['default'].BufferAttribute(colours, 3));\n\t\n\t    if (pickingIds) {\n\t      geometry.addAttribute('pickingId', new _three2['default'].BufferAttribute(pickingIds, 1));\n\t    }\n\t\n\t    geometry.computeBoundingBox();\n\t\n\t    return geometry;\n\t  };\n\t\n\t  // TODO: Make picking IDs optional\n\t  var createGeometry = function createGeometry(attributes, offset) {\n\t    var geometry = new _three2['default'].BufferGeometry();\n\t\n\t    // Three components per vertex per face (3 x 3 = 9)\n\t    var vertices = new Float32Array(attributes.facesCount * 9);\n\t    var normals = new Float32Array(attributes.facesCount * 9);\n\t    var colours = new Float32Array(attributes.facesCount * 9);\n\t\n\t    var pickingIds;\n\t    if (attributes.pickingIds) {\n\t      // One component per vertex per face (1 x 3 = 3)\n\t      pickingIds = new Float32Array(attributes.facesCount * 3);\n\t    }\n\t\n\t    var pA = new _three2['default'].Vector3();\n\t    var pB = new _three2['default'].Vector3();\n\t    var pC = new _three2['default'].Vector3();\n\t\n\t    var cb = new _three2['default'].Vector3();\n\t    var ab = new _three2['default'].Vector3();\n\t\n\t    var index;\n\t    var _faces;\n\t    var _vertices;\n\t    var _colour;\n\t    var _pickingId;\n\t    var lastIndex = 0;\n\t    for (var i = 0; i < attributes.faces.length; i++) {\n\t      _faces = attributes.faces[i];\n\t      _vertices = attributes.vertices[i];\n\t      _colour = attributes.colours[i];\n\t\n\t      if (pickingIds) {\n\t        _pickingId = attributes.pickingIds[i];\n\t      }\n\t\n\t      for (var j = 0; j < _faces.length; j++) {\n\t        // Array of vertex indexes for the face\n\t        index = _faces[j][0];\n\t\n\t        var ax = _vertices[index][0] + offset.x;\n\t        var ay = _vertices[index][1];\n\t        var az = _vertices[index][2] + offset.y;\n\t\n\t        var c1 = _colour[j][0];\n\t\n\t        index = _faces[j][1];\n\t\n\t        var bx = _vertices[index][0] + offset.x;\n\t        var by = _vertices[index][1];\n\t        var bz = _vertices[index][2] + offset.y;\n\t\n\t        var c2 = _colour[j][1];\n\t\n\t        index = _faces[j][2];\n\t\n\t        var cx = _vertices[index][0] + offset.x;\n\t        var cy = _vertices[index][1];\n\t        var cz = _vertices[index][2] + offset.y;\n\t\n\t        var c3 = _colour[j][2];\n\t\n\t        // Flat face normals\n\t        // From: http://threejs.org/examples/webgl_buffergeometry.html\n\t        pA.set(ax, ay, az);\n\t        pB.set(bx, by, bz);\n\t        pC.set(cx, cy, cz);\n\t\n\t        cb.subVectors(pC, pB);\n\t        ab.subVectors(pA, pB);\n\t        cb.cross(ab);\n\t\n\t        cb.normalize();\n\t\n\t        var nx = cb.x;\n\t        var ny = cb.y;\n\t        var nz = cb.z;\n\t\n\t        vertices[lastIndex * 9 + 0] = ax;\n\t        vertices[lastIndex * 9 + 1] = ay;\n\t        vertices[lastIndex * 9 + 2] = az;\n\t\n\t        normals[lastIndex * 9 + 0] = nx;\n\t        normals[lastIndex * 9 + 1] = ny;\n\t        normals[lastIndex * 9 + 2] = nz;\n\t\n\t        colours[lastIndex * 9 + 0] = c1[0];\n\t        colours[lastIndex * 9 + 1] = c1[1];\n\t        colours[lastIndex * 9 + 2] = c1[2];\n\t\n\t        vertices[lastIndex * 9 + 3] = bx;\n\t        vertices[lastIndex * 9 + 4] = by;\n\t        vertices[lastIndex * 9 + 5] = bz;\n\t\n\t        normals[lastIndex * 9 + 3] = nx;\n\t        normals[lastIndex * 9 + 4] = ny;\n\t        normals[lastIndex * 9 + 5] = nz;\n\t\n\t        colours[lastIndex * 9 + 3] = c2[0];\n\t        colours[lastIndex * 9 + 4] = c2[1];\n\t        colours[lastIndex * 9 + 5] = c2[2];\n\t\n\t        vertices[lastIndex * 9 + 6] = cx;\n\t        vertices[lastIndex * 9 + 7] = cy;\n\t        vertices[lastIndex * 9 + 8] = cz;\n\t\n\t        normals[lastIndex * 9 + 6] = nx;\n\t        normals[lastIndex * 9 + 7] = ny;\n\t        normals[lastIndex * 9 + 8] = nz;\n\t\n\t        colours[lastIndex * 9 + 6] = c3[0];\n\t        colours[lastIndex * 9 + 7] = c3[1];\n\t        colours[lastIndex * 9 + 8] = c3[2];\n\t\n\t        if (pickingIds) {\n\t          pickingIds[lastIndex * 3 + 0] = _pickingId;\n\t          pickingIds[lastIndex * 3 + 1] = _pickingId;\n\t          pickingIds[lastIndex * 3 + 2] = _pickingId;\n\t        }\n\t\n\t        lastIndex++;\n\t      }\n\t    }\n\t\n\t    // itemSize = 3 because there are 3 values (components) per vertex\n\t    geometry.addAttribute('position', new _three2['default'].BufferAttribute(vertices, 3));\n\t    geometry.addAttribute('normal', new _three2['default'].BufferAttribute(normals, 3));\n\t    geometry.addAttribute('color', new _three2['default'].BufferAttribute(colours, 3));\n\t\n\t    if (pickingIds) {\n\t      geometry.addAttribute('pickingId', new _three2['default'].BufferAttribute(pickingIds, 1));\n\t    }\n\t\n\t    geometry.computeBoundingBox();\n\t\n\t    return geometry;\n\t  };\n\t\n\t  var textEncoder = new _textEncoding.TextEncoder('utf-8');\n\t  var textDecoder = new _textEncoding.TextDecoder('utf-8');\n\t\n\t  var stringToUint8Array = function stringToUint8Array(str) {\n\t    return textEncoder.encode(str);\n\t  };\n\t\n\t  var uint8ArrayToString = function uint8ArrayToString(ab) {\n\t    return textDecoder.decode(ab);\n\t  };\n\t\n\t  var fillTypedArray = function fillTypedArray(arr, value) {\n\t    for (var i = 0; i < arr.length; i++) {\n\t      arr[i] = value;\n\t    }\n\t  };\n\t\n\t  return {\n\t    mergeFloat32Arrays: mergeFloat32Arrays,\n\t    splitFloat32Array: splitFloat32Array,\n\t    mergeUint8Arrays: mergeUint8Arrays,\n\t    splitUint8Array: splitUint8Array,\n\t    mergeAttributes: mergeAttributes,\n\t    createLineGeometry: createLineGeometry,\n\t    createGeometry: createGeometry,\n\t    stringToUint8Array: stringToUint8Array,\n\t    uint8ArrayToString: uint8ArrayToString,\n\t    fillTypedArray: fillTypedArray\n\t  };\n\t})();\n\t\n\texports['default'] = Buffer;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _PickingShader = __webpack_require__(52);\n\t\n\tvar _PickingShader2 = _interopRequireDefault(_PickingShader);\n\t\n\t// FROM: https://github.com/brianxu/GPUPicker/blob/master/GPUPicker.js\n\t\n\tvar PickingMaterial = function PickingMaterial() {\n\t  _three2['default'].ShaderMaterial.call(this, {\n\t    uniforms: {\n\t      size: {\n\t        type: 'f',\n\t        value: 0.01\n\t      },\n\t      scale: {\n\t        type: 'f',\n\t        value: 400\n\t      }\n\t    },\n\t    // attributes: ['position', 'id'],\n\t    vertexShader: _PickingShader2['default'].vertexShader,\n\t    fragmentShader: _PickingShader2['default'].fragmentShader\n\t  });\n\t\n\t  this.linePadding = 2;\n\t};\n\t\n\tPickingMaterial.prototype = Object.create(_three2['default'].ShaderMaterial.prototype);\n\t\n\tPickingMaterial.prototype.constructor = PickingMaterial;\n\t\n\tPickingMaterial.prototype.setPointSize = function (size) {\n\t  this.uniforms.size.value = size;\n\t};\n\t\n\tPickingMaterial.prototype.setPointScale = function (scale) {\n\t  this.uniforms.scale.value = scale;\n\t};\n\t\n\texports['default'] = PickingMaterial;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\t\tvalue: true\n\t});\n\t// FROM: https://github.com/brianxu/GPUPicker/blob/master/GPUPicker.js\n\t\n\tvar PickingShader = {\n\t\t\tvertexShader: ['attribute float pickingId;',\n\t\t\t// '',\n\t\t\t// 'uniform float size;',\n\t\t\t// 'uniform float scale;',\n\t\t\t'', 'varying vec4 worldId;', '', 'void main() {', '  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );',\n\t\t\t// '  gl_PointSize = size * ( scale / length( mvPosition.xyz ) );',\n\t\t\t'  vec3 a = fract(vec3(1.0/255.0, 1.0/(255.0*255.0), 1.0/(255.0*255.0*255.0)) * pickingId);', '  a -= a.xxy * vec3(0.0, 1.0/255.0, 1.0/255.0);', '  worldId = vec4(a,1);', '  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n\t\n\t\t\tfragmentShader: ['#ifdef GL_ES\\n', 'precision highp float;\\n', '#endif\\n', '', 'varying vec4 worldId;', '', 'void main() {', '  gl_FragColor = worldId;', '}'].join('\\n')\n\t};\n\t\n\texports['default'] = PickingShader;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// TODO: Move duplicated logic between geometry layrs into GeometryLayer\n\t\n\t// TODO: Look at ways to drop unneeded references to array buffers, etc to\n\t// reduce memory footprint\n\t\n\t// TODO: Support dynamic updating / hiding / animation of geometry\n\t//\n\t// This could be pretty hard as it's all packed away within BufferGeometry and\n\t// may even be merged by another layer (eg. GeoJSONLayer)\n\t//\n\t// How much control should this layer support? Perhaps a different or custom\n\t// layer would be better suited for animation, for example.\n\t\n\t// TODO: Allow _setBufferAttributes to use a custom function passed in to\n\t// generate a custom mesh\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _geoGeo = __webpack_require__(8);\n\t\n\tvar _geoGeo2 = _interopRequireDefault(_geoGeo);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _earcut2 = __webpack_require__(48);\n\t\n\tvar _earcut3 = _interopRequireDefault(_earcut2);\n\t\n\tvar _utilExtrudePolygon = __webpack_require__(49);\n\t\n\tvar _utilExtrudePolygon2 = _interopRequireDefault(_utilExtrudePolygon);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\tvar _utilBuffer = __webpack_require__(50);\n\t\n\tvar _utilBuffer2 = _interopRequireDefault(_utilBuffer);\n\t\n\tvar PolygonLayer = (function (_Layer) {\n\t  _inherits(PolygonLayer, _Layer);\n\t\n\t  function PolygonLayer(coordinates, options) {\n\t    _classCallCheck(this, PolygonLayer);\n\t\n\t    var defaults = {\n\t      output: true,\n\t      interactive: false,\n\t      // Custom material override\n\t      //\n\t      // TODO: Should this be in the style object?\n\t      polygonMaterial: null,\n\t      onPolygonMesh: null,\n\t      onBufferAttributes: null,\n\t      // This default style is separate to Util.GeoJSON.defaultStyle\n\t      style: {\n\t        color: '#ffffff',\n\t        transparent: false,\n\t        opacity: 1,\n\t        blending: _three2['default'].NormalBlending,\n\t        height: 0\n\t      }\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(PolygonLayer.prototype), 'constructor', this).call(this, _options);\n\t\n\t    // Return coordinates as array of polygons so it's easy to support\n\t    // MultiPolygon features (a single polygon would be a MultiPolygon with a\n\t    // single polygon in the array)\n\t    this._coordinates = PolygonLayer.isSingle(coordinates) ? [coordinates] : coordinates;\n\t  }\n\t\n\t  _createClass(PolygonLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _this._setCoordinates();\n\t\n\t        if (_this._options.interactive) {\n\t          // Only add to picking mesh if this layer is controlling output\n\t          //\n\t          // Otherwise, assume another component will eventually add a mesh to\n\t          // the picking scene\n\t          if (_this.isOutput()) {\n\t            _this._pickingMesh = new _three2['default'].Object3D();\n\t            _this.addToPicking(_this._pickingMesh);\n\t          }\n\t\n\t          _this._setPickingId();\n\t          _this._addPickingEvents();\n\t        }\n\t\n\t        PolygonLayer.SetBufferAttributes(_this._projectedCoordinates, _this._options).then(function (result) {\n\t          _this._bufferAttributes = _utilBuffer2['default'].mergeAttributes(result.attributes);\n\t\n\t          if (result.outlineAttributes.length > 0) {\n\t            _this._outlineBufferAttributes = _utilBuffer2['default'].mergeAttributes(result.outlineAttributes);\n\t          }\n\t\n\t          _this._flat = result.flat;\n\t\n\t          if (_this.isOutput()) {\n\t            var attributeLengths = {\n\t              positions: 3,\n\t              normals: 3,\n\t              colors: 3,\n\t              tops: 1\n\t            };\n\t\n\t            if (_this._options.interactive) {\n\t              attributeLengths.pickingIds = 1;\n\t            }\n\t\n\t            var style = _this._options.style;\n\t\n\t            // Set mesh if not merging elsewhere\n\t            PolygonLayer.SetMesh(_this._bufferAttributes, attributeLengths, _this._flat, style, _this._options, _this._world._environment._skybox).then(function (result) {\n\t              // Output mesh\n\t              _this.add(result.mesh);\n\t\n\t              if (result.pickingMesh) {\n\t                _this._pickingMesh.add(result.pickingMesh);\n\t              }\n\t            });\n\t          }\n\t\n\t          result.attributes = null;\n\t          result.outlineAttributes = null;\n\t          result = null;\n\t\n\t          resolve(_this);\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t\n\t    // Return center of polygon as a LatLon\n\t    //\n\t    // This is used for things like placing popups / UI elements on the layer\n\t    //\n\t    // TODO: Find proper center position instead of returning first coordinate\n\t    // SEE: https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polygon.js#L15\n\t  }, {\n\t    key: 'getCenter',\n\t    value: function getCenter() {\n\t      return this._center;\n\t    }\n\t\n\t    // Return polygon bounds in geographic coordinates\n\t    //\n\t    // TODO: Implement getBounds()\n\t  }, {\n\t    key: 'getBounds',\n\t    value: function getBounds() {}\n\t\n\t    // Get unique ID for picking interaction\n\t  }, {\n\t    key: '_setPickingId',\n\t    value: function _setPickingId() {\n\t      this._pickingId = this._options.pickingId = this.getPickingId();\n\t    }\n\t\n\t    // Set up and re-emit interaction events\n\t  }, {\n\t    key: '_addPickingEvents',\n\t    value: function _addPickingEvents() {\n\t      var _this2 = this;\n\t\n\t      // TODO: Find a way to properly remove this listener on destroy\n\t      this._world.on('pick-click-' + this._pickingId, function (point2d, point3d, intersects) {\n\t        // Re-emit click event from the layer\n\t        _this2.emit('click', _this2, point2d, point3d, intersects);\n\t      });\n\t\n\t      this._world.on('pick-hover-' + this._pickingId, function (point2d, point3d, intersects) {\n\t        // Re-emit click event from the layer\n\t        _this2.emit('hover', _this2, point2d, point3d, intersects);\n\t      });\n\t    }\n\t\n\t    // Create and store reference to THREE.BufferAttribute data for this layer\n\t  }, {\n\t    key: 'getBufferAttributes',\n\t    value: function getBufferAttributes() {\n\t      return this._bufferAttributes;\n\t    }\n\t  }, {\n\t    key: 'getOutlineBufferAttributes',\n\t    value: function getOutlineBufferAttributes() {\n\t      return this._outlineBufferAttributes;\n\t    }\n\t\n\t    // Used by external components to clear some memory when the attributes\n\t    // are no longer required to be stored in this layer\n\t    //\n\t    // For example, you would want to clear the attributes here after merging them\n\t    // using something like the GeoJSONLayer\n\t  }, {\n\t    key: 'clearBufferAttributes',\n\t    value: function clearBufferAttributes() {\n\t      this._bufferAttributes = null;\n\t      this._outlineBufferAttributes = null;\n\t    }\n\t\n\t    // Threshold angle is currently in rads\n\t  }, {\n\t    key: 'clearCoordinates',\n\t\n\t    // Used by external components to clear some memory when the coordinates\n\t    // are no longer required to be stored in this layer\n\t    //\n\t    // For example, you would want to clear the coordinates here after this\n\t    // layer is merged in something like the GeoJSONLayer\n\t    value: function clearCoordinates() {\n\t      this._coordinates = null;\n\t      this._projectedCoordinates = null;\n\t    }\n\t  }, {\n\t    key: '_setCoordinates',\n\t\n\t    // Convert and project coordinates\n\t    //\n\t    // TODO: Calculate bounds\n\t    value: function _setCoordinates() {\n\t      this._bounds = [];\n\t      this._coordinates = this._convertCoordinates(this._coordinates);\n\t\n\t      this._projectedBounds = [];\n\t      this._projectedCoordinates = this._projectCoordinates();\n\t\n\t      this._center = this._coordinates[0][0][0];\n\t    }\n\t\n\t    // Recursively convert input coordinates into LatLon objects\n\t    //\n\t    // Calculate geographic bounds at the same time\n\t    //\n\t    // TODO: Calculate geographic bounds\n\t  }, {\n\t    key: '_convertCoordinates',\n\t    value: function _convertCoordinates(coordinates) {\n\t      return coordinates.map(function (_coordinates) {\n\t        return _coordinates.map(function (ring) {\n\t          return ring.map(function (coordinate) {\n\t            return (0, _geoLatLon.latLon)(coordinate[1], coordinate[0]);\n\t          });\n\t        });\n\t      });\n\t    }\n\t\n\t    // Recursively project coordinates into world positions\n\t    //\n\t    // Calculate world bounds, offset and pointScale at the same time\n\t    //\n\t    // TODO: Calculate world bounds\n\t  }, {\n\t    key: '_projectCoordinates',\n\t    value: function _projectCoordinates() {\n\t      var _this3 = this;\n\t\n\t      var point;\n\t      return this._coordinates.map(function (_coordinates) {\n\t        return _coordinates.map(function (ring) {\n\t          return ring.map(function (latlon) {\n\t            point = _this3._world.latLonToPoint(latlon);\n\t\n\t            // TODO: Is offset ever being used or needed?\n\t            if (!_this3._offset) {\n\t              _this3._offset = (0, _geoPoint.point)(0, 0);\n\t              _this3._offset.x = -1 * point.x;\n\t              _this3._offset.y = -1 * point.y;\n\t\n\t              _this3._options.pointScale = _this3._world.pointScale(latlon);\n\t            }\n\t\n\t            return point;\n\t          });\n\t        });\n\t      });\n\t    }\n\t\n\t    // Convert coordinates array to something earcut can understand\n\t  }, {\n\t    key: 'isFlat',\n\t\n\t    // Returns true if the polygon is flat (has no height)\n\t    value: function isFlat() {\n\t      return this._flat;\n\t    }\n\t\n\t    // Returns true if coordinates refer to a single geometry\n\t    //\n\t    // For example, not coordinates for a MultiPolygon GeoJSON feature\n\t  }, {\n\t    key: 'destroy',\n\t\n\t    // TODO: Make sure this is cleaning everything\n\t    value: function destroy() {\n\t      if (this._pickingMesh) {\n\t        // TODO: Properly dispose of picking mesh\n\t        this._pickingMesh = null;\n\t      }\n\t\n\t      this.clearCoordinates();\n\t      this.clearBufferAttributes();\n\t\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(PolygonLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }], [{\n\t    key: 'SetBufferAttributes',\n\t    value: function SetBufferAttributes(coordinates, options) {\n\t      return new Promise(function (resolve) {\n\t        var height = 0;\n\t\n\t        // Convert height into world units\n\t        if (options.style.height && options.style.height !== 0) {\n\t          height = _geoGeo2['default'].metresToWorld(options.style.height, options.pointScale);\n\t        }\n\t\n\t        var colour = new _three2['default'].Color();\n\t        colour.set(options.style.color);\n\t\n\t        // Light and dark colours used for poor-mans AO gradient on object sides\n\t        var light = new _three2['default'].Color(0xffffff);\n\t        var shadow = new _three2['default'].Color(0x666666);\n\t\n\t        var flat = true;\n\t\n\t        var outlineAttributes = [];\n\t\n\t        // For each polygon\n\t        var attributes = coordinates.map(function (_coordinates) {\n\t          // Convert coordinates to earcut format\n\t          var _earcut = PolygonLayer.ToEarcut(_coordinates);\n\t\n\t          // Triangulate faces using earcut\n\t          var faces = PolygonLayer.Triangulate(_earcut.vertices, _earcut.holes, _earcut.dimensions);\n\t\n\t          var groupedVertices = [];\n\t          for (i = 0, il = _earcut.vertices.length; i < il; i += _earcut.dimensions) {\n\t            groupedVertices.push(_earcut.vertices.slice(i, i + _earcut.dimensions));\n\t          }\n\t\n\t          var extruded = (0, _utilExtrudePolygon2['default'])(groupedVertices, faces, {\n\t            bottom: 0,\n\t            top: height\n\t          });\n\t\n\t          var topColor = colour.clone().multiply(light);\n\t          var bottomColor = colour.clone().multiply(shadow);\n\t\n\t          var _vertices = extruded.positions;\n\t          var _faces = [];\n\t          var _colours = [];\n\t          var _tops = [];\n\t\n\t          var _colour;\n\t          extruded.top.forEach(function (face, fi) {\n\t            _colour = [];\n\t\n\t            _colour.push([colour.r, colour.g, colour.b]);\n\t            _colour.push([colour.r, colour.g, colour.b]);\n\t            _colour.push([colour.r, colour.g, colour.b]);\n\t\n\t            _tops.push([true, true, true]);\n\t\n\t            _faces.push(face);\n\t            _colours.push(_colour);\n\t          });\n\t\n\t          if (extruded.sides) {\n\t            flat = false;\n\t\n\t            // Set up colours for every vertex with poor-mans AO on the sides\n\t            extruded.sides.forEach(function (face, fi) {\n\t              _colour = [];\n\t\n\t              // First face is always bottom-bottom-top\n\t              if (fi % 2 === 0) {\n\t                _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\n\t                _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\n\t                _colour.push([topColor.r, topColor.g, topColor.b]);\n\t\n\t                _tops.push([false, false, true]);\n\t                // Reverse winding for the second face\n\t                // top-top-bottom\n\t              } else {\n\t                  _colour.push([topColor.r, topColor.g, topColor.b]);\n\t                  _colour.push([topColor.r, topColor.g, topColor.b]);\n\t                  _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\n\t\n\t                  _tops.push([true, true, false]);\n\t                }\n\t\n\t              _faces.push(face);\n\t              _colours.push(_colour);\n\t            });\n\t          }\n\t\n\t          // Skip bottom as there's no point rendering it\n\t          // allFaces.push(extruded.faces);\n\t\n\t          var polygon = {\n\t            vertices: _vertices,\n\t            faces: _faces,\n\t            colours: _colours,\n\t            tops: _tops,\n\t            facesCount: _faces.length\n\t          };\n\t\n\t          if (options.style.outline) {\n\t            var outlineColour = new _three2['default'].Color();\n\t            outlineColour.set(options.style.outlineColor || 0x000000);\n\t\n\t            outlineAttributes.push(PolygonLayer.Set2DOutline(_coordinates, outlineColour));\n\t          }\n\t\n\t          if (options.interactive && options.pickingId) {\n\t            // Inject picking ID\n\t            polygon.pickingId = options.pickingId;\n\t          }\n\t\n\t          // Convert polygon representation to proper attribute arrays\n\t          return PolygonLayer.ToAttributes(polygon);\n\t        });\n\t\n\t        resolve({\n\t          attributes: attributes,\n\t          outlineAttributes: outlineAttributes,\n\t          flat: flat\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'Set2DOutline',\n\t    value: function Set2DOutline(coordinates, colour) {\n\t      var _vertices = [];\n\t\n\t      coordinates.forEach(function (ring) {\n\t        var _ring = ring.map(function (coordinate) {\n\t          return [coordinate.x, 0, coordinate.y];\n\t        });\n\t\n\t        // Add in duplicate vertices for line segments to work\n\t        var verticeCount = _ring.length;\n\t        var first = true;\n\t        while (--verticeCount) {\n\t          if (first || verticeCount === 0) {\n\t            first = false;\n\t            continue;\n\t          }\n\t\n\t          _ring.splice(verticeCount + 1, 0, _ring[verticeCount]);\n\t        }\n\t\n\t        _vertices = _vertices.concat(_ring);\n\t      });\n\t\n\t      _colour = [colour.r, colour.g, colour.b];\n\t\n\t      var vertices = new Float32Array(_vertices.length * 3);\n\t      var colours = new Float32Array(_vertices.length * 3);\n\t\n\t      var lastIndex = 0;\n\t\n\t      for (var i = 0; i < _vertices.length; i++) {\n\t        var ax = _vertices[i][0];\n\t        var ay = _vertices[i][1];\n\t        var az = _vertices[i][2];\n\t\n\t        var c1 = _colour;\n\t\n\t        vertices[lastIndex * 3 + 0] = ax;\n\t        vertices[lastIndex * 3 + 1] = ay;\n\t        vertices[lastIndex * 3 + 2] = az;\n\t\n\t        colours[lastIndex * 3 + 0] = c1[0];\n\t        colours[lastIndex * 3 + 1] = c1[1];\n\t        colours[lastIndex * 3 + 2] = c1[2];\n\t\n\t        lastIndex++;\n\t      }\n\t\n\t      var attributes = {\n\t        positions: vertices,\n\t        colors: colours\n\t      };\n\t\n\t      return attributes;\n\t    }\n\t  }, {\n\t    key: 'SetMesh',\n\t    value: function SetMesh(attributes, attributeLengths, flat, style, options, skybox) {\n\t      var geometry = new _three2['default'].BufferGeometry();\n\t\n\t      for (var key in attributes) {\n\t        geometry.addAttribute(key.slice(0, -1), new _three2['default'].BufferAttribute(attributes[key], attributeLengths[key]));\n\t      }\n\t\n\t      geometry.computeBoundingBox();\n\t\n\t      var material;\n\t      if (options.polygonMaterial && options.polygonMaterial instanceof _three2['default'].Material) {\n\t        material = options.polygonMaterial;\n\t      } else if (!skybox) {\n\t        material = new _three2['default'].MeshPhongMaterial({\n\t          vertexColors: _three2['default'].VertexColors,\n\t          side: _three2['default'].BackSide,\n\t          transparent: style.transparent,\n\t          opacity: style.opacity,\n\t          blending: style.blending\n\t        });\n\t      } else {\n\t        material = new _three2['default'].MeshStandardMaterial({\n\t          vertexColors: _three2['default'].VertexColors,\n\t          side: _three2['default'].BackSide,\n\t          transparent: style.transparent,\n\t          opacity: style.opacity,\n\t          blending: style.blending\n\t        });\n\t        material.roughness = 1;\n\t        material.metalness = 0.1;\n\t        material.envMapIntensity = 3;\n\t        material.envMap = skybox.getRenderTarget();\n\t      }\n\t\n\t      var mesh;\n\t\n\t      // Pass mesh through callback, if defined\n\t      if (typeof options.onPolygonMesh === 'function') {\n\t        mesh = options.onPolygonMesh(geometry, material);\n\t      } else {\n\t        mesh = new _three2['default'].Mesh(geometry, material);\n\t\n\t        mesh.castShadow = true;\n\t        mesh.receiveShadow = true;\n\t      }\n\t\n\t      if (flat || style.renderOrder !== undefined) {\n\t        if (!style.ignoreDepth) {\n\t          material.depthWrite = false;\n\t        }\n\t\n\t        var renderOrder = style.renderOrder !== undefined ? style.renderOrder : 3;\n\t        mesh.renderOrder = renderOrder;\n\t      }\n\t\n\t      if (options.interactive) {\n\t        material = new _enginePickingMaterial2['default']();\n\t        material.side = _three2['default'].BackSide;\n\t\n\t        var pickingMesh = new _three2['default'].Mesh(geometry, material);\n\t      }\n\t\n\t      return Promise.resolve({\n\t        mesh: mesh,\n\t        pickingMesh: pickingMesh\n\t      });\n\t    }\n\t  }, {\n\t    key: 'ToEarcut',\n\t    value: function ToEarcut(coordinates) {\n\t      var dim = 2;\n\t      var result = { vertices: [], holes: [], dimensions: dim };\n\t      var holeIndex = 0;\n\t\n\t      for (var i = 0; i < coordinates.length; i++) {\n\t        for (var j = 0; j < coordinates[i].length; j++) {\n\t          // for (var d = 0; d < dim; d++) {\n\t          result.vertices.push(coordinates[i][j].x);\n\t          result.vertices.push(coordinates[i][j].y);\n\t          // }\n\t        }\n\t        if (i > 0) {\n\t          holeIndex += coordinates[i - 1].length;\n\t          result.holes.push(holeIndex);\n\t        }\n\t      }\n\t\n\t      return result;\n\t    }\n\t\n\t    // Triangulate earcut-based input using earcut\n\t  }, {\n\t    key: 'Triangulate',\n\t    value: function Triangulate(contour, holes, dim) {\n\t      // console.time('earcut');\n\t\n\t      var faces = (0, _earcut3['default'])(contour, holes, dim);\n\t      var result = [];\n\t\n\t      for (i = 0, il = faces.length; i < il; i += 3) {\n\t        result.push(faces.slice(i, i + 3));\n\t      }\n\t\n\t      // console.timeEnd('earcut');\n\t\n\t      return result;\n\t    }\n\t\n\t    // Transform polygon representation into attribute arrays that can be used by\n\t    // THREE.BufferGeometry\n\t    //\n\t    // TODO: Can this be simplified? It's messy and huge\n\t  }, {\n\t    key: 'ToAttributes',\n\t    value: function ToAttributes(polygon) {\n\t      // Three components per vertex per face (3 x 3 = 9)\n\t      var positions = new Float32Array(polygon.facesCount * 9);\n\t      var normals = new Float32Array(polygon.facesCount * 9);\n\t      var colours = new Float32Array(polygon.facesCount * 9);\n\t\n\t      // One component per vertex per face (1 x 3 = 3)\n\t      var tops = new Float32Array(polygon.facesCount * 3);\n\t\n\t      var pickingIds;\n\t      if (polygon.pickingId) {\n\t        // One component per vertex per face (1 x 3 = 3)\n\t        pickingIds = new Float32Array(polygon.facesCount * 3);\n\t      }\n\t\n\t      var pA = new _three2['default'].Vector3();\n\t      var pB = new _three2['default'].Vector3();\n\t      var pC = new _three2['default'].Vector3();\n\t\n\t      var cb = new _three2['default'].Vector3();\n\t      var ab = new _three2['default'].Vector3();\n\t\n\t      var index;\n\t\n\t      var _faces = polygon.faces;\n\t      var _vertices = polygon.vertices;\n\t      var _colour = polygon.colours;\n\t      var _tops = polygon.tops;\n\t\n\t      var _pickingId;\n\t      if (pickingIds) {\n\t        _pickingId = polygon.pickingId;\n\t      }\n\t\n\t      var lastIndex = 0;\n\t\n\t      for (var i = 0; i < _faces.length; i++) {\n\t        // Array of vertex indexes for the face\n\t        index = _faces[i][0];\n\t\n\t        var ax = _vertices[index][0];\n\t        var ay = _vertices[index][1];\n\t        var az = _vertices[index][2];\n\t\n\t        var c1 = _colour[i][0];\n\t        var t1 = _tops[i][0];\n\t\n\t        index = _faces[i][1];\n\t\n\t        var bx = _vertices[index][0];\n\t        var by = _vertices[index][1];\n\t        var bz = _vertices[index][2];\n\t\n\t        var c2 = _colour[i][1];\n\t        var t2 = _tops[i][1];\n\t\n\t        index = _faces[i][2];\n\t\n\t        var cx = _vertices[index][0];\n\t        var cy = _vertices[index][1];\n\t        var cz = _vertices[index][2];\n\t\n\t        var c3 = _colour[i][2];\n\t        var t3 = _tops[i][2];\n\t\n\t        // Flat face normals\n\t        // From: http://threejs.org/examples/webgl_buffergeometry.html\n\t        pA.set(ax, ay, az);\n\t        pB.set(bx, by, bz);\n\t        pC.set(cx, cy, cz);\n\t\n\t        cb.subVectors(pC, pB);\n\t        ab.subVectors(pA, pB);\n\t        cb.cross(ab);\n\t\n\t        cb.normalize();\n\t\n\t        var nx = cb.x;\n\t        var ny = cb.y;\n\t        var nz = cb.z;\n\t\n\t        positions[lastIndex * 9 + 0] = ax;\n\t        positions[lastIndex * 9 + 1] = ay;\n\t        positions[lastIndex * 9 + 2] = az;\n\t\n\t        normals[lastIndex * 9 + 0] = nx;\n\t        normals[lastIndex * 9 + 1] = ny;\n\t        normals[lastIndex * 9 + 2] = nz;\n\t\n\t        colours[lastIndex * 9 + 0] = c1[0];\n\t        colours[lastIndex * 9 + 1] = c1[1];\n\t        colours[lastIndex * 9 + 2] = c1[2];\n\t\n\t        positions[lastIndex * 9 + 3] = bx;\n\t        positions[lastIndex * 9 + 4] = by;\n\t        positions[lastIndex * 9 + 5] = bz;\n\t\n\t        normals[lastIndex * 9 + 3] = nx;\n\t        normals[lastIndex * 9 + 4] = ny;\n\t        normals[lastIndex * 9 + 5] = nz;\n\t\n\t        colours[lastIndex * 9 + 3] = c2[0];\n\t        colours[lastIndex * 9 + 4] = c2[1];\n\t        colours[lastIndex * 9 + 5] = c2[2];\n\t\n\t        positions[lastIndex * 9 + 6] = cx;\n\t        positions[lastIndex * 9 + 7] = cy;\n\t        positions[lastIndex * 9 + 8] = cz;\n\t\n\t        normals[lastIndex * 9 + 6] = nx;\n\t        normals[lastIndex * 9 + 7] = ny;\n\t        normals[lastIndex * 9 + 8] = nz;\n\t\n\t        colours[lastIndex * 9 + 6] = c3[0];\n\t        colours[lastIndex * 9 + 7] = c3[1];\n\t        colours[lastIndex * 9 + 8] = c3[2];\n\t\n\t        tops[lastIndex * 3 + 0] = t1;\n\t        tops[lastIndex * 3 + 1] = t2;\n\t        tops[lastIndex * 3 + 2] = t3;\n\t\n\t        if (pickingIds) {\n\t          pickingIds[lastIndex * 3 + 0] = _pickingId;\n\t          pickingIds[lastIndex * 3 + 1] = _pickingId;\n\t          pickingIds[lastIndex * 3 + 2] = _pickingId;\n\t        }\n\t\n\t        lastIndex++;\n\t      }\n\t\n\t      var attributes = {\n\t        positions: positions,\n\t        normals: normals,\n\t        colors: colours,\n\t        tops: tops\n\t      };\n\t\n\t      if (pickingIds) {\n\t        attributes.pickingIds = pickingIds;\n\t      }\n\t\n\t      return attributes;\n\t    }\n\t  }, {\n\t    key: 'isSingle',\n\t    value: function isSingle(coordinates) {\n\t      return !Array.isArray(coordinates[0][0][0]);\n\t    }\n\t  }]);\n\t\n\t  return PolygonLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = PolygonLayer;\n\t\n\tvar noNew = function noNew(coordinates, options) {\n\t  return new PolygonLayer(coordinates, options);\n\t};\n\t\n\texports.polygonLayer = noNew;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// TODO: Move duplicated logic between geometry layrs into GeometryLayer\n\t\n\t// TODO: Look at ways to drop unneeded references to array buffers, etc to\n\t// reduce memory footprint\n\t\n\t// TODO: Provide alternative output using tubes and splines / curves\n\t\n\t// TODO: Support dynamic updating / hiding / animation of geometry\n\t//\n\t// This could be pretty hard as it's all packed away within BufferGeometry and\n\t// may even be merged by another layer (eg. GeoJSONLayer)\n\t//\n\t// How much control should this layer support? Perhaps a different or custom\n\t// layer would be better suited for animation, for example.\n\t\n\t// TODO: Allow _setBufferAttributes to use a custom function passed in to\n\t// generate a custom mesh\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _geoGeo = __webpack_require__(8);\n\t\n\tvar _geoGeo2 = _interopRequireDefault(_geoGeo);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\tvar _utilBuffer = __webpack_require__(50);\n\t\n\tvar _utilBuffer2 = _interopRequireDefault(_utilBuffer);\n\t\n\tvar PolylineLayer = (function (_Layer) {\n\t  _inherits(PolylineLayer, _Layer);\n\t\n\t  function PolylineLayer(coordinates, options) {\n\t    _classCallCheck(this, PolylineLayer);\n\t\n\t    var defaults = {\n\t      output: true,\n\t      interactive: false,\n\t      // Custom material override\n\t      //\n\t      // TODO: Should this be in the style object?\n\t      polylineMaterial: null,\n\t      onPolylineMesh: null,\n\t      onBufferAttributes: null,\n\t      // This default style is separate to Util.GeoJSON.defaultStyle\n\t      style: {\n\t        lineOpacity: 1,\n\t        lineTransparent: false,\n\t        lineColor: '#ffffff',\n\t        lineWidth: 1,\n\t        lineBlending: _three2['default'].NormalBlending\n\t      }\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(PolylineLayer.prototype), 'constructor', this).call(this, _options);\n\t\n\t    // Return coordinates as array of lines so it's easy to support\n\t    // MultiLineString features (a single line would be a MultiLineString with a\n\t    // single line in the array)\n\t    this._coordinates = PolylineLayer.isSingle(coordinates) ? [coordinates] : coordinates;\n\t\n\t    // Polyline features are always flat (for now at least)\n\t    this._flat = true;\n\t  }\n\t\n\t  _createClass(PolylineLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _this._setCoordinates();\n\t\n\t        if (_this._options.interactive) {\n\t          // Only add to picking mesh if this layer is controlling output\n\t          //\n\t          // Otherwise, assume another component will eventually add a mesh to\n\t          // the picking scene\n\t          if (_this.isOutput()) {\n\t            _this._pickingMesh = new _three2['default'].Object3D();\n\t            _this.addToPicking(_this._pickingMesh);\n\t          }\n\t\n\t          _this._setPickingId();\n\t          _this._addPickingEvents();\n\t        }\n\t\n\t        // Store geometry representation as instances of THREE.BufferAttribute\n\t        PolylineLayer.SetBufferAttributes(_this._projectedCoordinates, _this._options).then(function (result) {\n\t          _this._bufferAttributes = _utilBuffer2['default'].mergeAttributes(result.attributes);\n\t          _this._flat = result.flat;\n\t\n\t          var attributeLengths = {\n\t            positions: 3,\n\t            colors: 3\n\t          };\n\t\n\t          if (_this._options.interactive) {\n\t            attributeLengths.pickingIds = 1;\n\t          }\n\t\n\t          if (_this.isOutput()) {\n\t            var style = _this._options.style;\n\t\n\t            // Set mesh if not merging elsewhere\n\t            PolylineLayer.SetMesh(_this._bufferAttributes, attributeLengths, _this._flat, style, _this._options).then(function (result) {\n\t              // Output mesh\n\t              _this.add(result.mesh);\n\t\n\t              if (result.pickingMesh) {\n\t                _this._pickingMesh.add(result.pickingMesh);\n\t              }\n\t            });\n\t          }\n\t\n\t          result.attributes = null;\n\t          result = null;\n\t\n\t          resolve(_this);\n\t        });\n\t      });\n\t    }\n\t\n\t    // Return center of polyline as a LatLon\n\t    //\n\t    // This is used for things like placing popups / UI elements on the layer\n\t    //\n\t    // TODO: Find proper center position instead of returning first coordinate\n\t    // SEE: https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L59\n\t  }, {\n\t    key: 'getCenter',\n\t    value: function getCenter() {\n\t      return this._center;\n\t    }\n\t\n\t    // Return line bounds in geographic coordinates\n\t    //\n\t    // TODO: Implement getBounds()\n\t  }, {\n\t    key: 'getBounds',\n\t    value: function getBounds() {}\n\t\n\t    // Get unique ID for picking interaction\n\t  }, {\n\t    key: '_setPickingId',\n\t    value: function _setPickingId() {\n\t      this._pickingId = this._options.pickingId = this.getPickingId();\n\t    }\n\t\n\t    // Set up and re-emit interaction events\n\t  }, {\n\t    key: '_addPickingEvents',\n\t    value: function _addPickingEvents() {\n\t      var _this2 = this;\n\t\n\t      // TODO: Find a way to properly remove this listener on destroy\n\t      this._world.on('pick-click-' + this._pickingId, function (point2d, point3d, intersects) {\n\t        // Re-emit click event from the layer\n\t        _this2.emit('click', _this2, point2d, point3d, intersects);\n\t      });\n\t\n\t      this._world.on('pick-hover-' + this._pickingId, function (point2d, point3d, intersects) {\n\t        // Re-emit click event from the layer\n\t        _this2.emit('hover', _this2, point2d, point3d, intersects);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getBufferAttributes',\n\t    value: function getBufferAttributes() {\n\t      return this._bufferAttributes;\n\t    }\n\t\n\t    // Used by external components to clear some memory when the attributes\n\t    // are no longer required to be stored in this layer\n\t    //\n\t    // For example, you would want to clear the attributes here after merging them\n\t    // using something like the GeoJSONLayer\n\t  }, {\n\t    key: 'clearBufferAttributes',\n\t    value: function clearBufferAttributes() {\n\t      this._bufferAttributes = null;\n\t    }\n\t\n\t    // Used by external components to clear some memory when the coordinates\n\t    // are no longer required to be stored in this layer\n\t    //\n\t    // For example, you would want to clear the coordinates here after this\n\t    // layer is merged in something like the GeoJSONLayer\n\t  }, {\n\t    key: 'clearCoordinates',\n\t    value: function clearCoordinates() {\n\t      this._coordinates = null;\n\t      this._projectedCoordinates = null;\n\t    }\n\t  }, {\n\t    key: '_setCoordinates',\n\t\n\t    // Convert and project coordinates\n\t    //\n\t    // TODO: Calculate bounds\n\t    value: function _setCoordinates() {\n\t      this._bounds = [];\n\t      this._coordinates = this._convertCoordinates(this._coordinates);\n\t\n\t      this._projectedBounds = [];\n\t      this._projectedCoordinates = this._projectCoordinates();\n\t\n\t      this._center = this._coordinates[0][0];\n\t    }\n\t\n\t    // Recursively convert input coordinates into LatLon objects\n\t    //\n\t    // Calculate geographic bounds at the same time\n\t    //\n\t    // TODO: Calculate geographic bounds\n\t  }, {\n\t    key: '_convertCoordinates',\n\t    value: function _convertCoordinates(coordinates) {\n\t      return coordinates.map(function (_coordinates) {\n\t        return _coordinates.map(function (coordinate) {\n\t          return (0, _geoLatLon.latLon)(coordinate[1], coordinate[0]);\n\t        });\n\t      });\n\t    }\n\t\n\t    // Recursively project coordinates into world positions\n\t    //\n\t    // Calculate world bounds, offset and pointScale at the same time\n\t    //\n\t    // TODO: Calculate world bounds\n\t  }, {\n\t    key: '_projectCoordinates',\n\t    value: function _projectCoordinates() {\n\t      var _this3 = this;\n\t\n\t      var point;\n\t      return this._coordinates.map(function (_coordinates) {\n\t        return _coordinates.map(function (latlon) {\n\t          point = _this3._world.latLonToPoint(latlon);\n\t\n\t          // TODO: Is offset ever being used or needed?\n\t          if (!_this3._offset) {\n\t            _this3._offset = (0, _geoPoint.point)(0, 0);\n\t            _this3._offset.x = -1 * point.x;\n\t            _this3._offset.y = -1 * point.y;\n\t\n\t            _this3._options.pointScale = _this3._world.pointScale(latlon);\n\t          }\n\t\n\t          return point;\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'isFlat',\n\t\n\t    // Returns true if the line is flat (has no height)\n\t    value: function isFlat() {\n\t      return this._flat;\n\t    }\n\t\n\t    // Returns true if coordinates refer to a single geometry\n\t    //\n\t    // For example, not coordinates for a MultiLineString GeoJSON feature\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      if (this._pickingMesh) {\n\t        // TODO: Properly dispose of picking mesh\n\t        this._pickingMesh = null;\n\t      }\n\t\n\t      this.clearCoordinates();\n\t      this.clearBufferAttributes();\n\t\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(PolylineLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }], [{\n\t    key: 'SetBufferAttributes',\n\t    value: function SetBufferAttributes(coordinates, options) {\n\t      return new Promise(function (resolve) {\n\t        var height = 0;\n\t\n\t        // Convert height into world units\n\t        if (options.style.lineHeight) {\n\t          height = _geoGeo2['default'].metresToWorld(options.style.lineHeight, options.pointScale);\n\t        }\n\t\n\t        var colour = new _three2['default'].Color();\n\t        colour.set(options.style.lineColor);\n\t\n\t        var flat = true;\n\t\n\t        // For each line\n\t        var attributes = coordinates.map(function (_projectedCoordinates) {\n\t          var _vertices = [];\n\t          var _colours = [];\n\t\n\t          // Connect coordinate with the next to make a pair\n\t          //\n\t          // LineSegments requires pairs of vertices so repeat the last point if\n\t          // there's an odd number of vertices\n\t          var nextCoord;\n\t          _projectedCoordinates.forEach(function (coordinate, index) {\n\t            _colours.push([colour.r, colour.g, colour.b]);\n\t            _vertices.push([coordinate.x, height, coordinate.y]);\n\t\n\t            nextCoord = _projectedCoordinates[index + 1] ? _projectedCoordinates[index + 1] : coordinate;\n\t\n\t            _colours.push([colour.r, colour.g, colour.b]);\n\t            _vertices.push([nextCoord.x, height, nextCoord.y]);\n\t          });\n\t\n\t          var line = {\n\t            vertices: _vertices,\n\t            colours: _colours,\n\t            verticesCount: _vertices.length\n\t          };\n\t\n\t          if (options.interactive && options.pickingId) {\n\t            // Inject picking ID\n\t            line.pickingId = options.pickingId;\n\t          }\n\t\n\t          // Convert line representation to proper attribute arrays\n\t          return PolylineLayer.ToAttributes(line);\n\t        });\n\t\n\t        resolve({\n\t          attributes: attributes,\n\t          flat: flat\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'SetMesh',\n\t    value: function SetMesh(attributes, attributeLengths, flat, style, options) {\n\t      var geometry = new _three2['default'].BufferGeometry();\n\t\n\t      for (var key in attributes) {\n\t        geometry.addAttribute(key.slice(0, -1), new _three2['default'].BufferAttribute(attributes[key], attributeLengths[key]));\n\t      }\n\t\n\t      geometry.computeBoundingBox();\n\t\n\t      var material;\n\t      if (options.polylineMaterial && options.polylineMaterial instanceof _three2['default'].Material) {\n\t        material = options.polylineMaterial;\n\t      } else {\n\t        material = new _three2['default'].LineBasicMaterial({\n\t          vertexColors: _three2['default'].VertexColors,\n\t          linewidth: style.lineWidth,\n\t          transparent: style.lineTransparent,\n\t          opacity: style.lineOpacity,\n\t          blending: style.lineBlending\n\t        });\n\t      }\n\t\n\t      var mesh;\n\t\n\t      // Pass mesh through callback, if defined\n\t      if (typeof options.onPolylineMesh === 'function') {\n\t        mesh = options.onPolylineMesh(geometry, material);\n\t      } else {\n\t        mesh = new _three2['default'].LineSegments(geometry, material);\n\t\n\t        if (style.lineRenderOrder !== undefined) {\n\t          material.depthWrite = false;\n\t          mesh.renderOrder = style.lineRenderOrder;\n\t        }\n\t\n\t        mesh.castShadow = true;\n\t        // mesh.receiveShadow = true;\n\t      }\n\t\n\t      if (options.interactive) {\n\t        material = new _enginePickingMaterial2['default']();\n\t        // material.side = THREE.BackSide;\n\t\n\t        // Make the line wider / easier to pick\n\t        material.linewidth = style.lineWidth + material.linePadding;\n\t\n\t        var pickingMesh = new _three2['default'].LineSegments(geometry, material);\n\t      }\n\t\n\t      return Promise.resolve({\n\t        mesh: mesh,\n\t        pickingMesh: pickingMesh\n\t      });\n\t    }\n\t  }, {\n\t    key: 'ToAttributes',\n\t    value: function ToAttributes(line) {\n\t      // Three components per vertex\n\t      var vertices = new Float32Array(line.verticesCount * 3);\n\t      var colours = new Float32Array(line.verticesCount * 3);\n\t\n\t      var pickingIds;\n\t      if (line.pickingId) {\n\t        // One component per vertex\n\t        pickingIds = new Float32Array(line.verticesCount);\n\t      }\n\t\n\t      var _vertices = line.vertices;\n\t      var _colour = line.colours;\n\t\n\t      var _pickingId;\n\t      if (pickingIds) {\n\t        _pickingId = line.pickingId;\n\t      }\n\t\n\t      var lastIndex = 0;\n\t\n\t      for (var i = 0; i < _vertices.length; i++) {\n\t        var ax = _vertices[i][0];\n\t        var ay = _vertices[i][1];\n\t        var az = _vertices[i][2];\n\t\n\t        var c1 = _colour[i];\n\t\n\t        vertices[lastIndex * 3 + 0] = ax;\n\t        vertices[lastIndex * 3 + 1] = ay;\n\t        vertices[lastIndex * 3 + 2] = az;\n\t\n\t        colours[lastIndex * 3 + 0] = c1[0];\n\t        colours[lastIndex * 3 + 1] = c1[1];\n\t        colours[lastIndex * 3 + 2] = c1[2];\n\t\n\t        if (pickingIds) {\n\t          pickingIds[lastIndex] = _pickingId;\n\t        }\n\t\n\t        lastIndex++;\n\t      }\n\t\n\t      var attributes = {\n\t        positions: vertices,\n\t        colors: colours\n\t      };\n\t\n\t      if (pickingIds) {\n\t        attributes.pickingIds = pickingIds;\n\t      }\n\t\n\t      return attributes;\n\t    }\n\t  }, {\n\t    key: 'isSingle',\n\t    value: function isSingle(coordinates) {\n\t      return !Array.isArray(coordinates[0][0]);\n\t    }\n\t  }]);\n\t\n\t  return PolylineLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = PolylineLayer;\n\t\n\tvar noNew = function noNew(coordinates, options) {\n\t  return new PolylineLayer(coordinates, options);\n\t};\n\t\n\texports.polylineLayer = noNew;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t// TODO: Move duplicated logic between geometry layrs into GeometryLayer\n\t\n\t// TODO: Look at ways to drop unneeded references to array buffers, etc to\n\t// reduce memory footprint\n\t\n\t// TODO: Point features may be using custom models / meshes and so an approach\n\t// needs to be found to allow these to be brokwn down into buffer attributes for\n\t// merging\n\t//\n\t// Can probably use fromGeometry() or setFromObject() from THREE.BufferGeometry\n\t// and pull out the attributes\n\t\n\t// TODO: Support sprite objects using textures\n\t\n\t// TODO: Provide option to billboard geometry so it always faces the camera\n\t\n\t// TODO: Support dynamic updating / hiding / animation of geometry\n\t//\n\t// This could be pretty hard as it's all packed away within BufferGeometry and\n\t// may even be merged by another layer (eg. GeoJSONLayer)\n\t//\n\t// How much control should this layer support? Perhaps a different or custom\n\t// layer would be better suited for animation, for example.\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _three = __webpack_require__(4);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _geoGeo = __webpack_require__(8);\n\t\n\tvar _geoGeo2 = _interopRequireDefault(_geoGeo);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\tvar _utilBuffer = __webpack_require__(50);\n\t\n\tvar _utilBuffer2 = _interopRequireDefault(_utilBuffer);\n\t\n\tvar _PolygonLayer = __webpack_require__(53);\n\t\n\tvar _PolygonLayer2 = _interopRequireDefault(_PolygonLayer);\n\t\n\tvar PointLayer = (function (_Layer) {\n\t  _inherits(PointLayer, _Layer);\n\t\n\t  function PointLayer(coordinates, options) {\n\t    _classCallCheck(this, PointLayer);\n\t\n\t    var defaults = {\n\t      output: true,\n\t      interactive: false,\n\t      // THREE.Geometry or THREE.BufferGeometry to use for point output\n\t      pointGeometry: null,\n\t      // Custom material override\n\t      //\n\t      // TODO: Should this be in the style object?\n\t      pointMaterial: null,\n\t      onPointMesh: null,\n\t      // This default style is separate to Util.GeoJSON.defaultStyle\n\t      style: {\n\t        pointColor: '#ff0000'\n\t      }\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(PointLayer.prototype), 'constructor', this).call(this, _options);\n\t\n\t    // Return coordinates as array of points so it's easy to support\n\t    // MultiPoint features (a single point would be a MultiPoint with a\n\t    // single point in the array)\n\t    this._coordinates = PointLayer.isSingle(coordinates) ? [coordinates] : coordinates;\n\t\n\t    this._flat = false;\n\t  }\n\t\n\t  _createClass(PointLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _this._setCoordinates();\n\t\n\t        if (_this._options.interactive) {\n\t          // Only add to picking mesh if this layer is controlling output\n\t          //\n\t          // Otherwise, assume another component will eventually add a mesh to\n\t          // the picking scene\n\t          if (_this.isOutput()) {\n\t            _this._pickingMesh = new _three2['default'].Object3D();\n\t            _this.addToPicking(_this._pickingMesh);\n\t          }\n\t\n\t          _this._setPickingId();\n\t          _this._addPickingEvents();\n\t        }\n\t\n\t        // Store geometry representation as instances of THREE.BufferAttribute\n\t        PointLayer.SetBufferAttributes(_this._projectedCoordinates, _this._options).then(function (result) {\n\t          _this._bufferAttributes = _utilBuffer2['default'].mergeAttributes(result.attributes);\n\t          _this._flat = result.flat;\n\t\n\t          var attributeLengths = {\n\t            positions: 3,\n\t            normals: 3,\n\t            colors: 3\n\t          };\n\t\n\t          if (_this._options.interactive) {\n\t            attributeLengths.pickingIds = 1;\n\t          }\n\t\n\t          if (_this.isOutput()) {\n\t            var style = _this._options.style;\n\t\n\t            // Set mesh if not merging elsewhere\n\t            // TODO: Dedupe with PolygonLayer as they are identical\n\t            PointLayer.SetMesh(_this._bufferAttributes, attributeLengths, _this._flat, style, _this._options, _this._world._environment._skybox).then(function (result) {\n\t              // Output mesh\n\t              _this.add(result.mesh);\n\t\n\t              if (result.pickingMesh) {\n\t                _this._pickingMesh.add(result.pickingMesh);\n\t              }\n\t            });\n\t          }\n\t\n\t          result.attributes = null;\n\t          result = null;\n\t\n\t          resolve(_this);\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t\n\t    // Return center of point as a LatLon\n\t    //\n\t    // This is used for things like placing popups / UI elements on the layer\n\t  }, {\n\t    key: 'getCenter',\n\t    value: function getCenter() {\n\t      return this._center;\n\t    }\n\t\n\t    // Return point bounds in geographic coordinates\n\t    //\n\t    // While not useful for single points, it could be useful for MultiPoint\n\t    //\n\t    // TODO: Implement getBounds()\n\t  }, {\n\t    key: 'getBounds',\n\t    value: function getBounds() {}\n\t\n\t    // Get unique ID for picking interaction\n\t  }, {\n\t    key: '_setPickingId',\n\t    value: function _setPickingId() {\n\t      this._pickingId = this._options.pickingId = this.getPickingId();\n\t    }\n\t\n\t    // Set up and re-emit interaction events\n\t  }, {\n\t    key: '_addPickingEvents',\n\t    value: function _addPickingEvents() {\n\t      var _this2 = this;\n\t\n\t      // TODO: Find a way to properly remove this listener on destroy\n\t      this._world.on('pick-click-' + this._pickingId, function (point2d, point3d, intersects) {\n\t        // Re-emit click event from the layer\n\t        _this2.emit('click', _this2, point2d, point3d, intersects);\n\t      });\n\t\n\t      this._world.on('pick-hover-' + this._pickingId, function (point2d, point3d, intersects) {\n\t        // Re-emit click event from the layer\n\t        _this2.emit('hover', _this2, point2d, point3d, intersects);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getBufferAttributes',\n\t    value: function getBufferAttributes() {\n\t      return this._bufferAttributes;\n\t    }\n\t\n\t    // Used by external components to clear some memory when the attributes\n\t    // are no longer required to be stored in this layer\n\t    //\n\t    // For example, you would want to clear the attributes here after merging them\n\t    // using something like the GeoJSONLayer\n\t  }, {\n\t    key: 'clearBufferAttributes',\n\t    value: function clearBufferAttributes() {\n\t      this._bufferAttributes = null;\n\t    }\n\t\n\t    // Used by external components to clear some memory when the coordinates\n\t    // are no longer required to be stored in this layer\n\t    //\n\t    // For example, you would want to clear the coordinates here after this\n\t    // layer is merged in something like the GeoJSONLayer\n\t  }, {\n\t    key: 'clearCoordinates',\n\t    value: function clearCoordinates() {\n\t      this._coordinates = null;\n\t      this._projectedCoordinates = null;\n\t    }\n\t  }, {\n\t    key: '_setCoordinates',\n\t\n\t    // Convert and project coordinates\n\t    //\n\t    // TODO: Calculate bounds\n\t    value: function _setCoordinates() {\n\t      this._bounds = [];\n\t      this._coordinates = this._convertCoordinates(this._coordinates);\n\t\n\t      this._projectedBounds = [];\n\t      this._projectedCoordinates = this._projectCoordinates();\n\t\n\t      this._center = this._coordinates;\n\t    }\n\t\n\t    // Recursively convert input coordinates into LatLon objects\n\t    //\n\t    // Calculate geographic bounds at the same time\n\t    //\n\t    // TODO: Calculate geographic bounds\n\t  }, {\n\t    key: '_convertCoordinates',\n\t    value: function _convertCoordinates(coordinates) {\n\t      return coordinates.map(function (coordinate) {\n\t        return (0, _geoLatLon.latLon)(coordinate[1], coordinate[0]);\n\t      });\n\t    }\n\t\n\t    // Recursively project coordinates into world positions\n\t    //\n\t    // Calculate world bounds, offset and pointScale at the same time\n\t    //\n\t    // TODO: Calculate world bounds\n\t  }, {\n\t    key: '_projectCoordinates',\n\t    value: function _projectCoordinates() {\n\t      var _this3 = this;\n\t\n\t      var _point;\n\t      return this._coordinates.map(function (latlon) {\n\t        _point = _this3._world.latLonToPoint(latlon);\n\t\n\t        // TODO: Is offset ever being used or needed?\n\t        if (!_this3._offset) {\n\t          _this3._offset = (0, _geoPoint.point)(0, 0);\n\t          _this3._offset.x = -1 * _point.x;\n\t          _this3._offset.y = -1 * _point.y;\n\t\n\t          _this3._options.pointScale = _this3._world.pointScale(latlon);\n\t        }\n\t\n\t        return _point;\n\t      });\n\t    }\n\t\n\t    // Returns true if the line is flat (has no height)\n\t  }, {\n\t    key: 'isFlat',\n\t    value: function isFlat() {\n\t      return this._flat;\n\t    }\n\t\n\t    // Returns true if coordinates refer to a single geometry\n\t    //\n\t    // For example, not coordinates for a MultiPoint GeoJSON feature\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      if (this._pickingMesh) {\n\t        // TODO: Properly dispose of picking mesh\n\t        this._pickingMesh = null;\n\t      }\n\t\n\t      this.clearCoordinates();\n\t      this.clearBufferAttributes();\n\t\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(PointLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }], [{\n\t    key: 'SetBufferAttributes',\n\t    value: function SetBufferAttributes(coordinates, options) {\n\t      return new Promise(function (resolve) {\n\t        var height = 0;\n\t\n\t        // Convert height into world units\n\t        if (options.style.pointHeight) {\n\t          height = _geoGeo2['default'].metresToWorld(options.style.pointHeight, options.pointScale);\n\t        }\n\t\n\t        var colour = new _three2['default'].Color();\n\t        colour.set(options.style.pointColor);\n\t\n\t        // Use default geometry if none has been provided or the provided geometry\n\t        // isn't valid\n\t        if (!options.pointGeometry || !options.pointGeometry instanceof _three2['default'].Geometry || !options.pointGeometry instanceof _three2['default'].BufferGeometry) {\n\t          // Debug geometry for points is a thin bar\n\t          //\n\t          // TODO: Allow point geometry to be customised / overridden\n\t          var geometryWidth = _geoGeo2['default'].metresToWorld(25, options.pointScale);\n\t          var geometryHeight = _geoGeo2['default'].metresToWorld(200, options.pointScale);\n\t          var _geometry = new _three2['default'].BoxGeometry(geometryWidth, geometryHeight, geometryWidth);\n\t\n\t          // Shift geometry up so it sits on the ground\n\t          _geometry.translate(0, geometryHeight * 0.5, 0);\n\t\n\t          // Pull attributes out of debug geometry\n\t          geometry = new _three2['default'].BufferGeometry().fromGeometry(_geometry);\n\t        } else {\n\t          if (options.geometry instanceof _three2['default'].BufferGeometry) {\n\t            geometry = options.pointGeometry;\n\t          } else {\n\t            geometry = new _three2['default'].BufferGeometry().fromGeometry(options.pointGeometry);\n\t          }\n\t        }\n\t\n\t        var attributes = coordinates.map(function (coordinate) {\n\t          var _vertices = [];\n\t          var _normals = [];\n\t          var _colours = [];\n\t\n\t          var _geometry = geometry.clone();\n\t          _geometry.translate(coordinate.x, height, coordinate.y);\n\t\n\t          var _vertices = _geometry.attributes.position.clone().array;\n\t          var _normals = _geometry.attributes.normal.clone().array;\n\t          var _colours = _geometry.attributes.color.clone().array;\n\t\n\t          for (var i = 0; i < _colours.length; i += 3) {\n\t            _colours[i] = colour.r;\n\t            _colours[i + 1] = colour.g;\n\t            _colours[i + 2] = colour.b;\n\t          }\n\t\n\t          var _point = {\n\t            positions: _vertices,\n\t            normals: _normals,\n\t            colors: _colours\n\t          };\n\t\n\t          if (options.interactive && options.pickingId) {\n\t            // Inject picking ID\n\t            _point.pickingId = options.pickingId;\n\t          }\n\t\n\t          return _point;\n\t        });\n\t\n\t        resolve({\n\t          attributes: attributes,\n\t          flat: false\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'SetMesh',\n\t    value: function SetMesh(attributes, attributeLengths, flat, style, options, skybox) {\n\t      var geometry = new _three2['default'].BufferGeometry();\n\t\n\t      for (var key in attributes) {\n\t        geometry.addAttribute(key.slice(0, -1), new _three2['default'].BufferAttribute(attributes[key], attributeLengths[key]));\n\t      }\n\t\n\t      geometry.computeBoundingBox();\n\t\n\t      var material;\n\t      if (options.pointMaterial && options.pointMaterial instanceof _three2['default'].Material) {\n\t        material = options.pointMaterial;\n\t      } else if (!skybox) {\n\t        material = new _three2['default'].MeshPhongMaterial({\n\t          vertexColors: _three2['default'].VertexColors,\n\t          // side: THREE.BackSide,\n\t          transparent: style.transparent,\n\t          opacity: style.opacity,\n\t          blending: style.blending\n\t        });\n\t      } else {\n\t        material = new _three2['default'].MeshStandardMaterial({\n\t          vertexColors: _three2['default'].VertexColors,\n\t          // side: THREE.BackSide,\n\t          transparent: style.transparent,\n\t          opacity: style.opacity,\n\t          blending: style.blending\n\t        });\n\t        material.roughness = 1;\n\t        material.metalness = 0.1;\n\t        material.envMapIntensity = 3;\n\t        material.envMap = skybox.getRenderTarget();\n\t      }\n\t\n\t      var mesh;\n\t\n\t      // Pass mesh through callback, if defined\n\t      if (typeof options.onPolygonMesh === 'function') {\n\t        mesh = options.onPolygonMesh(geometry, material);\n\t      } else {\n\t        mesh = new _three2['default'].Mesh(geometry, material);\n\t\n\t        mesh.castShadow = true;\n\t        mesh.receiveShadow = true;\n\t      }\n\t\n\t      if (flat) {\n\t        material.depthWrite = false;\n\t        mesh.renderOrder = 4;\n\t      }\n\t\n\t      if (options.interactive) {\n\t        material = new _enginePickingMaterial2['default']();\n\t        material.side = _three2['default'].BackSide;\n\t\n\t        var pickingMesh = new _three2['default'].Mesh(geometry, material);\n\t      }\n\t\n\t      return Promise.resolve({\n\t        mesh: mesh,\n\t        pickingMesh: pickingMesh\n\t      });\n\t    }\n\t  }, {\n\t    key: 'isSingle',\n\t    value: function isSingle(coordinates) {\n\t      return !Array.isArray(coordinates[0]);\n\t    }\n\t  }]);\n\t\n\t  return PointLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = PointLayer;\n\t\n\tvar noNew = function noNew(coordinates, options) {\n\t  return new PointLayer(coordinates, options);\n\t};\n\t\n\texports.pointLayer = noNew;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Layer2 = __webpack_require__(11);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _reqwest = __webpack_require__(42);\n\t\n\tvar _reqwest2 = _interopRequireDefault(_reqwest);\n\t\n\tvar _utilGeoJSON = __webpack_require__(44);\n\t\n\tvar _utilGeoJSON2 = _interopRequireDefault(_utilGeoJSON);\n\t\n\tvar _utilWorker = __webpack_require__(57);\n\t\n\tvar _utilWorker2 = _interopRequireDefault(_utilWorker);\n\t\n\tvar _utilBuffer = __webpack_require__(50);\n\t\n\tvar _utilBuffer2 = _interopRequireDefault(_utilBuffer);\n\t\n\tvar _utilStringify = __webpack_require__(60);\n\t\n\tvar _utilStringify2 = _interopRequireDefault(_utilStringify);\n\t\n\tvar _geometryPolygonLayer = __webpack_require__(53);\n\t\n\tvar _geometryPolygonLayer2 = _interopRequireDefault(_geometryPolygonLayer);\n\t\n\tvar _geometryPolylineLayer = __webpack_require__(54);\n\t\n\tvar _geometryPolylineLayer2 = _interopRequireDefault(_geometryPolylineLayer);\n\t\n\tvar _geometryPointLayer = __webpack_require__(55);\n\t\n\tvar _geometryPointLayer2 = _interopRequireDefault(_geometryPointLayer);\n\t\n\tvar _geoLatLon = __webpack_require__(9);\n\t\n\tvar _geoPoint = __webpack_require__(10);\n\t\n\tvar _geoGeo = __webpack_require__(8);\n\t\n\tvar _geoGeo2 = _interopRequireDefault(_geoGeo);\n\t\n\tvar _enginePickingMaterial = __webpack_require__(51);\n\t\n\tvar _enginePickingMaterial2 = _interopRequireDefault(_enginePickingMaterial);\n\t\n\t// TODO: Allow filter method to be run inside a worker to improve performance\n\t// TODO: Allow onEachFeature method to be run inside a worker to improve performance\n\t\n\tvar GeoJSONWorkerLayer = (function (_Layer) {\n\t  _inherits(GeoJSONWorkerLayer, _Layer);\n\t\n\t  function GeoJSONWorkerLayer(geojson, options) {\n\t    _classCallCheck(this, GeoJSONWorkerLayer);\n\t\n\t    var defaults = {\n\t      topojson: false,\n\t      style: _utilGeoJSON2['default'].defaultStyle,\n\t      onEachFeature: null,\n\t      onEachFeatureWorker: null,\n\t      onAddAttributes: null,\n\t      interactive: false,\n\t      pointGeometry: null,\n\t      onClick: null,\n\t      headers: {}\n\t    };\n\t\n\t    var _options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    if (typeof options.style === 'object') {\n\t      _options.style = (0, _lodashAssign2['default'])({}, defaults.style, options.style);\n\t    }\n\t\n\t    _get(Object.getPrototypeOf(GeoJSONWorkerLayer.prototype), 'constructor', this).call(this, _options);\n\t\n\t    this._aborted = false;\n\t    this._geojson = geojson;\n\t  }\n\t\n\t  _createClass(GeoJSONWorkerLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      if (this._options.interactive) {\n\t        // Worker layer always controls output to add a picking mesh\n\t        this._pickingMesh = new THREE.Object3D();\n\t      }\n\t\n\t      // Process GeoJSON\n\t      return this._process(this._geojson)['catch'](function (err) {\n\t        console.error(err);\n\t      });\n\t    }\n\t\n\t    // Use workers to request and process GeoJSON, returning data structure\n\t    // containing geometry and any supplementary data for output\n\t  }, {\n\t    key: '_process',\n\t    value: function _process(_geojson) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var style = _this._options.style;\n\t\n\t        // TODO: Convert to buffer and use transferrable objects\n\t        if (typeof _this._options.style === 'function') {\n\t          style = _utilStringify2['default'].functionToString(_this._options.style);\n\t        }\n\t\n\t        var pointGeometry = _this._options.pointGeometry;\n\t\n\t        // TODO: Convert to buffer and use transferrable objects\n\t        if (typeof _this._options.pointGeometry === 'function') {\n\t          pointGeometry = _utilStringify2['default'].functionToString(_this._options.pointGeometry);\n\t        }\n\t\n\t        var geojson = _geojson;\n\t        var transferrables = [];\n\t\n\t        if (typeof geojson !== 'string') {\n\t          _this._geojson = geojson = _utilBuffer2['default'].stringToUint8Array(JSON.stringify(geojson));\n\t          transferrables.push(geojson.buffer);\n\t          _this._execWorker(geojson, _this._options.topojson, _this._world._originPoint, style, _this._options.interactive, pointGeometry, transferrables).then(function () {\n\t            resolve();\n\t          })['catch'](reject);\n\t        } else if (typeof _this._options.filter === 'function' || typeof _this._options.onEachFeature === 'function') {\n\t          GeoJSONWorkerLayer.RequestGeoJSON(geojson).then(function (res) {\n\t            // if (this._aborted) {\n\t            //   resolve();\n\t            //   return;\n\t            // }\n\t\n\t            var fc = _utilGeoJSON2['default'].collectFeatures(res, _this._options.topojson);\n\t            var features = fc.features;\n\t\n\t            // Run filter, if provided\n\t            if (_this._options.filter) {\n\t              fc.features = features.filter(_this._options.filter);\n\t            }\n\t\n\t            if (_this._options.onEachFeature) {\n\t              var feature;\n\t              for (var i = 0; i < features.length; i++) {\n\t                feature = features[i];\n\t                _this._options.onEachFeature(feature);\n\t              };\n\t            }\n\t\n\t            _this._geojson = geojson = _utilBuffer2['default'].stringToUint8Array(JSON.stringify(fc));\n\t            transferrables.push(geojson.buffer);\n\t\n\t            _this._execWorker(geojson, false, _this._options.headers, _this._world._originPoint, style, _this._options.interactive, pointGeometry, transferrables).then(function () {\n\t              resolve();\n\t            })['catch'](reject);\n\t          });\n\t        } else {\n\t          _this._execWorker(geojson, _this._options.topojson, _this._options.headers, _this._world._originPoint, style, _this._options.interactive, pointGeometry, transferrables).then(function () {\n\t            resolve();\n\t          })['catch'](reject);\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: '_execWorker',\n\t    value: function _execWorker(geojson, topojson, headers, originPoint, style, interactive, pointGeometry, transferrables) {\n\t      var _this2 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        // console.time('Worker round trip');\n\t\n\t        _utilWorker2['default'].exec('GeoJSONWorkerLayer.Process', [geojson, topojson, headers, originPoint, style, interactive, pointGeometry], transferrables).then(function (results) {\n\t          // console.timeEnd('Worker round trip');\n\t\n\t          // if (this._aborted) {\n\t          //   resolve();\n\t          //   return;\n\t          // }\n\t\n\t          var processPromises = [];\n\t\n\t          if (results.polygons) {\n\t            processPromises.push(_this2._processPolygonResults(results.polygons));\n\t          }\n\t\n\t          if (results.polylines) {\n\t            processPromises.push(_this2._processPolylineResults(results.polylines));\n\t          }\n\t\n\t          if (results.points) {\n\t            processPromises.push(_this2._processPointResults(results.points));\n\t          }\n\t\n\t          if (processPromises.length > 0) {\n\t            Promise.all(processPromises).then(function () {\n\t              resolve();\n\t            })['catch'](reject);\n\t          } else {\n\t            resolve();\n\t          }\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t\n\t    // TODO: Dedupe with polyline method\n\t  }, {\n\t    key: '_processPolygonResults',\n\t    value: function _processPolygonResults(results) {\n\t      var _this3 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var splitPositions = _utilBuffer2['default'].splitFloat32Array(results.attributes.positions);\n\t        var splitNormals = _utilBuffer2['default'].splitFloat32Array(results.attributes.normals);\n\t        var splitColors = _utilBuffer2['default'].splitFloat32Array(results.attributes.colors);\n\t        var splitTops = _utilBuffer2['default'].splitFloat32Array(results.attributes.tops);\n\t\n\t        var splitOutlinePositions;\n\t        var splitOutlineColors;\n\t\n\t        if (results.outlineAttributes) {\n\t          splitOutlinePositions = _utilBuffer2['default'].splitFloat32Array(results.outlineAttributes.positions);\n\t          splitOutlineColors = _utilBuffer2['default'].splitFloat32Array(results.outlineAttributes.colors);\n\t        }\n\t\n\t        var splitProperties;\n\t        if (results.properties) {\n\t          splitProperties = _utilBuffer2['default'].splitUint8Array(results.properties);\n\t        }\n\t\n\t        var flats = results.flats;\n\t\n\t        var objects = [];\n\t        var outlineObjects = [];\n\t\n\t        var obj;\n\t        var pickingId;\n\t        var pickingIds;\n\t        var properties;\n\t\n\t        var polygonAttributeLengths = {\n\t          positions: 3,\n\t          normals: 3,\n\t          colors: 3,\n\t          tops: 1\n\t        };\n\t\n\t        var polygonOutlineAttributeLengths = {\n\t          positions: 3,\n\t          colors: 3\n\t        };\n\t\n\t        for (var i = 0; i < splitPositions.length; i++) {\n\t          if (splitProperties && splitProperties[i]) {\n\t            properties = JSON.parse(_utilBuffer2['default'].uint8ArrayToString(splitProperties[i]));\n\t          } else {\n\t            properties = {};\n\t          }\n\t\n\t          // WORKERS: obj.attributes should actually an array of polygons for\n\t          // the feature, though the current logic isn't aware of that\n\t          obj = {\n\t            attributes: [{\n\t              positions: splitPositions[i],\n\t              normals: splitNormals[i],\n\t              colors: splitColors[i],\n\t              tops: splitTops[i]\n\t            }],\n\t            properties: properties,\n\t            flat: flats[i]\n\t          };\n\t\n\t          // WORKERS: If interactive, generate unique ID for each feature, create\n\t          // the buffer attributes and set up event listeners\n\t          if (_this3._options.interactive) {\n\t            pickingId = _this3.getPickingId();\n\t\n\t            pickingIds = new Float32Array(splitPositions[i].length / 3);\n\t            _utilBuffer2['default'].fillTypedArray(pickingIds, pickingId);\n\t\n\t            obj.attributes[0].pickingIds = pickingIds;\n\t\n\t            polygonAttributeLengths.pickingIds = 1;\n\t\n\t            _this3._addPicking(pickingId, properties);\n\t          }\n\t\n\t          // TODO: Make this specific to polygon attributes\n\t          if (typeof _this3._options.onAddAttributes === 'function') {\n\t            var customAttributes = _this3._options.onAddAttributes(obj.attributes[0], properties);\n\t            var customAttribute;\n\t            for (var key in customAttributes) {\n\t              customAttribute = customAttributes[key];\n\t              obj.attributes[0][key] = customAttribute.value;\n\t              polygonAttributeLengths[key] = customAttribute.length;\n\t            }\n\t          }\n\t\n\t          objects.push(obj);\n\t        }\n\t\n\t        for (var i = 0; i < splitOutlinePositions.length; i++) {\n\t          obj = {\n\t            attributes: [{\n\t              positions: splitOutlinePositions[i],\n\t              colors: splitOutlineColors[i]\n\t            }],\n\t            flat: true\n\t          };\n\t\n\t          outlineObjects.push(obj);\n\t        }\n\t\n\t        var polygonAttributes = [];\n\t        var polygonOutlineAttributes = [];\n\t\n\t        var polygonFlat = true;\n\t\n\t        for (var i = 0; i < objects.length; i++) {\n\t          obj = objects[i];\n\t\n\t          // TODO: Work out why obj.flat is rarely set to something other than\n\t          // true or false. Potentially undefined.\n\t          if (polygonFlat && obj.flat === false) {\n\t            polygonFlat = false;\n\t          }\n\t\n\t          var bufferAttributes = _utilBuffer2['default'].mergeAttributes(obj.attributes);\n\t          polygonAttributes.push(bufferAttributes);\n\t        };\n\t\n\t        for (var i = 0; i < outlineObjects.length; i++) {\n\t          obj = outlineObjects[i];\n\t\n\t          var bufferAttributes = _utilBuffer2['default'].mergeAttributes(obj.attributes);\n\t          polygonOutlineAttributes.push(bufferAttributes);\n\t        };\n\t\n\t        var outputPromises = [];\n\t\n\t        var style;\n\t\n\t        if (polygonAttributes.length > 0) {\n\t          var mergedPolygonAttributes = _utilBuffer2['default'].mergeAttributes(polygonAttributes);\n\t\n\t          // TODO: Make this work when style is a function per feature\n\t          style = typeof _this3._options.style === 'function' ? _this3._options.style(objects[0]) : _this3._options.style;\n\t          style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t          outputPromises.push(_this3._setPolygonMesh(mergedPolygonAttributes, polygonAttributeLengths, style, polygonFlat));\n\t        }\n\t\n\t        if (polygonOutlineAttributes.length > 0) {\n\t          var mergedPolygonOutlineAttributes = _utilBuffer2['default'].mergeAttributes(polygonOutlineAttributes);\n\t\n\t          style = typeof _this3._options.style === 'function' ? _this3._options.style(objects[0]) : _this3._options.style;\n\t          style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t          if (style.outlineRenderOrder !== undefined) {\n\t            style.lineRenderOrder = style.outlineRenderOrder;\n\t          } else {\n\t            style.lineRenderOrder = style.renderOrder ? style.renderOrder + 1 : 4;\n\t          }\n\t\n\t          if (style.outlineWidth) {\n\t            style.lineWidth = style.outlineWidth;\n\t          }\n\t\n\t          outputPromises.push(_this3._setPolylineMesh(mergedPolygonOutlineAttributes, polygonOutlineAttributeLengths, style, true));\n\t        }\n\t\n\t        Promise.all(outputPromises).then(function (results) {\n\t          var _results = _slicedToArray(results, 2);\n\t\n\t          var polygonResult = _results[0];\n\t          var outlineResult = _results[1];\n\t\n\t          if (polygonResult) {\n\t            _this3._polygonMesh = polygonResult.mesh;\n\t            _this3.add(_this3._polygonMesh);\n\t\n\t            if (polygonResult.pickingMesh) {\n\t              _this3._pickingMesh.add(polygonResult.pickingMesh);\n\t            }\n\t          }\n\t\n\t          if (outlineResult) {\n\t            _this3.add(outlineResult.mesh);\n\t          }\n\t\n\t          resolve();\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t\n\t    // TODO: Dedupe with polygon method\n\t  }, {\n\t    key: '_processPolylineResults',\n\t    value: function _processPolylineResults(results) {\n\t      var _this4 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var splitPositions = _utilBuffer2['default'].splitFloat32Array(results.attributes.positions);\n\t        var splitColors = _utilBuffer2['default'].splitFloat32Array(results.attributes.colors);\n\t\n\t        var splitProperties;\n\t        if (results.properties) {\n\t          splitProperties = _utilBuffer2['default'].splitUint8Array(results.properties);\n\t        }\n\t\n\t        var flats = results.flats;\n\t\n\t        var objects = [];\n\t        var obj;\n\t        var pickingId;\n\t        var pickingIds;\n\t        var properties;\n\t\n\t        var polylineAttributeLengths = {\n\t          positions: 3,\n\t          colors: 3\n\t        };\n\t\n\t        for (var i = 0; i < splitPositions.length; i++) {\n\t          if (splitProperties && splitProperties[i]) {\n\t            properties = JSON.parse(_utilBuffer2['default'].uint8ArrayToString(splitProperties[i]));\n\t          } else {\n\t            properties = {};\n\t          }\n\t\n\t          // WORKERS: obj.attributes should actually an array of polygons for\n\t          // the feature, though the current logic isn't aware of that\n\t          obj = {\n\t            attributes: [{\n\t              positions: splitPositions[i],\n\t              colors: splitColors[i]\n\t            }],\n\t            properties: properties,\n\t            flat: flats[i]\n\t          };\n\t\n\t          // WORKERS: If interactive, generate unique ID for each feature, create\n\t          // the buffer attributes and set up event listeners\n\t          if (_this4._options.interactive) {\n\t            pickingId = _this4.getPickingId();\n\t\n\t            pickingIds = new Float32Array(splitPositions[i].length / 3);\n\t            _utilBuffer2['default'].fillTypedArray(pickingIds, pickingId);\n\t\n\t            obj.attributes[0].pickingIds = pickingIds;\n\t\n\t            polylineAttributeLengths.pickingIds = 1;\n\t\n\t            _this4._addPicking(pickingId, properties);\n\t          }\n\t\n\t          // TODO: Make this specific to polyline attributes\n\t          if (typeof _this4._options.onAddAttributes === 'function') {\n\t            var customAttributes = _this4._options.onAddAttributes(obj.attributes[0], properties);\n\t            var customAttribute;\n\t            for (var key in customAttributes) {\n\t              customAttribute = customAttributes[key];\n\t              obj.attributes[0][key] = customAttribute.value;\n\t              polylineAttributeLengths[key] = customAttribute.length;\n\t            }\n\t          }\n\t\n\t          objects.push(obj);\n\t        }\n\t\n\t        var polylineAttributes = [];\n\t\n\t        var polylineFlat = true;\n\t\n\t        for (var i = 0; i < objects.length; i++) {\n\t          obj = objects[i];\n\t\n\t          if (polylineFlat && !obj.flat) {\n\t            polylineFlat = false;\n\t          }\n\t\n\t          var bufferAttributes = _utilBuffer2['default'].mergeAttributes(obj.attributes);\n\t          polylineAttributes.push(bufferAttributes);\n\t        };\n\t\n\t        if (polylineAttributes.length > 0) {\n\t          var mergedPolylineAttributes = _utilBuffer2['default'].mergeAttributes(polylineAttributes);\n\t\n\t          // TODO: Make this work when style is a function per feature\n\t          var style = typeof _this4._options.style === 'function' ? _this4._options.style(objects[0]) : _this4._options.style;\n\t          style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t          _this4._setPolylineMesh(mergedPolylineAttributes, polylineAttributeLengths, style, polylineFlat).then(function (result) {\n\t            _this4._polylineMesh = result.mesh;\n\t            _this4.add(_this4._polylineMesh);\n\t\n\t            if (result.pickingMesh) {\n\t              _this4._pickingMesh.add(result.pickingMesh);\n\t            }\n\t\n\t            resolve();\n\t          })['catch'](reject);\n\t        } else {\n\t          resolve();\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: '_processPointResults',\n\t    value: function _processPointResults(results) {\n\t      var _this5 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var splitPositions = _utilBuffer2['default'].splitFloat32Array(results.attributes.positions);\n\t        var splitNormals = _utilBuffer2['default'].splitFloat32Array(results.attributes.normals);\n\t        var splitColors = _utilBuffer2['default'].splitFloat32Array(results.attributes.colors);\n\t\n\t        var splitProperties;\n\t        if (results.properties) {\n\t          splitProperties = _utilBuffer2['default'].splitUint8Array(results.properties);\n\t        }\n\t\n\t        var flats = results.flats;\n\t\n\t        var objects = [];\n\t        var obj;\n\t        var pickingId;\n\t        var pickingIds;\n\t        var properties;\n\t\n\t        var pointAttributeLengths = {\n\t          positions: 3,\n\t          normals: 3,\n\t          colors: 3\n\t        };\n\t\n\t        for (var i = 0; i < splitPositions.length; i++) {\n\t          if (splitProperties && splitProperties[i]) {\n\t            properties = JSON.parse(_utilBuffer2['default'].uint8ArrayToString(splitProperties[i]));\n\t          } else {\n\t            properties = {};\n\t          }\n\t\n\t          // WORKERS: obj.attributes should actually an array of polygons for\n\t          // the feature, though the current logic isn't aware of that\n\t          obj = {\n\t            attributes: [{\n\t              positions: splitPositions[i],\n\t              normals: splitNormals[i],\n\t              colors: splitColors[i]\n\t            }],\n\t            properties: properties,\n\t            flat: flats[i]\n\t          };\n\t\n\t          // WORKERS: If interactive, generate unique ID for each feature, create\n\t          // the buffer attributes and set up event listeners\n\t          if (_this5._options.interactive) {\n\t            pickingId = _this5.getPickingId();\n\t\n\t            pickingIds = new Float32Array(splitPositions[i].length / 3);\n\t            _utilBuffer2['default'].fillTypedArray(pickingIds, pickingId);\n\t\n\t            obj.attributes[0].pickingIds = pickingIds;\n\t\n\t            pointAttributeLengths.pickingIds = 1;\n\t\n\t            _this5._addPicking(pickingId, properties);\n\t          }\n\t\n\t          // TODO: Make this specific to polygon attributes\n\t          if (typeof _this5._options.onAddAttributes === 'function') {\n\t            var customAttributes = _this5._options.onAddAttributes(obj.attributes[0], properties);\n\t            var customAttribute;\n\t            for (var key in customAttributes) {\n\t              customAttribute = customAttributes[key];\n\t              obj.attributes[0][key] = customAttribute.value;\n\t              pointAttributeLengths[key] = customAttribute.length;\n\t            }\n\t          }\n\t\n\t          objects.push(obj);\n\t        }\n\t\n\t        var pointAttributes = [];\n\t\n\t        var pointFlat = true;\n\t\n\t        for (var i = 0; i < objects.length; i++) {\n\t          obj = objects[i];\n\t\n\t          if (pointFlat && !obj.flat) {\n\t            pointFlat = false;\n\t          }\n\t\n\t          var bufferAttributes = _utilBuffer2['default'].mergeAttributes(obj.attributes);\n\t          pointAttributes.push(bufferAttributes);\n\t        };\n\t\n\t        if (pointAttributes.length > 0) {\n\t          var mergedPointAttributes = _utilBuffer2['default'].mergeAttributes(pointAttributes);\n\t\n\t          // TODO: Make this work when style is a function per feature\n\t          var style = typeof _this5._options.style === 'function' ? _this5._options.style(objects[0]) : _this5._options.style;\n\t          style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, style);\n\t\n\t          _this5._setPointMesh(mergedPointAttributes, pointAttributeLengths, style, pointFlat).then(function (result) {\n\t            _this5._pointMesh = result.mesh;\n\t            _this5.add(_this5._pointMesh);\n\t\n\t            if (result.pickingMesh) {\n\t              _this5._pickingMesh.add(result.pickingMesh);\n\t            }\n\t\n\t            resolve();\n\t          })['catch'](reject);\n\t        } else {\n\t          resolve();\n\t        }\n\t      });\n\t    }\n\t\n\t    // TODO: At some point this needs to return all the features to the main thread\n\t    // so it can generate meshes and output to the scene, as well as perhaps creating\n\t    // individual layers / components for each feature to track things like picking\n\t    // and properties\n\t    //\n\t    // TODO: Find a way so the origin point isn't needed to be passed in as it\n\t    // feels a bit messy and against the idea of a static Geo class\n\t    //\n\t    // TODO: Support passing custom geometry for point layers\n\t  }, {\n\t    key: '_setPolygonMesh',\n\t\n\t    // Create and store mesh from buffer attributes\n\t    //\n\t    // Could make this an abstract method for each geometry layer\n\t    value: function _setPolygonMesh(attributes, attributeLengths, style, flat) {\n\t      if (!this._world) {\n\t        return Promise.reject();\n\t      }\n\t\n\t      return _geometryPolygonLayer2['default'].SetMesh(attributes, attributeLengths, flat, style, this._options, this._world._environment._skybox);\n\t    }\n\t  }, {\n\t    key: '_setPolylineMesh',\n\t    value: function _setPolylineMesh(attributes, attributeLengths, style, flat) {\n\t      if (!this._world) {\n\t        return Promise.reject();\n\t      }\n\t\n\t      return _geometryPolylineLayer2['default'].SetMesh(attributes, attributeLengths, flat, style, this._options);\n\t    }\n\t  }, {\n\t    key: '_setPointMesh',\n\t    value: function _setPointMesh(attributes, attributeLengths, style, flat) {\n\t      if (!this._world) {\n\t        return Promise.reject();\n\t      }\n\t\n\t      return _geometryPointLayer2['default'].SetMesh(attributes, attributeLengths, flat, style, this._options, this._world._environment._skybox);\n\t    }\n\t\n\t    // Set up and re-emit interaction events\n\t  }, {\n\t    key: '_addPicking',\n\t    value: function _addPicking(pickingId, properties) {\n\t      var _this6 = this;\n\t\n\t      this._world.on('pick-click-' + pickingId, function (pickingId, point2d, point3d, intersects) {\n\t        _this6._world.emit('click', _this6, properties, point2d, point3d);\n\t      });\n\t\n\t      this._world.on('pick-hover-' + pickingId, function (pickingId, point2d, point3d, intersects) {\n\t        _this6._world.emit('hover', _this6, properties, point2d, point3d);\n\t      });\n\t    }\n\t\n\t    // TODO: Finish cleanup\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      // Run common destruction logic from parent\n\t      _get(Object.getPrototypeOf(GeoJSONWorkerLayer.prototype), 'destroy', this).call(this);\n\t    }\n\t  }], [{\n\t    key: 'Process',\n\t    value: function Process(geojson, topojson, headers, originPoint, _style, _properties, _pointGeometry) {\n\t      return new Promise(function (resolve, reject) {\n\t        GeoJSONWorkerLayer.ProcessGeoJSON(geojson, headers).then(function (res) {\n\t          // Collects features into a single FeatureCollection\n\t          //\n\t          // Also converts TopoJSON to GeoJSON if instructed\n\t          var geojson = _utilGeoJSON2['default'].collectFeatures(res, topojson);\n\t\n\t          // TODO: Check that GeoJSON is valid / usable\n\t\n\t          var features = geojson.features;\n\t\n\t          // TODO: Run filter, if provided (must be static)\n\t\n\t          var pointScale;\n\t          var polygons = [];\n\t          var polylines = [];\n\t          var points = [];\n\t\n\t          // Deserialise style function if provided\n\t          if (typeof _style === 'string') {\n\t            _style = _utilStringify2['default'].stringToFunction(_style);\n\t          }\n\t\n\t          // Assume that a style won't be set per feature\n\t          var style = _style;\n\t\n\t          var pointGeometry;\n\t          // Deserialise pointGeometry function if provided\n\t          if (typeof _pointGeometry === 'string') {\n\t            pointGeometry = _utilStringify2['default'].stringToFunction(_pointGeometry);\n\t          }\n\t\n\t          var feature;\n\t          for (var i = 0; i < features.length; i++) {\n\t            feature = features[i];\n\t\n\t            var geometry = feature.geometry;\n\t            var coordinates = geometry.coordinates ? geometry.coordinates : null;\n\t\n\t            if (!coordinates || !geometry) {\n\t              return;\n\t            }\n\t\n\t            // Get per-feature style object, if provided\n\t            if (typeof _style === 'function') {\n\t              style = (0, _lodashAssign2['default'])({}, _utilGeoJSON2['default'].defaultStyle, _style(feature));\n\t              // console.log(feature, style);\n\t            }\n\t\n\t            if (geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\n\t              coordinates = _geometryPolygonLayer2['default'].isSingle(coordinates) ? [coordinates] : coordinates;\n\t\n\t              var converted = coordinates.map(function (_coordinates) {\n\t                return _coordinates.map(function (ring) {\n\t                  return ring.map(function (coordinate) {\n\t                    return (0, _geoLatLon.latLon)(coordinate[1], coordinate[0]);\n\t                  });\n\t                });\n\t              });\n\t\n\t              var point;\n\t              var projected = converted.map(function (_coordinates) {\n\t                return _coordinates.map(function (ring) {\n\t                  return ring.map(function (latlon) {\n\t                    point = _geoGeo2['default'].latLonToPoint(latlon)._subtract(originPoint);\n\t\n\t                    if (!pointScale) {\n\t                      pointScale = _geoGeo2['default'].pointScale(latlon);\n\t                    }\n\t\n\t                    return point;\n\t                  });\n\t                });\n\t              });\n\t\n\t              var polygon = {\n\t                projected: projected,\n\t                options: {\n\t                  pointScale: pointScale,\n\t                  style: style\n\t                }\n\t              };\n\t\n\t              if (_properties) {\n\t                polygon.properties = feature.properties;\n\t              }\n\t\n\t              polygons.push(polygon);\n\t            }\n\t\n\t            if (geometry.type === 'LineString' || geometry.type === 'MultiLineString') {\n\t              coordinates = _geometryPolylineLayer2['default'].isSingle(coordinates) ? [coordinates] : coordinates;\n\t\n\t              var converted = coordinates.map(function (_coordinates) {\n\t                return _coordinates.map(function (coordinate) {\n\t                  return (0, _geoLatLon.latLon)(coordinate[1], coordinate[0]);\n\t                });\n\t              });\n\t\n\t              var point;\n\t              var projected = converted.map(function (_coordinates) {\n\t                return _coordinates.map(function (latlon) {\n\t                  point = _geoGeo2['default'].latLonToPoint(latlon)._subtract(originPoint);\n\t\n\t                  if (!pointScale) {\n\t                    pointScale = _geoGeo2['default'].pointScale(latlon);\n\t                  }\n\t\n\t                  return point;\n\t                });\n\t              });\n\t\n\t              var polyline = {\n\t                projected: projected,\n\t                options: {\n\t                  pointScale: pointScale,\n\t                  style: style\n\t                }\n\t              };\n\t\n\t              if (_properties) {\n\t                polyline.properties = feature.properties;\n\t              }\n\t\n\t              polylines.push(polyline);\n\t            }\n\t\n\t            if (geometry.type === 'Point' || geometry.type === 'MultiPoint') {\n\t              coordinates = _geometryPointLayer2['default'].isSingle(coordinates) ? [coordinates] : coordinates;\n\t\n\t              var converted = coordinates.map(function (coordinate) {\n\t                return (0, _geoLatLon.latLon)(coordinate[1], coordinate[0]);\n\t              });\n\t\n\t              var point;\n\t              var projected = converted.map(function (latlon) {\n\t                point = _geoGeo2['default'].latLonToPoint(latlon)._subtract(originPoint);\n\t\n\t                if (!pointScale) {\n\t                  pointScale = _geoGeo2['default'].pointScale(latlon);\n\t                }\n\t\n\t                return point;\n\t              });\n\t\n\t              var point = {\n\t                projected: projected,\n\t                options: {\n\t                  pointGeometry: pointGeometry(feature),\n\t                  pointScale: pointScale,\n\t                  style: style\n\t                }\n\t              };\n\t\n\t              if (_properties) {\n\t                point.properties = feature.properties;\n\t              }\n\t\n\t              points.push(point);\n\t            }\n\t          };\n\t\n\t          var polygonBufferPromises = [];\n\t          var polylineBufferPromises = [];\n\t          var pointBufferPromises = [];\n\t\n\t          var polygon;\n\t          for (var i = 0; i < polygons.length; i++) {\n\t            polygon = polygons[i];\n\t            polygonBufferPromises.push(_geometryPolygonLayer2['default'].SetBufferAttributes(polygon.projected, polygon.options));\n\t          };\n\t\n\t          var polyline;\n\t          for (var i = 0; i < polylines.length; i++) {\n\t            polyline = polylines[i];\n\t            polylineBufferPromises.push(_geometryPolylineLayer2['default'].SetBufferAttributes(polyline.projected, polyline.options));\n\t          };\n\t\n\t          var point;\n\t          for (var i = 0; i < points.length; i++) {\n\t            point = points[i];\n\t            pointBufferPromises.push(_geometryPointLayer2['default'].SetBufferAttributes(point.projected, point.options));\n\t          };\n\t\n\t          var data = {};\n\t          var transferrables = [];\n\t\n\t          // TODO: Make this work with polylines too\n\t          // TODO: Make this so it's not a nest of promises\n\t          GeoJSONWorkerLayer.ProcessPolygons(polygonBufferPromises, polygons, _properties).then(function (result) {\n\t            data.polygons = result.data;\n\t            transferrables = transferrables.concat(result.transferrables);\n\t\n\t            GeoJSONWorkerLayer.ProcessPolylines(polylineBufferPromises, polylines, _properties).then(function (result) {\n\t              data.polylines = result.data;\n\t              transferrables = transferrables.concat(result.transferrables);\n\t\n\t              GeoJSONWorkerLayer.ProcessPoints(pointBufferPromises, points, _properties).then(function (result) {\n\t                data.points = result.data;\n\t                transferrables = transferrables.concat(result.transferrables);\n\t\n\t                resolve({\n\t                  data: data,\n\t                  transferrables: transferrables\n\t                });\n\t              });\n\t            });\n\t          });\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'ProcessPolygons',\n\t    value: function ProcessPolygons(polygonPromises, polygons, _properties) {\n\t      return new Promise(function (resolve, reject) {\n\t        Promise.all(polygonPromises).then(function (results) {\n\t          var transferrables = [];\n\t\n\t          var positions = [];\n\t          var normals = [];\n\t          var colors = [];\n\t          var tops = [];\n\t\n\t          var outlinePositions = [];\n\t          var outlineColors = [];\n\t\n\t          var properties = [];\n\t\n\t          var flats = [];\n\t          var polygon;\n\t\n\t          var result;\n\t          for (var i = 0; i < results.length; i++) {\n\t            result = results[i];\n\t\n\t            polygon = polygons[i];\n\t\n\t            // WORKERS: Making this a typed array will speed up transfer time\n\t            // As things stand this adds on a few milliseconds\n\t            flats.push(result.flat);\n\t\n\t            // WORKERS: result.attributes is actually an array of polygons for each\n\t            // feature, though the current logic isn't keeping these all together\n\t\n\t            var attributes;\n\t            for (var j = 0; j < result.attributes.length; j++) {\n\t              attributes = result.attributes[j];\n\t\n\t              positions.push(attributes.positions);\n\t              normals.push(attributes.normals);\n\t              colors.push(attributes.colors);\n\t              tops.push(attributes.tops);\n\t\n\t              if (_properties) {\n\t                properties.push(_utilBuffer2['default'].stringToUint8Array(JSON.stringify(polygon.properties)));\n\t              }\n\t            };\n\t\n\t            var outlineAttributes;\n\t            for (var j = 0; j < result.outlineAttributes.length; j++) {\n\t              outlineAttributes = result.outlineAttributes[j];\n\t\n\t              outlinePositions.push(outlineAttributes.positions);\n\t              outlineColors.push(outlineAttributes.colors);\n\t            };\n\t          };\n\t\n\t          var mergedAttributes = {\n\t            positions: _utilBuffer2['default'].mergeFloat32Arrays(positions),\n\t            normals: _utilBuffer2['default'].mergeFloat32Arrays(normals),\n\t            colors: _utilBuffer2['default'].mergeFloat32Arrays(colors),\n\t            tops: _utilBuffer2['default'].mergeFloat32Arrays(tops)\n\t          };\n\t\n\t          var mergedOutlineAttributes = {\n\t            positions: _utilBuffer2['default'].mergeFloat32Arrays(outlinePositions),\n\t            colors: _utilBuffer2['default'].mergeFloat32Arrays(outlineColors)\n\t          };\n\t\n\t          transferrables.push(mergedAttributes.positions[0].buffer);\n\t          transferrables.push(mergedAttributes.positions[1].buffer);\n\t\n\t          transferrables.push(mergedAttributes.normals[0].buffer);\n\t          transferrables.push(mergedAttributes.normals[1].buffer);\n\t\n\t          transferrables.push(mergedAttributes.colors[0].buffer);\n\t          transferrables.push(mergedAttributes.colors[1].buffer);\n\t\n\t          transferrables.push(mergedAttributes.tops[0].buffer);\n\t          transferrables.push(mergedAttributes.tops[1].buffer);\n\t\n\t          transferrables.push(mergedOutlineAttributes.positions[0].buffer);\n\t          transferrables.push(mergedOutlineAttributes.positions[1].buffer);\n\t\n\t          transferrables.push(mergedOutlineAttributes.colors[0].buffer);\n\t          transferrables.push(mergedOutlineAttributes.colors[1].buffer);\n\t\n\t          var mergedProperties;\n\t          if (_properties) {\n\t            mergedProperties = _utilBuffer2['default'].mergeUint8Arrays(properties);\n\t\n\t            transferrables.push(mergedProperties[0].buffer);\n\t            transferrables.push(mergedProperties[1].buffer);\n\t          }\n\t\n\t          var output = {\n\t            attributes: mergedAttributes,\n\t            outlineAttributes: mergedOutlineAttributes,\n\t            flats: flats\n\t          };\n\t\n\t          if (_properties) {\n\t            output.properties = mergedProperties;\n\t          }\n\t\n\t          // TODO: Also return GeoJSON features that can be mapped to objects on\n\t          // the main thread. Allow user to provide filter / toggles to only return\n\t          // properties from the GeoJSON that they need (eg. don't return geometry,\n\t          // or don't return properties.height)\n\t          resolve({\n\t            data: output,\n\t            transferrables: transferrables\n\t          });\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'ProcessPolylines',\n\t    value: function ProcessPolylines(polylinePromises, polylines, _properties) {\n\t      return new Promise(function (resolve, reject) {\n\t        Promise.all(polylinePromises).then(function (results) {\n\t          var transferrables = [];\n\t\n\t          var positions = [];\n\t          var colors = [];\n\t\n\t          var properties = [];\n\t\n\t          var flats = [];\n\t          var polyline;\n\t\n\t          var result;\n\t          for (var i = 0; i < results.length; i++) {\n\t            result = results[i];\n\t\n\t            polyline = polylines[i];\n\t\n\t            // WORKERS: Making this a typed array will speed up transfer time\n\t            // As things stand this adds on a few milliseconds\n\t            flats.push(result.flat);\n\t\n\t            // WORKERS: result.attributes is actually an array of polygons for each\n\t            // feature, though the current logic isn't keeping these all together\n\t\n\t            var attributes;\n\t            for (var j = 0; j < result.attributes.length; j++) {\n\t              attributes = result.attributes[j];\n\t\n\t              positions.push(attributes.positions);\n\t              colors.push(attributes.colors);\n\t\n\t              if (_properties) {\n\t                properties.push(_utilBuffer2['default'].stringToUint8Array(JSON.stringify(polyline.properties)));\n\t              }\n\t            };\n\t          };\n\t\n\t          var mergedAttributes = {\n\t            positions: _utilBuffer2['default'].mergeFloat32Arrays(positions),\n\t            colors: _utilBuffer2['default'].mergeFloat32Arrays(colors)\n\t          };\n\t\n\t          transferrables.push(mergedAttributes.positions[0].buffer);\n\t          transferrables.push(mergedAttributes.positions[1].buffer);\n\t\n\t          transferrables.push(mergedAttributes.colors[0].buffer);\n\t          transferrables.push(mergedAttributes.colors[1].buffer);\n\t\n\t          var mergedProperties;\n\t          if (_properties) {\n\t            mergedProperties = _utilBuffer2['default'].mergeUint8Arrays(properties);\n\t\n\t            transferrables.push(mergedProperties[0].buffer);\n\t            transferrables.push(mergedProperties[1].buffer);\n\t          }\n\t\n\t          var output = {\n\t            attributes: mergedAttributes,\n\t            flats: flats\n\t          };\n\t\n\t          if (_properties) {\n\t            output.properties = mergedProperties;\n\t          }\n\t\n\t          // TODO: Also return GeoJSON features that can be mapped to objects on\n\t          // the main thread. Allow user to provide filter / toggles to only return\n\t          // properties from the GeoJSON that they need (eg. don't return geometry,\n\t          // or don't return properties.height)\n\t          resolve({\n\t            data: output,\n\t            transferrables: transferrables\n\t          });\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t\n\t    // TODO: Dedupe with ProcessPolygons as they are identical\n\t  }, {\n\t    key: 'ProcessPoints',\n\t    value: function ProcessPoints(pointPromises, points, _properties) {\n\t      return new Promise(function (resolve, reject) {\n\t        Promise.all(pointPromises).then(function (results) {\n\t          var transferrables = [];\n\t\n\t          var positions = [];\n\t          var normals = [];\n\t          var colors = [];\n\t\n\t          var properties = [];\n\t\n\t          var flats = [];\n\t          var point;\n\t\n\t          var result;\n\t          for (var i = 0; i < results.length; i++) {\n\t            result = results[i];\n\t\n\t            point = points[i];\n\t\n\t            // WORKERS: Making this a typed array will speed up transfer time\n\t            // As things stand this adds on a few milliseconds\n\t            flats.push(result.flat);\n\t\n\t            // WORKERS: result.attributes is actually an array of polygons for each\n\t            // feature, though the current logic isn't keeping these all together\n\t\n\t            var attributes;\n\t            for (var j = 0; j < result.attributes.length; j++) {\n\t              attributes = result.attributes[j];\n\t\n\t              positions.push(attributes.positions);\n\t              normals.push(attributes.normals);\n\t              colors.push(attributes.colors);\n\t\n\t              if (_properties) {\n\t                properties.push(_utilBuffer2['default'].stringToUint8Array(JSON.stringify(polygon.properties)));\n\t              }\n\t            };\n\t          };\n\t\n\t          var mergedAttributes = {\n\t            positions: _utilBuffer2['default'].mergeFloat32Arrays(positions),\n\t            normals: _utilBuffer2['default'].mergeFloat32Arrays(normals),\n\t            colors: _utilBuffer2['default'].mergeFloat32Arrays(colors)\n\t          };\n\t\n\t          transferrables.push(mergedAttributes.positions[0].buffer);\n\t          transferrables.push(mergedAttributes.positions[1].buffer);\n\t\n\t          transferrables.push(mergedAttributes.normals[0].buffer);\n\t          transferrables.push(mergedAttributes.normals[1].buffer);\n\t\n\t          transferrables.push(mergedAttributes.colors[0].buffer);\n\t          transferrables.push(mergedAttributes.colors[1].buffer);\n\t\n\t          var mergedProperties;\n\t          if (_properties) {\n\t            mergedProperties = _utilBuffer2['default'].mergeUint8Arrays(properties);\n\t\n\t            transferrables.push(mergedProperties[0].buffer);\n\t            transferrables.push(mergedProperties[1].buffer);\n\t          }\n\t\n\t          var output = {\n\t            attributes: mergedAttributes,\n\t            flats: flats\n\t          };\n\t\n\t          if (_properties) {\n\t            output.properties = mergedProperties;\n\t          }\n\t\n\t          // TODO: Also return GeoJSON features that can be mapped to objects on\n\t          // the main thread. Allow user to provide filter / toggles to only return\n\t          // properties from the GeoJSON that they need (eg. don't return geometry,\n\t          // or don't return properties.height)\n\t          resolve({\n\t            data: output,\n\t            transferrables: transferrables\n\t          });\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'ProcessGeoJSON',\n\t    value: function ProcessGeoJSON(geojson, headers) {\n\t      if (typeof geojson === 'string') {\n\t        return GeoJSONWorkerLayer.RequestGeoJSON(geojson, headers);\n\t      } else {\n\t        return Promise.resolve(JSON.parse(_utilBuffer2['default'].uint8ArrayToString(geojson)));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'RequestGeoJSON',\n\t    value: function RequestGeoJSON(path, headers) {\n\t      return (0, _reqwest2['default'])({\n\t        url: path,\n\t        type: 'json',\n\t        crossOrigin: true,\n\t        headers: headers\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return GeoJSONWorkerLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = GeoJSONWorkerLayer;\n\t\n\tvar noNew = function noNew(geojson, options) {\n\t  return new GeoJSONWorkerLayer(geojson, options);\n\t};\n\t\n\texports.geoJSONWorkerLayer = noNew;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _WorkerPool = __webpack_require__(58);\n\t\n\tvar _WorkerPool2 = _interopRequireDefault(_WorkerPool);\n\t\n\tvar Worker = (function () {\n\t  var _maxWorkers = 2;\n\t  var pool;\n\t\n\t  var createWorkers = function createWorkers(maxWorkers, workerScript) {\n\t    pool = new _WorkerPool2['default']({\n\t      numThreads: maxWorkers ? maxWorkers : _maxWorkers,\n\t      workerScript: workerScript ? workerScript : 'vizicities-worker.js'\n\t    });\n\t\n\t    return pool.createWorkers();\n\t  };\n\t\n\t  var exec = function exec(method, args, transferrables) {\n\t    return pool.exec(method, args, transferrables);\n\t  };\n\t\n\t  return {\n\t    createWorkers: createWorkers,\n\t    exec: exec\n\t  };\n\t})();\n\t\n\texports['default'] = Worker;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _WorkerPoolWorker = __webpack_require__(59);\n\t\n\tvar _WorkerPoolWorker2 = _interopRequireDefault(_WorkerPoolWorker);\n\t\n\tvar DEBUG = false;\n\t\n\t// Polyfill for Array.find\n\tif (!Array.prototype.find) {\n\t  Object.defineProperty(Array.prototype, 'find', {\n\t    value: function value(predicate) {\n\t      'use strict';\n\t      if (this == null) {\n\t        throw new TypeError('Array.prototype.find called on null or undefined');\n\t      }\n\t      if (typeof predicate !== 'function') {\n\t        throw new TypeError('predicate must be a function');\n\t      }\n\t      var list = Object(this);\n\t      var length = list.length >>> 0;\n\t      var thisArg = arguments[1];\n\t      var value;\n\t\n\t      for (var i = 0; i < length; i++) {\n\t        value = list[i];\n\t        if (predicate.call(thisArg, value, i, list)) {\n\t          return value;\n\t        }\n\t      }\n\t      return undefined;\n\t    }\n\t  });\n\t}\n\t\n\tvar WorkerPool = (function () {\n\t  function WorkerPool(options) {\n\t    _classCallCheck(this, WorkerPool);\n\t\n\t    this.numThreads = options.numThreads || 2;\n\t    this.workerScript = options.workerScript;\n\t\n\t    this.workers = [];\n\t    this.tasks = [];\n\t  }\n\t\n\t  _createClass(WorkerPool, [{\n\t    key: 'createWorkers',\n\t    value: function createWorkers() {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var workerPromises = [];\n\t\n\t        for (var i = 0; i < _this.numThreads; i++) {\n\t          workerPromises.push(_this.createWorker());\n\t        }\n\t\n\t        Promise.all(workerPromises).then(function () {\n\t          if (DEBUG) {\n\t            console.log('All workers ready', (performance || Date).now());\n\t          }\n\t          resolve();\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createWorker',\n\t    value: function createWorker() {\n\t      var _this2 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        // Initialise worker\n\t        var worker = new _WorkerPoolWorker2['default']({\n\t          workerScript: _this2.workerScript\n\t        });\n\t\n\t        // Start worker and wait for it to be ready\n\t        return worker.start().then(function () {\n\t          if (DEBUG) {\n\t            console.log('Worker ready', (performance || Date).now());\n\t          }\n\t\n\t          // Add worker to pool\n\t          _this2.workers.push(worker);\n\t\n\t          resolve();\n\t        })['catch'](reject);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getFreeWorker',\n\t    value: function getFreeWorker() {\n\t      return this.workers.find(function (worker) {\n\t        return !worker.busy;\n\t      });\n\t    }\n\t\n\t    // Execute task on a worker\n\t  }, {\n\t    key: 'exec',\n\t    value: function exec(method, args, transferrables) {\n\t      var deferred = Promise.deferred();\n\t\n\t      // Create task\n\t      var task = {\n\t        method: method,\n\t        args: args,\n\t        transferrables: transferrables,\n\t        deferred: deferred\n\t      };\n\t\n\t      // Add task to queue\n\t      this.tasks.push(task);\n\t\n\t      // Trigger task processing\n\t      this.processTasks();\n\t\n\t      // Return task promise\n\t      return task.deferred.promise;\n\t    }\n\t  }, {\n\t    key: 'processTasks',\n\t    value: function processTasks() {\n\t      var _this3 = this;\n\t\n\t      if (DEBUG) {\n\t        console.log('Processing tasks');\n\t      }\n\t\n\t      if (this.tasks.length === 0) {\n\t        return;\n\t      }\n\t\n\t      // Find free worker\n\t      var worker = this.getFreeWorker();\n\t\n\t      if (!worker) {\n\t        if (DEBUG) {\n\t          console.log('No workers free');\n\t        }\n\t        return;\n\t      }\n\t\n\t      // Get oldest task\n\t      var task = this.tasks.shift();\n\t\n\t      // Execute task on worker\n\t      worker.exec(task.method, task.args, task.transferrables).then(function (result) {\n\t        // Trigger task processing\n\t        _this3.processTasks();\n\t\n\t        // Return result in deferred task promise\n\t        task.deferred.resolve(result);\n\t      })['catch'](function (err) {\n\t        // Trigger task processing\n\t        _this3.processTasks();\n\t\n\t        task.deferred.reject(err);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return WorkerPool;\n\t})();\n\t\n\texports['default'] = WorkerPool;\n\t\n\t// Quick shim to create deferred native promises\n\tPromise.deferred = function () {\n\t  var result = {};\n\t\n\t  result.promise = new Promise(function (resolve, reject) {\n\t    result.resolve = resolve;\n\t    result.reject = reject;\n\t  });\n\t\n\t  return result;\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar DEBUG = false;\n\t\n\tvar WorkerPoolWorker = (function () {\n\t  function WorkerPoolWorker(options) {\n\t    _classCallCheck(this, WorkerPoolWorker);\n\t\n\t    this.workerScript = options.workerScript;\n\t\n\t    this.ready = false;\n\t    this.busy = false;\n\t    this.deferred = null;\n\t  }\n\t\n\t  _createClass(WorkerPoolWorker, [{\n\t    key: 'start',\n\t    value: function start() {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        _this.worker = new Worker(_this.workerScript);\n\t\n\t        var onStartup = function onStartup(event) {\n\t          if (!event.data || event.data.type !== 'startup') {\n\t            reject();\n\t            return;\n\t          }\n\t\n\t          _this.ready = true;\n\t\n\t          // Remove temporary message handler\n\t          _this.worker.removeEventListener('message', onStartup);\n\t\n\t          // Set up listener to respond to normal events now\n\t          _this.worker.addEventListener('message', function (event) {\n\t            _this.onMessage(event);\n\t          });\n\t\n\t          // Resolve once worker is ready\n\t          resolve();\n\t        };\n\t\n\t        // Set up temporary event listener for warmup\n\t        _this.worker.addEventListener('message', onStartup);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'exec',\n\t    value: function exec(method, args, transferrables) {\n\t      if (DEBUG) {\n\t        console.log('Execute', method, args, transferrables);\n\t      }\n\t\n\t      var deferred = Promise.deferred();\n\t\n\t      this.busy = true;\n\t      this.deferred = deferred;\n\t\n\t      this.worker.postMessage({\n\t        method: method,\n\t        args: args\n\t      }, transferrables);\n\t\n\t      return deferred.promise;\n\t    }\n\t  }, {\n\t    key: 'onMessage',\n\t    value: function onMessage(event) {\n\t      if (DEBUG) {\n\t        console.log('Message received from worker', (performance || Date).now());\n\t      }\n\t\n\t      this.busy = false;\n\t\n\t      if (!event.data || event.data.type === 'error' || event.data.type !== 'result') {\n\t        this.deferred.reject(event.data.payload);\n\t        return;\n\t      }\n\t\n\t      this.deferred.resolve(event.data.payload);\n\t    }\n\t  }]);\n\t\n\t  return WorkerPoolWorker;\n\t})();\n\t\n\texports['default'] = WorkerPoolWorker;\n\t\n\t// Quick shim to create deferred native promises\n\tPromise.deferred = function () {\n\t  var result = {};\n\t\n\t  result.promise = new Promise(function (resolve, reject) {\n\t    result.resolve = resolve;\n\t    result.reject = reject;\n\t  });\n\t\n\t  return result;\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\tvar Stringify = (function () {\n\t  var functionToString = function functionToString(f) {\n\t    return f.toString();\n\t  };\n\t\n\t  // Based on https://github.com/tangrams/tangram/blob/2a31893c814cf15d5077f87ffa10af20160716b9/src/utils/utils.js#L245\n\t  var stringToFunction = function stringToFunction(str) {\n\t    if (typeof str === 'string' && str.match(/^\\s*function\\s*\\w*\\s*\\([\\s\\S]*\\)\\s*\\{[\\s\\S]*\\}/m) != null) {\n\t      var f;\n\t\n\t      try {\n\t        eval('f = ' + str);\n\t        return f;\n\t      } catch (err) {\n\t        return str;\n\t      }\n\t    }\n\t  };\n\t\n\t  return {\n\t    functionToString: functionToString,\n\t    stringToFunction: stringToFunction\n\t  };\n\t})();\n\t\n\texports['default'] = Stringify;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _GeoJSONTileLayer2 = __webpack_require__(39);\n\t\n\tvar _GeoJSONTileLayer3 = _interopRequireDefault(_GeoJSONTileLayer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar TopoJSONTileLayer = (function (_GeoJSONTileLayer) {\n\t  _inherits(TopoJSONTileLayer, _GeoJSONTileLayer);\n\t\n\t  function TopoJSONTileLayer(path, options) {\n\t    _classCallCheck(this, TopoJSONTileLayer);\n\t\n\t    var defaults = {\n\t      topojson: true\n\t    };\n\t\n\t    options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(TopoJSONTileLayer.prototype), 'constructor', this).call(this, path, options);\n\t  }\n\t\n\t  return TopoJSONTileLayer;\n\t})(_GeoJSONTileLayer3['default']);\n\t\n\texports['default'] = TopoJSONTileLayer;\n\t\n\tvar noNew = function noNew(path, options) {\n\t  return new TopoJSONTileLayer(path, options);\n\t};\n\t\n\texports.topoJSONTileLayer = noNew;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _GeoJSONLayer2 = __webpack_require__(41);\n\t\n\tvar _GeoJSONLayer3 = _interopRequireDefault(_GeoJSONLayer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar TopoJSONLayer = (function (_GeoJSONLayer) {\n\t  _inherits(TopoJSONLayer, _GeoJSONLayer);\n\t\n\t  function TopoJSONLayer(topojson, options) {\n\t    _classCallCheck(this, TopoJSONLayer);\n\t\n\t    var defaults = {\n\t      topojson: true\n\t    };\n\t\n\t    options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(TopoJSONLayer.prototype), 'constructor', this).call(this, topojson, options);\n\t  }\n\t\n\t  return TopoJSONLayer;\n\t})(_GeoJSONLayer3['default']);\n\t\n\texports['default'] = TopoJSONLayer;\n\t\n\tvar noNew = function noNew(topojson, options) {\n\t  return new TopoJSONLayer(topojson, options);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.topoJSONLayer = noNew;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _GeoJSONWorkerLayer2 = __webpack_require__(56);\n\t\n\tvar _GeoJSONWorkerLayer3 = _interopRequireDefault(_GeoJSONWorkerLayer2);\n\t\n\tvar _lodashAssign = __webpack_require__(12);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar TopoJSONWorkerLayer = (function (_GeoJSONWorkerLayer) {\n\t  _inherits(TopoJSONWorkerLayer, _GeoJSONWorkerLayer);\n\t\n\t  function TopoJSONWorkerLayer(topojson, options) {\n\t    _classCallCheck(this, TopoJSONWorkerLayer);\n\t\n\t    var defaults = {\n\t      topojson: true\n\t    };\n\t\n\t    options = (0, _lodashAssign2['default'])({}, defaults, options);\n\t\n\t    _get(Object.getPrototypeOf(TopoJSONWorkerLayer.prototype), 'constructor', this).call(this, topojson, options);\n\t  }\n\t\n\t  return TopoJSONWorkerLayer;\n\t})(_GeoJSONWorkerLayer3['default']);\n\t\n\texports['default'] = TopoJSONWorkerLayer;\n\t\n\tvar noNew = function noNew(topojson, options) {\n\t  return new TopoJSONWorkerLayer(topojson, options);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports.topoJSONWorkerLayer = noNew;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// TODO: A lot of these utils don't need to be in separate, tiny files\n\t\n\tvar _wrapNum = __webpack_require__(65);\n\t\n\tvar _wrapNum2 = _interopRequireDefault(_wrapNum);\n\t\n\tvar _extrudePolygon = __webpack_require__(49);\n\t\n\tvar _extrudePolygon2 = _interopRequireDefault(_extrudePolygon);\n\t\n\tvar _GeoJSON = __webpack_require__(44);\n\t\n\tvar _GeoJSON2 = _interopRequireDefault(_GeoJSON);\n\t\n\tvar _Buffer = __webpack_require__(50);\n\t\n\tvar _Buffer2 = _interopRequireDefault(_Buffer);\n\t\n\tvar _Worker = __webpack_require__(57);\n\t\n\tvar _Worker2 = _interopRequireDefault(_Worker);\n\t\n\tvar _Stringify = __webpack_require__(60);\n\t\n\tvar _Stringify2 = _interopRequireDefault(_Stringify);\n\t\n\tvar Util = {};\n\t\n\tUtil.wrapNum = _wrapNum2['default'];\n\tUtil.extrudePolygon = _extrudePolygon2['default'];\n\tUtil.GeoJSON = _GeoJSON2['default'];\n\tUtil.Buffer = _Buffer2['default'];\n\tUtil.Worker = _Worker2['default'];\n\tUtil.Stringify = _Stringify2['default'];\n\t\n\texports['default'] = Util;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/*\r\n\t * Wrap the given number to lie within a certain range (eg. longitude)\r\n\t *\r\n\t * Based on:\r\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\r\n\t */\n\t\n\tvar wrapNum = function wrapNum(x, range, includeMax) {\n\t  var max = range[1];\n\t  var min = range[0];\n\t  var d = max - min;\n\t  return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\n\t};\n\t\n\texports[\"default\"] = wrapNum;\n\tmodule.exports = exports[\"default\"];\n\n/***/ })\n/******/ ])\n});\n;"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3023bfbcab9f1ed40594","import World, {world} from './World';\r\nimport Controls from './controls/index';\r\n\r\nimport Geo from './geo/Geo.js';\r\n\r\nimport Layer, {layer} from './layer/Layer';\r\nimport LayerGroup, {layerGroup} from './layer/LayerGroup';\r\nimport EnvironmentLayer, {environmentLayer} from './layer/environment/EnvironmentLayer';\r\nimport ImageTileLayer, {imageTileLayer} from './layer/tile/ImageTileLayer';\r\nimport GeoJSONTileLayer, {geoJSONTileLayer} from './layer/tile/GeoJSONTileLayer';\r\nimport TopoJSONTileLayer, {topoJSONTileLayer} from './layer/tile/TopoJSONTileLayer';\r\nimport GeoJSONTile, {geoJSONTile} from './layer/tile/GeoJSONTile';\r\nimport GeoJSONLayer, {geoJSONLayer} from './layer/GeoJSONLayer';\r\nimport TopoJSONLayer, {topoJSONLayer} from './layer/TopoJSONLayer';\r\nimport GeoJSONWorkerLayer, {geoJSONWorkerLayer} from './layer/GeoJSONWorkerLayer';\r\nimport TopoJSONWorkerLayer, {topoJSONWorkerLayer} from './layer/TopoJSONWorkerLayer';\r\nimport PolygonLayer, {polygonLayer} from './layer/geometry/PolygonLayer';\r\nimport PolylineLayer, {polylineLayer} from './layer/geometry/PolylineLayer';\r\nimport PointLayer, {pointLayer} from './layer/geometry/PointLayer';\r\n\r\nimport Point, {point} from './geo/Point';\r\nimport LatLon, {latLon} from './geo/LatLon';\r\n\r\nimport PickingMaterial from './engine/PickingMaterial';\r\n\r\nimport Util from './util/index';\r\n\r\nconst VIZI = {\r\n  version: '0.3',\r\n\r\n  // Public API\r\n  World: World,\r\n  world: world,\r\n  Controls: Controls,\r\n  Geo: Geo,\r\n  Layer: Layer,\r\n  layer: layer,\r\n  EnvironmentLayer: EnvironmentLayer,\r\n  environmentLayer: environmentLayer,\r\n  ImageTileLayer: ImageTileLayer,\r\n  imageTileLayer: imageTileLayer,\r\n  GeoJSONTileLayer: GeoJSONTileLayer,\r\n  geoJSONTileLayer: geoJSONTileLayer,\r\n  GeoJSONTile: GeoJSONTile,\r\n  geoJSONTile: geoJSONTile,\r\n  TopoJSONTileLayer: TopoJSONTileLayer,\r\n  topoJSONTileLayer: topoJSONTileLayer,\r\n  GeoJSONLayer: GeoJSONLayer,\r\n  geoJSONLayer: geoJSONLayer,\r\n  TopoJSONLayer: TopoJSONLayer,\r\n  topoJSONLayer: topoJSONLayer,\r\n  GeoJSONWorkerLayer: GeoJSONWorkerLayer,\r\n  geoJSONWorkerLayer: geoJSONWorkerLayer,\r\n  TopoJSONWorkerLayer: TopoJSONWorkerLayer,\r\n  topoJSONWorkerLayer: topoJSONWorkerLayer,\r\n  PolygonLayer: PolygonLayer,\r\n  polygonLayer: polygonLayer,\r\n  PolylineLayer: PolylineLayer,\r\n  polylineLayer: polylineLayer,\r\n  PointLayer: PointLayer,\r\n  pointLayer: pointLayer,\r\n  Point: Point,\r\n  point: point,\r\n  LatLon: LatLon,\r\n  latLon: latLon,\r\n  PickingMaterial: PickingMaterial,\r\n  Util: Util\r\n};\r\n\r\nexport default VIZI;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/vizicities.js","import Orbit, {orbit} from './Controls.Orbit';\r\n\r\nconst Controls = {\r\n  Orbit: Orbit,\r\n  orbit, orbit\r\n};\r\n\r\nexport default Controls;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/index.js","import EventEmitter from 'eventemitter3';\r\nimport THREE from 'three';\r\nimport OrbitControls from '../vendor/OrbitControls';\r\nimport TweenLite from 'TweenLite';\r\n\r\nclass Orbit extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n\r\n    // Prevent animation from pausing when tab is inactive\r\n    TweenLite.lagSmoothing(0);\r\n  }\r\n\r\n  // Proxy control events\r\n  //\r\n  // There's currently no distinction between pan, orbit and zoom events\r\n  _initEvents() {\r\n    this._controls.addEventListener('start', (event) => {\r\n      this.startPosition = this._controls.target.clone();\r\n      this.startPolar = this._controls.getPolarAngle();\r\n      this.startAzimuth = this._controls.getAzimuthalAngle();\r\n\r\n      this._world.emit('controlsMoveStart', event.target.target);\r\n    });\r\n\r\n    this._controls.addEventListener('change', (event) => {\r\n      this._world.emit('controlsMove', event.target.target);\r\n    });\r\n\r\n    this._controls.addEventListener('end', (event) => {\r\n      var endPosition = this._controls.target.clone();\r\n      var endPolar = this._controls.getPolarAngle();\r\n      var endAzimuth = this._controls.getAzimuthalAngle();\r\n\r\n      // Did controls change?\r\n      var changed = false;\r\n\r\n      // Panned\r\n      if (Math.abs(endPosition.distanceTo(this.startPosition)) > 0) {\r\n        changed = true;\r\n      }\r\n\r\n      // Tilted\r\n      if (Math.abs(endPolar - this.startPolar) > 0) {\r\n        changed = true;\r\n      }\r\n\r\n      // Obited\r\n      if (Math.abs(endAzimuth - this.startAzimuth) > 0) {\r\n        changed = true;\r\n      }\r\n\r\n      this._world.emit('controlsMoveEnd', event.target.target, changed);\r\n    });\r\n  }\r\n\r\n  // Moving the camera along the [x,y] axis based on a target position\r\n  // Positive x and y goes up and right\r\n  panTo(point, animate) {\r\n    var controls = this._controls;\r\n    var target = controls.target;\r\n\r\n    var deltaX = point.x - target.x;\r\n    var deltaY = point.y - target.z;\r\n\r\n    controls.panLeft(-deltaX, controls.object.matrix);\r\n    controls.panUp(-deltaY, controls.object.matrix);\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  panBy(pointDelta, animate) {\r\n    this._controls.pan(-pointDelta.x, pointDelta.y);\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  // Zooming the camera in and out\r\n  zoomTo(metres, animate) {}\r\n  zoomBy(metresDelta, animate) {\r\n    var controls = this._controls;\r\n\r\n    if (metresDelta < 0) {\r\n      controls.dollyIn(Math.abs(metresDelta));\r\n    } else {\r\n      controls.dollyOut(metresDelta);\r\n    }\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  // Force camera to look at something other than the target\r\n  lookAt(point, animate) {}\r\n\r\n  // Make camera look at the target\r\n  lookAtTarget() {}\r\n\r\n  // Tilt (up and down)\r\n  // 0 is straight down\r\n  // Math.PI / 180 * 90 is flat on the ground\r\n  tiltTo(angle, animate) {\r\n    var controls = this._controls;\r\n    var theta = controls.getPolarAngle();\r\n    var delta = angle - theta;\r\n    controls.rotateUp(-delta);\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  tiltBy(angleDelta, animate) {\r\n    var controls = this._controls;\r\n    controls.rotateUp(-angleDelta);\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  // Rotate (left and right)\r\n  // Right is positive, left negative\r\n  rotateTo(angle, animate) {\r\n    var controls = this._controls;\r\n    var theta = controls.getAzimuthalAngle();\r\n    var delta = angle - theta;\r\n    controls.rotateLeft(-delta);\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  // Right is positive, left negative\r\n  rotateBy(angleDelta, animate) {\r\n    var controls = this._controls;\r\n    controls.rotateLeft(-angleDelta);\r\n\r\n    this.update();\r\n    this._world.emit('controlsMoveEnd', this._controls.target);\r\n  }\r\n\r\n  // Fly to the given point, animating pan and tilt/rotation to final position\r\n  // with nice zoom out and in\r\n  //\r\n  // TODO: Calling flyTo a second time before the previous animation has\r\n  // completed should immediately start the new animation from wherever the\r\n  // previous one has got to\r\n  //\r\n  // TODO: Long-distance pans should prevent the quadtree grid from trying to\r\n  // update by not firing the control update events every frame until the\r\n  // pan velocity calms down a bit\r\n  //\r\n  // TODO: Long-distance plans should zoom out further\r\n  //\r\n  // TODO: Return a promise?\r\n  flyToPoint(point, duration, zoom) {\r\n    // Animation time in seconds\r\n    var animationTime = duration || 2;\r\n\r\n    this._flyTarget = new THREE.Vector3(point.x, 0, point.y);\r\n\r\n    // Calculate delta from current position to fly target\r\n    var diff = new THREE.Vector3().subVectors(this._controls.target, this._flyTarget);\r\n\r\n    this._flyTween = new TweenLite(\r\n      {\r\n        x: 0,\r\n        z: 0,\r\n        // zoom: 0,\r\n        prev: {\r\n          x: 0,\r\n          z: 0\r\n        }\r\n      },\r\n      animationTime,\r\n      {\r\n        x: diff.x,\r\n        z: diff.z,\r\n        // zoom: 1,\r\n        onUpdate: function(tween) {\r\n          var controls = this._controls;\r\n\r\n          // Work out difference since last frame\r\n          var deltaX = tween.target.x - tween.target.prev.x;\r\n          var deltaZ = tween.target.z - tween.target.prev.z;\r\n\r\n          // Move some fraction toward the target point\r\n          controls.panLeft(deltaX, controls.object.matrix);\r\n          controls.panUp(deltaZ, controls.object.matrix);\r\n\r\n          tween.target.prev.x = tween.target.x;\r\n          tween.target.prev.z = tween.target.z;\r\n\r\n          // console.log(Math.sin((tween.target.zoom - 0.5) * Math.PI));\r\n\r\n          // TODO: Get zoom to dolly in and out on pan\r\n          // controls.object.zoom -= Math.sin((tween.target.zoom - 0.5) * Math.PI);\r\n          // controls.object.updateProjectionMatrix();\r\n        },\r\n        onComplete: function(tween) {\r\n          // console.log(`Arrived at flyTarget`);\r\n          this._flyTarget = null;\r\n        },\r\n        onUpdateParams: ['{self}'],\r\n        onCompleteParams: ['{self}'],\r\n        callbackScope: this,\r\n        ease: Power1.easeInOut\r\n      }\r\n    );\r\n\r\n    if (!zoom) {\r\n      return;\r\n    }\r\n\r\n    var zoomTime = animationTime / 2;\r\n\r\n    this._zoomTweenIn = new TweenLite(\r\n      {\r\n        zoom: 0\r\n      },\r\n      zoomTime,\r\n      {\r\n        zoom: 1,\r\n        onUpdate: function(tween) {\r\n          var controls = this._controls;\r\n          controls.dollyIn(1 - 0.01 * tween.target.zoom);\r\n        },\r\n        onComplete: function(tween) {},\r\n        onUpdateParams: ['{self}'],\r\n        onCompleteParams: ['{self}'],\r\n        callbackScope: this,\r\n        ease: Power1.easeInOut\r\n      }\r\n    );\r\n\r\n    this._zoomTweenOut = new TweenLite(\r\n      {\r\n        zoom: 0\r\n      },\r\n      zoomTime,\r\n      {\r\n        zoom: 1,\r\n        delay: zoomTime,\r\n        onUpdate: function(tween) {\r\n          var controls = this._controls;\r\n          controls.dollyOut(0.99 + 0.01 * tween.target.zoom);\r\n        },\r\n        onComplete: function(tween) {},\r\n        onUpdateParams: ['{self}'],\r\n        onCompleteParams: ['{self}'],\r\n        callbackScope: this,\r\n        ease: Power1.easeInOut\r\n      }\r\n    );\r\n  }\r\n\r\n  // TODO: Return a promise?\r\n  flyToLatLon(latlon, duration, noZoom) {\r\n    var point = this._world.latLonToPoint(latlon);\r\n    this.flyToPoint(point, duration, noZoom);\r\n  }\r\n\r\n  // TODO: Make this animate over a user-defined period of time\r\n  //\r\n  // Perhaps use TweenMax for now and implement as a more lightweight solution\r\n  // later on once it all works\r\n  // _animateFlyTo(delta) {\r\n  //   var controls = this._controls;\r\n  //\r\n  //   // this._controls.panLeft(50, controls._controls.object.matrix);\r\n  //   // this._controls.panUp(50, controls._controls.object.matrix);\r\n  //   // this._controls.dollyIn(this._controls.getZoomScale());\r\n  //   // this._controls.dollyOut(this._controls.getZoomScale());\r\n  //\r\n  //   // Calculate delta from current position to fly target\r\n  //   var diff = new THREE.Vector3().subVectors(this._controls.target, this._flyTarget);\r\n  //\r\n  //   // 1000 units per second\r\n  //   var speed = 1000 * (delta / 1000);\r\n  //\r\n  //   // Remove fly target after arrival and snap to target\r\n  //   if (diff.length() < 0.01) {\r\n  //     console.log(`Arrived at flyTarget`);\r\n  //     this._flyTarget = null;\r\n  //     speed = 1;\r\n  //   }\r\n  //\r\n  //   // Move some fraction toward the target point\r\n  //   controls.panLeft(diff.x * speed, controls.object.matrix);\r\n  //   controls.panUp(diff.z * speed, controls.object.matrix);\r\n  // }\r\n\r\n  // Proxy to OrbitControls.update()\r\n  update(delta) {\r\n    this._controls.update(delta);\r\n  }\r\n\r\n  // Add controls to world instance and store world reference\r\n  addTo(world) {\r\n    return world.addControls(this);\r\n  }\r\n\r\n  // Internal method called by World.addControls to actually add the controls\r\n  _addToWorld(world) {\r\n    this._world = world;\r\n\r\n    // TODO: Override panLeft and panUp methods to prevent panning on Y axis\r\n    // See: http://stackoverflow.com/a/26188674/997339\r\n    this._controls = new OrbitControls(world._engine._camera, world._container);\r\n\r\n    // 89 degrees\r\n    this._controls.maxPolarAngle = 1.5533;\r\n\r\n    // this._controls.enableDamping = true;\r\n    // this._controls.dampingFactor = 0.25;\r\n\r\n    this._initEvents();\r\n\r\n    // TODO: Remove now that this is a promise?\r\n    this.emit('added');\r\n\r\n    return Promise.resolve(this);\r\n  }\r\n\r\n  // Destroys the controls and removes them from memory\r\n  destroy() {\r\n    // TODO: Remove event listeners\r\n\r\n    this._controls.dispose();\r\n\r\n    this._world = null;\r\n    this._controls = null;\r\n  }\r\n}\r\n\r\nexport default Orbit;\r\n\r\nvar noNew = function() {\r\n  return new Orbit();\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as orbit};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/Controls.Orbit.js","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} [once=false] Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Hold the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var events = this._events\n    , names = []\n    , name;\n\n  if (!events) return names;\n\n  for (name in events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/eventemitter3/index.js\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"THREE\"\n// module id = 4\n// module chunks = 0","// jscs:disable\r\n/* eslint-disable */\r\n\r\nimport THREE from 'three';\r\nimport Hammer from 'hammerjs';\r\n\r\n/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\r\n\r\nvar OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40, CTRL: 17 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn theta;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function() {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\r\n\t\t\ttheta = Math.atan2( offset.x, offset.z );\r\n\r\n\t\t\t// angle from y-axis\r\n\r\n\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttheta += thetaDelta;\r\n\t\t\tphi += phiDelta;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\ttheta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tphi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, phi ) );\r\n\r\n\t\t\t// restrict phi to be betwee EPS and PI-EPS\r\n\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\r\n\r\n\t\t\tvar radius = offset.length() * scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tradius = Math.max( scope.minDistance, Math.min( scope.maxDistance, radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\r\n\t\t\toffset.y = radius * Math.cos( phi );\r\n\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tthetaDelta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tphiDelta *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthetaDelta = 0;\r\n\t\t\t\tphiDelta = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\r\n\t\tscope.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\t\tdocument.removeEventListener( 'mouseout', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\t\twindow.removeEventListener( 'keyup', onKeyUp, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\r\n\r\n\tvar KEY_STATE = { CTRL : false };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar theta;\r\n\tvar phi;\r\n\r\n\tvar phiDelta = 0;\r\n\tvar thetaDelta = 0;\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tthetaDelta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tphiDelta -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function() {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\t// return function panLeft( distance, objectMatrix ) {\r\n    //\r\n\t\t// \tvar te = objectMatrix.elements;\r\n    //\r\n\t\t// \t// get X column of objectMatrix\r\n\t\t// \tv.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n    //\r\n\t\t// \tv.multiplyScalar( - distance );\r\n    //\r\n\t\t// \tpanOffset.add( v );\r\n    //\r\n\t\t// };\r\n\r\n    // Fixed panning to x/y plane\r\n    return function panLeft(distance, objectMatrix) {\r\n\t    var te = objectMatrix.elements;\r\n\t    // var adjDist = distance / Math.cos(phi);\r\n\r\n\t    v.set(te[ 0 ], 0, te[ 2 ]);\r\n\t    v.multiplyScalar(-distance);\r\n\r\n\t    panOffset.add(v);\r\n\t  };\r\n\r\n\t}();\r\n\r\n  // Fixed panning to x/y plane\r\n\tvar panUp = function() {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\t// return function panUp( distance, objectMatrix ) {\r\n    //\r\n\t\t// \tvar te = objectMatrix.elements;\r\n    //\r\n\t\t// \t// get Y column of objectMatrix\r\n\t\t// \tv.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n    //\r\n\t\t// \tv.multiplyScalar( distance );\r\n    //\r\n\t\t// \tpanOffset.add( v );\r\n    //\r\n\t\t// };\r\n\r\n    return function panUp(distance, objectMatrix) {\r\n\t    var te = objectMatrix.elements;\r\n\t    var adjDist = distance / Math.cos(phi);\r\n\r\n\t    v.set(te[ 4 ], 0, te[ 6 ]);\r\n\t    v.multiplyScalar(adjDist);\r\n\r\n\t    panOffset.add(v);\r\n\t  };\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function() {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t//console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t//console.log( 'handleMouseWheel' );\r\n\r\n\t\tvar delta = 0;\r\n\r\n\t\tif ( event.wheelDelta !== undefined ) {\r\n\r\n\t\t\t// WebKit / Opera / Explorer 9\r\n\r\n\t\t\tdelta = event.wheelDelta;\r\n\r\n\t\t} else if ( event.detail !== undefined ) {\r\n\r\n\t\t\t// Firefox\r\n\r\n\t\t\tdelta = - event.detail;\r\n\r\n\t\t}\r\n\r\n\t\tif ( delta > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( delta < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tscope.dispatchEvent( endEvent );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tscope.dispatchEvent( endEvent );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tscope.dispatchEvent( endEvent );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tscope.dispatchEvent( endEvent );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.CTRL:\r\n\t\t\t\tKEY_STATE.CTRL = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleKeyUp( event ) {\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\t\t\tcase scope.keys.CTRL:\r\n\t\t\t\tKEY_STATE.CTRL = false;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.pointers[ 0 ].pageX, event.pointers[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDolly' );\r\n\r\n\t\tvar dx = event.pointers[ 0 ].pageX - event.pointers[ 1 ].pageX;\r\n\t\tvar dy = event.pointers[ 0 ].pageY - event.pointers[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartPan' );\r\n\r\n\t\tpanStart.set( event.deltaX, event.deltaY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.pointers[ 0 ].pageX, event.pointers[ 0 ].pageY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDolly' );\r\n\r\n\t\tvar dx = event.pointers[ 0 ].pageX - event.pointers[ 1 ].pageX;\r\n\t\tvar dy = event.pointers[ 0 ].pageY - event.pointers[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMovePan' );\r\n\r\n\t\tpanEnd.set( event.deltaX, event.deltaY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\r\n\r\n\t\t\tif (KEY_STATE.CTRL) {\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\t\t\t} else {\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\t\t\t}\r\n\r\n\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\r\n\r\n\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\r\n\r\n\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\tstate = STATE.PAN;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\t\t\tdocument.addEventListener( 'mouseout', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( state === STATE.ROTATE ) {\r\n\r\n\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t} else if ( state === STATE.DOLLY ) {\r\n\r\n\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t} else if ( state === STATE.PAN ) {\r\n\r\n\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\t\tdocument.removeEventListener( 'mouseout', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onKeyUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyUp( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDolly( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\r\n\tscope.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\r\n\r\n\t// scope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\t// scope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\t// scope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\tscope.hammer = new Hammer(scope.domElement);\r\n\r\n\tscope.hammer.get('pan').set({\r\n\t\tpointers: 0,\r\n\t\tdirection: Hammer.DIRECTION_ALL\r\n\t});\r\n\r\n\tscope.hammer.get('pinch').set({\r\n\t\tenable: true,\r\n\t\tthreshold: 0.1\r\n\t});\r\n\r\n\tscope.hammer.on('panstart', function(event) {\r\n\t\tif (scope.enabled === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (event.pointerType === 'mouse') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (event.pointers.length === 1) {\r\n\t\t\tif (scope.enablePan === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\thandleTouchStartPan(event);\r\n\t\t\t// panStart.set(event.deltaX, event.deltaY);\r\n\r\n\t\t\tstate = STATE.TOUCH_PAN;\r\n\t\t} else if (event.pointers.length === 2) {\r\n\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\t\t}\r\n\r\n\t\tif (state !== STATE.NONE) {\r\n\t\t\tscope.dispatchEvent(startEvent);\r\n\t\t}\r\n\t});\r\n\r\n\tscope.hammer.on('panend', function(event) {\r\n\t\tif (event.pointerType === 'mouse') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonTouchEnd(event);\r\n\t});\r\n\r\n\tscope.hammer.on('panmove', function(event) {\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tif (event.pointerType === 'mouse') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// event.preventDefault();\r\n\t\t// event.stopPropagation();\r\n\r\n\t\tif (event.pointers.length === 1) {\r\n\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t// panEnd.set( event.deltaX, event.deltaY );\r\n\t\t\t//\r\n\t\t\t// panDelta.subVectors( panEnd, panStart );\r\n\t\t\t//\r\n\t\t\t// pan( panDelta.x, panDelta.y );\r\n\t\t\t//\r\n\t\t\t// panStart.copy( panEnd );\r\n\t\t\t//\r\n\t\t\t// scope.update();\r\n\t\t} else if (event.pointers.length === 2) {\r\n\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\thandleTouchMoveRotate( event );\r\n\t\t}\r\n\t});\r\n\r\n\tscope.hammer.on('pinchstart', function(event) {\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tif (event.pointerType === 'mouse') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\thandleTouchStartDolly( event );\r\n\r\n\t\t// var dx = event.pointers[ 0 ].pageX - event.pointers[ 1 ].pageX;\r\n\t\t// var dy = event.pointers[ 0 ].pageY - event.pointers[ 1 ].pageY;\r\n\t\t//\r\n\t\t// var distance = Math.sqrt( dx * dx + dy * dy );\r\n\t\t//\r\n\t\t// dollyStart.set( 0, distance );\r\n\t\t//\r\n\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\tif (state !== STATE.NONE) {\r\n\t\t\tscope.dispatchEvent(startEvent);\r\n\t\t}\r\n\t});\r\n\r\n\tscope.hammer.on('pinchend', function(event) {\r\n\t\tif (event.pointerType === 'mouse') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonTouchEnd(event);\r\n\t});\r\n\r\n\tscope.hammer.on('pinchmove', function(event) {\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tif (event.pointerType === 'mouse') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// event.preventDefault();\r\n\t\t// event.stopPropagation();\r\n\r\n\t\tif ( scope.enableZoom === false ) return;\r\n\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t// var dx = event.pointers[ 0 ].pageX - event.pointers[ 1 ].pageX;\r\n\t\t// var dy = event.pointers[ 0 ].pageY - event.pointers[ 1 ].pageY;\r\n\t\t//\r\n\t\t// var distance = Math.sqrt( dx * dx + dy * dy );\r\n\t\t//\r\n\t\t// dollyEnd.set( 0, distance );\r\n\t\t//\r\n\t\t// dollyDelta.subVectors( dollyEnd, dollyStart );\r\n\t\t//\r\n\t\t// if ( dollyDelta.y > 0 ) {\r\n\t\t//\r\n\t\t// \tdollyOut( getZoomScale() );\r\n\t\t//\r\n\t\t// } else if ( dollyDelta.y < 0 ) {\r\n\t\t//\r\n\t\t// \tdollyIn( getZoomScale() );\r\n\t\t//\r\n\t\t// }\r\n\t\t//\r\n\t\t// dollyStart.copy( dollyEnd );\r\n\t\t//\r\n\t\t// scope.update();\r\n\t});\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\twindow.addEventListener( 'keyup', onKeyUp, false );\r\n\r\n\t// Expose controls methods for programmatic control\r\n\tthis.panLeft = panLeft;\r\n\tthis.panUp = panUp;\r\n\tthis.pan = pan;\r\n\tthis.dollyIn = dollyIn;\r\n\tthis.dollyOut = dollyOut;\r\n\tthis.getZoomScale = getZoomScale;\r\n\tthis.rotateLeft = rotateLeft;\r\n\tthis.rotateUp = rotateUp;\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = THREE.OrbitControls;\r\n\r\nObject.defineProperties( OrbitControls.prototype, {\r\n\r\n\tcenter: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\r\n\t\t\treturn this.target;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// backward compatibility\r\n\r\n\tnoZoom: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\treturn ! this.enableZoom;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\tthis.enableZoom = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoRotate: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\treturn ! this.enableRotate;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\tthis.enableRotate = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoPan: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\treturn ! this.enablePan;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\tthis.enablePan = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoKeys: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\treturn ! this.enableKeys;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\tthis.enableKeys = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstaticMoving : {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\treturn ! this.constraint.enableDamping;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\tthis.constraint.enableDamping = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdynamicDampingFactor : {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\treturn this.constraint.dampingFactor;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\tthis.constraint.dampingFactor = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport default OrbitControls;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/OrbitControls.js","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/hammerjs/hammer.js\n// module id = 6\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"TweenLite\"\n// module id = 7\n// module chunks = 0","import {latLon as LatLon} from './LatLon';\r\nimport {point as Point} from './Point';\r\n\r\nvar Geo = {};\r\n\r\n// Radius / WGS84 semi-major axis\r\nGeo.R = 6378137;\r\nGeo.MAX_LATITUDE = 85.0511287798;\r\n\r\n// WGS84 eccentricity\r\nGeo.ECC = 0.081819191;\r\nGeo.ECC2 = 0.081819191 * 0.081819191;\r\n\r\n// Multiplier is used to expand or compress the WebGL coordinate space relative\r\n// to the EPSG:3857 / Pseudo-Mercator coordinate space (metres).\r\n//\r\n// This is useful for keeping coordinate calculations to smaller numbers and\r\n// helps increase accuracy of things like the z-buffer, object intersection,\r\n// and camera near and far clipping.\r\n//\r\n// A multiplier of 1 would mean a 1:1 mapping between WebGL and EPSG:3857\r\n// coordinates (1 EPSG:3857 metre === 1 WebGL unit)\r\n//\r\n// A multiplier of 0.1 would mean a 1:0.1 mapping between WebGL and EPSG:3857\r\n// coordinates (1 EPSG:3857 metre === 0.1 WebGL units)\r\nGeo.multiplier = 0.1;\r\n\r\nGeo.project = function(latlon) {\r\n  var d = Math.PI / 180;\r\n  var max = Geo.MAX_LATITUDE;\r\n  var lat = Math.max(Math.min(max, latlon.lat), -max);\r\n  var sin = Math.sin(lat * d);\r\n\r\n  return Point(\r\n    Geo.R * latlon.lon * d,\r\n    Geo.R * Math.log((1 + sin) / (1 - sin)) / 2\r\n  );\r\n},\r\n\r\nGeo.unproject = function(point) {\r\n  var d = 180 / Math.PI;\r\n\r\n  return LatLon(\r\n    (2 * Math.atan(Math.exp(point.y / Geo.R)) - (Math.PI / 2)) * d,\r\n    point.x * d / Geo.R\r\n  );\r\n};\r\n\r\n// Converts geo coords to pixel / WebGL ones\r\n// This just reverses the Y axis to match WebGL\r\nGeo.latLonToPoint = function(latlon) {\r\n  var projected = Geo.project(latlon);\r\n  projected.y *= -1;\r\n\r\n  projected.x *= Geo.multiplier;\r\n  projected.y *= Geo.multiplier;\r\n\r\n  return projected;\r\n};\r\n\r\n// Converts pixel / WebGL coords to geo coords\r\n// This just reverses the Y axis to match WebGL\r\nGeo.pointToLatLon = function(point) {\r\n  var _point = Point(point.x, point.y * -1);\r\n\r\n  _point.x /= Geo.multiplier;\r\n  _point.y /= Geo.multiplier;\r\n\r\n  return Geo.unproject(_point);\r\n};\r\n\r\n// Scale factor for converting between real metres and projected metres\r\n//\r\n// projectedMetres = realMetres * pointScale\r\n// realMetres = projectedMetres / pointScale\r\n//\r\n// Accurate scale factor uses proper Web Mercator scaling\r\n// See pg.9: http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(notes).pdf\r\n// See: http://jsfiddle.net/robhawkes/yws924cf/\r\nGeo.pointScale = function(latlon, accurate) {\r\n  var rad = Math.PI / 180;\r\n\r\n  var k;\r\n\r\n  if (!accurate) {\r\n    k = 1 / Math.cos(latlon.lat * rad);\r\n\r\n    // [scaleX, scaleY]\r\n    return [k, k];\r\n  } else {\r\n    var lat = latlon.lat * rad;\r\n    var lon = latlon.lon * rad;\r\n\r\n    var a = Geo.R;\r\n\r\n    var sinLat = Math.sin(lat);\r\n    var sinLat2 = sinLat * sinLat;\r\n\r\n    var cosLat = Math.cos(lat);\r\n\r\n    // Radius meridian\r\n    var p = a * (1 - Geo.ECC2) / Math.pow(1 - Geo.ECC2 * sinLat2, 3 / 2);\r\n\r\n    // Radius prime meridian\r\n    var v = a / Math.sqrt(1 - Geo.ECC2 * sinLat2);\r\n\r\n    // Scale N/S\r\n    var h = (a / p) / cosLat;\r\n\r\n    // Scale E/W\r\n    k = (a / v) / cosLat;\r\n\r\n    // [scaleX, scaleY]\r\n    return [k, h];\r\n  }\r\n};\r\n\r\n// Convert real metres to projected units\r\n//\r\n// Latitude scale is chosen because it fluctuates more than longitude\r\nGeo.metresToProjected = function(metres, pointScale) {\r\n  return metres * pointScale[1];\r\n};\r\n\r\n// Convert projected units to real metres\r\n//\r\n// Latitude scale is chosen because it fluctuates more than longitude\r\nGeo.projectedToMetres = function(projectedUnits, pointScale) {\r\n  return projectedUnits / pointScale[1];\r\n};\r\n\r\n// Convert real metres to a value in world (WebGL) units\r\nGeo.metresToWorld = function(metres, pointScale) {\r\n  // Transform metres to projected metres using the latitude point scale\r\n  //\r\n  // Latitude scale is chosen because it fluctuates more than longitude\r\n  var projectedMetres = Geo.metresToProjected(metres, pointScale);\r\n  return projectedMetres * Geo.multiplier;\r\n};\r\n\r\n// Convert world (WebGL) units to a value in real metres\r\nGeo.worldToMetres = function(worldUnits, pointScale) {\r\n  var projectedUnits = worldUnits;\r\n  var realMetres = Geo.projectedToMetres(projectedUnits, pointScale);\r\n\r\n  return realMetres / Geo.multiplier;\r\n};\r\n\r\n// Returns the world width in pixels for a given zoom, assuming tile dimensions\r\n// of 256x256 pixels\r\nGeo.scale = function(zoom) {\r\n  return 256 * Math.pow(2, zoom);\r\n};\r\n\r\n// Returns zoom level for a given scale value\r\n// This only works with a scale value that is based on map pixel width\r\nGeo.zoom = function(scale) {\r\n  return Math.log(scale / 256) / Math.LN2;\r\n};\r\n\r\n// Distance between two geographical points using spherical law of cosines\r\n// approximation or Haversine\r\n//\r\n// See: http://www.movable-type.co.uk/scripts/latlong.html\r\nGeo.distance = function(latlon1, latlon2, accurate) {\r\n  var rad = Math.PI / 180;\r\n\r\n  var lat1;\r\n  var lat2;\r\n\r\n  var a;\r\n\r\n  if (!accurate) {\r\n    lat1 = latlon1.lat * rad;\r\n    lat2 = latlon2.lat * rad;\r\n\r\n    a = Math.sin(lat1) * Math.sin(lat2) + Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlon2.lon - latlon1.lon) * rad);\r\n\r\n    return Geo.R * Math.acos(Math.min(a, 1));\r\n  } else {\r\n    lat1 = latlon1.lat * rad;\r\n    lat2 = latlon2.lat * rad;\r\n\r\n    var lon1 = latlon1.lon * rad;\r\n    var lon2 = latlon2.lon * rad;\r\n\r\n    var deltaLat = lat2 - lat1;\r\n    var deltaLon = lon2 - lon1;\r\n\r\n    var halfDeltaLat = deltaLat / 2;\r\n    var halfDeltaLon = deltaLon / 2;\r\n\r\n    a = Math.sin(halfDeltaLat) * Math.sin(halfDeltaLat) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(halfDeltaLon) * Math.sin(halfDeltaLon);\r\n\r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n    return Geo.R * c;\r\n  }\r\n};\r\n\r\nGeo.bounds = (function() {\r\n  var d = Geo.R * Math.PI * Geo.multiplier;\r\n  return [[-d, -d], [d, d]];\r\n})();\r\n\r\nexport default Geo;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/geo/Geo.js","/*\r\n * LatLon is a helper class for ensuring consistent geographic coordinates.\r\n *\r\n * Based on:\r\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/LatLng.js\r\n */\r\n\r\nclass LatLon {\r\n  constructor(lat, lon, alt) {\r\n    if (isNaN(lat) || isNaN(lon)) {\r\n      throw new Error('Invalid LatLon object: (' + lat + ', ' + lon + ')');\r\n    }\r\n\r\n    this.lat = +lat;\r\n    this.lon = +lon;\r\n\r\n    if (alt !== undefined) {\r\n      this.alt = +alt;\r\n    }\r\n  }\r\n\r\n  clone() {\r\n    return new LatLon(this.lat, this.lon, this.alt);\r\n  }\r\n}\r\n\r\nexport default LatLon;\r\n\r\n// Accepts (LatLon), ([lat, lon, alt]), ([lat, lon]) and (lat, lon, alt)\r\n// Also converts between lng and lon\r\nvar noNew = function(a, b, c) {\r\n  if (a instanceof LatLon) {\r\n    return a;\r\n  }\r\n  if (Array.isArray(a) && typeof a[0] !== 'object') {\r\n    if (a.length === 3) {\r\n      return new LatLon(a[0], a[1], a[2]);\r\n    }\r\n    if (a.length === 2) {\r\n      return new LatLon(a[0], a[1]);\r\n    }\r\n    return null;\r\n  }\r\n  if (a === undefined || a === null) {\r\n    return a;\r\n  }\r\n  if (typeof a === 'object' && 'lat' in a) {\r\n    return new LatLon(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);\r\n  }\r\n  if (b === undefined) {\r\n    return null;\r\n  }\r\n  return new LatLon(a, b, c);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as latLon};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/geo/LatLon.js","/*\r\n * Point is a helper class for ensuring consistent world positions.\r\n *\r\n * Based on:\r\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/Point.js\r\n */\r\n\r\nclass Point {\r\n  constructor(x, y, round) {\r\n    this.x = (round ? Math.round(x) : x);\r\n    this.y = (round ? Math.round(y) : y);\r\n  }\r\n\r\n  clone() {\r\n    return new Point(this.x, this.y);\r\n  }\r\n\r\n  // Non-destructive\r\n  add(point) {\r\n    return this.clone()._add(_point(point));\r\n  }\r\n\r\n  // Destructive\r\n  _add(point) {\r\n    this.x += point.x;\r\n    this.y += point.y;\r\n    return this;\r\n  }\r\n\r\n  // Non-destructive\r\n  subtract(point) {\r\n    return this.clone()._subtract(_point(point));\r\n  }\r\n\r\n  // Destructive\r\n  _subtract(point) {\r\n    this.x -= point.x;\r\n    this.y -= point.y;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Point;\r\n\r\n// Accepts (point), ([x, y]) and (x, y, round)\r\nvar _point = function(x, y, round) {\r\n  if (x instanceof Point) {\r\n    return x;\r\n  }\r\n  if (Array.isArray(x)) {\r\n    return new Point(x[0], x[1]);\r\n  }\r\n  if (x === undefined || x === null) {\r\n    return x;\r\n  }\r\n  return new Point(x, y, round);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {_point as point};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/geo/Point.js","import EventEmitter from 'eventemitter3';\r\nimport extend from 'lodash.assign';\r\nimport shortid from 'shortid';\r\nimport THREE from 'three';\r\nimport Scene from '../engine/Scene';\r\nimport {CSS3DObject} from '../vendor/CSS3DRenderer';\r\nimport {CSS2DObject} from '../vendor/CSS2DRenderer';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// TODO: Need a single move method that handles moving all the various object\r\n// layers so that the DOM layers stay in sync with the 3D layer\r\n\r\n// TODO: Double check that objects within the _object3D Object3D parent are frustum\r\n// culled even if the layer position stays at the default (0,0,0) and the child\r\n// objects are positioned much further away\r\n//\r\n// Or does the layer being at (0,0,0) prevent the child objects from being\r\n// culled because the layer parent is effectively always in view even if the\r\n// child is actually out of camera\r\n\r\nclass Layer extends EventEmitter {\r\n  constructor(options) {\r\n    super();\r\n\r\n    var defaults = {\r\n      id: shortid.generate(),\r\n      output: true,\r\n      outputToScene: true\r\n    };\r\n\r\n    this._options = extend({}, defaults, options);\r\n\r\n    if (this.isOutput()) {\r\n      this._object3D = new THREE.Object3D();\r\n\r\n      this._dom3D = document.createElement('div');\r\n      this._domObject3D = new CSS3DObject(this._dom3D);\r\n\r\n      this._dom2D = document.createElement('div');\r\n      this._domObject2D = new CSS2DObject(this._dom2D);\r\n    }\r\n  }\r\n\r\n  // Add THREE object directly to layer\r\n  add(object) {\r\n    this._object3D.add(object);\r\n  }\r\n\r\n  // Remove THREE object from to layer\r\n  remove(object) {\r\n    this._object3D.remove(object);\r\n  }\r\n\r\n  addDOM3D(object) {\r\n    this._domObject3D.add(object);\r\n  }\r\n\r\n  removeDOM3D(object) {\r\n    this._domObject3D.remove(object);\r\n  }\r\n\r\n  addDOM2D(object) {\r\n    this._domObject2D.add(object);\r\n  }\r\n\r\n  removeDOM2D(object) {\r\n    this._domObject2D.remove(object);\r\n  }\r\n\r\n  // Add layer to world instance and store world reference\r\n  addTo(world) {\r\n    return world.addLayer(this);\r\n  }\r\n\r\n  // Internal method called by World.addLayer to actually add the layer\r\n  _addToWorld(world) {\r\n    this._world = world;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this._onAdd(world).then(() => {\r\n        this.emit('added');\r\n        resolve(this);\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  // Must return a promise\r\n  _onAdd(world) {\r\n    return Promise.resolve(this);\r\n  }\r\n\r\n  getPickingId() {\r\n    if (this._world._engine._picking) {\r\n      return this._world._engine._picking.getNextId();\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // TODO: Tidy this up and don't access so many private properties to work\r\n  addToPicking(object) {\r\n    if (!this._world._engine._picking) {\r\n      return;\r\n    }\r\n\r\n    this._world._engine._picking.add(object);\r\n  }\r\n\r\n  removeFromPicking(object) {\r\n    if (!this._world._engine._picking) {\r\n      return;\r\n    }\r\n\r\n    this._world._engine._picking.remove(object);\r\n  }\r\n\r\n  isOutput() {\r\n    return this._options.output;\r\n  }\r\n\r\n  isOutputToScene() {\r\n    return this._options.outputToScene;\r\n  }\r\n\r\n  // TODO: Also hide any attached DOM layers\r\n  hide() {\r\n    this._object3D.visible = false;\r\n\r\n    if (this._pickingMesh) {\r\n      this._pickingMesh.visible = false;\r\n    }\r\n  }\r\n\r\n  // TODO: Also show any attached DOM layers\r\n  show() {\r\n    this._object3D.visible = true;\r\n\r\n    if (this._pickingMesh) {\r\n      this._pickingMesh.visible = true;\r\n    }\r\n  }\r\n\r\n  // Destroys the layer and removes it from the scene and memory\r\n  destroy() {\r\n    if (this._object3D && this._object3D.children) {\r\n      // Remove everything else in the layer\r\n      var child;\r\n      for (var i = this._object3D.children.length - 1; i >= 0; i--) {\r\n        child = this._object3D.children[i];\r\n\r\n        if (!child) {\r\n          continue;\r\n        }\r\n\r\n        this.remove(child);\r\n\r\n        if (child.geometry) {\r\n          // Dispose of mesh and materials\r\n          child.geometry.dispose();\r\n          child.geometry = null;\r\n        }\r\n\r\n        if (child.material) {\r\n          if (child.material.map) {\r\n            child.material.map.dispose();\r\n            child.material.map = null;\r\n          }\r\n\r\n          child.material.dispose();\r\n          child.material = null;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this._domObject3D && this._domObject3D.children) {\r\n      // Remove everything else in the layer\r\n      var child;\r\n      for (var i = this._domObject3D.children.length - 1; i >= 0; i--) {\r\n        child = this._domObject3D.children[i];\r\n\r\n        if (!child) {\r\n          continue;\r\n        }\r\n\r\n        this.removeDOM3D(child);\r\n      }\r\n    }\r\n\r\n    if (this._domObject2D && this._domObject2D.children) {\r\n      // Remove everything else in the layer\r\n      var child;\r\n      for (var i = this._domObject2D.children.length - 1; i >= 0; i--) {\r\n        child = this._domObject2D.children[i];\r\n\r\n        if (!child) {\r\n          continue;\r\n        }\r\n\r\n        this.removeDOM2D(child);\r\n      }\r\n    }\r\n\r\n    this._domObject3D = null;\r\n    this._domObject2D = null;\r\n\r\n    this._world = null;\r\n    this._object3D = null;\r\n  }\r\n}\r\n\r\nexport default Layer;\r\n\r\nvar noNew = function(options) {\r\n  return new Layer(options);\r\n};\r\n\r\nexport {noNew as layer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/Layer.js","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash.assign/index.js\n// module id = 12\n// module chunks = 0","import THREE from 'three';\r\n\r\n// This can be imported from anywhere and will still reference the same scene,\r\n// though there is a helper reference in Engine.scene\r\n\r\nexport default (function() {\r\n  var scene = new THREE.Scene();\r\n\r\n  // TODO: Re-enable when this works with the skybox\r\n  // scene.fog = new THREE.Fog(0xffffff, 1, 15000);\r\n  return scene;\r\n})();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/Scene.js","// jscs:disable\r\n/* eslint-disable */\r\n\r\n/**\r\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport THREE from 'three';\r\n\r\nvar CSS3DObject = function ( element ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.element = element;\r\n\tthis.element.style.position = 'absolute';\r\n\r\n\tthis.addEventListener( 'removed', function ( event ) {\r\n\r\n\t\tif ( this.element.parentNode !== null ) {\r\n\r\n\t\t\tthis.element.parentNode.removeChild( this.element );\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n};\r\n\r\nCSS3DObject.prototype = Object.create( THREE.Object3D.prototype );\r\nCSS3DObject.prototype.constructor = CSS3DObject;\r\n\r\nvar CSS3DSprite = function ( element ) {\r\n\r\n\tCSS3DObject.call( this, element );\r\n\r\n};\r\n\r\nCSS3DSprite.prototype = Object.create( CSS3DObject.prototype );\r\nCSS3DSprite.prototype.constructor = CSS3DSprite;\r\n\r\n//\r\n\r\nvar CSS3DRenderer = function () {\r\n\r\n\tconsole.log( 'THREE.CSS3DRenderer', THREE.REVISION );\r\n\r\n\tvar _width, _height;\r\n\tvar _widthHalf, _heightHalf;\r\n\r\n\tvar matrix = new THREE.Matrix4();\r\n\r\n\tvar cache = {\r\n\t\tcamera: { fov: 0, style: '' },\r\n\t\tobjects: {}\r\n\t};\r\n\r\n\tvar domElement = document.createElement( 'div' );\r\n\tdomElement.style.overflow = 'hidden';\r\n\r\n\tdomElement.style.WebkitTransformStyle = 'preserve-3d';\r\n\tdomElement.style.MozTransformStyle = 'preserve-3d';\r\n\tdomElement.style.oTransformStyle = 'preserve-3d';\r\n\tdomElement.style.transformStyle = 'preserve-3d';\r\n\r\n\tthis.domElement = domElement;\r\n\r\n\tvar cameraElement = document.createElement( 'div' );\r\n\r\n\tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\r\n\tcameraElement.style.MozTransformStyle = 'preserve-3d';\r\n\tcameraElement.style.oTransformStyle = 'preserve-3d';\r\n\tcameraElement.style.transformStyle = 'preserve-3d';\r\n\r\n\tdomElement.appendChild( cameraElement );\r\n\r\n\tthis.setClearColor = function () {};\r\n\r\n\tthis.getSize = function() {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_widthHalf = _width / 2;\r\n\t\t_heightHalf = _height / 2;\r\n\r\n\t\tdomElement.style.width = width + 'px';\r\n\t\tdomElement.style.height = height + 'px';\r\n\r\n\t\tcameraElement.style.width = width + 'px';\r\n\t\tcameraElement.style.height = height + 'px';\r\n\r\n\t};\r\n\r\n\tvar epsilon = function ( value ) {\r\n\r\n\t\treturn Math.abs( value ) < Number.EPSILON ? 0 : value;\r\n\r\n\t};\r\n\r\n\tvar getCameraCSSMatrix = function ( matrix ) {\r\n\r\n\t\tvar elements = matrix.elements;\r\n\r\n\t\treturn 'matrix3d(' +\r\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 1 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 4 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 6 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 7 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 9 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 13 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 15 ] ) +\r\n\t\t')';\r\n\r\n\t};\r\n\r\n\tvar getObjectCSSMatrix = function ( matrix ) {\r\n\r\n\t\tvar elements = matrix.elements;\r\n\r\n\t\treturn 'translate3d(-50%,-50%,0) matrix3d(' +\r\n\t\t\tepsilon( elements[ 0 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 1 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 2 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 3 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 4 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 5 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 6 ] ) + ',' +\r\n\t\t\tepsilon( - elements[ 7 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 8 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 9 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 10 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 11 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 12 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 13 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 14 ] ) + ',' +\r\n\t\t\tepsilon( elements[ 15 ] ) +\r\n\t\t')';\r\n\r\n\t};\r\n\r\n\tvar renderObject = function ( object, camera ) {\r\n\r\n\t\tif ( object instanceof CSS3DObject ) {\r\n\r\n\t\t\tvar style;\r\n\r\n\t\t\tif ( object instanceof CSS3DSprite ) {\r\n\r\n\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\r\n\r\n\t\t\t\tmatrix.copy( camera.matrixWorldInverse );\r\n\t\t\t\tmatrix.transpose();\r\n\t\t\t\tmatrix.copyPosition( object.matrixWorld );\r\n\t\t\t\tmatrix.scale( object.scale );\r\n\r\n\t\t\t\tmatrix.elements[ 3 ] = 0;\r\n\t\t\t\tmatrix.elements[ 7 ] = 0;\r\n\t\t\t\tmatrix.elements[ 11 ] = 0;\r\n\t\t\t\tmatrix.elements[ 15 ] = 1;\r\n\r\n\t\t\t\tstyle = getObjectCSSMatrix( matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar element = object.element;\r\n\t\t\tvar cachedStyle = cache.objects[ object.id ];\r\n\r\n\t\t\tif ( cachedStyle === undefined || cachedStyle !== style ) {\r\n\r\n\t\t\t\telement.style.WebkitTransform = style;\r\n\t\t\t\telement.style.MozTransform = style;\r\n\t\t\t\telement.style.oTransform = style;\r\n\t\t\t\telement.style.transform = style;\r\n\r\n\t\t\t\tcache.objects[ object.id ] = style;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( element.parentNode !== cameraElement ) {\r\n\r\n\t\t\t\tcameraElement.appendChild( element );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\trenderObject( object.children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tvar fov = 0.5 / Math.tan( THREE.Math.degToRad( camera.fov * 0.5 ) ) * _height;\r\n\r\n\t\tif ( cache.camera.fov !== fov ) {\r\n\r\n\t\t\tdomElement.style.WebkitPerspective = fov + 'px';\r\n\t\t\tdomElement.style.MozPerspective = fov + 'px';\r\n\t\t\tdomElement.style.oPerspective = fov + 'px';\r\n\t\t\tdomElement.style.perspective = fov + 'px';\r\n\r\n\t\t\tcache.camera.fov = fov;\r\n\r\n\t\t}\r\n\r\n\t\tscene.updateMatrixWorld();\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\tvar style = 'translate3d(0,0,' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) +\r\n\t\t\t' translate3d(' + _widthHalf + 'px,' + _heightHalf + 'px, 0)';\r\n\r\n\t\tif ( cache.camera.style !== style ) {\r\n\r\n\t\t\tcameraElement.style.WebkitTransform = style;\r\n\t\t\tcameraElement.style.MozTransform = style;\r\n\t\t\tcameraElement.style.oTransform = style;\r\n\t\t\tcameraElement.style.transform = style;\r\n\r\n\t\t\tcache.camera.style = style;\r\n\r\n\t\t}\r\n\r\n\t\trenderObject( scene, camera );\r\n\r\n\t};\r\n\r\n};\r\n\r\nexport {CSS3DObject as CSS3DObject};\r\nexport {CSS3DSprite as CSS3DSprite};\r\nexport {CSS3DRenderer as CSS3DRenderer};\r\n\r\nTHREE.CSS3DObject = CSS3DObject;\r\nTHREE.CSS3DSprite = CSS3DSprite;\r\nTHREE.CSS3DRenderer = CSS3DRenderer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/CSS3DRenderer.js","// jscs:disable\r\n/* eslint-disable */\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport THREE from 'three';\r\n\r\nvar CSS2DObject = function ( element ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.element = element;\r\n\tthis.element.style.position = 'absolute';\r\n\r\n\tthis.addEventListener( 'removed', function ( event ) {\r\n\r\n\t\tif ( this.element.parentNode !== null ) {\r\n\r\n\t\t\tthis.element.parentNode.removeChild( this.element );\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n};\r\n\r\nCSS2DObject.prototype = Object.create( THREE.Object3D.prototype );\r\nCSS2DObject.prototype.constructor = CSS2DObject;\r\n\r\n//\r\n\r\nvar CSS2DRenderer = function () {\r\n\r\n\tconsole.log( 'THREE.CSS2DRenderer', THREE.REVISION );\r\n\r\n\tvar _width, _height;\r\n\tvar _widthHalf, _heightHalf;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar viewMatrix = new THREE.Matrix4();\r\n\tvar viewProjectionMatrix = new THREE.Matrix4();\r\n\r\n\tvar frustum = new THREE.Frustum();\r\n\r\n\tvar domElement = document.createElement( 'div' );\r\n\tdomElement.style.overflow = 'hidden';\r\n\r\n\tthis.domElement = domElement;\r\n\r\n\tthis.setSize = function ( width, height ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_widthHalf = _width / 2;\r\n\t\t_heightHalf = _height / 2;\r\n\r\n\t\tdomElement.style.width = width + 'px';\r\n\t\tdomElement.style.height = height + 'px';\r\n\r\n\t};\r\n\r\n\tvar renderObject = function ( object, camera ) {\r\n\r\n\t\tif ( object instanceof CSS2DObject ) {\r\n\r\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\tvector.applyProjection( viewProjectionMatrix );\r\n\r\n\t\t\tvar element = object.element;\r\n\t\t\tvar style = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\r\n\r\n\t\t\telement.style.WebkitTransform = style;\r\n\t\t\telement.style.MozTransform = style;\r\n\t\t\telement.style.oTransform = style;\r\n\t\t\telement.style.transform = style;\r\n\r\n\t\t\tif ( element.parentNode !== domElement ) {\r\n\r\n\t\t\t\tdomElement.appendChild( element );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Hide if outside view frustum\r\n\t\t\tif (!frustum.containsPoint(object.position)) {\r\n\t\t\t\telement.style.display = 'none';\r\n\t\t\t} else {\r\n\t\t\t\telement.style.display = 'block';\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\trenderObject( object.children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tscene.updateMatrixWorld();\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\tviewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );\r\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\r\n\r\n\t\tfrustum.setFromMatrix( new THREE.Matrix4().multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse ) );\r\n\r\n\t\trenderObject( scene, camera );\r\n\r\n\t};\r\n\r\n};\r\n\r\nexport {CSS2DObject as CSS2DObject};\r\nexport {CSS2DRenderer as CSS2DRenderer};\r\n\r\nTHREE.CSS2DObject = CSS2DObject;\r\nTHREE.CSS2DRenderer = CSS2DRenderer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/CSS2DRenderer.js","import Layer from './Layer';\r\nimport extend from 'lodash.assign';\r\n\r\nclass LayerGroup extends Layer {\r\n  constructor(options) {\r\n    var defaults = {\r\n      output: false\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    super(_options);\r\n\r\n    this._layers = [];\r\n  }\r\n\r\n  addLayer(layer) {\r\n    this._layers.push(layer);\r\n    return this._world.addLayer(layer);\r\n  }\r\n\r\n  removeLayer(layer) {\r\n    var layerIndex = this._layers.indexOf(layer);\r\n\r\n    if (layerIndex > -1) {\r\n      // Remove from this._layers\r\n      this._layers.splice(layerIndex, 1);\r\n    };\r\n\r\n    this._world.removeLayer(layer);\r\n  }\r\n\r\n  _onAdd(world) {\r\n    return Promise.resolve(this);\r\n  }\r\n\r\n  // Destroy the layers and remove them from the scene and memory\r\n  destroy() {\r\n    // TODO: Sometimes this is already null, find out why\r\n    if (this._layers) {\r\n      for (var i = 0; i < this._layers.length; i++) {\r\n        this._layers[i].destroy();\r\n      }\r\n\r\n      this._layers = null;\r\n    }\r\n\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default LayerGroup;\r\n\r\nvar noNew = function(options) {\r\n  return new LayerGroup(options);\r\n};\r\n\r\nexport {noNew as layerGroup};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/LayerGroup.js","import Layer from '../Layer';\r\nimport extend from 'lodash.assign';\r\nimport THREE from 'three';\r\nimport Skybox from './Skybox';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\nclass EnvironmentLayer extends Layer {\r\n  constructor(options) {\r\n    var defaults = {\r\n      skybox: false\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    super(_options);\r\n  }\r\n\r\n  _onAdd() {\r\n    this._initLights();\r\n\r\n    if (this._options.skybox) {\r\n      this._initSkybox();\r\n    }\r\n\r\n    // this._initGrid();\r\n\r\n    return Promise.resolve(this);\r\n  }\r\n\r\n  // Not fleshed out or thought through yet\r\n  //\r\n  // Lights could potentially be put it their own 'layer' to keep this class\r\n  // much simpler and less messy\r\n  _initLights() {\r\n    // Position doesn't really matter (the angle is important), however it's\r\n    // used here so the helpers look more natural.\r\n\r\n    if (!this._options.skybox) {\r\n      var directionalLight = new THREE.DirectionalLight(0xffffff, 1);\r\n      directionalLight.position.x = 10000;\r\n      directionalLight.position.y = 10000;\r\n      directionalLight.position.z = 10000;\r\n\r\n      // TODO: Get shadows working in non-PBR scenes\r\n\r\n      // directionalLight.castShadow = true;\r\n      //\r\n      // var d = 100;\r\n      // directionalLight.shadow.camera.left = -d;\r\n      // directionalLight.shadow.camera.right = d;\r\n      // directionalLight.shadow.camera.top = d;\r\n      // directionalLight.shadow.camera.bottom = -d;\r\n      //\r\n      // directionalLight.shadow.camera.near = 10;\r\n      // directionalLight.shadow.camera.far = 100;\r\n      //\r\n      // // TODO: Need to dial in on a good shadowmap size\r\n      // directionalLight.shadow.mapSize.width = 2048;\r\n      // directionalLight.shadow.mapSize.height = 2048;\r\n      //\r\n      // // directionalLight.shadowBias = -0.0010;\r\n      // // directionalLight.shadow.darkness = 0.15;\r\n\r\n      var directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.5);\r\n      directionalLight2.position.x = -10000;\r\n      directionalLight2.position.y = 10000;\r\n      directionalLight2.position.z = 0;\r\n\r\n      var directionalLight3 = new THREE.DirectionalLight(0xffffff, 0.5);\r\n      directionalLight3.position.x = 10000;\r\n      directionalLight3.position.y = 10000;\r\n      directionalLight3.position.z = -10000;\r\n\r\n      this.add(directionalLight);\r\n      this.add(directionalLight2);\r\n      this.add(directionalLight3);\r\n\r\n      // var helper = new THREE.DirectionalLightHelper(directionalLight, 10);\r\n      // var helper2 = new THREE.DirectionalLightHelper(directionalLight2, 10);\r\n      // var helper3 = new THREE.DirectionalLightHelper(directionalLight3, 10);\r\n      //\r\n      // this.add(helper);\r\n      // this.add(helper2);\r\n      // this.add(helper3);\r\n    } else {\r\n      // Directional light that will be projected from the sun\r\n      this._skyboxLight = new THREE.DirectionalLight(0xffffff, 1);\r\n\r\n      this._skyboxLight.castShadow = true;\r\n\r\n      var d = 10000;\r\n      this._skyboxLight.shadow.camera.left = -d;\r\n      this._skyboxLight.shadow.camera.right = d;\r\n      this._skyboxLight.shadow.camera.top = d;\r\n      this._skyboxLight.shadow.camera.bottom = -d;\r\n\r\n      this._skyboxLight.shadow.camera.near = 10000;\r\n      this._skyboxLight.shadow.camera.far = 70000;\r\n\r\n      // TODO: Need to dial in on a good shadowmap size\r\n      this._skyboxLight.shadow.mapSize.width = 2048;\r\n      this._skyboxLight.shadow.mapSize.height = 2048;\r\n\r\n      // this._skyboxLight.shadowBias = -0.0010;\r\n      // this._skyboxLight.shadow.darkness = 0.15;\r\n\r\n      // this._object3D.add(new THREE.CameraHelper(this._skyboxLight.shadow.camera));\r\n\r\n      this.add(this._skyboxLight);\r\n    }\r\n  }\r\n\r\n  _initSkybox() {\r\n    this._skybox = new Skybox(this._world, this._skyboxLight);\r\n    this.add(this._skybox._mesh);\r\n  }\r\n\r\n  // Add grid helper for context during initial development\r\n  _initGrid() {\r\n    var size = 4000;\r\n    var step = 100;\r\n\r\n    var gridHelper = new THREE.GridHelper(size, step);\r\n    this.add(gridHelper);\r\n  }\r\n\r\n  // Clean up environment\r\n  destroy() {\r\n    this._skyboxLight = null;\r\n\r\n    if (this._skybox) {\r\n      this.remove(this._skybox._mesh);\r\n      this._skybox.destroy();\r\n      this._skybox = null;\r\n    }\r\n\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default EnvironmentLayer;\r\n\r\nvar noNew = function(options) {\r\n  return new EnvironmentLayer(options);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as environmentLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/environment/EnvironmentLayer.js","import THREE from 'three';\r\nimport Sky from './Sky';\r\nimport throttle from 'lodash.throttle';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\nvar cubemap = {\r\n  vertexShader: [\r\n\t\t'varying vec3 vPosition;',\r\n\t\t'void main() {',\r\n\t\t\t'vPosition = position;',\r\n\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n\t\t'}'\r\n\t].join('\\n'),\r\n\r\n  fragmentShader: [\r\n    'uniform samplerCube cubemap;',\r\n    'varying vec3 vPosition;',\r\n\r\n    'void main() {',\r\n      'gl_FragColor = textureCube(cubemap, normalize(vPosition));',\r\n    '}'\r\n  ].join('\\n')\r\n};\r\n\r\nclass Skybox {\r\n  constructor(world, light) {\r\n    this._world = world;\r\n    this._light = light;\r\n\r\n    this._settings = {\r\n      distance: 38000,\r\n      turbidity: 10,\r\n      reileigh: 2,\r\n      mieCoefficient: 0.005,\r\n      mieDirectionalG: 0.8,\r\n      luminance: 1,\r\n      // 0.48 is a cracking dusk / sunset\r\n      // 0.4 is a beautiful early-morning / late-afternoon\r\n      // 0.2 is a nice day time\r\n      inclination: 0.48, // Elevation / inclination\r\n      azimuth: 0.25, // Facing front\r\n    };\r\n\r\n    this._initSkybox();\r\n    this._updateUniforms();\r\n    this._initEvents();\r\n  }\r\n\r\n  _initEvents() {\r\n    // Throttled to 1 per 100ms\r\n    this._throttledWorldUpdate = throttle(this._update, 100);\r\n    this._world.on('preUpdate', this._throttledWorldUpdate, this);\r\n  }\r\n\r\n  _initSkybox() {\r\n    // Cube camera for skybox\r\n    this._cubeCamera = new THREE.CubeCamera(1, 20000000, 128);\r\n\r\n    // Cube material\r\n    var cubeTarget = this._cubeCamera.renderTarget;\r\n\r\n    // Add Sky Mesh\r\n    this._sky = new Sky();\r\n    this._skyScene = new THREE.Scene();\r\n    this._skyScene.add(this._sky.mesh);\r\n\r\n    // Add Sun Helper\r\n    this._sunSphere = new THREE.Mesh(\r\n      new THREE.SphereBufferGeometry(2000, 16, 8),\r\n      new THREE.MeshBasicMaterial({\r\n        color: 0xffffff\r\n      })\r\n    );\r\n\r\n    // TODO: This isn't actually visible because it's not added to the layer\r\n    // this._sunSphere.visible = true;\r\n\r\n    var skyboxUniforms = {\r\n      cubemap: { type: 't', value: cubeTarget }\r\n    };\r\n\r\n    var skyboxMat = new THREE.ShaderMaterial({\r\n      uniforms: skyboxUniforms,\r\n      vertexShader: cubemap.vertexShader,\r\n      fragmentShader: cubemap.fragmentShader,\r\n      side: THREE.BackSide\r\n    });\r\n\r\n    this._mesh = new THREE.Mesh(new THREE.BoxGeometry(1900000, 1900000, 1900000), skyboxMat);\r\n\r\n    this._updateSkybox = true;\r\n  }\r\n\r\n  _updateUniforms() {\r\n    var settings = this._settings;\r\n    var uniforms = this._sky.uniforms;\r\n    uniforms.turbidity.value = settings.turbidity;\r\n    uniforms.reileigh.value = settings.reileigh;\r\n    uniforms.luminance.value = settings.luminance;\r\n    uniforms.mieCoefficient.value = settings.mieCoefficient;\r\n    uniforms.mieDirectionalG.value = settings.mieDirectionalG;\r\n\r\n    var theta = Math.PI * (settings.inclination - 0.5);\r\n    var phi = 2 * Math.PI * (settings.azimuth - 0.5);\r\n\r\n    this._sunSphere.position.x = settings.distance * Math.cos(phi);\r\n    this._sunSphere.position.y = settings.distance * Math.sin(phi) * Math.sin(theta);\r\n    this._sunSphere.position.z = settings.distance * Math.sin(phi) * Math.cos(theta);\r\n\r\n    // Move directional light to sun position\r\n    this._light.position.copy(this._sunSphere.position);\r\n\r\n    this._sky.uniforms.sunPosition.value.copy(this._sunSphere.position);\r\n  }\r\n\r\n  _update(delta) {\r\n    if (this._updateSkybox) {\r\n      this._updateSkybox = false;\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    // if (!this._angle) {\r\n    //   this._angle = 0;\r\n    // }\r\n    //\r\n    // // Animate inclination\r\n    // this._angle += Math.PI * delta;\r\n    // this._settings.inclination = 0.5 * (Math.sin(this._angle) / 2 + 0.5);\r\n\r\n    // Update light intensity depending on elevation of sun (day to night)\r\n    this._light.intensity = 1 - 0.95 * (this._settings.inclination / 0.5);\r\n\r\n    // // console.log(delta, this._angle, this._settings.inclination);\r\n    //\r\n    // TODO: Only do this when the uniforms have been changed\r\n    this._updateUniforms();\r\n\r\n    // TODO: Only do this when the cubemap has actually changed\r\n    this._cubeCamera.updateCubeMap(this._world._engine._renderer, this._skyScene);\r\n  }\r\n\r\n  getRenderTarget() {\r\n    return this._cubeCamera.renderTarget;\r\n  }\r\n\r\n  setInclination(inclination) {\r\n    this._settings.inclination = inclination;\r\n    this._updateSkybox = true;\r\n  }\r\n\r\n  // Destroy the skybox and remove it from memory\r\n  destroy() {\r\n    this._world.off('preUpdate', this._throttledWorldUpdate);\r\n    this._throttledWorldUpdate = null;\r\n\r\n    this._world = null;\r\n    this._light = null;\r\n\r\n    this._cubeCamera = null;\r\n\r\n    this._sky.mesh.geometry.dispose();\r\n    this._sky.mesh.geometry = null;\r\n\r\n    if (this._sky.mesh.material.map) {\r\n      this._sky.mesh.material.map.dispose();\r\n      this._sky.mesh.material.map = null;\r\n    }\r\n\r\n    this._sky.mesh.material.dispose();\r\n    this._sky.mesh.material = null;\r\n\r\n    this._sky.mesh = null;\r\n    this._sky = null;\r\n\r\n    this._skyScene = null;\r\n\r\n    this._sunSphere.geometry.dispose();\r\n    this._sunSphere.geometry = null;\r\n\r\n    if (this._sunSphere.material.map) {\r\n      this._sunSphere.material.map.dispose();\r\n      this._sunSphere.material.map = null;\r\n    }\r\n\r\n    this._sunSphere.material.dispose();\r\n    this._sunSphere.material = null;\r\n\r\n    this._sunSphere = null;\r\n\r\n    this._mesh.geometry.dispose();\r\n    this._mesh.geometry = null;\r\n\r\n    if (this._mesh.material.map) {\r\n      this._mesh.material.map.dispose();\r\n      this._mesh.material.map = null;\r\n    }\r\n\r\n    this._mesh.material.dispose();\r\n    this._mesh.material = null;\r\n  }\r\n}\r\n\r\nexport default Skybox;\r\n\r\nvar noNew = function(world, light) {\r\n  return new Skybox(world, light);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as skybox};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/environment/Skybox.js","// jscs:disable\r\n/*eslint eqeqeq:0*/\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n *\r\n * Based on 'A Practical Analytic Model for Daylight'\r\n * aka The Preetham Model, the de facto standard analytic skydome model\r\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\r\n *\r\n * First implemented by Simon Wallner\r\n * http://www.simonwallner.at/projects/atmospheric-scattering\r\n *\r\n * Improved by Martin Upitis\r\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\r\n *\r\n * Three.js integration by zz85 http://twitter.com/blurspline\r\n*/\r\n\r\nimport THREE from 'three';\r\n\r\nTHREE.ShaderLib[ 'sky' ] = {\r\n\r\n\tuniforms: {\r\n\r\n\t\tluminance:\t { type: 'f', value: 1 },\r\n\t\tturbidity:\t { type: 'f', value: 2 },\r\n\t\treileigh:\t { type: 'f', value: 1 },\r\n\t\tmieCoefficient:\t { type: 'f', value: 0.005 },\r\n\t\tmieDirectionalG: { type: 'f', value: 0.8 },\r\n\t\tsunPosition: \t { type: 'v3', value: new THREE.Vector3() }\r\n\r\n\t},\r\n\r\n\tvertexShader: [\r\n\r\n\t\t'varying vec3 vWorldPosition;',\r\n\r\n\t\t'void main() {',\r\n\r\n\t\t\t'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\r\n\t\t\t'vWorldPosition = worldPosition.xyz;',\r\n\r\n\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n\r\n\t\t'}',\r\n\r\n\t].join( '\\n' ),\r\n\r\n\tfragmentShader: [\r\n\r\n\t\t'uniform sampler2D skySampler;',\r\n\t\t'uniform vec3 sunPosition;',\r\n\t\t'varying vec3 vWorldPosition;',\r\n\r\n\t\t'vec3 cameraPos = vec3(0., 0., 0.);',\r\n\t\t'// uniform sampler2D sDiffuse;',\r\n\t\t'// const float turbidity = 10.0; //',\r\n\t\t'// const float reileigh = 2.; //',\r\n\t\t'// const float luminance = 1.0; //',\r\n\t\t'// const float mieCoefficient = 0.005;',\r\n\t\t'// const float mieDirectionalG = 0.8;',\r\n\r\n\t\t'uniform float luminance;',\r\n\t\t'uniform float turbidity;',\r\n\t\t'uniform float reileigh;',\r\n\t\t'uniform float mieCoefficient;',\r\n\t\t'uniform float mieDirectionalG;',\r\n\r\n\t\t'// constants for atmospheric scattering',\r\n\t\t'const float e = 2.71828182845904523536028747135266249775724709369995957;',\r\n\t\t'const float pi = 3.141592653589793238462643383279502884197169;',\r\n\r\n\t\t'const float n = 1.0003; // refractive index of air',\r\n\t\t'const float N = 2.545E25; // number of molecules per unit volume for air at',\r\n\t\t\t\t\t\t\t\t'// 288.15K and 1013mb (sea level -45 celsius)',\r\n\t\t'const float pn = 0.035;\t// depolatization factor for standard air',\r\n\r\n\t\t'// wavelength of used primaries, according to preetham',\r\n\t\t'const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);',\r\n\r\n\t\t'// mie stuff',\r\n\t\t'// K coefficient for the primaries',\r\n\t\t'const vec3 K = vec3(0.686, 0.678, 0.666);',\r\n\t\t'const float v = 4.0;',\r\n\r\n\t\t'// optical length at zenith for molecules',\r\n\t\t'const float rayleighZenithLength = 8.4E3;',\r\n\t\t'const float mieZenithLength = 1.25E3;',\r\n\t\t'const vec3 up = vec3(0.0, 1.0, 0.0);',\r\n\r\n\t\t'const float EE = 1000.0;',\r\n\t\t'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;',\r\n\t\t'// 66 arc seconds -> degrees, and the cosine of that',\r\n\r\n\t\t'// earth shadow hack',\r\n\t\t'const float cutoffAngle = pi/1.95;',\r\n\t\t'const float steepness = 1.5;',\r\n\r\n\r\n\t\t'vec3 totalRayleigh(vec3 lambda)',\r\n\t\t'{',\r\n\t\t\t'return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));',\r\n\t\t'}',\r\n\r\n\t\t// see http://blenderartists.org/forum/showthread.php?321110-Shaders-and-Skybox-madness\r\n\t\t'// A simplied version of the total Reayleigh scattering to works on browsers that use ANGLE',\r\n\t\t'vec3 simplifiedRayleigh()',\r\n\t\t'{',\r\n\t\t\t'return 0.0005 / vec3(94, 40, 18);',\r\n\t\t\t// return 0.00054532832366 / (3.0 * 2.545E25 * pow(vec3(680E-9, 550E-9, 450E-9), vec3(4.0)) * 6.245);\r\n\t\t'}',\r\n\r\n\t\t'float rayleighPhase(float cosTheta)',\r\n\t\t'{\t ',\r\n\t\t\t'return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));',\r\n\t\t'//\treturn (1.0 / (3.0*pi)) * (1.0 + pow(cosTheta, 2.0));',\r\n\t\t'//\treturn (3.0 / 4.0) * (1.0 + pow(cosTheta, 2.0));',\r\n\t\t'}',\r\n\r\n\t\t'vec3 totalMie(vec3 lambda, vec3 K, float T)',\r\n\t\t'{',\r\n\t\t\t'float c = (0.2 * T ) * 10E-18;',\r\n\t\t\t'return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;',\r\n\t\t'}',\r\n\r\n\t\t'float hgPhase(float cosTheta, float g)',\r\n\t\t'{',\r\n\t\t\t'return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));',\r\n\t\t'}',\r\n\r\n\t\t'float sunIntensity(float zenithAngleCos)',\r\n\t\t'{',\r\n\t\t\t'return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));',\r\n\t\t'}',\r\n\r\n\t\t'// float logLuminance(vec3 c)',\r\n\t\t'// {',\r\n\t\t'// \treturn log(c.r * 0.2126 + c.g * 0.7152 + c.b * 0.0722);',\r\n\t\t'// }',\r\n\r\n\t\t'// Filmic ToneMapping http://filmicgames.com/archives/75',\r\n\t\t'float A = 0.15;',\r\n\t\t'float B = 0.50;',\r\n\t\t'float C = 0.10;',\r\n\t\t'float D = 0.20;',\r\n\t\t'float E = 0.02;',\r\n\t\t'float F = 0.30;',\r\n\t\t'float W = 1000.0;',\r\n\r\n\t\t'vec3 Uncharted2Tonemap(vec3 x)',\r\n\t\t'{',\r\n\t\t   'return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;',\r\n\t\t'}',\r\n\r\n\r\n\t\t'void main() ',\r\n\t\t'{',\r\n\t\t\t'float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);',\r\n\r\n\t\t\t'// luminance =  1.0 ;// vWorldPosition.y / 450000. + 0.5; //sunPosition.y / 450000. * 1. + 0.5;',\r\n\r\n\t\t\t '// gl_FragColor = vec4(sunfade, sunfade, sunfade, 1.0);',\r\n\r\n\t\t\t'float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));',\r\n\r\n\t\t\t'vec3 sunDirection = normalize(sunPosition);',\r\n\r\n\t\t\t'float sunE = sunIntensity(dot(sunDirection, up));',\r\n\r\n\t\t\t'// extinction (absorbtion + out scattering) ',\r\n\t\t\t'// rayleigh coefficients',\r\n\r\n\t\t\t// 'vec3 betaR = totalRayleigh(lambda) * reileighCoefficient;',\r\n\t\t\t'vec3 betaR = simplifiedRayleigh() * reileighCoefficient;',\r\n\r\n\t\t\t'// mie coefficients',\r\n\t\t\t'vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;',\r\n\r\n\t\t\t'// optical length',\r\n\t\t\t'// cutoff angle at 90 to avoid singularity in next formula.',\r\n\t\t\t'float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));',\r\n\t\t\t'float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));',\r\n\t\t\t'float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));',\r\n\r\n\r\n\r\n\t\t\t'// combined extinction factor\t',\r\n\t\t\t'vec3 Fex = exp(-(betaR * sR + betaM * sM));',\r\n\r\n\t\t\t'// in scattering',\r\n\t\t\t'float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);',\r\n\r\n\t\t\t'float rPhase = rayleighPhase(cosTheta*0.5+0.5);',\r\n\t\t\t'vec3 betaRTheta = betaR * rPhase;',\r\n\r\n\t\t\t'float mPhase = hgPhase(cosTheta, mieDirectionalG);',\r\n\t\t\t'vec3 betaMTheta = betaM * mPhase;',\r\n\r\n\r\n\t\t\t'vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));',\r\n\t\t\t'Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));',\r\n\r\n\t\t\t'//nightsky',\r\n\t\t\t'vec3 direction = normalize(vWorldPosition - cameraPos);',\r\n\t\t\t'float theta = acos(direction.y); // elevation --> y-axis, [-pi/2, pi/2]',\r\n\t\t\t'float phi = atan(direction.z, direction.x); // azimuth --> x-axis [-pi/2, pi/2]',\r\n\t\t\t'vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);',\r\n\t\t\t'// vec3 L0 = texture2D(skySampler, uv).rgb+0.1 * Fex;',\r\n\t\t\t'vec3 L0 = vec3(0.1) * Fex;',\r\n\r\n\t\t\t'// composition + solar disc',\r\n\t\t\t'//if (cosTheta > sunAngularDiameterCos)',\r\n\t\t\t'float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);',\r\n\t\t\t'// if (normalize(vWorldPosition - cameraPos).y>0.0)',\r\n\t\t\t'L0 += (sunE * 19000.0 * Fex)*sundisk;',\r\n\r\n\r\n\t\t\t'vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));',\r\n\r\n\t\t\t'vec3 texColor = (Lin+L0);   ',\r\n\t\t\t'texColor *= 0.04 ;',\r\n\t\t\t'texColor += vec3(0.0,0.001,0.0025)*0.3;',\r\n\r\n\t\t\t'float g_fMaxLuminance = 1.0;',\r\n\t\t\t'float fLumScaled = 0.1 / luminance;     ',\r\n\t\t\t'float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled); ',\r\n\r\n\t\t\t'float ExposureBias = fLumCompressed;',\r\n\r\n\t\t\t'vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);',\r\n\t\t\t'vec3 color = curr*whiteScale;',\r\n\r\n\t\t\t'vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));',\r\n\r\n\r\n\t\t\t'gl_FragColor.rgb = retColor;',\r\n\r\n\t\t\t'gl_FragColor.a = 1.0;',\r\n\t\t'}',\r\n\r\n\t].join( '\\n' )\r\n\r\n};\r\n\r\nvar Sky = function () {\r\n\r\n\tvar skyShader = THREE.ShaderLib[ 'sky' ];\r\n\tvar skyUniforms = THREE.UniformsUtils.clone( skyShader.uniforms );\r\n\r\n\tvar skyMat = new THREE.ShaderMaterial( {\r\n\t\tfragmentShader: skyShader.fragmentShader,\r\n\t\tvertexShader: skyShader.vertexShader,\r\n\t\tuniforms: skyUniforms,\r\n\t\tside: THREE.BackSide\r\n\t} );\r\n\r\n\tvar skyGeo = new THREE.SphereBufferGeometry( 450000, 32, 15 );\r\n\tvar skyMesh = new THREE.Mesh( skyGeo, skyMat );\r\n\r\n\r\n\t// Expose variables\r\n\tthis.mesh = skyMesh;\r\n\tthis.uniforms = skyUniforms;\r\n\r\n};\r\n\r\nexport default Sky;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/environment/Sky.js","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash.throttle/index.js\n// module id = 20\n// module chunks = 0","import TileLayer from './TileLayer';\r\nimport ImageTile from './ImageTile';\r\nimport ImageTileLayerBaseMaterial from './ImageTileLayerBaseMaterial';\r\nimport throttle from 'lodash.throttle';\r\nimport THREE from 'three';\r\nimport extend from 'lodash.assign';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// DONE: Find a way to avoid the flashing caused by the gap between old tiles\r\n// being removed and the new tiles being ready for display\r\n//\r\n// DONE: Simplest first step for MVP would be to give each tile mesh the colour\r\n// of the basemap ground so it blends in a little more, or have a huge ground\r\n// plane underneath all the tiles that shows through between tile updates.\r\n//\r\n// Could keep the old tiles around until the new ones are ready, though they'd\r\n// probably need to be layered in a way so the old tiles don't overlap new ones,\r\n// which is similar to how Leaflet approaches this (it has 2 layers)\r\n//\r\n// Could keep the tile from the previous quadtree level visible until all 4\r\n// tiles at the new / current level have finished loading and are displayed.\r\n// Perhaps by keeping a map of tiles by quadcode and a boolean for each of the\r\n// child quadcodes showing whether they are loaded and in view. If all true then\r\n// remove the parent tile, otherwise keep it on a lower layer.\r\n\r\n// TODO: Load and display a base layer separate to the LOD grid that is at a low\r\n// resolution – used as a backup / background to fill in empty areas / distance\r\n\r\n// DONE: Fix the issue where some tiles just don't load, or at least the texture\r\n// never shows up – tends to happen if you quickly zoom in / out past it while\r\n// it's still loading, leaving a blank space\r\n\r\n// TODO: Optimise the request of many image tiles – look at how Leaflet and\r\n// OpenWebGlobe approach this (eg. batching, queues, etc)\r\n\r\n// TODO: Cancel pending tile requests if they get removed from view before they\r\n// reach a ready state (eg. cancel image requests, etc). Need to ensure that the\r\n// images are re-requested when the tile is next in scene (even if from cache)\r\n\r\n// TODO: Consider not performing an LOD calculation on every frame, instead only\r\n// on move end so panning, orbiting and zooming stays smooth. Otherwise it's\r\n// possible for performance to tank if you pan, orbit or zoom rapidly while all\r\n// the LOD calculations are being made and new tiles requested.\r\n//\r\n// Pending tiles should continue to be requested and output to the scene on each\r\n// frame, but no new LOD calculations should be made.\r\n\r\n// This tile layer both updates the quadtree and outputs tiles on every frame\r\n// (throttled to some amount)\r\n//\r\n// This is because the computational complexity of image tiles is generally low\r\n// and so there isn't much jank when running these calculations and outputs in\r\n// realtime\r\n//\r\n// The benefit to doing this is that the underlying map layer continues to\r\n// refresh and update during movement, which is an arguably better experience\r\n\r\nclass ImageTileLayer extends TileLayer {\r\n  constructor(path, options) {\r\n    var defaults = {\r\n      distance: 300000\r\n    };\r\n\r\n    options = extend({}, defaults, options);\r\n\r\n    super(options);\r\n\r\n    this._path = path;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    return new Promise((resolve, reject) => {\r\n      super._onAdd(world).then(() => {\r\n        // TODO: Removed because it causes depth buffer intersection issues\r\n        // with layer on top for some reason. Need to work out why and fix.\r\n        //\r\n        // Add base layer\r\n        // var geom = new THREE.PlaneBufferGeometry(2000000, 2000000, 1);\r\n\r\n        // var baseMaterial;\r\n        // if (this._world._environment._skybox) {\r\n        //   baseMaterial = ImageTileLayerBaseMaterial('#f5f5f3', this._world._environment._skybox.getRenderTarget());\r\n        // } else {\r\n        //   baseMaterial = ImageTileLayerBaseMaterial('#f5f5f3');\r\n        // }\r\n\r\n        // var mesh = new THREE.Mesh(geom, baseMaterial);\r\n\r\n        // // Setting this causes a depth-buffer intersection issue on the\r\n        // // all-the-things example\r\n        // // mesh.renderOrder = -1;\r\n\r\n        // mesh.rotation.x = -90 * Math.PI / 180;\r\n\r\n        // // TODO: It might be overkill to receive a shadow on the base layer as it's\r\n        // // rarely seen (good to have if performance difference is negligible)\r\n        // mesh.receiveShadow = true;\r\n\r\n        // this._baseLayer = mesh;\r\n        // this.add(mesh);\r\n\r\n        // Trigger initial quadtree calculation on the next frame\r\n        //\r\n        // TODO: This is a hack to ensure the camera is all set up - a better\r\n        // solution should be found\r\n        setTimeout(() => {\r\n          this._calculateLOD();\r\n          this._initEvents();\r\n          resolve(this);\r\n        }, 0);\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  _initEvents() {\r\n    // Run LOD calculations based on render calls\r\n    //\r\n    // Throttled to 1 LOD calculation per 100ms\r\n    this._throttledWorldUpdate = throttle(this._onWorldUpdate, 100);\r\n\r\n    this._world.on('preUpdate', this._throttledWorldUpdate, this);\r\n    // this._world.on('move', this._onWorldMove, this);\r\n  }\r\n\r\n  _onWorldUpdate() {\r\n    this._calculateLOD();\r\n    this._outputTiles();\r\n  }\r\n\r\n  _onWorldMove(latlon, point) {\r\n    // this._moveBaseLayer(point);\r\n  }\r\n\r\n  _moveBaseLayer(point) {\r\n    this._baseLayer.position.x = point.x;\r\n    this._baseLayer.position.z = point.y;\r\n  }\r\n\r\n  _createTile(quadcode, layer) {\r\n    return new ImageTile(quadcode, this._path, layer);\r\n  }\r\n\r\n  // Destroys the layer and removes it from the scene and memory\r\n  destroy() {\r\n    this._world.off('preUpdate', this._throttledWorldUpdate);\r\n    this._world.off('move', this._onWorldMove);\r\n\r\n    this._throttledWorldUpdate = null;\r\n\r\n    // Dispose of mesh and materials\r\n    // this._baseLayer.geometry.dispose();\r\n    // this._baseLayer.geometry = null;\r\n\r\n    // if (this._baseLayer.material.map) {\r\n    //   this._baseLayer.material.map.dispose();\r\n    //   this._baseLayer.material.map = null;\r\n    // }\r\n\r\n    // this._baseLayer.material.dispose();\r\n    // this._baseLayer.material = null;\r\n\r\n    // this._baseLayer = null;\r\n\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default ImageTileLayer;\r\n\r\nvar noNew = function(path, options) {\r\n  return new ImageTileLayer(path, options);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as imageTileLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/ImageTileLayer.js","import Layer from '../Layer';\r\nimport extend from 'lodash.assign';\r\nimport TileCache from './TileCache';\r\nimport THREE from 'three';\r\n\r\n// TODO: Consider removing picking from TileLayer instances as there aren't\r\n// (m)any situations where it would be practical\r\n//\r\n// For example, how would you even know what picking IDs to listen to and what\r\n// to do with them?\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// TODO: Consider keeping a single TileLayer / LOD instance running by default\r\n// that keeps a standard LOD grid for other layers to utilise, rather than\r\n// having to create their own, unique LOD grid and duplicate calculations when\r\n// they're going to use the same grid setup anyway\r\n//\r\n// It still makes sense to be able to have a custom LOD grid for some layers as\r\n// they may want to customise things, maybe not even using a quadtree at all!\r\n//\r\n// Perhaps it makes sense to split out the quadtree stuff into a singleton and\r\n// pass in the necessary parameters each time for the calculation step.\r\n//\r\n// Either way, it seems silly to force layers to have to create a new LOD grid\r\n// each time and create extra, duplicated processing every frame.\r\n\r\n// TODO: Allow passing in of options to define min/max LOD and a distance to use\r\n// for culling tiles beyond that distance.\r\n\r\n// DONE: Prevent tiles from being loaded if they are further than a certain\r\n// distance from the camera and are unlikely to be seen anyway\r\n\r\n// TODO: Avoid performing LOD calculation when it isn't required. For example,\r\n// when nothing has changed since the last frame and there are no tiles to be\r\n// loaded or in need of rendering\r\n\r\n// TODO: Only remove tiles from the layer that aren't to be rendered in the\r\n// current frame – it seems excessive to remove all tiles and re-add them on\r\n// every single frame, even if it's just array manipulation\r\n\r\n// TODO: Fix LOD calculation so min and max LOD can be changed without causing\r\n// problems (eg. making min above 5 causes all sorts of issues)\r\n\r\n// TODO: Reuse THREE objects where possible instead of creating new instances\r\n// on every LOD calculation\r\n\r\n// TODO: Consider not using THREE or LatLon / Point objects in LOD calculations\r\n// to avoid creating unnecessary memory for garbage collection\r\n\r\n// TODO: Prioritise loading of tiles at highest level in the quadtree (those\r\n// closest to the camera) so visual inconsistancies during loading are minimised\r\n\r\nclass TileLayer extends Layer {\r\n  constructor(options) {\r\n    var defaults = {\r\n      picking: false,\r\n      maxCache: 1000,\r\n      maxLOD: 18\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    super(_options);\r\n\r\n    this._destroy = false;\r\n\r\n    this._tileCache = new TileCache(this._options.maxCache, tile => {\r\n      this._destroyTile(tile);\r\n    });\r\n\r\n    // List of tiles from the previous LOD calculation\r\n    this._tileList = [];\r\n\r\n    // TODO: Work out why changing the minLOD causes loads of issues\r\n    this._minLOD = 3;\r\n    this._maxLOD = this._options.maxLOD;\r\n\r\n    this._frustum = new THREE.Frustum();\r\n    this._tiles = new THREE.Object3D();\r\n    this._tilesPicking = new THREE.Object3D();\r\n  }\r\n\r\n  _onAdd(world) {\r\n    this.addToPicking(this._tilesPicking);\r\n    this.add(this._tiles);\r\n\r\n    return Promise.resolve();\r\n  }\r\n\r\n  _updateFrustum() {\r\n    var camera = this._world.getCamera();\r\n    var projScreenMatrix = new THREE.Matrix4();\r\n    projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\r\n\r\n    this._frustum.setFromMatrix(camera.projectionMatrix);\r\n    this._frustum.setFromMatrix(new THREE.Matrix4().multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse));\r\n  }\r\n\r\n  _tileInFrustum(tile) {\r\n    var bounds = tile.getBounds();\r\n    return this._frustum.intersectsBox(new THREE.Box3(new THREE.Vector3(bounds[0], 0, bounds[3]), new THREE.Vector3(bounds[2], 0, bounds[1])));\r\n  }\r\n\r\n  // Update and output tiles from the previous LOD checklist\r\n  _outputTiles() {\r\n    if (!this._tiles || this._destroy) {\r\n      return;\r\n    }\r\n\r\n    // Remove all tiles from layer\r\n    this._removeTiles();\r\n\r\n    // Add / re-add tiles\r\n    this._tileList.forEach(tile => {\r\n      // Are the mesh and texture ready?\r\n      //\r\n      // If yes, continue\r\n      // If no, skip\r\n      if (!tile.isReady()) {\r\n        return;\r\n      }\r\n\r\n      // Add tile to layer (and to scene) if not already there\r\n      this._tiles.add(tile.getMesh());\r\n\r\n      if (tile.getPickingMesh()) {\r\n        this._tilesPicking.add(tile.getPickingMesh());\r\n      }\r\n    });\r\n\r\n    // Emit event notifying of new tiles\r\n    this.emit('tilesList', this._tileList.map((tile) => tile));\r\n  }\r\n\r\n  // Works out tiles in the view frustum and stores them in an array\r\n  //\r\n  // Does not output the tiles, deferring this to _outputTiles()\r\n  _calculateLOD() {\r\n    if (this._stop || !this._world || this._destroy) {\r\n      return;\r\n    }\r\n\r\n    // var start = (performance || Date).now();\r\n\r\n    var camera = this._world.getCamera();\r\n\r\n    // 1. Update and retrieve camera frustum\r\n    this._updateFrustum(this._frustum, camera);\r\n\r\n    // 2. Add the four root items of the quadtree to a check list\r\n    var checkList = this._checklist;\r\n    checkList = [];\r\n    checkList.push(this._requestTile('0', this));\r\n    checkList.push(this._requestTile('1', this));\r\n    checkList.push(this._requestTile('2', this));\r\n    checkList.push(this._requestTile('3', this));\r\n\r\n    // 3. Call Divide, passing in the check list\r\n    this._divide(checkList);\r\n\r\n    // // 4. Remove all tiles from layer\r\n    //\r\n    // Moved to _outputTiles() for now\r\n    // this._removeTiles();\r\n\r\n    // Order tile-list by zoom so nearest tiles are requested first\r\n    checkList.sort((a, b) => {\r\n      return a._quadcode.length < b._quadcode.length;\r\n    });\r\n\r\n    // 5. Filter the tiles remaining in the check list\r\n    var tileList = checkList.filter((tile, index) => {\r\n      // Skip tile if it's not in the current view frustum\r\n      if (!this._tileInFrustum(tile)) {\r\n        return false;\r\n      }\r\n\r\n      if (this._options.distance && this._options.distance > 0) {\r\n        // TODO: Can probably speed this up\r\n        var center = tile.getCenter();\r\n        var dist = (new THREE.Vector3(center[0], 0, center[1])).sub(camera.position).length();\r\n\r\n        // Manual distance limit to cut down on tiles so far away\r\n        if (dist > this._options.distance) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Does the tile have a mesh?\r\n      //\r\n      // If yes, continue\r\n      // If no, generate tile mesh, request texture and skip\r\n      if (!tile.getMesh() || tile.isAborted()) {\r\n        tile.requestTileAsync();\r\n      }\r\n\r\n      return true;\r\n\r\n      // Are the mesh and texture ready?\r\n      //\r\n      // If yes, continue\r\n      // If no, skip\r\n      // if (!tile.isReady()) {\r\n      //   return;\r\n      // }\r\n      //\r\n      // // Add tile to layer (and to scene)\r\n      // this._tiles.add(tile.getMesh());\r\n    });\r\n\r\n    // Get list of tiles that were in the previous update but not the\r\n    // current one (for aborting requests, etc)\r\n    var missingTiles = this._tileList.filter((item) => {\r\n      return tileList.indexOf(item) < 0;\r\n    });\r\n\r\n    // Abort tiles that are no longer in view\r\n    missingTiles.forEach((tile) => tile._abortRequest());\r\n\r\n    this._tileList = tileList;\r\n\r\n    // console.log((performance || Date).now() - start);\r\n  }\r\n\r\n  _divide(checkList) {\r\n    var count = 0;\r\n    var currentItem;\r\n    var quadcode;\r\n\r\n    // 1. Loop until count equals check list length\r\n    while (count != checkList.length) {\r\n      currentItem = checkList[count];\r\n      quadcode = currentItem.getQuadcode();\r\n\r\n      // 2. Increase count and continue loop if quadcode equals max LOD / zoom\r\n      if (currentItem.length === this._maxLOD) {\r\n        count++;\r\n        continue;\r\n      }\r\n\r\n      // 3. Else, calculate screen-space error metric for quadcode\r\n      if (this._screenSpaceError(currentItem)) {\r\n        // 4. If error is sufficient...\r\n\r\n        // 4a. Remove parent item from the check list\r\n        checkList.splice(count, 1);\r\n\r\n        // 4b. Add 4 child items to the check list\r\n        checkList.push(this._requestTile(quadcode + '0', this));\r\n        checkList.push(this._requestTile(quadcode + '1', this));\r\n        checkList.push(this._requestTile(quadcode + '2', this));\r\n        checkList.push(this._requestTile(quadcode + '3', this));\r\n\r\n        // 4d. Continue the loop without increasing count\r\n        continue;\r\n      } else {\r\n        // 5. Else, increase count and continue loop\r\n        count++;\r\n      }\r\n    }\r\n  }\r\n\r\n  _screenSpaceError(tile) {\r\n    var minDepth = this._minLOD;\r\n    var maxDepth = this._maxLOD;\r\n\r\n    var quadcode = tile.getQuadcode();\r\n\r\n    var camera = this._world.getCamera();\r\n\r\n    // Tweak this value to refine specific point that each quad is subdivided\r\n    //\r\n    // It's used to multiple the dimensions of the tile sides before\r\n    // comparing against the tile distance from camera\r\n    var quality = 3.0;\r\n\r\n    // 1. Return false if quadcode length equals maxDepth (stop dividing)\r\n    if (quadcode.length === maxDepth) {\r\n      return false;\r\n    }\r\n\r\n    // 2. Return true if quadcode length is less than minDepth\r\n    if (quadcode.length < minDepth) {\r\n      return true;\r\n    }\r\n\r\n    // 3. Return false if quadcode bounds are not in view frustum\r\n    if (!this._tileInFrustum(tile)) {\r\n      return false;\r\n    }\r\n\r\n    var center = tile.getCenter();\r\n\r\n    // 4. Calculate screen-space error metric\r\n    // TODO: Use closest distance to one of the 4 tile corners\r\n    var dist = (new THREE.Vector3(center[0], 0, center[1])).sub(camera.position).length();\r\n\r\n    var error = quality * tile.getSide() / dist;\r\n\r\n    // 5. Return true if error is greater than 1.0, else return false\r\n    return (error > 1.0);\r\n  }\r\n\r\n  _removeTiles() {\r\n    if (!this._tiles || !this._tiles.children) {\r\n      return;\r\n    }\r\n\r\n    for (var i = this._tiles.children.length - 1; i >= 0; i--) {\r\n      this._tiles.remove(this._tiles.children[i]);\r\n    }\r\n\r\n    if (!this._tilesPicking || !this._tilesPicking.children) {\r\n      return;\r\n    }\r\n\r\n    for (var i = this._tilesPicking.children.length - 1; i >= 0; i--) {\r\n      this._tilesPicking.remove(this._tilesPicking.children[i]);\r\n    }\r\n  }\r\n\r\n  // Return a new tile instance\r\n  _createTile(quadcode, layer) {}\r\n\r\n  // Get a cached tile or request a new one if not in cache\r\n  _requestTile(quadcode, layer) {\r\n    var tile = this._tileCache.getTile(quadcode);\r\n\r\n    if (!tile) {\r\n      // Set up a brand new tile\r\n      tile = this._createTile(quadcode, layer);\r\n\r\n      // Add tile to cache, though it won't be ready yet as the data is being\r\n      // requested from various places asynchronously\r\n      this._tileCache.setTile(quadcode, tile);\r\n    }\r\n\r\n    return tile;\r\n  }\r\n\r\n  _destroyTile(tile) {\r\n    // Remove tile from scene\r\n    this._tiles.remove(tile.getMesh());\r\n\r\n    // Delete any references to the tile within this component\r\n\r\n    // Call destory on tile instance\r\n    tile.destroy();\r\n  }\r\n\r\n  show() {\r\n    this._stop = false;\r\n\r\n    if (this._tilesPicking) {\r\n      this._tilesPicking.visible = true;\r\n    }\r\n\r\n    this._calculateLOD();\r\n    super.show();\r\n  }\r\n\r\n  hide() {\r\n    this._stop = true;\r\n\r\n    if (this._tilesPicking) {\r\n      this._tilesPicking.visible = false;\r\n    }\r\n\r\n    super.hide();\r\n  }\r\n\r\n  // Destroys the layer and removes it from the scene and memory\r\n  destroy() {\r\n    this._destroy = true;\r\n\r\n    if (this._tiles.children) {\r\n      // Remove all tiles\r\n      for (var i = this._tiles.children.length - 1; i >= 0; i--) {\r\n        this._tiles.remove(this._tiles.children[i]);\r\n      }\r\n    }\r\n\r\n    // Remove tile from picking scene\r\n    this.removeFromPicking(this._tilesPicking);\r\n\r\n    if (this._tilesPicking.children) {\r\n      // Remove all tiles\r\n      for (var i = this._tilesPicking.children.length - 1; i >= 0; i--) {\r\n        this._tilesPicking.remove(this._tilesPicking.children[i]);\r\n      }\r\n    }\r\n\r\n    this._tileCache.destroy();\r\n    this._tileCache = null;\r\n\r\n    this._tiles = null;\r\n    this._tilesPicking = null;\r\n    this._frustum = null;\r\n\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default TileLayer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/TileLayer.js","import LRUCache from 'lru-cache';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// This process is based on a similar approach taken by OpenWebGlobe\r\n// See: https://github.com/OpenWebGlobe/WebViewer/blob/master/source/core/globecache.js\r\n\r\nclass TileCache {\r\n  constructor(cacheLimit, onDestroyTile) {\r\n    this._cache = LRUCache({\r\n      max: cacheLimit,\r\n      dispose: (key, tile) => {\r\n        onDestroyTile(tile);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Returns true if all specified tile providers are ready to be used\r\n  // Otherwise, returns false\r\n  isReady() {\r\n    return false;\r\n  }\r\n\r\n  // Get a cached tile without requesting a new one\r\n  getTile(quadcode) {\r\n    return this._cache.get(quadcode);\r\n  }\r\n\r\n  // Add tile to cache\r\n  setTile(quadcode, tile) {\r\n    this._cache.set(quadcode, tile);\r\n  }\r\n\r\n  // Destroy the cache and remove it from memory\r\n  //\r\n  // TODO: Call destroy method on items in cache\r\n  destroy() {\r\n    this._cache.reset();\r\n    this._cache = null;\r\n  }\r\n}\r\n\r\nexport default TileCache;\r\n\r\nvar noNew = function(cacheLimit, onDestroyTile) {\r\n  return new TileCache(cacheLimit, onDestroyTile);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as tileCache};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/TileCache.js","'use strict'\n\nmodule.exports = LRUCache\n\n// This will be a proper iterable 'Map' in engines that support it,\n// or a fakey-fake PseudoMap in older versions.\nvar Map = require('pseudomap')\nvar util = require('util')\n\n// A linked list to keep track of recently-used-ness\nvar Yallist = require('yallist')\n\n// use symbols if possible, otherwise just _props\nvar hasSymbol = typeof Symbol === 'function' && process.env._nodeLRUCacheForceNoSymbol !== '1'\nvar makeSymbol\nif (hasSymbol) {\n  makeSymbol = function (key) {\n    return Symbol(key)\n  }\n} else {\n  makeSymbol = function (key) {\n    return '_' + key\n  }\n}\n\nvar MAX = makeSymbol('max')\nvar LENGTH = makeSymbol('length')\nvar LENGTH_CALCULATOR = makeSymbol('lengthCalculator')\nvar ALLOW_STALE = makeSymbol('allowStale')\nvar MAX_AGE = makeSymbol('maxAge')\nvar DISPOSE = makeSymbol('dispose')\nvar NO_DISPOSE_ON_SET = makeSymbol('noDisposeOnSet')\nvar LRU_LIST = makeSymbol('lruList')\nvar CACHE = makeSymbol('cache')\n\nfunction naiveLength () { return 1 }\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nfunction LRUCache (options) {\n  if (!(this instanceof LRUCache)) {\n    return new LRUCache(options)\n  }\n\n  if (typeof options === 'number') {\n    options = { max: options }\n  }\n\n  if (!options) {\n    options = {}\n  }\n\n  var max = this[MAX] = options.max\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!max ||\n      !(typeof max === 'number') ||\n      max <= 0) {\n    this[MAX] = Infinity\n  }\n\n  var lc = options.length || naiveLength\n  if (typeof lc !== 'function') {\n    lc = naiveLength\n  }\n  this[LENGTH_CALCULATOR] = lc\n\n  this[ALLOW_STALE] = options.stale || false\n  this[MAX_AGE] = options.maxAge || 0\n  this[DISPOSE] = options.dispose\n  this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n  this.reset()\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, 'max', {\n  set: function (mL) {\n    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n      mL = Infinity\n    }\n    this[MAX] = mL\n    trim(this)\n  },\n  get: function () {\n    return this[MAX]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'allowStale', {\n  set: function (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  },\n  get: function () {\n    return this[ALLOW_STALE]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'maxAge', {\n  set: function (mA) {\n    if (!mA || !(typeof mA === 'number') || mA < 0) {\n      mA = 0\n    }\n    this[MAX_AGE] = mA\n    trim(this)\n  },\n  get: function () {\n    return this[MAX_AGE]\n  },\n  enumerable: true\n})\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n  set: function (lC) {\n    if (typeof lC !== 'function') {\n      lC = naiveLength\n    }\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(function (hit) {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      }, this)\n    }\n    trim(this)\n  },\n  get: function () { return this[LENGTH_CALCULATOR] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'length', {\n  get: function () { return this[LENGTH] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'itemCount', {\n  get: function () { return this[LRU_LIST].length },\n  enumerable: true\n})\n\nLRUCache.prototype.rforEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].tail; walker !== null;) {\n    var prev = walker.prev\n    forEachStep(this, fn, walker, thisp)\n    walker = prev\n  }\n}\n\nfunction forEachStep (self, fn, node, thisp) {\n  var hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE]) {\n      hit = undefined\n    }\n  }\n  if (hit) {\n    fn.call(thisp, hit.value, hit.key, self)\n  }\n}\n\nLRUCache.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].head; walker !== null;) {\n    var next = walker.next\n    forEachStep(this, fn, walker, thisp)\n    walker = next\n  }\n}\n\nLRUCache.prototype.keys = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.key\n  }, this)\n}\n\nLRUCache.prototype.values = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.value\n  }, this)\n}\n\nLRUCache.prototype.reset = function () {\n  if (this[DISPOSE] &&\n      this[LRU_LIST] &&\n      this[LRU_LIST].length) {\n    this[LRU_LIST].forEach(function (hit) {\n      this[DISPOSE](hit.key, hit.value)\n    }, this)\n  }\n\n  this[CACHE] = new Map() // hash of items by key\n  this[LRU_LIST] = new Yallist() // list of items in order of use recency\n  this[LENGTH] = 0 // length of items in the list\n}\n\nLRUCache.prototype.dump = function () {\n  return this[LRU_LIST].map(function (hit) {\n    if (!isStale(this, hit)) {\n      return {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }\n    }\n  }, this).toArray().filter(function (h) {\n    return h\n  })\n}\n\nLRUCache.prototype.dumpLru = function () {\n  return this[LRU_LIST]\n}\n\n/* istanbul ignore next */\nLRUCache.prototype.inspect = function (n, opts) {\n  var str = 'LRUCache {'\n  var extras = false\n\n  var as = this[ALLOW_STALE]\n  if (as) {\n    str += '\\n  allowStale: true'\n    extras = true\n  }\n\n  var max = this[MAX]\n  if (max && max !== Infinity) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  max: ' + util.inspect(max, opts)\n    extras = true\n  }\n\n  var maxAge = this[MAX_AGE]\n  if (maxAge) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n    extras = true\n  }\n\n  var lc = this[LENGTH_CALCULATOR]\n  if (lc && lc !== naiveLength) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  length: ' + util.inspect(this[LENGTH], opts)\n    extras = true\n  }\n\n  var didFirst = false\n  this[LRU_LIST].forEach(function (item) {\n    if (didFirst) {\n      str += ',\\n  '\n    } else {\n      if (extras) {\n        str += ',\\n'\n      }\n      didFirst = true\n      str += '\\n  '\n    }\n    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n    var val = { value: item.value }\n    if (item.maxAge !== maxAge) {\n      val.maxAge = item.maxAge\n    }\n    if (lc !== naiveLength) {\n      val.length = item.length\n    }\n    if (isStale(this, item)) {\n      val.stale = true\n    }\n\n    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n    str += key + ' => ' + val\n  })\n\n  if (didFirst || extras) {\n    str += '\\n'\n  }\n  str += '}'\n\n  return str\n}\n\nLRUCache.prototype.set = function (key, value, maxAge) {\n  maxAge = maxAge || this[MAX_AGE]\n\n  var now = maxAge ? Date.now() : 0\n  var len = this[LENGTH_CALCULATOR](value, key)\n\n  if (this[CACHE].has(key)) {\n    if (len > this[MAX]) {\n      del(this, this[CACHE].get(key))\n      return false\n    }\n\n    var node = this[CACHE].get(key)\n    var item = node.value\n\n    // dispose of the old one before overwriting\n    // split out into 2 ifs for better coverage tracking\n    if (this[DISPOSE]) {\n      if (!this[NO_DISPOSE_ON_SET]) {\n        this[DISPOSE](key, item.value)\n      }\n    }\n\n    item.now = now\n    item.maxAge = maxAge\n    item.value = value\n    this[LENGTH] += len - item.length\n    item.length = len\n    this.get(key)\n    trim(this)\n    return true\n  }\n\n  var hit = new Entry(key, value, len, now, maxAge)\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > this[MAX]) {\n    if (this[DISPOSE]) {\n      this[DISPOSE](key, value)\n    }\n    return false\n  }\n\n  this[LENGTH] += hit.length\n  this[LRU_LIST].unshift(hit)\n  this[CACHE].set(key, this[LRU_LIST].head)\n  trim(this)\n  return true\n}\n\nLRUCache.prototype.has = function (key) {\n  if (!this[CACHE].has(key)) return false\n  var hit = this[CACHE].get(key).value\n  if (isStale(this, hit)) {\n    return false\n  }\n  return true\n}\n\nLRUCache.prototype.get = function (key) {\n  return get(this, key, true)\n}\n\nLRUCache.prototype.peek = function (key) {\n  return get(this, key, false)\n}\n\nLRUCache.prototype.pop = function () {\n  var node = this[LRU_LIST].tail\n  if (!node) return null\n  del(this, node)\n  return node.value\n}\n\nLRUCache.prototype.del = function (key) {\n  del(this, this[CACHE].get(key))\n}\n\nLRUCache.prototype.load = function (arr) {\n  // reset the cache\n  this.reset()\n\n  var now = Date.now()\n  // A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l--) {\n    var hit = arr[l]\n    var expiresAt = hit.e || 0\n    if (expiresAt === 0) {\n      // the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v)\n    } else {\n      var maxAge = expiresAt - now\n      // dont add already expired items\n      if (maxAge > 0) {\n        this.set(hit.k, hit.v, maxAge)\n      }\n    }\n  }\n}\n\nLRUCache.prototype.prune = function () {\n  var self = this\n  this[CACHE].forEach(function (value, key) {\n    get(self, key, false)\n  })\n}\n\nfunction get (self, key, doUse) {\n  var node = self[CACHE].get(key)\n  if (node) {\n    var hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE]) hit = undefined\n    } else {\n      if (doUse) {\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    if (hit) hit = hit.value\n  }\n  return hit\n}\n\nfunction isStale (self, hit) {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE])) {\n    return false\n  }\n  var stale = false\n  var diff = Date.now() - hit.now\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge\n  } else {\n    stale = self[MAX_AGE] && (diff > self[MAX_AGE])\n  }\n  return stale\n}\n\nfunction trim (self) {\n  if (self[LENGTH] > self[MAX]) {\n    for (var walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nfunction del (self, node) {\n  if (node) {\n    var hit = node.value\n    if (self[DISPOSE]) {\n      self[DISPOSE](hit.key, hit.value)\n    }\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry (key, value, length, now, maxAge) {\n  this.key = key\n  this.value = value\n  this.length = length\n  this.now = now\n  this.maxAge = maxAge || 0\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lru-cache/index.js\n// module id = 24\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 25\n// module chunks = 0","if (process.env.npm_package_name === 'pseudomap' &&\n    process.env.npm_lifecycle_script === 'test')\n  process.env.TEST_PSEUDOMAP = 'true'\n\nif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n  module.exports = Map\n} else {\n  module.exports = require('./pseudomap')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pseudomap/map.js\n// module id = 26\n// module chunks = 0","var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pseudomap/pseudomap.js\n// module id = 27\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/util.js\n// module id = 28\n// module chunks = 0","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isBuffer = require('./isBuffer');\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\nvar SymbolToStringTagSupported = SymbolSupported && typeof Symbol.toStringTag !== 'undefined';\nvar Uint8ArraySupported = typeof Uint8Array !== 'undefined';\nvar ArrayBufferSupported = typeof ArrayBuffer !== 'undefined';\n\nif (Uint8ArraySupported && SymbolToStringTagSupported) {\n  var TypedArrayPrototype = Object.getPrototypeOf(Uint8Array.prototype);\n\n  var TypedArrayProto_toStringTag =\n      uncurryThis(\n        Object.getOwnPropertyDescriptor(TypedArrayPrototype,\n                                        Symbol.toStringTag).get);\n\n}\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\n\nexports.isGeneratorFunction = isGeneratorFunction;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (ArrayBufferSupported && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\nfunction isTypedArray(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) !== undefined;\n  } else {\n    return (\n      isUint8Array(value) ||\n      isUint8ClampedArray(value) ||\n      isUint16Array(value) ||\n      isUint32Array(value) ||\n      isInt8Array(value) ||\n      isInt16Array(value) ||\n      isInt32Array(value) ||\n      isFloat32Array(value) ||\n      isFloat64Array(value) ||\n      isBigInt64Array(value) ||\n      isBigUint64Array(value)\n    );\n  }\n}\nexports.isTypedArray = isTypedArray;\n\nfunction isUint8Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Uint8Array';\n  } else {\n    return (\n      ObjectToString(value) === '[object Uint8Array]' ||\n      // If it's a Buffer instance _and_ has a `.buffer` property,\n      // this is an ArrayBuffer based buffer; thus it's an Uint8Array\n      // (Old Node.js had a custom non-Uint8Array implementation)\n      isBuffer(value) && value.buffer !== undefined\n    );\n  }\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Uint8ClampedArray';\n  } else {\n    return ObjectToString(value) === '[object Uint8ClampedArray]';\n  }\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Uint16Array';\n  } else {\n    return ObjectToString(value) === '[object Uint16Array]';\n  }\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Uint32Array';\n  } else {\n    return ObjectToString(value) === '[object Uint32Array]';\n  }\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Int8Array';\n  } else {\n    return ObjectToString(value) === '[object Int8Array]';\n  }\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Int16Array';\n  } else {\n    return ObjectToString(value) === '[object Int16Array]';\n  }\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Int32Array';\n  } else {\n    return ObjectToString(value) === '[object Int32Array]';\n  }\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Float32Array';\n  } else {\n    return ObjectToString(value) === '[object Float32Array]';\n  }\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'Float64Array';\n  } else {\n    return ObjectToString(value) === '[object Float64Array]';\n  }\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'BigInt64Array';\n  } else {\n    return ObjectToString(value) === '[object BigInt64Array]';\n  }\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  if (Uint8ArraySupported && SymbolToStringTagSupported) {\n    return TypedArrayProto_toStringTag(value) === 'BigUint64Array';\n  } else {\n    return ObjectToString(value) === '[object BigUint64Array]';\n  }\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n  if (typeof WeakSet === 'undefined') {\n    return false;\n  }\n\n  return isWeakSetToString.working\n    ? isWeakSetToString(value)\n    : value instanceof WeakSet;\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nisSharedArrayBufferToString.working = (\n  typeof SharedArrayBuffer !== 'undefined' &&\n  isSharedArrayBufferToString(new SharedArrayBuffer())\n);\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBuffer;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return Uint8ArraySupported && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/support/types.js\n// module id = 29\n// module chunks = 0","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/support/isBufferBrowser.js\n// module id = 30\n// module chunks = 0","'use strict';\n\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-arguments/index.js\n// module id = 31\n// module chunks = 0","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar generatorFunc = getGeneratorFunc();\nvar GeneratorFunction = generatorFunc ? getProto(generatorFunc) : {};\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-generator-function/index.js\n// module id = 32\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/inherits/inherits_browser.js\n// module id = 33\n// module chunks = 0","module.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lru-cache/~/yallist/yallist.js\n// module id = 34\n// module chunks = 0","import Tile from './Tile';\r\nimport BoxHelper from '../../vendor/BoxHelper';\r\nimport THREE from 'three';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\nclass ImageTile extends Tile {\r\n  constructor(quadcode, path, layer) {\r\n    super(quadcode, path, layer);\r\n  }\r\n\r\n  // Request data for the tile\r\n  requestTileAsync() {\r\n    // Making this asynchronous really speeds up the LOD framerate\r\n    setTimeout(() => {\r\n      if (!this._mesh) {\r\n        this._mesh = this._createMesh();\r\n      }\r\n\r\n      this._requestTile();\r\n    }, 0);\r\n  }\r\n\r\n  destroy() {\r\n    // Cancel any pending requests\r\n    this._abortRequest();\r\n\r\n    // Clear image reference\r\n    this._image = null;\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  _createMesh() {\r\n    // Something went wrong and the tile\r\n    //\r\n    // Possibly removed by the cache before loaded\r\n    if (!this._center) {\r\n      return;\r\n    }\r\n\r\n    var mesh = new THREE.Object3D();\r\n    var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\r\n\r\n    var material;\r\n    if (!this._world._environment._skybox) {\r\n      material = new THREE.MeshBasicMaterial({\r\n        depthWrite: false\r\n      });\r\n\r\n      // var material = new THREE.MeshPhongMaterial({\r\n      //   depthWrite: false\r\n      // });\r\n    } else {\r\n      // Other MeshStandardMaterial settings\r\n      //\r\n      // material.envMapIntensity will change the amount of colour reflected(?)\r\n      // from the environment map – can be greater than 1 for more intensity\r\n\r\n      material = new THREE.MeshStandardMaterial({\r\n        depthWrite: false\r\n      });\r\n      material.roughness = 1;\r\n      material.metalness = 0.1;\r\n      material.envMap = this._world._environment._skybox.getRenderTarget();\r\n    }\r\n\r\n    var localMesh = new THREE.Mesh(geom, material);\r\n    localMesh.rotation.x = -90 * Math.PI / 180;\r\n\r\n    localMesh.receiveShadow = true;\r\n\r\n    // Setting this causes a depth-buffer intersection issue on the\r\n    // all-the-things example\r\n    // localMesh.renderOrder = 2;\r\n\r\n    mesh.add(localMesh);\r\n\r\n    // Setting this causes a depth-buffer intersection issue on the\r\n    // all-the-things example\r\n    // mesh.renderOrder = 2;\r\n\r\n    mesh.position.x = this._center[0];\r\n    mesh.position.z = this._center[1];\r\n\r\n    // var box = new BoxHelper(localMesh);\r\n    // mesh.add(box);\r\n    //\r\n    // mesh.add(this._createDebugMesh());\r\n\r\n    return mesh;\r\n  }\r\n\r\n  _createDebugMesh() {\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = 256;\r\n    canvas.height = 256;\r\n\r\n    var context = canvas.getContext('2d');\r\n    context.font = 'Bold 20px Helvetica Neue, Verdana, Arial';\r\n    context.fillStyle = '#ff0000';\r\n    context.fillText(this._quadcode, 20, canvas.width / 2 - 5);\r\n    context.fillText(this._tile.toString(), 20, canvas.width / 2 + 25);\r\n\r\n    var texture = new THREE.Texture(canvas);\r\n\r\n    // Silky smooth images when tilted\r\n    texture.magFilter = THREE.LinearFilter;\r\n    texture.minFilter = THREE.LinearMipMapLinearFilter;\r\n\r\n    // TODO: Set this to renderer.getMaxAnisotropy() / 4\r\n    texture.anisotropy = 4;\r\n\r\n    texture.needsUpdate = true;\r\n\r\n    var material = new THREE.MeshBasicMaterial({\r\n      map: texture,\r\n      transparent: true,\r\n      depthWrite: false\r\n    });\r\n\r\n    var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\r\n    var mesh = new THREE.Mesh(geom, material);\r\n\r\n    mesh.rotation.x = -90 * Math.PI / 180;\r\n    mesh.position.y = 0.1;\r\n\r\n    return mesh;\r\n  }\r\n\r\n  _requestTile() {\r\n    var urlParams = {\r\n      x: this._tile[0],\r\n      y: this._tile[1],\r\n      z: this._tile[2]\r\n    };\r\n\r\n    var url = this._getTileURL(urlParams);\r\n\r\n    var image = document.createElement('img');\r\n\r\n    this._aborted = false;\r\n\r\n    image.addEventListener('load', event => {\r\n      if (this.isAborted()) {\r\n        return;\r\n      }\r\n\r\n      var texture = new THREE.Texture();\r\n\r\n      texture.image = image;\r\n      texture.needsUpdate = true;\r\n\r\n      // Silky smooth images when tilted\r\n      texture.magFilter = THREE.LinearFilter;\r\n      texture.minFilter = THREE.LinearMipMapLinearFilter;\r\n\r\n      // TODO: Set this to renderer.getMaxAnisotropy() / 4\r\n      texture.anisotropy = 4;\r\n\r\n      texture.needsUpdate = true;\r\n\r\n      // Something went wrong and the tile or its material is missing\r\n      //\r\n      // Possibly removed by the cache before the image loaded\r\n      if (!this._mesh || !this._mesh.children[0] || !this._mesh.children[0].material) {\r\n        return;\r\n      }\r\n\r\n      this._mesh.children[0].material.map = texture;\r\n      this._mesh.children[0].material.needsUpdate = true;\r\n\r\n      this._texture = texture;\r\n      this._ready = true;\r\n    }, false);\r\n\r\n    // image.addEventListener('progress', event => {}, false);\r\n    // image.addEventListener('error', event => {}, false);\r\n\r\n    image.crossOrigin = '';\r\n\r\n    // Load image\r\n    image.src = url;\r\n\r\n    this._image = image;\r\n  }\r\n\r\n  _abortRequest() {\r\n    if (!this._image || this._ready) {\r\n      return;\r\n    }\r\n\r\n    this._aborted = true;\r\n\r\n    this._image.src = '';\r\n  }\r\n}\r\n\r\nexport default ImageTile;\r\n\r\nvar noNew = function(quadcode, path, layer) {\r\n  return new ImageTile(quadcode, path, layer);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as imageTile};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/ImageTile.js","import {point as Point} from '../../geo/Point';\r\nimport {latLon as LatLon} from '../../geo/LatLon';\r\nimport THREE from 'three';\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// Manages a single tile and its layers\r\n\r\nvar r2d = 180 / Math.PI;\r\n\r\nvar tileURLRegex = /\\{([szxy])\\}/g;\r\n\r\nclass Tile {\r\n  constructor(quadcode, path, layer) {\r\n    this._layer = layer;\r\n    this._world = layer._world;\r\n    this._quadcode = quadcode;\r\n    this._path = path;\r\n\r\n    this._ready = false;\r\n    this._aborted = false;\r\n\r\n    this._tile = this._quadcodeToTile(quadcode);\r\n\r\n    // Bottom-left and top-right bounds in WGS84 coordinates\r\n    this._boundsLatLon = this._tileBoundsWGS84(this._tile);\r\n\r\n    // Bottom-left and top-right bounds in world coordinates\r\n    this._boundsWorld = this._tileBoundsFromWGS84(this._boundsLatLon);\r\n\r\n    // Tile center in world coordinates\r\n    this._center = this._boundsToCenter(this._boundsWorld);\r\n\r\n    // Tile center in projected coordinates\r\n    this._centerLatlon = this._world.pointToLatLon(Point(this._center[0], this._center[1]));\r\n\r\n    // Length of a tile side in world coorindates\r\n    this._side = this._getSide(this._boundsWorld);\r\n\r\n    // Point scale for tile (for unit conversion)\r\n    this._pointScale = this._world.pointScale(this._centerLatlon);\r\n  }\r\n\r\n  // Returns true if the tile mesh and texture are ready to be used\r\n  // Otherwise, returns false\r\n  isReady() {\r\n    return this._ready;\r\n  }\r\n\r\n  isAborted() {\r\n    return this._aborted;\r\n  }\r\n\r\n  // Request data for the tile\r\n  requestTileAsync() {}\r\n\r\n  getQuadcode() {\r\n    return this._quadcode;\r\n  }\r\n\r\n  getBounds() {\r\n    return this._boundsWorld;\r\n  }\r\n\r\n  getCenter() {\r\n    return this._center;\r\n  }\r\n\r\n  getSide() {\r\n    return this._side;\r\n  }\r\n\r\n  getMesh() {\r\n    return this._mesh;\r\n  }\r\n\r\n  getPickingMesh() {\r\n    return this._pickingMesh;\r\n  }\r\n\r\n  // Destroys the tile and removes it from the layer and memory\r\n  //\r\n  // Ensure that this leaves no trace of the tile – no textures, no meshes,\r\n  // nothing in memory or the GPU\r\n  destroy() {\r\n    // console.log('Destroying tile', this._quadcode);\r\n\r\n    // Delete reference to layer and world\r\n    this._layer = null;\r\n    this._world = null;\r\n\r\n    // Delete location references\r\n    this._boundsLatLon = null;\r\n    this._boundsWorld = null;\r\n    this._center = null;\r\n\r\n    // Done if no mesh\r\n    if (!this._mesh && !this._pickingMesh) {\r\n      return;\r\n    }\r\n\r\n    this.destroyMesh(this._mesh);\r\n    this.destroyMesh(this._pickingMesh);\r\n\r\n    this._mesh = null;\r\n    this._pickingMesh = null;\r\n  }\r\n\r\n  destroyMesh(mesh, dispose = true) {\r\n    if (mesh) {\r\n      if (mesh.children) {\r\n        mesh.children.forEach((child) => {\r\n          mesh.remove(child);\r\n          this.destroyMesh(child);\r\n        });\r\n      }\r\n\r\n      if (dispose) {\r\n        if (mesh.geometry) {\r\n          mesh.geometry.dispose();\r\n          mesh.geometry = null;\r\n        }\r\n\r\n        if (mesh.material) {\r\n          if (mesh.material.map) {\r\n            mesh.material.map.dispose();\r\n            mesh.material.map = null;\r\n          }\r\n\r\n          mesh.material.dispose();\r\n          mesh.material = null;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _createMesh() {}\r\n  _createDebugMesh() {}\r\n\r\n  _getTileURL(urlParams) {\r\n    if (!urlParams.s) {\r\n      // Default to a random choice of a, b or c\r\n      urlParams.s = String.fromCharCode(97 + Math.floor(Math.random() * 3));\r\n    }\r\n\r\n    tileURLRegex.lastIndex = 0;\r\n    return this._path.replace(tileURLRegex, function(value, key) {\r\n      // Replace with paramter, otherwise keep existing value\r\n      return urlParams[key];\r\n    });\r\n  }\r\n\r\n  // Convert from quadcode to TMS tile coordinates\r\n  _quadcodeToTile(quadcode) {\r\n    var x = 0;\r\n    var y = 0;\r\n    var z = quadcode.length;\r\n\r\n    for (var i = z; i > 0; i--) {\r\n      var mask = 1 << (i - 1);\r\n      var q = +quadcode[z - i];\r\n      if (q === 1) {\r\n        x |= mask;\r\n      }\r\n      if (q === 2) {\r\n        y |= mask;\r\n      }\r\n      if (q === 3) {\r\n        x |= mask;\r\n        y |= mask;\r\n      }\r\n    }\r\n\r\n    return [x, y, z];\r\n  }\r\n\r\n  // Convert WGS84 tile bounds to world coordinates\r\n  _tileBoundsFromWGS84(boundsWGS84) {\r\n    var sw = this._layer._world.latLonToPoint(LatLon(boundsWGS84[1], boundsWGS84[0]));\r\n    var ne = this._layer._world.latLonToPoint(LatLon(boundsWGS84[3], boundsWGS84[2]));\r\n\r\n    return [sw.x, sw.y, ne.x, ne.y];\r\n  }\r\n\r\n  // Get tile bounds in WGS84 coordinates\r\n  _tileBoundsWGS84(tile) {\r\n    var e = this._tile2lon(tile[0] + 1, tile[2]);\r\n    var w = this._tile2lon(tile[0], tile[2]);\r\n    var s = this._tile2lat(tile[1] + 1, tile[2]);\r\n    var n = this._tile2lat(tile[1], tile[2]);\r\n    return [w, s, e, n];\r\n  }\r\n\r\n  _tile2lon(x, z) {\r\n    return x / Math.pow(2, z) * 360 - 180;\r\n  }\r\n\r\n  _tile2lat(y, z) {\r\n    var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\r\n    return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\r\n  }\r\n\r\n  _boundsToCenter(bounds) {\r\n    var x = bounds[0] + (bounds[2] - bounds[0]) / 2;\r\n    var y = bounds[1] + (bounds[3] - bounds[1]) / 2;\r\n\r\n    return [x, y];\r\n  }\r\n\r\n  _getSide(bounds) {\r\n    return (new THREE.Vector3(bounds[0], 0, bounds[3])).sub(new THREE.Vector3(bounds[0], 0, bounds[1])).length();\r\n  }\r\n}\r\n\r\nexport default Tile;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/Tile.js","// jscs:disable\r\n/* eslint-disable */\r\n\r\nimport THREE from 'three';\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nBoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { linewidth: 2, color: 0xff0000 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nBoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nBoxHelper.prototype.constructor = BoxHelper;\r\n\r\nBoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tbox.setFromObject( object );\r\n\r\n\t\tif ( box.isEmpty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport default BoxHelper;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/vendor/BoxHelper.js","import THREE from 'three';\r\n\r\nexport default function(colour, skyboxTarget) {\r\n  var canvas = document.createElement('canvas');\r\n  canvas.width = 1;\r\n  canvas.height = 1;\r\n\r\n  var context = canvas.getContext('2d');\r\n  context.fillStyle = colour;\r\n  context.fillRect(0, 0, canvas.width, canvas.height);\r\n  // context.strokeStyle = '#D0D0CF';\r\n  // context.strokeRect(0, 0, canvas.width, canvas.height);\r\n\r\n  var texture = new THREE.Texture(canvas);\r\n\r\n  // // Silky smooth images when tilted\r\n  // texture.magFilter = THREE.LinearFilter;\r\n  // texture.minFilter = THREE.LinearMipMapLinearFilter;\r\n  // //\r\n  // // // TODO: Set this to renderer.getMaxAnisotropy() / 4\r\n  // texture.anisotropy = 4;\r\n\r\n  // texture.wrapS = THREE.RepeatWrapping;\r\n  // texture.wrapT = THREE.RepeatWrapping;\r\n  // texture.repeat.set(segments, segments);\r\n\r\n  texture.needsUpdate = true;\r\n\r\n  var material;\r\n\r\n  if (!skyboxTarget) {\r\n    material = new THREE.MeshBasicMaterial({\r\n      map: texture,\r\n      depthWrite: false\r\n    });\r\n  } else {\r\n    material = new THREE.MeshStandardMaterial({\r\n      map: texture,\r\n      depthWrite: false\r\n    });\r\n    material.roughness = 1;\r\n    material.metalness = 0.1;\r\n    material.envMap = skyboxTarget;\r\n  }\r\n\r\n  return material;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/ImageTileLayerBaseMaterial.js","import TileLayer from './TileLayer';\r\nimport extend from 'lodash.assign';\r\nimport GeoJSONTile from './GeoJSONTile';\r\nimport throttle from 'lodash.throttle';\r\nimport THREE from 'three';\r\n\r\n// TODO: Offer on-the-fly slicing of static, non-tile-based GeoJSON files into a\r\n// tile grid using geojson-vt\r\n//\r\n// See: https://github.com/mapbox/geojson-vt\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// TODO: Consider pausing per-frame output during movement so there's little to\r\n// no jank caused by previous tiles still processing\r\n\r\n// This tile layer only updates the quadtree after world movement has occurred\r\n//\r\n// Tiles from previous quadtree updates are updated and outputted every frame\r\n// (or at least every frame, throttled to some amount)\r\n//\r\n// This is because the complexity of TopoJSON tiles requires a lot of processing\r\n// and so makes movement janky if updates occur every frame – only updating\r\n// after movement means frame drops are less obvious due to heavy processing\r\n// occurring while the view is generally stationary\r\n//\r\n// The downside is that until new tiles are requested and outputted you will\r\n// see blank spaces as you orbit and move around\r\n//\r\n// An added benefit is that it dramatically reduces the number of tiles being\r\n// requested over a period of time and the time it takes to go from request to\r\n// screen output\r\n//\r\n// It may be possible to perform these updates per-frame once Web Worker\r\n// processing is added\r\n\r\nclass GeoJSONTileLayer extends TileLayer {\r\n  constructor(path, options) {\r\n    var defaults = {\r\n      maxLOD: 14,\r\n      distance: 30000,\r\n      workers: false\r\n    };\r\n\r\n    options = extend({}, defaults, options);\r\n\r\n    super(options);\r\n\r\n    this.defaults = defaults;\r\n\r\n    this._path = path;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    return new Promise((resolve, reject) => {\r\n      super._onAdd(world).then(() => {\r\n        // Trigger initial quadtree calculation on the next frame\r\n        //\r\n        // TODO: This is a hack to ensure the camera is all set up - a better\r\n        // solution should be found\r\n        setTimeout(() => {\r\n          this._calculateLOD();\r\n          this._initEvents();\r\n        }, 0);\r\n\r\n        resolve(this);\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  _initEvents() {\r\n    // Run LOD calculations based on render calls\r\n    //\r\n    // Throttled to 1 LOD calculation per 100ms\r\n    this._throttledWorldUpdate = throttle(this._onWorldUpdate, 100);\r\n\r\n    this._world.on('preUpdate', this._throttledWorldUpdate, this);\r\n    this._world.on('move', this._onWorldMove, this);\r\n    this._world.on('controlsMove', this._onControlsMove, this);\r\n  }\r\n\r\n  // Update and output tiles each frame (throttled)\r\n  _onWorldUpdate() {\r\n    if (this._pauseOutput || this._disableOutput) {\r\n      return;\r\n    }\r\n\r\n    this._outputTiles();\r\n  }\r\n\r\n  // Update tiles grid after world move, but don't output them\r\n  _onWorldMove(latlon, point) {\r\n    if (this._disableOutput) {\r\n      return;\r\n    }\r\n\r\n    this._pauseOutput = false;\r\n    this._calculateLOD();\r\n  }\r\n\r\n  // Pause updates during control movement for less visual jank\r\n  _onControlsMove() {\r\n    if (this._disableOutput) {\r\n      return;\r\n    }\r\n\r\n    this._pauseOutput = true;\r\n  }\r\n\r\n  _createTile(quadcode, layer) {\r\n    var newOptions = extend({}, this.defaults, this._options, {\r\n      outputToScene: false\r\n    });\r\n\r\n    delete newOptions.attribution;\r\n\r\n    return new GeoJSONTile(quadcode, this._path, layer, newOptions);\r\n  }\r\n\r\n  hide() {\r\n    this._pauseOutput = true;\r\n    super.hide();\r\n  }\r\n\r\n  show() {\r\n    this._pauseOutput = false;\r\n    super.show();\r\n  }\r\n\r\n  // Destroys the layer and removes it from the scene and memory\r\n  destroy() {\r\n    this._world.off('preUpdate', this._throttledWorldUpdate);\r\n    this._world.off('move', this._onWorldMove);\r\n\r\n    this._throttledWorldUpdate = null;\r\n\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default GeoJSONTileLayer;\r\n\r\nvar noNew = function(path, options) {\r\n  return new GeoJSONTileLayer(path, options);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as geoJSONTileLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/GeoJSONTileLayer.js","import Tile from './Tile';\r\nimport {geoJSONLayer as GeoJSONLayer} from '../GeoJSONLayer';\r\nimport {geoJSONWorkerLayer as GeoJSONWorkerLayer} from '../GeoJSONWorkerLayer';\r\nimport BoxHelper from '../../vendor/BoxHelper';\r\nimport THREE from 'three';\r\nimport reqwest from 'reqwest';\r\nimport {point as Point} from '../../geo/Point';\r\nimport {latLon as LatLon} from '../../geo/LatLon';\r\nimport extend from 'lodash.assign';\r\n// import Offset from 'polygon-offset';\r\nimport GeoJSON from '../../util/GeoJSON';\r\nimport Buffer from '../../util/Buffer';\r\nimport PickingMaterial from '../../engine/PickingMaterial';\r\n\r\n// TODO: Map picking IDs to some reference within the tile data / geometry so\r\n// that something useful can be done when an object is picked / clicked on\r\n\r\n// TODO: Make sure nothing is left behind in the heap after calling destroy()\r\n\r\n// TODO: Perform tile request and processing in a Web Worker\r\n//\r\n// Use Operative (https://github.com/padolsey/operative)\r\n//\r\n// Would it make sense to have the worker functionality defined in a static\r\n// method so it only gets initialised once and not on every tile instance?\r\n//\r\n// Otherwise, worker processing logic would have to go in the tile layer so not\r\n// to waste loads of time setting up a brand new worker with three.js for each\r\n// tile every single time.\r\n//\r\n// Unsure of the best way to get three.js and VIZI into the worker\r\n//\r\n// Would need to set up a CRS / projection identical to the world instance\r\n//\r\n// Is it possible to bypass requirements on external script by having multiple\r\n// simple worker methods that each take enough inputs to perform a single task\r\n// without requiring VIZI or three.js? So long as the heaviest logic is done in\r\n// the worker and transferrable objects are used then it should be better than\r\n// nothing. Would probably still need things like earcut...\r\n//\r\n// After all, the three.js logic and object creation will still need to be\r\n// done on the main thread regardless so the worker should try to do as much as\r\n// possible with as few dependencies as possible.\r\n//\r\n// Have a look at how this is done in Tangram before implementing anything as\r\n// the approach there is pretty similar and robust.\r\n\r\nclass GeoJSONTile extends Tile {\r\n  constructor(quadcode, path, layer, options) {\r\n    super(quadcode, path, layer);\r\n\r\n    this._defaultStyle = GeoJSON.defaultStyle;\r\n\r\n    var defaults = {\r\n      workers: false,\r\n      output: true,\r\n      outputToScene: false,\r\n      interactive: false,\r\n      topojson: false,\r\n      filter: null,\r\n      onEachFeature: null,\r\n      polygonMaterial: null,\r\n      onPolygonMesh: null,\r\n      onPolygonBufferAttributes: null,\r\n      polylineMaterial: null,\r\n      onPolylineMesh: null,\r\n      onPolylineBufferAttributes: null,\r\n      pointGeometry: null,\r\n      pointMaterial: null,\r\n      onPointMesh: null,\r\n      style: GeoJSON.defaultStyle,\r\n      keepFeatures: false\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    if (typeof options.style === 'function') {\r\n      _options.style = options.style;\r\n    } else {\r\n      _options.style = extend({}, defaults.style, options.style);\r\n    }\r\n\r\n    this._options = _options;\r\n  }\r\n\r\n  // Request data for the tile\r\n  requestTileAsync() {\r\n    // Making this asynchronous really speeds up the LOD framerate\r\n    setTimeout(() => {\r\n      if (!this._mesh) {\r\n        this._mesh = this._createMesh();\r\n        // this._shadowCanvas = this._createShadowCanvas();\r\n      }\r\n\r\n      this._requestTile();\r\n    }, 0);\r\n  }\r\n\r\n  // TODO: Destroy GeoJSONLayer\r\n  destroy() {\r\n    // Cancel any pending requests\r\n    this._abortRequest();\r\n\r\n    // Clear request reference\r\n    this._request = null;\r\n\r\n    if (this._geojsonLayer) {\r\n      this._geojsonLayer.destroy();\r\n      this._geojsonLayer = null;\r\n    }\r\n\r\n    this._mesh = null;\r\n\r\n    // TODO: Properly dispose of picking mesh\r\n    this._pickingMesh = null;\r\n\r\n    super.destroy();\r\n  }\r\n\r\n  _createMesh() {\r\n    // Something went wrong and the tile\r\n    //\r\n    // Possibly removed by the cache before loaded\r\n    if (!this._center) {\r\n      return;\r\n    }\r\n\r\n    var mesh = new THREE.Object3D();\r\n    // mesh.add(this._createDebugMesh());\r\n\r\n    return mesh;\r\n  }\r\n\r\n  _createDebugMesh() {\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = 256;\r\n    canvas.height = 256;\r\n\r\n    var context = canvas.getContext('2d');\r\n    context.font = 'Bold 20px Helvetica Neue, Verdana, Arial';\r\n    context.fillStyle = '#ff0000';\r\n    context.fillText(this._quadcode, 20, canvas.width / 2 - 5);\r\n    context.fillText(this._tile.toString(), 20, canvas.width / 2 + 25);\r\n\r\n    var texture = new THREE.Texture(canvas);\r\n\r\n    // Silky smooth images when tilted\r\n    texture.magFilter = THREE.LinearFilter;\r\n    texture.minFilter = THREE.LinearMipMapLinearFilter;\r\n\r\n    // TODO: Set this to renderer.getMaxAnisotropy() / 4\r\n    texture.anisotropy = 4;\r\n\r\n    texture.needsUpdate = true;\r\n\r\n    var material = new THREE.MeshBasicMaterial({\r\n      map: texture,\r\n      transparent: true,\r\n      depthWrite: false\r\n    });\r\n\r\n    var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\r\n    var mesh = new THREE.Mesh(geom, material);\r\n\r\n    mesh.rotation.x = -90 * Math.PI / 180;\r\n    mesh.position.y = 0.1;\r\n\r\n    return mesh;\r\n  }\r\n\r\n  // _createShadowCanvas() {\r\n  //   var canvas = document.createElement('canvas');\r\n  //\r\n  //   // Rendered at a low resolution and later scaled up for a low-quality blur\r\n  //   canvas.width = 512;\r\n  //   canvas.height = 512;\r\n  //\r\n  //   return canvas;\r\n  // }\r\n\r\n  // _addShadow(coordinates) {\r\n  //   var ctx = this._shadowCanvas.getContext('2d');\r\n  //   var width = this._shadowCanvas.width;\r\n  //   var height = this._shadowCanvas.height;\r\n  //\r\n  //   var _coords;\r\n  //   var _offset;\r\n  //   var offset = new Offset();\r\n  //\r\n  //   // Transform coordinates to shadowCanvas space and draw on canvas\r\n  //   coordinates.forEach((ring, index) => {\r\n  //     ctx.beginPath();\r\n  //\r\n  //     _coords = ring.map(coord => {\r\n  //       var xFrac = (coord[0] - this._boundsWorld[0]) / this._side;\r\n  //       var yFrac = (coord[1] - this._boundsWorld[3]) / this._side;\r\n  //       return [xFrac * width, yFrac * height];\r\n  //     });\r\n  //\r\n  //     if (index > 0) {\r\n  //       _offset = _coords;\r\n  //     } else {\r\n  //       _offset = offset.data(_coords).padding(1.3);\r\n  //     }\r\n  //\r\n  //     // TODO: This is super flaky and crashes the browser if run on anything\r\n  //     // put the outer ring (potentially due to winding)\r\n  //     _offset.forEach((coord, index) => {\r\n  //       // var xFrac = (coord[0] - this._boundsWorld[0]) / this._side;\r\n  //       // var yFrac = (coord[1] - this._boundsWorld[3]) / this._side;\r\n  //\r\n  //       if (index === 0) {\r\n  //         ctx.moveTo(coord[0], coord[1]);\r\n  //       } else {\r\n  //         ctx.lineTo(coord[0], coord[1]);\r\n  //       }\r\n  //     });\r\n  //\r\n  //     ctx.closePath();\r\n  //   });\r\n  //\r\n  //   ctx.fillStyle = 'rgba(80, 80, 80, 0.7)';\r\n  //   ctx.fill();\r\n  // }\r\n\r\n  _requestTile() {\r\n    var urlParams = {\r\n      x: this._tile[0],\r\n      y: this._tile[1],\r\n      z: this._tile[2]\r\n    };\r\n\r\n    var url = this._getTileURL(urlParams);\r\n\r\n    this._aborted = false;\r\n\r\n    if (!this._options.workers) {\r\n      this._request = reqwest({\r\n        url: url,\r\n        type: 'json',\r\n        crossOrigin: true,\r\n        headers: this._options.headers\r\n      }).then(res => {\r\n        // Clear request reference\r\n        this._request = null;\r\n        this._processTileData(res);\r\n      }).catch(err => {\r\n        // Clear request reference\r\n        this._request = null;\r\n      });\r\n    } else {\r\n      this._processTileData(url);\r\n    }\r\n  }\r\n\r\n  _processTileData(data) {\r\n    // console.time(this._tile);\r\n\r\n    var GeoJSONClass = (!this._options.workers) ? GeoJSONLayer : GeoJSONWorkerLayer;\r\n\r\n    // Using this creates a huge amount of memory due to the quantity of tiles\r\n    this._geojsonLayer = GeoJSONClass(data, this._options);\r\n    this._geojsonLayer.addTo(this._world).then(() => {\r\n      // TODO: This never seems to be called on worker layers. Find out why.\r\n      if (this.isAborted()) {\r\n        // this._geojsonLayer._aborted = true;\r\n        // this._geojsonLayer = null;\r\n        return;\r\n      }\r\n\r\n      // TODO: This is a hack to stop old tile meshes hanging around. Fix or\r\n      // move to somewhere more robust.\r\n      //\r\n      // Could potentially just overwrite mesh on first index each time\r\n      //\r\n      // This makes some worker tiles to not appear properly – showing the\r\n      // points mesh but not the polygon mesh, etc.\r\n      //\r\n      // Only do this for non-worker layers for now as it seems to cause issues\r\n      // with worker tiles showing for a moment and then disappearing forever\r\n      if (!this._options.workers) {\r\n        this.destroyMesh(this._mesh);\r\n      }\r\n\r\n      // TOSO: Work out if the picking mesh needs destroying here\r\n      // this.destroyMesh(this._pickingMesh);\r\n\r\n      this._mesh.add(this._geojsonLayer._object3D);\r\n      this._pickingMesh = this._geojsonLayer._pickingMesh;\r\n\r\n      // Free the GeoJSON memory as we don't need it\r\n      //\r\n      // TODO: This should probably be a method within GeoJSONLayer\r\n      if (this._geojsonLayer._geojson) {\r\n        this._geojsonLayer._geojson = null;\r\n      }\r\n\r\n      // TODO: Fix or store shadow canvas stuff and get rid of this code\r\n      // Draw footprint on shadow canvas\r\n      //\r\n      // TODO: Disabled for the time-being until it can be sped up / moved to\r\n      // a worker\r\n      // this._addShadow(coordinates);\r\n\r\n      // Output shadow canvas\r\n\r\n      // TODO: Disabled for the time-being until it can be sped up / moved to\r\n      // a worker\r\n\r\n      // var texture = new THREE.Texture(this._shadowCanvas);\r\n      //\r\n      // // Silky smooth images when tilted\r\n      // texture.magFilter = THREE.LinearFilter;\r\n      // texture.minFilter = THREE.LinearMipMapLinearFilter;\r\n      //\r\n      // // TODO: Set this to renderer.getMaxAnisotropy() / 4\r\n      // texture.anisotropy = 4;\r\n      //\r\n      // texture.needsUpdate = true;\r\n      //\r\n      // var material;\r\n      // if (!this._world._environment._skybox) {\r\n      //   material = new THREE.MeshBasicMaterial({\r\n      //     map: texture,\r\n      //     transparent: true,\r\n      //     depthWrite: false\r\n      //   });\r\n      // } else {\r\n      //   material = new THREE.MeshStandardMaterial({\r\n      //     map: texture,\r\n      //     transparent: true,\r\n      //     depthWrite: false\r\n      //   });\r\n      //   material.roughness = 1;\r\n      //   material.metalness = 0.1;\r\n      //   material.envMap = this._world._environment._skybox.getRenderTarget();\r\n      // }\r\n      //\r\n      // var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\r\n      // var mesh = new THREE.Mesh(geom, material);\r\n      //\r\n      // mesh.castShadow = false;\r\n      // mesh.receiveShadow = false;\r\n      // mesh.renderOrder = 1;\r\n      //\r\n      // mesh.rotation.x = -90 * Math.PI / 180;\r\n      //\r\n      // this._mesh.add(mesh);\r\n\r\n      this._ready = true;\r\n      // console.timeEnd(this._tile);\r\n    }).catch((err) => {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  _abortRequest() {\r\n    if ((!this._request && !this._options.workers) || this._ready) {\r\n      return;\r\n    }\r\n\r\n    this._aborted = true;\r\n\r\n    if (this._request) {\r\n      this._request.abort();\r\n    }\r\n  }\r\n}\r\n\r\nexport default GeoJSONTile;\r\n\r\nvar noNew = function(quadcode, path, layer, options) {\r\n  return new GeoJSONTile(quadcode, path, layer, options);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as geoJSONTile};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/GeoJSONTile.js","// TODO: Consider adopting GeoJSON CSS\r\n// http://wiki.openstreetmap.org/wiki/Geojson_CSS\r\n\r\n// TODO: Allow interaction to be defined per-layer to save on resources\r\n//\r\n// For example, only allow polygons to be interactive via a polygonInteractive\r\n// option\r\n\r\nimport LayerGroup from './LayerGroup';\r\nimport extend from 'lodash.assign';\r\nimport reqwest from 'reqwest';\r\nimport GeoJSON from '../util/GeoJSON';\r\nimport Buffer from '../util/Buffer';\r\nimport PickingMaterial from '../engine/PickingMaterial';\r\nimport PolygonLayer from './geometry/PolygonLayer';\r\nimport PolylineLayer from './geometry/PolylineLayer';\r\nimport PointLayer from './geometry/PointLayer';\r\n\r\nclass GeoJSONLayer extends LayerGroup {\r\n  constructor(geojson, options) {\r\n    var defaults = {\r\n      output: false,\r\n      interactive: false,\r\n      topojson: false,\r\n      filter: null,\r\n      onEachFeature: null,\r\n      polygonMaterial: null,\r\n      onPolygonMesh: null,\r\n      onPolygonBufferAttributes: null,\r\n      polylineMaterial: null,\r\n      onPolylineMesh: null,\r\n      onPolylineBufferAttributes: null,\r\n      pointGeometry: null,\r\n      pointMaterial: null,\r\n      onPointMesh: null,\r\n      style: GeoJSON.defaultStyle,\r\n      keepFeatures: true\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    if (typeof options.style === 'function') {\r\n      _options.style = options.style;\r\n    } else {\r\n      _options.style = extend({}, defaults.style, options.style);\r\n    }\r\n\r\n    super(_options);\r\n\r\n    this._geojson = geojson;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    // Only add to picking mesh if this layer is controlling output\r\n    //\r\n    // Otherwise, assume another component will eventually add a mesh to\r\n    // the picking scene\r\n    if (this.isOutput()) {\r\n      this._pickingMesh = new THREE.Object3D();\r\n      this.addToPicking(this._pickingMesh);\r\n    }\r\n\r\n    // Request data from URL if needed\r\n    if (typeof this._geojson === 'string') {\r\n      return this._requestData(this._geojson);\r\n    } else {\r\n      // Process and add GeoJSON to layer\r\n      return this._processData(this._geojson);\r\n    }\r\n  }\r\n\r\n  _requestData(url) {\r\n    return new Promise((resolve, reject) => {\r\n      this._request = reqwest({\r\n        url: url,\r\n        type: 'json',\r\n        crossOrigin: true\r\n      }).then(res => {\r\n        // Clear request reference\r\n        this._request = null;\r\n        this._processData(res).then(() => {\r\n          resolve(this);\r\n        });\r\n      }).catch(err => {\r\n        console.error(err);\r\n\r\n        // Clear request reference\r\n        this._request = null;\r\n\r\n        reject(err);\r\n      });\r\n    });\r\n  }\r\n\r\n  // TODO: Wrap into a helper method so this isn't duplicated in the tiled\r\n  // GeoJSON output layer\r\n  //\r\n  // Need to be careful as to not make it impossible to fork this off into a\r\n  // worker script at a later stage\r\n  _processData(data) {\r\n    return new Promise((resolve) => {\r\n      // Collects features into a single FeatureCollection\r\n      //\r\n      // Also converts TopoJSON to GeoJSON if instructed\r\n      this._geojson = GeoJSON.collectFeatures(data, this._options.topojson);\r\n\r\n      // TODO: Check that GeoJSON is valid / usable\r\n\r\n      var features = this._geojson.features;\r\n\r\n      // Run filter, if provided\r\n      if (this._options.filter) {\r\n        features = this._geojson.features.filter(this._options.filter);\r\n      }\r\n\r\n      var defaults = {};\r\n\r\n      // Assume that a style won't be set per feature\r\n      var style = this._options.style;\r\n\r\n      var layerPromises = [];\r\n\r\n      var options;\r\n      features.forEach(feature => {\r\n        // Get per-feature style object, if provided\r\n        if (typeof this._options.style === 'function') {\r\n          style = extend({}, GeoJSON.defaultStyle, this._options.style(feature));\r\n        }\r\n\r\n        options = extend({}, defaults, {\r\n          // If merging feature layers, stop them outputting themselves\r\n          // If not, let feature layers output themselves to the world\r\n          output: !this.isOutput(),\r\n          interactive: this._options.interactive,\r\n          style: style\r\n        });\r\n\r\n        var layer = this._featureToLayer(feature, options);\r\n\r\n        if (!layer) {\r\n          return;\r\n        }\r\n\r\n        // Sometimes you don't want to store a reference to the feature\r\n        //\r\n        // For example, to save memory when being used by tile layers\r\n        if (this._options.keepFeatures) {\r\n          layer.feature = feature;\r\n        }\r\n\r\n        // If defined, call a function for each feature\r\n        //\r\n        // This is commonly used for adding event listeners from the user script\r\n        if (this._options.onEachFeature) {\r\n          this._options.onEachFeature(feature, layer);\r\n        }\r\n\r\n        // TODO: Make this a promise array and only continue on completion\r\n        layerPromises.push(this.addLayer(layer));\r\n      });\r\n\r\n      Promise.all(layerPromises).then((results) => {\r\n        // If merging layers do that now, otherwise skip as the geometry layers\r\n        // should have already outputted themselves\r\n        if (!this.isOutput()) {\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        // From here on we can assume that we want to merge the layers\r\n\r\n        var polygonAttributes = [];\r\n        var polygonOutlineAttributes = [];\r\n        var polygonAttributeLengths = {\r\n          positions: 3,\r\n          normals: 3,\r\n          colors: 3\r\n        };\r\n        var polygonFlat = true;\r\n\r\n        var polylineAttributes = [];\r\n        var polylineAttributeLengths = {\r\n          positions: 3,\r\n          colors: 3\r\n        };\r\n        var polylineFlat = true;\r\n\r\n        var pointAttributes = [];\r\n        var pointAttributeLengths = {\r\n          positions: 3,\r\n          normals: 3,\r\n          colors: 3\r\n        };\r\n        var pointFlat = true;\r\n\r\n        this._layers.forEach(layer => {\r\n          if (layer instanceof PolygonLayer) {\r\n            polygonAttributes.push(layer.getBufferAttributes());\r\n\r\n            var outlineBufferAttributes = layer.getOutlineBufferAttributes();\r\n            if (outlineBufferAttributes) {\r\n              polygonOutlineAttributes.push(outlineBufferAttributes);\r\n            }\r\n\r\n            if (polygonFlat && !layer.isFlat()) {\r\n              polygonFlat = false;\r\n            }\r\n\r\n            if (this._options.interactive) {\r\n              polygonAttributeLengths.pickingIds = 1;\r\n            }\r\n          } else if (layer instanceof PolylineLayer) {\r\n            polylineAttributes.push(layer.getBufferAttributes());\r\n\r\n            if (polylineFlat && !layer.isFlat()) {\r\n              polylineFlat = false;\r\n            }\r\n\r\n            if (this._options.interactive) {\r\n              polylineAttributeLengths.pickingIds = 1;\r\n            }\r\n          } else if (layer instanceof PointLayer) {\r\n            pointAttributes.push(layer.getBufferAttributes());\r\n\r\n            if (pointFlat && !layer.isFlat()) {\r\n              pointFlat = false;\r\n            }\r\n\r\n            if (this._options.interactive) {\r\n              pointAttributeLengths.pickingIds = 1;\r\n            }\r\n          }\r\n        });\r\n\r\n        var style;\r\n\r\n        if (polygonAttributes.length > 0) {\r\n          var mergedPolygonAttributes = Buffer.mergeAttributes(polygonAttributes);\r\n\r\n          var mergedPolygonOutlineAttributes;\r\n          if (polygonOutlineAttributes.length > 0) {\r\n            mergedPolygonOutlineAttributes = Buffer.mergeAttributes(polygonOutlineAttributes);\r\n          }\r\n\r\n          style = (typeof this._options.style === 'function') ? this._options.style(this._geojson.features[0]) : this._options.style;\r\n          style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n          this._setPolygonMesh(mergedPolygonAttributes, polygonAttributeLengths, style, polygonFlat).then((result) => {\r\n            this._polygonMesh = result.mesh;\r\n            this.add(this._polygonMesh);\r\n\r\n            if (mergedPolygonOutlineAttributes) {\r\n              style = (typeof this._options.style === 'function') ? this._options.style(this._geojson.features[0]) : this._options.style;\r\n              style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n              if (style.outlineRenderOrder !== undefined) {\r\n                style.lineRenderOrder = style.outlineRenderOrder;\r\n              } else {\r\n                style.lineRenderOrder = (style.renderOrder) ? style.renderOrder + 1 : 4;\r\n              }\r\n\r\n              if (style.outlineWidth) {\r\n                style.lineWidth = style.outlineWidth;\r\n              }\r\n\r\n              this._setPolylineMesh(mergedPolygonOutlineAttributes, polylineAttributeLengths, style, true).then((result) => {\r\n                this.add(result.mesh);\r\n              });\r\n            }\r\n\r\n            if (result.pickingMesh) {\r\n              this._pickingMesh.add(result.pickingMesh);\r\n            }\r\n          });\r\n        }\r\n\r\n        if (polylineAttributes.length > 0) {\r\n          var mergedPolylineAttributes = Buffer.mergeAttributes(polylineAttributes);\r\n\r\n          style = (typeof this._options.style === 'function') ? this._options.style(this._geojson.features[0]) : this._options.style;\r\n          style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n          this._setPolylineMesh(mergedPolylineAttributes, polylineAttributeLengths, style, polylineFlat).then((result) => {\r\n            this._polylineMesh = result.mesh;\r\n            this.add(this._polylineMesh);\r\n\r\n            if (result.pickingMesh) {\r\n              this._pickingMesh.add(result.pickingMesh);\r\n            }\r\n          });\r\n        }\r\n\r\n        if (pointAttributes.length > 0) {\r\n          var mergedPointAttributes = Buffer.mergeAttributes(pointAttributes);\r\n\r\n          style = (typeof this._options.style === 'function') ? this._options.style(this._geojson.features[0]) : this._options.style;\r\n          style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n          this._setPointMesh(mergedPointAttributes, pointAttributeLengths, style, pointFlat).then((result) => {\r\n            this._pointMesh = result.mesh;\r\n            this.add(this._pointMesh);\r\n\r\n            if (result.pickingMesh) {\r\n              this._pickingMesh.add(result.pickingMesh);\r\n            }\r\n          });\r\n        }\r\n\r\n        // Clean up layers\r\n        //\r\n        // TODO: Are there ever situations where the unmerged buffer attributes\r\n        // and coordinates would still be required?\r\n        this._layers.forEach(layer => {\r\n          layer.clearBufferAttributes();\r\n          layer.clearCoordinates();\r\n        });\r\n\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  // Create and store mesh from buffer attributes\r\n  //\r\n  // TODO: Probably remove this and call static method directly as it's just a proxy\r\n  _setPolygonMesh(attributes, attributeLengths, style, flat) {\r\n    return PolygonLayer.SetMesh(attributes, attributeLengths, flat, style, this._options, this._world._environment._skybox);\r\n  }\r\n\r\n  _setPolylineMesh(attributes, attributeLengths, style, flat) {\r\n    return PolylineLayer.SetMesh(attributes, attributeLengths, flat, style, this._options);\r\n  }\r\n\r\n  _setPointMesh(attributes, attributeLengths, style, flat) {\r\n    return PointLayer.SetMesh(attributes, attributeLengths, flat, style, this._options);\r\n  }\r\n\r\n  // TODO: Support all GeoJSON geometry types\r\n  _featureToLayer(feature, options) {\r\n    var geometry = feature.geometry;\r\n    var coordinates = (geometry.coordinates) ? geometry.coordinates : null;\r\n\r\n    if (!coordinates || !geometry) {\r\n      return;\r\n    }\r\n\r\n    if (geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\r\n      // Get material instance to use for polygon, if provided\r\n      if (typeof this._options.polygonMaterial === 'function') {\r\n        options.polygonMaterial = this._options.polygonMaterial(feature);\r\n      }\r\n\r\n      if (typeof this._options.onPolygonMesh === 'function') {\r\n        options.onPolygonMesh = this._options.onPolygonMesh;\r\n      }\r\n\r\n      // Pass onBufferAttributes callback, if defined\r\n      if (typeof this._options.onPolygonBufferAttributes === 'function') {\r\n        options.onBufferAttributes = this._options.onPolygonBufferAttributes;\r\n      }\r\n\r\n      return new PolygonLayer(coordinates, options);\r\n    }\r\n\r\n    if (geometry.type === 'LineString' || geometry.type === 'MultiLineString') {\r\n      // Get material instance to use for line, if provided\r\n      if (typeof this._options.lineMaterial === 'function') {\r\n        options.lineMaterial = this._options.lineMaterial(feature);\r\n      }\r\n\r\n      if (typeof this._options.onPolylineMesh === 'function') {\r\n        options.onPolylineMesh = this._options.onPolylineMesh;\r\n      }\r\n\r\n      // Pass onBufferAttributes callback, if defined\r\n      if (typeof this._options.onPolylineBufferAttributes === 'function') {\r\n        options.onBufferAttributes = this._options.onPolylineBufferAttributes;\r\n      }\r\n\r\n      return new PolylineLayer(coordinates, options);\r\n    }\r\n\r\n    if (geometry.type === 'Point' || geometry.type === 'MultiPoint') {\r\n      // Get geometry object to use for point, if provided\r\n      if (typeof this._options.pointGeometry === 'function') {\r\n        options.pointGeometry = this._options.pointGeometry(feature);\r\n      }\r\n\r\n      // Get material instance to use for point, if provided\r\n      if (typeof this._options.pointMaterial === 'function') {\r\n        options.pointMaterial = this._options.pointMaterial(feature);\r\n      }\r\n\r\n      if (typeof this._options.onPointMesh === 'function') {\r\n        options.onPointMesh = this._options.onPointMesh;\r\n      }\r\n\r\n      return new PointLayer(coordinates, options);\r\n    }\r\n  }\r\n\r\n  _abortRequest() {\r\n    if (!this._request) {\r\n      return;\r\n    }\r\n\r\n    this._request.abort();\r\n  }\r\n\r\n  // Destroy the layers and remove them from the scene and memory\r\n  destroy() {\r\n    // Cancel any pending requests\r\n    this._abortRequest();\r\n\r\n    // Clear request reference\r\n    this._request = null;\r\n\r\n    this._geojson = null;\r\n\r\n    if (this._pickingMesh) {\r\n      // TODO: Properly dispose of picking mesh\r\n      this._pickingMesh = null;\r\n    }\r\n\r\n    if (this._polygonMesh) {\r\n      this._polygonMesh = null;\r\n    }\r\n\r\n    if (this._polylineMesh) {\r\n      this._polylineMesh = null;\r\n    }\r\n\r\n    if (this._pointMesh) {\r\n      this._pointMesh = null;\r\n    }\r\n\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default GeoJSONLayer;\r\n\r\nvar noNew = function(geojson, options) {\r\n  return new GeoJSONLayer(geojson, options);\r\n};\r\n\r\nexport {noNew as geoJSONLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/GeoJSONLayer.js","/*!\n  * Reqwest! A general purpose XHR connection manager\n  * license MIT (c) Dustin Diaz 2015\n  * https://github.com/ded/reqwest\n  */\n\n!function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n}('reqwest', this, function () {\n\n  var context = this\n\n  if ('window' in context) {\n    var doc = document\n      , byTag = 'getElementsByTagName'\n      , head = doc[byTag]('head')[0]\n  } else {\n    var XHR2\n    try {\n      XHR2 = require('xhr2')\n    } catch (ex) {\n      throw new Error('Peer dependency `xhr2` required! Please npm install xhr2')\n    }\n  }\n\n\n  var httpsRe = /^http/\n    , protocolRe = /(^\\w+):\\/\\//\n    , twoHundo = /^(20\\d|1223)$/ //http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n    , readyState = 'readyState'\n    , contentType = 'Content-Type'\n    , requestedWith = 'X-Requested-With'\n    , uniqid = 0\n    , callbackPrefix = 'reqwest_' + (+new Date())\n    , lastValue // data stored by the most recent JSONP callback\n    , xmlHttpRequest = 'XMLHttpRequest'\n    , xDomainRequest = 'XDomainRequest'\n    , noop = function () {}\n\n    , isArray = typeof Array.isArray == 'function'\n        ? Array.isArray\n        : function (a) {\n            return a instanceof Array\n          }\n\n    , defaultHeaders = {\n          'contentType': 'application/x-www-form-urlencoded'\n        , 'requestedWith': xmlHttpRequest\n        , 'accept': {\n              '*':  'text/javascript, text/html, application/xml, text/xml, */*'\n            , 'xml':  'application/xml, text/xml'\n            , 'html': 'text/html'\n            , 'text': 'text/plain'\n            , 'json': 'application/json, text/javascript'\n            , 'js':   'application/javascript, text/javascript'\n          }\n      }\n\n    , xhr = function(o) {\n        // is it x-domain\n        if (o['crossOrigin'] === true) {\n          var xhr = context[xmlHttpRequest] ? new XMLHttpRequest() : null\n          if (xhr && 'withCredentials' in xhr) {\n            return xhr\n          } else if (context[xDomainRequest]) {\n            return new XDomainRequest()\n          } else {\n            throw new Error('Browser does not support cross-origin requests')\n          }\n        } else if (context[xmlHttpRequest]) {\n          return new XMLHttpRequest()\n        } else if (XHR2) {\n          return new XHR2()\n        } else {\n          return new ActiveXObject('Microsoft.XMLHTTP')\n        }\n      }\n    , globalSetupOptions = {\n        dataFilter: function (data) {\n          return data\n        }\n      }\n\n  function succeed(r) {\n    var protocol = protocolRe.exec(r.url)\n    protocol = (protocol && protocol[1]) || context.location.protocol\n    return httpsRe.test(protocol) ? twoHundo.test(r.request.status) : !!r.request.response\n  }\n\n  function handleReadyState(r, success, error) {\n    return function () {\n      // use _aborted to mitigate against IE err c00c023f\n      // (can't read props on aborted request objects)\n      if (r._aborted) return error(r.request)\n      if (r._timedOut) return error(r.request, 'Request is aborted: timeout')\n      if (r.request && r.request[readyState] == 4) {\n        r.request.onreadystatechange = noop\n        if (succeed(r)) success(r.request)\n        else\n          error(r.request)\n      }\n    }\n  }\n\n  function setHeaders(http, o) {\n    var headers = o['headers'] || {}\n      , h\n\n    headers['Accept'] = headers['Accept']\n      || defaultHeaders['accept'][o['type']]\n      || defaultHeaders['accept']['*']\n\n    var isAFormData = typeof FormData !== 'undefined' && (o['data'] instanceof FormData);\n    // breaks cross-origin requests with legacy browsers\n    if (!o['crossOrigin'] && !headers[requestedWith]) headers[requestedWith] = defaultHeaders['requestedWith']\n    if (!headers[contentType] && !isAFormData) headers[contentType] = o['contentType'] || defaultHeaders['contentType']\n    for (h in headers)\n      headers.hasOwnProperty(h) && 'setRequestHeader' in http && http.setRequestHeader(h, headers[h])\n  }\n\n  function setCredentials(http, o) {\n    if (typeof o['withCredentials'] !== 'undefined' && typeof http.withCredentials !== 'undefined') {\n      http.withCredentials = !!o['withCredentials']\n    }\n  }\n\n  function generalCallback(data) {\n    lastValue = data\n  }\n\n  function urlappend (url, s) {\n    return url + (/\\?/.test(url) ? '&' : '?') + s\n  }\n\n  function handleJsonp(o, fn, err, url) {\n    var reqId = uniqid++\n      , cbkey = o['jsonpCallback'] || 'callback' // the 'callback' key\n      , cbval = o['jsonpCallbackName'] || reqwest.getcallbackPrefix(reqId)\n      , cbreg = new RegExp('((^|\\\\?|&)' + cbkey + ')=([^&]+)')\n      , match = url.match(cbreg)\n      , script = doc.createElement('script')\n      , loaded = 0\n      , isIE10 = navigator.userAgent.indexOf('MSIE 10.0') !== -1\n\n    if (match) {\n      if (match[3] === '?') {\n        url = url.replace(cbreg, '$1=' + cbval) // wildcard callback func name\n      } else {\n        cbval = match[3] // provided callback func name\n      }\n    } else {\n      url = urlappend(url, cbkey + '=' + cbval) // no callback details, add 'em\n    }\n\n    context[cbval] = generalCallback\n\n    script.type = 'text/javascript'\n    script.src = url\n    script.async = true\n    if (typeof script.onreadystatechange !== 'undefined' && !isIE10) {\n      // need this for IE due to out-of-order onreadystatechange(), binding script\n      // execution to an event listener gives us control over when the script\n      // is executed. See http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n      script.htmlFor = script.id = '_reqwest_' + reqId\n    }\n\n    script.onload = script.onreadystatechange = function () {\n      if ((script[readyState] && script[readyState] !== 'complete' && script[readyState] !== 'loaded') || loaded) {\n        return false\n      }\n      script.onload = script.onreadystatechange = null\n      script.onclick && script.onclick()\n      // Call the user callback with the last value stored and clean up values and scripts.\n      fn(lastValue)\n      lastValue = undefined\n      head.removeChild(script)\n      loaded = 1\n    }\n\n    // Add the script to the DOM head\n    head.appendChild(script)\n\n    // Enable JSONP timeout\n    return {\n      abort: function () {\n        script.onload = script.onreadystatechange = null\n        err({}, 'Request is aborted: timeout', {})\n        lastValue = undefined\n        head.removeChild(script)\n        loaded = 1\n      }\n    }\n  }\n\n  function getRequest(fn, err) {\n    var o = this.o\n      , method = (o['method'] || 'GET').toUpperCase()\n      , url = typeof o === 'string' ? o : o['url']\n      // convert non-string objects to query-string form unless o['processData'] is false\n      , data = (o['processData'] !== false && o['data'] && typeof o['data'] !== 'string')\n        ? reqwest.toQueryString(o['data'])\n        : (o['data'] || null)\n      , http\n      , sendWait = false\n\n    // if we're working on a GET request and we have data then we should append\n    // query string to end of URL and not post data\n    if ((o['type'] == 'jsonp' || method == 'GET') && data) {\n      url = urlappend(url, data)\n      data = null\n    }\n\n    if (o['type'] == 'jsonp') return handleJsonp(o, fn, err, url)\n\n    // get the xhr from the factory if passed\n    // if the factory returns null, fall-back to ours\n    http = (o.xhr && o.xhr(o)) || xhr(o)\n\n    http.open(method, url, o['async'] === false ? false : true)\n    setHeaders(http, o)\n    setCredentials(http, o)\n    if (context[xDomainRequest] && http instanceof context[xDomainRequest]) {\n        http.onload = fn\n        http.onerror = err\n        // NOTE: see\n        // http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/30ef3add-767c-4436-b8a9-f1ca19b4812e\n        http.onprogress = function() {}\n        sendWait = true\n    } else {\n      http.onreadystatechange = handleReadyState(this, fn, err)\n    }\n    o['before'] && o['before'](http)\n    if (sendWait) {\n      setTimeout(function () {\n        http.send(data)\n      }, 200)\n    } else {\n      http.send(data)\n    }\n    return http\n  }\n\n  function Reqwest(o, fn) {\n    this.o = o\n    this.fn = fn\n\n    init.apply(this, arguments)\n  }\n\n  function setType(header) {\n    // json, javascript, text/plain, text/html, xml\n    if (header === null) return undefined; //In case of no content-type.\n    if (header.match('json')) return 'json'\n    if (header.match('javascript')) return 'js'\n    if (header.match('text')) return 'html'\n    if (header.match('xml')) return 'xml'\n  }\n\n  function init(o, fn) {\n\n    this.url = typeof o == 'string' ? o : o['url']\n    this.timeout = null\n\n    // whether request has been fulfilled for purpose\n    // of tracking the Promises\n    this._fulfilled = false\n    // success handlers\n    this._successHandler = function(){}\n    this._fulfillmentHandlers = []\n    // error handlers\n    this._errorHandlers = []\n    // complete (both success and fail) handlers\n    this._completeHandlers = []\n    this._erred = false\n    this._responseArgs = {}\n\n    var self = this\n\n    fn = fn || function () {}\n\n    if (o['timeout']) {\n      this.timeout = setTimeout(function () {\n        timedOut()\n      }, o['timeout'])\n    }\n\n    if (o['success']) {\n      this._successHandler = function () {\n        o['success'].apply(o, arguments)\n      }\n    }\n\n    if (o['error']) {\n      this._errorHandlers.push(function () {\n        o['error'].apply(o, arguments)\n      })\n    }\n\n    if (o['complete']) {\n      this._completeHandlers.push(function () {\n        o['complete'].apply(o, arguments)\n      })\n    }\n\n    function complete (resp) {\n      o['timeout'] && clearTimeout(self.timeout)\n      self.timeout = null\n      while (self._completeHandlers.length > 0) {\n        self._completeHandlers.shift()(resp)\n      }\n    }\n\n    function success (resp) {\n      var type = o['type'] || resp && setType(resp.getResponseHeader('Content-Type')) // resp can be undefined in IE\n      resp = (type !== 'jsonp') ? self.request : resp\n      // use global data filter on response text\n      var filteredResponse = globalSetupOptions.dataFilter(resp.responseText, type)\n        , r = filteredResponse\n      try {\n        resp.responseText = r\n      } catch (e) {\n        // can't assign this in IE<=8, just ignore\n      }\n      if (r) {\n        switch (type) {\n        case 'json':\n          try {\n            resp = context.JSON ? context.JSON.parse(r) : eval('(' + r + ')')\n          } catch (err) {\n            return error(resp, 'Could not parse JSON in response', err)\n          }\n          break\n        case 'js':\n          resp = eval(r)\n          break\n        case 'html':\n          resp = r\n          break\n        case 'xml':\n          resp = resp.responseXML\n              && resp.responseXML.parseError // IE trololo\n              && resp.responseXML.parseError.errorCode\n              && resp.responseXML.parseError.reason\n            ? null\n            : resp.responseXML\n          break\n        }\n      }\n\n      self._responseArgs.resp = resp\n      self._fulfilled = true\n      fn(resp)\n      self._successHandler(resp)\n      while (self._fulfillmentHandlers.length > 0) {\n        resp = self._fulfillmentHandlers.shift()(resp)\n      }\n\n      complete(resp)\n    }\n\n    function timedOut() {\n      self._timedOut = true\n      self.request.abort()\n    }\n\n    function error(resp, msg, t) {\n      resp = self.request\n      self._responseArgs.resp = resp\n      self._responseArgs.msg = msg\n      self._responseArgs.t = t\n      self._erred = true\n      while (self._errorHandlers.length > 0) {\n        self._errorHandlers.shift()(resp, msg, t)\n      }\n      complete(resp)\n    }\n\n    this.request = getRequest.call(this, success, error)\n  }\n\n  Reqwest.prototype = {\n    abort: function () {\n      this._aborted = true\n      this.request.abort()\n    }\n\n  , retry: function () {\n      init.call(this, this.o, this.fn)\n    }\n\n    /**\n     * Small deviation from the Promises A CommonJs specification\n     * http://wiki.commonjs.org/wiki/Promises/A\n     */\n\n    /**\n     * `then` will execute upon successful requests\n     */\n  , then: function (success, fail) {\n      success = success || function () {}\n      fail = fail || function () {}\n      if (this._fulfilled) {\n        this._responseArgs.resp = success(this._responseArgs.resp)\n      } else if (this._erred) {\n        fail(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._fulfillmentHandlers.push(success)\n        this._errorHandlers.push(fail)\n      }\n      return this\n    }\n\n    /**\n     * `always` will execute whether the request succeeds or fails\n     */\n  , always: function (fn) {\n      if (this._fulfilled || this._erred) {\n        fn(this._responseArgs.resp)\n      } else {\n        this._completeHandlers.push(fn)\n      }\n      return this\n    }\n\n    /**\n     * `fail` will execute when the request fails\n     */\n  , fail: function (fn) {\n      if (this._erred) {\n        fn(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._errorHandlers.push(fn)\n      }\n      return this\n    }\n  , 'catch': function (fn) {\n      return this.fail(fn)\n    }\n  }\n\n  function reqwest(o, fn) {\n    return new Reqwest(o, fn)\n  }\n\n  // normalize newline variants according to spec -> CRLF\n  function normalize(s) {\n    return s ? s.replace(/\\r?\\n/g, '\\r\\n') : ''\n  }\n\n  function serial(el, cb) {\n    var n = el.name\n      , t = el.tagName.toLowerCase()\n      , optCb = function (o) {\n          // IE gives value=\"\" even where there is no value attribute\n          // 'specified' ref: http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-862529273\n          if (o && !o['disabled'])\n            cb(n, normalize(o['attributes']['value'] && o['attributes']['value']['specified'] ? o['value'] : o['text']))\n        }\n      , ch, ra, val, i\n\n    // don't serialize elements that are disabled or without a name\n    if (el.disabled || !n) return\n\n    switch (t) {\n    case 'input':\n      if (!/reset|button|image|file/i.test(el.type)) {\n        ch = /checkbox/i.test(el.type)\n        ra = /radio/i.test(el.type)\n        val = el.value\n        // WebKit gives us \"\" instead of \"on\" if a checkbox has no value, so correct it here\n        ;(!(ch || ra) || el.checked) && cb(n, normalize(ch && val === '' ? 'on' : val))\n      }\n      break\n    case 'textarea':\n      cb(n, normalize(el.value))\n      break\n    case 'select':\n      if (el.type.toLowerCase() === 'select-one') {\n        optCb(el.selectedIndex >= 0 ? el.options[el.selectedIndex] : null)\n      } else {\n        for (i = 0; el.length && i < el.length; i++) {\n          el.options[i].selected && optCb(el.options[i])\n        }\n      }\n      break\n    }\n  }\n\n  // collect up all form elements found from the passed argument elements all\n  // the way down to child elements; pass a '<form>' or form fields.\n  // called with 'this'=callback to use for serial() on each element\n  function eachFormElement() {\n    var cb = this\n      , e, i\n      , serializeSubtags = function (e, tags) {\n          var i, j, fa\n          for (i = 0; i < tags.length; i++) {\n            fa = e[byTag](tags[i])\n            for (j = 0; j < fa.length; j++) serial(fa[j], cb)\n          }\n        }\n\n    for (i = 0; i < arguments.length; i++) {\n      e = arguments[i]\n      if (/input|select|textarea/i.test(e.tagName)) serial(e, cb)\n      serializeSubtags(e, [ 'input', 'select', 'textarea' ])\n    }\n  }\n\n  // standard query string style serialization\n  function serializeQueryString() {\n    return reqwest.toQueryString(reqwest.serializeArray.apply(null, arguments))\n  }\n\n  // { 'name': 'value', ... } style serialization\n  function serializeHash() {\n    var hash = {}\n    eachFormElement.apply(function (name, value) {\n      if (name in hash) {\n        hash[name] && !isArray(hash[name]) && (hash[name] = [hash[name]])\n        hash[name].push(value)\n      } else hash[name] = value\n    }, arguments)\n    return hash\n  }\n\n  // [ { name: 'name', value: 'value' }, ... ] style serialization\n  reqwest.serializeArray = function () {\n    var arr = []\n    eachFormElement.apply(function (name, value) {\n      arr.push({name: name, value: value})\n    }, arguments)\n    return arr\n  }\n\n  reqwest.serialize = function () {\n    if (arguments.length === 0) return ''\n    var opt, fn\n      , args = Array.prototype.slice.call(arguments, 0)\n\n    opt = args.pop()\n    opt && opt.nodeType && args.push(opt) && (opt = null)\n    opt && (opt = opt.type)\n\n    if (opt == 'map') fn = serializeHash\n    else if (opt == 'array') fn = reqwest.serializeArray\n    else fn = serializeQueryString\n\n    return fn.apply(null, args)\n  }\n\n  reqwest.toQueryString = function (o, trad) {\n    var prefix, i\n      , traditional = trad || false\n      , s = []\n      , enc = encodeURIComponent\n      , add = function (key, value) {\n          // If value is a function, invoke it and return its value\n          value = ('function' === typeof value) ? value() : (value == null ? '' : value)\n          s[s.length] = enc(key) + '=' + enc(value)\n        }\n    // If an array was passed in, assume that it is an array of form elements.\n    if (isArray(o)) {\n      for (i = 0; o && i < o.length; i++) add(o[i]['name'], o[i]['value'])\n    } else {\n      // If traditional, encode the \"old\" way (the way 1.3.2 or older\n      // did it), otherwise encode params recursively.\n      for (prefix in o) {\n        if (o.hasOwnProperty(prefix)) buildParams(prefix, o[prefix], traditional, add)\n      }\n    }\n\n    // spaces should be + according to spec\n    return s.join('&').replace(/%20/g, '+')\n  }\n\n  function buildParams(prefix, obj, traditional, add) {\n    var name, i, v\n      , rbracket = /\\[\\]$/\n\n    if (isArray(obj)) {\n      // Serialize array item.\n      for (i = 0; obj && i < obj.length; i++) {\n        v = obj[i]\n        if (traditional || rbracket.test(prefix)) {\n          // Treat each array item as a scalar.\n          add(prefix, v)\n        } else {\n          buildParams(prefix + '[' + (typeof v === 'object' ? i : '') + ']', v, traditional, add)\n        }\n      }\n    } else if (obj && obj.toString() === '[object Object]') {\n      // Serialize object item.\n      for (name in obj) {\n        buildParams(prefix + '[' + name + ']', obj[name], traditional, add)\n      }\n\n    } else {\n      // Serialize scalar item.\n      add(prefix, obj)\n    }\n  }\n\n  reqwest.getcallbackPrefix = function () {\n    return callbackPrefix\n  }\n\n  // jQuery and Zepto compatibility, differences can be remapped here so you can call\n  // .ajax.compat(options, callback)\n  reqwest.compat = function (o, fn) {\n    if (o) {\n      o['type'] && (o['method'] = o['type']) && delete o['type']\n      o['dataType'] && (o['type'] = o['dataType'])\n      o['jsonpCallback'] && (o['jsonpCallbackName'] = o['jsonpCallback']) && delete o['jsonpCallback']\n      o['jsonp'] && (o['jsonpCallback'] = o['jsonp'])\n    }\n    return new Reqwest(o, fn)\n  }\n\n  reqwest.ajaxSetup = function (options) {\n    options = options || {}\n    for (var k in options) {\n      globalSetupOptions[k] = options[k]\n    }\n  }\n\n  return reqwest\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/reqwest/reqwest.js\n// module id = 42\n// module chunks = 0","/*\r\n * GeoJSON helpers for handling data and generating objects\r\n */\r\n\r\nimport THREE from 'three';\r\nimport * as topojson from 'topojson';\r\nimport geojsonMerge from 'geojson-merge';\r\nimport earcut from 'earcut';\r\nimport extrudePolygon from './extrudePolygon';\r\n\r\n// TODO: Make it so height can be per-coordinate / point but connected together\r\n// as a linestring (eg. GPS points with an elevation at each point)\r\n//\r\n// This isn't really valid GeoJSON so perhaps something best left to an external\r\n// component for now, until a better approach can be considered\r\n//\r\n// See: http://lists.geojson.org/pipermail/geojson-geojson.org/2009-June/000489.html\r\n\r\n// Light and dark colours used for poor-mans AO gradient on object sides\r\nvar light = new THREE.Color(0xffffff);\r\nvar shadow  = new THREE.Color(0x666666);\r\n\r\nvar GeoJSON = (function() {\r\n  var defaultStyle = {\r\n    color: '#ffffff',\r\n    outline: false,\r\n    outlineColor: '#000000',\r\n    transparent: false,\r\n    opacity: 1,\r\n    blending: THREE.NormalBlending,\r\n    height: 0,\r\n    lineOpacity: 1,\r\n    lineTransparent: false,\r\n    lineColor: '#ffffff',\r\n    lineWidth: 1,\r\n    lineBlending: THREE.NormalBlending\r\n  };\r\n\r\n  // Attempts to merge together multiple GeoJSON Features or FeatureCollections\r\n  // into a single FeatureCollection\r\n  var collectFeatures = function(data, _topojson) {\r\n    var collections = [];\r\n\r\n    if (_topojson) {\r\n      // TODO: Allow TopoJSON objects to be overridden as an option\r\n\r\n      // If not overridden, merge all features from all objects\r\n      for (var tk in data.objects) {\r\n        collections.push(topojson.feature(data, data.objects[tk]));\r\n      }\r\n\r\n      return geojsonMerge(collections);\r\n    } else {\r\n      // If root doesn't have a type then let's see if there are features in the\r\n      // next step down\r\n      if (!data.type) {\r\n        // TODO: Allow GeoJSON objects to be overridden as an option\r\n\r\n        // If not overridden, merge all features from all objects\r\n        for (var gk in data) {\r\n          if (!data[gk].type) {\r\n            continue;\r\n          }\r\n\r\n          collections.push(data[gk]);\r\n        }\r\n\r\n        return geojsonMerge(collections);\r\n      } else if (Array.isArray(data)) {\r\n        return geojsonMerge(data);\r\n      } else {\r\n        return data;\r\n      }\r\n    }\r\n  };\r\n\r\n  // TODO: This is only used by GeoJSONTile so either roll it into that or\r\n  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\r\n  var lineStringAttributes = function(coordinates, colour, height) {\r\n    var _coords = [];\r\n    var _colours = [];\r\n\r\n    var nextCoord;\r\n\r\n    // Connect coordinate with the next to make a pair\r\n    //\r\n    // LineSegments requires pairs of vertices so repeat the last point if\r\n    // there's an odd number of vertices\r\n    coordinates.forEach((coordinate, index) => {\r\n      _colours.push([colour.r, colour.g, colour.b]);\r\n      _coords.push([coordinate[0], height, coordinate[1]]);\r\n\r\n      nextCoord = (coordinates[index + 1]) ? coordinates[index + 1] : coordinate;\r\n\r\n      _colours.push([colour.r, colour.g, colour.b]);\r\n      _coords.push([nextCoord[0], height, nextCoord[1]]);\r\n    });\r\n\r\n    return {\r\n      vertices: _coords,\r\n      colours: _colours\r\n    };\r\n  };\r\n\r\n  // TODO: This is only used by GeoJSONTile so either roll it into that or\r\n  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\r\n  var multiLineStringAttributes = function(coordinates, colour, height) {\r\n    var _coords = [];\r\n    var _colours = [];\r\n\r\n    var result;\r\n    coordinates.forEach(coordinate => {\r\n      result = lineStringAttributes(coordinate, colour, height);\r\n\r\n      result.vertices.forEach(coord => {\r\n        _coords.push(coord);\r\n      });\r\n\r\n      result.colours.forEach(colour => {\r\n        _colours.push(colour);\r\n      });\r\n    });\r\n\r\n    return {\r\n      vertices: _coords,\r\n      colours: _colours\r\n    };\r\n  };\r\n\r\n  // TODO: This is only used by GeoJSONTile so either roll it into that or\r\n  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\r\n  var polygonAttributes = function(coordinates, colour, height) {\r\n    var earcutData = _toEarcut(coordinates);\r\n\r\n    var faces = _triangulate(earcutData.vertices, earcutData.holes, earcutData.dimensions);\r\n\r\n    var groupedVertices = [];\r\n    for (i = 0, il = earcutData.vertices.length; i < il; i += earcutData.dimensions) {\r\n      groupedVertices.push(earcutData.vertices.slice(i, i + earcutData.dimensions));\r\n    }\r\n\r\n    var extruded = extrudePolygon(groupedVertices, faces, {\r\n      bottom: 0,\r\n      top: height\r\n    });\r\n\r\n    var topColor = colour.clone().multiply(light);\r\n    var bottomColor = colour.clone().multiply(shadow);\r\n\r\n    var _vertices = extruded.positions;\r\n    var _faces = [];\r\n    var _colours = [];\r\n\r\n    var _colour;\r\n    extruded.top.forEach((face, fi) => {\r\n      _colour = [];\r\n\r\n      _colour.push([colour.r, colour.g, colour.b]);\r\n      _colour.push([colour.r, colour.g, colour.b]);\r\n      _colour.push([colour.r, colour.g, colour.b]);\r\n\r\n      _faces.push(face);\r\n      _colours.push(_colour);\r\n    });\r\n\r\n    var allFlat = true;\r\n\r\n    if (extruded.sides) {\r\n      if (allFlat) {\r\n        allFlat = false;\r\n      }\r\n\r\n      // Set up colours for every vertex with poor-mans AO on the sides\r\n      extruded.sides.forEach((face, fi) => {\r\n        _colour = [];\r\n\r\n        // First face is always bottom-bottom-top\r\n        if (fi % 2 === 0) {\r\n          _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\r\n          _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\r\n          _colour.push([topColor.r, topColor.g, topColor.b]);\r\n        // Reverse winding for the second face\r\n        // top-top-bottom\r\n        } else {\r\n          _colour.push([topColor.r, topColor.g, topColor.b]);\r\n          _colour.push([topColor.r, topColor.g, topColor.b]);\r\n          _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\r\n        }\r\n\r\n        _faces.push(face);\r\n        _colours.push(_colour);\r\n      });\r\n    }\r\n\r\n    // Skip bottom as there's no point rendering it\r\n    // allFaces.push(extruded.faces);\r\n\r\n    return {\r\n      vertices: _vertices,\r\n      faces: _faces,\r\n      colours: _colours,\r\n      flat: allFlat\r\n    };\r\n  };\r\n\r\n  // TODO: This is only used by GeoJSONTile so either roll it into that or\r\n  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\r\n  var _toEarcut = function(data) {\r\n    var dim = data[0][0].length;\r\n    var result = {vertices: [], holes: [], dimensions: dim};\r\n    var holeIndex = 0;\r\n\r\n    for (var i = 0; i < data.length; i++) {\r\n      for (var j = 0; j < data[i].length; j++) {\r\n        for (var d = 0; d < dim; d++) {\r\n          result.vertices.push(data[i][j][d]);\r\n        }\r\n      }\r\n      if (i > 0) {\r\n        holeIndex += data[i - 1].length;\r\n        result.holes.push(holeIndex);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  // TODO: This is only used by GeoJSONTile so either roll it into that or\r\n  // update GeoJSONTile to use the new GeoJSONLayer or geometry layers\r\n  var _triangulate = function(contour, holes, dim) {\r\n    // console.time('earcut');\r\n\r\n    var faces = earcut(contour, holes, dim);\r\n    var result = [];\r\n\r\n    for (i = 0, il = faces.length; i < il; i += 3) {\r\n      result.push(faces.slice(i, i + 3));\r\n    }\r\n\r\n    // console.timeEnd('earcut');\r\n\r\n    return result;\r\n  };\r\n\r\n  return {\r\n    defaultStyle: defaultStyle,\r\n    collectFeatures: collectFeatures,\r\n    lineStringAttributes: lineStringAttributes,\r\n    multiLineStringAttributes: multiLineStringAttributes,\r\n    polygonAttributes: polygonAttributes\r\n  };\r\n})();\r\n\r\nexport default GeoJSON;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/GeoJSON.js","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.topojson = global.topojson || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction noop() {}\n\nfunction transformAbsolute(transform) {\n  if (!transform) return noop;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(point, i) {\n    if (!i) x0 = y0 = 0;\n    point[0] = (x0 += point[0]) * kx + dx;\n    point[1] = (y0 += point[1]) * ky + dy;\n  };\n}\n\nfunction transformRelative(transform) {\n  if (!transform) return noop;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(point, i) {\n    if (!i) x0 = y0 = 0;\n    var x1 = Math.round((point[0] - dx) / kx),\n        y1 = Math.round((point[1] - dy) / ky);\n    point[0] = x1 - x0;\n    point[1] = y1 - y0;\n    x0 = x1;\n    y0 = y1;\n  };\n}\n\nfunction reverse(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n\nfunction bisect(a, x) {\n  var lo = 0, hi = a.length;\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid] < x) lo = mid + 1;\n    else hi = mid;\n  }\n  return lo;\n}\n\nfunction feature(topology, o) {\n  return o.type === \"GeometryCollection\" ? {\n    type: \"FeatureCollection\",\n    features: o.geometries.map(function(o) { return feature$1(topology, o); })\n  } : feature$1(topology, o);\n}\n\nfunction feature$1(topology, o) {\n  var f = {\n    type: \"Feature\",\n    id: o.id,\n    properties: o.properties || {},\n    geometry: object(topology, o)\n  };\n  if (o.id == null) delete f.id;\n  return f;\n}\n\nfunction object(topology, o) {\n  var absolute = transformAbsolute(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length, p; k < n; ++k) {\n      points.push(p = a[k].slice());\n      absolute(p, k);\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    p = p.slice();\n    absolute(p, 0);\n    return p;\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0].slice());\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0].slice());\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var t = o.type;\n    return t === \"GeometryCollection\" ? {type: t, geometries: o.geometries.map(geometry)}\n        : t in geometryType ? {type: t, coordinates: geometryType[t](o)}\n        : null;\n  }\n\n  var geometryType = {\n    Point: function(o) { return point(o.coordinates); },\n    MultiPoint: function(o) { return o.coordinates.map(point); },\n    LineString: function(o) { return line(o.arcs); },\n    MultiLineString: function(o) { return o.arcs.map(line); },\n    Polygon: function(o) { return polygon(o.arcs); },\n    MultiPolygon: function(o) { return o.arcs.map(polygon); }\n  };\n\n  return geometry(o);\n}\n\nfunction stitchArcs(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n    else p1 = arc[arc.length - 1];\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n  return fragments;\n}\n\nfunction mesh(topology) {\n  return object(topology, meshArcs.apply(this, arguments));\n}\n\nfunction meshArcs(topology, o, filter) {\n  var arcs = [];\n\n  function arc(i) {\n    var j = i < 0 ? ~i : i;\n    (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n  }\n\n  function line(arcs) {\n    arcs.forEach(arc);\n  }\n\n  function polygon(arcs) {\n    arcs.forEach(line);\n  }\n\n  function geometry(o) {\n    if (o.type === \"GeometryCollection\") o.geometries.forEach(geometry);\n    else if (o.type in geometryType) geom = o, geometryType[o.type](o.arcs);\n  }\n\n  if (arguments.length > 1) {\n    var geomsByArc = [],\n        geom;\n\n    var geometryType = {\n      LineString: line,\n      MultiLineString: polygon,\n      Polygon: polygon,\n      MultiPolygon: function(arcs) { arcs.forEach(polygon); }\n    };\n\n    geometry(o);\n\n    geomsByArc.forEach(arguments.length < 3\n        ? function(geoms) { arcs.push(geoms[0].i); }\n        : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n  } else {\n    for (var i = 0, n = topology.arcs.length; i < n; ++i) arcs.push(i);\n  }\n\n  return {type: \"MultiLineString\", arcs: stitchArcs(topology, arcs)};\n}\n\nfunction cartesianTriangleArea(triangle) {\n  var a = triangle[0], b = triangle[1], c = triangle[2];\n  return Math.abs((a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]));\n}\n\nfunction ring(ring) {\n  var i = -1,\n      n = ring.length,\n      a,\n      b = ring[n - 1],\n      area = 0;\n\n  while (++i < n) {\n    a = b;\n    b = ring[i];\n    area += a[0] * b[1] - a[1] * b[0];\n  }\n\n  return area / 2;\n}\n\nfunction merge(topology) {\n  return object(topology, mergeArcs.apply(this, arguments));\n}\n\nfunction mergeArcs(topology, objects) {\n  var polygonsByArc = {},\n      polygons = [],\n      components = [];\n\n  objects.forEach(function(o) {\n    if (o.type === \"Polygon\") register(o.arcs);\n    else if (o.type === \"MultiPolygon\") o.arcs.forEach(register);\n  });\n\n  function register(polygon) {\n    polygon.forEach(function(ring$$) {\n      ring$$.forEach(function(arc) {\n        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n      });\n    });\n    polygons.push(polygon);\n  }\n\n  function area(ring$$) {\n    return Math.abs(ring(object(topology, {type: \"Polygon\", arcs: [ring$$]}).coordinates[0]));\n  }\n\n  polygons.forEach(function(polygon) {\n    if (!polygon._) {\n      var component = [],\n          neighbors = [polygon];\n      polygon._ = 1;\n      components.push(component);\n      while (polygon = neighbors.pop()) {\n        component.push(polygon);\n        polygon.forEach(function(ring$$) {\n          ring$$.forEach(function(arc) {\n            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n              if (!polygon._) {\n                polygon._ = 1;\n                neighbors.push(polygon);\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n\n  polygons.forEach(function(polygon) {\n    delete polygon._;\n  });\n\n  return {\n    type: \"MultiPolygon\",\n    arcs: components.map(function(polygons) {\n      var arcs = [], n;\n\n      // Extract the exterior (unique) arcs.\n      polygons.forEach(function(polygon) {\n        polygon.forEach(function(ring$$) {\n          ring$$.forEach(function(arc) {\n            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n              arcs.push(arc);\n            }\n          });\n        });\n      });\n\n      // Stitch the arcs into one or more rings.\n      arcs = stitchArcs(topology, arcs);\n\n      // If more than one ring is returned,\n      // at most one of these rings can be the exterior;\n      // choose the one with the greatest absolute area.\n      if ((n = arcs.length) > 1) {\n        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n          if ((ki = area(arcs[i])) > k) {\n            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n          }\n        }\n      }\n\n      return arcs;\n    })\n  };\n}\n\nfunction neighbors(objects) {\n  var indexesByArc = {}, // arc index -> array of object indexes\n      neighbors = objects.map(function() { return []; });\n\n  function line(arcs, i) {\n    arcs.forEach(function(a) {\n      if (a < 0) a = ~a;\n      var o = indexesByArc[a];\n      if (o) o.push(i);\n      else indexesByArc[a] = [i];\n    });\n  }\n\n  function polygon(arcs, i) {\n    arcs.forEach(function(arc) { line(arc, i); });\n  }\n\n  function geometry(o, i) {\n    if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n    else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n  }\n\n  var geometryType = {\n    LineString: line,\n    MultiLineString: polygon,\n    Polygon: polygon,\n    MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n  };\n\n  objects.forEach(geometry);\n\n  for (var i in indexesByArc) {\n    for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n      for (var k = j + 1; k < m; ++k) {\n        var ij = indexes[j], ik = indexes[k], n;\n        if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n        if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n      }\n    }\n  }\n\n  return neighbors;\n}\n\nfunction compareArea(a, b) {\n  return a[1][2] - b[1][2];\n}\n\nfunction minAreaHeap() {\n  var heap = {},\n      array = [],\n      size = 0;\n\n  heap.push = function(object) {\n    up(array[object._ = size] = object, size++);\n    return size;\n  };\n\n  heap.pop = function() {\n    if (size <= 0) return;\n    var removed = array[0], object;\n    if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n    return removed;\n  };\n\n  heap.remove = function(removed) {\n    var i = removed._, object;\n    if (array[i] !== removed) return; // invalid request\n    if (i !== --size) object = array[size], (compareArea(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n    return i;\n  };\n\n  function up(object, i) {\n    while (i > 0) {\n      var j = ((i + 1) >> 1) - 1,\n          parent = array[j];\n      if (compareArea(object, parent) >= 0) break;\n      array[parent._ = i] = parent;\n      array[object._ = i = j] = object;\n    }\n  }\n\n  function down(object, i) {\n    while (true) {\n      var r = (i + 1) << 1,\n          l = r - 1,\n          j = i,\n          child = array[j];\n      if (l < size && compareArea(array[l], child) < 0) child = array[j = l];\n      if (r < size && compareArea(array[r], child) < 0) child = array[j = r];\n      if (j === i) break;\n      array[child._ = i] = child;\n      array[object._ = i = j] = object;\n    }\n  }\n\n  return heap;\n}\n\nfunction presimplify(topology, triangleArea) {\n  var absolute = transformAbsolute(topology.transform),\n      relative = transformRelative(topology.transform),\n      heap = minAreaHeap();\n\n  if (!triangleArea) triangleArea = cartesianTriangleArea;\n\n  topology.arcs.forEach(function(arc) {\n    var triangles = [],\n        maxArea = 0,\n        triangle,\n        i,\n        n,\n        p;\n\n    // To store each point’s effective area, we create a new array rather than\n    // extending the passed-in point to workaround a Chrome/V8 bug (getting\n    // stuck in smi mode). For midpoints, the initial effective area of\n    // Infinity will be computed in the next step.\n    for (i = 0, n = arc.length; i < n; ++i) {\n      p = arc[i];\n      absolute(arc[i] = [p[0], p[1], Infinity], i);\n    }\n\n    for (i = 1, n = arc.length - 1; i < n; ++i) {\n      triangle = arc.slice(i - 1, i + 2);\n      triangle[1][2] = triangleArea(triangle);\n      triangles.push(triangle);\n      heap.push(triangle);\n    }\n\n    for (i = 0, n = triangles.length; i < n; ++i) {\n      triangle = triangles[i];\n      triangle.previous = triangles[i - 1];\n      triangle.next = triangles[i + 1];\n    }\n\n    while (triangle = heap.pop()) {\n      var previous = triangle.previous,\n          next = triangle.next;\n\n      // If the area of the current point is less than that of the previous point\n      // to be eliminated, use the latter's area instead. This ensures that the\n      // current point cannot be eliminated without eliminating previously-\n      // eliminated points.\n      if (triangle[1][2] < maxArea) triangle[1][2] = maxArea;\n      else maxArea = triangle[1][2];\n\n      if (previous) {\n        previous.next = next;\n        previous[2] = triangle[2];\n        update(previous);\n      }\n\n      if (next) {\n        next.previous = previous;\n        next[0] = triangle[0];\n        update(next);\n      }\n    }\n\n    arc.forEach(relative);\n  });\n\n  function update(triangle) {\n    heap.remove(triangle);\n    triangle[1][2] = triangleArea(triangle);\n    heap.push(triangle);\n  }\n\n  return topology;\n}\n\nvar version = \"1.6.27\";\n\nexports.version = version;\nexports.mesh = mesh;\nexports.meshArcs = meshArcs;\nexports.merge = merge;\nexports.mergeArcs = mergeArcs;\nexports.feature = feature;\nexports.neighbors = neighbors;\nexports.presimplify = presimplify;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/topojson/build/topojson.js\n// module id = 45\n// module chunks = 0","var normalize = require('geojson-normalize');\n\nmodule.exports = function(inputs) {\n    return {\n        type: 'FeatureCollection',\n        features: inputs.reduce(function(memo, input) {\n            return memo.concat(normalize(input).features);\n        }, [])\n    };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/geojson-merge/index.js\n// module id = 46\n// module chunks = 0","module.exports = normalize;\n\nvar types = {\n    Point: 'geometry',\n    MultiPoint: 'geometry',\n    LineString: 'geometry',\n    MultiLineString: 'geometry',\n    Polygon: 'geometry',\n    MultiPolygon: 'geometry',\n    GeometryCollection: 'geometry',\n    Feature: 'feature',\n    FeatureCollection: 'featurecollection'\n};\n\n/**\n * Normalize a GeoJSON feature into a FeatureCollection.\n *\n * @param {object} gj geojson data\n * @returns {object} normalized geojson data\n */\nfunction normalize(gj) {\n    if (!gj || !gj.type) return null;\n    var type = types[gj.type];\n    if (!type) return null;\n\n    if (type === 'geometry') {\n        return {\n            type: 'FeatureCollection',\n            features: [{\n                type: 'Feature',\n                properties: {},\n                geometry: gj\n            }]\n        };\n    } else if (type === 'feature') {\n        return {\n            type: 'FeatureCollection',\n            features: [gj]\n        };\n    } else if (type === 'featurecollection') {\n        return gj;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/geojson-normalize/index.js\n// module id = 47\n// module chunks = 0","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/earcut/src/earcut.js\n// module id = 48\n// module chunks = 0","/*\r\n * Extrude a polygon given its vertices and triangulated faces\r\n *\r\n * Based on:\r\n * https://github.com/freeman-lab/extrude\r\n */\r\n\r\nimport extend from 'lodash.assign';\r\n\r\nvar extrudePolygon = function(points, faces, _options) {\r\n  var defaults = {\r\n    top: 1,\r\n    bottom: 0,\r\n    closed: true\r\n  };\r\n\r\n  var options = extend({}, defaults, _options);\r\n\r\n  var n = points.length;\r\n  var positions;\r\n  var cells;\r\n  var topCells;\r\n  var bottomCells;\r\n  var sideCells;\r\n\r\n  // If bottom and top values are identical then return the flat shape\r\n  (options.top === options.bottom) ? flat() : full();\r\n\r\n  function flat() {\r\n    positions = points.map(function(p) { return [p[0], options.top, p[1]]; });\r\n    cells = faces;\r\n    topCells = faces;\r\n  }\r\n\r\n  function full() {\r\n    positions = [];\r\n    points.forEach(function(p) { positions.push([p[0], options.top, p[1]]); });\r\n    points.forEach(function(p) { positions.push([p[0], options.bottom, p[1]]); });\r\n\r\n    cells = [];\r\n    for (var i = 0; i < n; i++) {\r\n      if (i === (n - 1)) {\r\n        cells.push([i + n, n, i]);\r\n        cells.push([0, i, n]);\r\n      } else {\r\n        cells.push([i + n, i + n + 1, i]);\r\n        cells.push([i + 1, i, i + n + 1]);\r\n      }\r\n    }\r\n\r\n    sideCells = [].concat(cells);\r\n\r\n    if (options.closed) {\r\n      var top = faces;\r\n      var bottom = top.map(function(p) { return p.map(function(v) { return v + n; }); });\r\n      bottom = bottom.map(function(p) { return [p[0], p[2], p[1]]; });\r\n      cells = cells.concat(top).concat(bottom);\r\n\r\n      topCells = top;\r\n      bottomCells = bottom;\r\n    }\r\n  }\r\n\r\n  return {\r\n    positions: positions,\r\n    faces: cells,\r\n    top: topCells,\r\n    bottom: bottomCells,\r\n    sides: sideCells\r\n  };\r\n};\r\n\r\nexport default extrudePolygon;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/extrudePolygon.js","/*\r\n * BufferGeometry helpers\r\n */\r\n\r\nimport THREE from 'three';\r\nimport {TextEncoder, TextDecoder} from 'text-encoding';\r\n\r\nvar Buffer = (function() {\r\n  // Merge TypedArrays of the same type\r\n  // Returns merged array as well as indexes for splitting the array\r\n  var mergeFloat32Arrays = function(arrays) {\r\n    var size = 0;\r\n    var map = new Int32Array(arrays.length * 2);\r\n\r\n    var lastIndex = 0;\r\n    var length;\r\n\r\n    // Find size of each array\r\n    arrays.forEach((_array, index) => {\r\n      length = _array.length;\r\n      size += length;\r\n      map.set([lastIndex, lastIndex + length], index * 2);\r\n      lastIndex += length;\r\n    });\r\n\r\n    // Create a new array of total size\r\n    var mergedArray = new Float32Array(size);\r\n\r\n    // Add each array to the new array\r\n    arrays.forEach((_array, index) => {\r\n      mergedArray.set(_array, map[index * 2]);\r\n    });\r\n\r\n    return [\r\n      mergedArray,\r\n      map\r\n    ];\r\n  };\r\n\r\n  var splitFloat32Array = function(data) {\r\n    var arr = data[0];\r\n    var map = data[1];\r\n\r\n    var start;\r\n    var arrays = [];\r\n\r\n    // Iterate over map\r\n    for (var i = 0; i < map.length / 2; i++) {\r\n      start = i * 2;\r\n      arrays.push(arr.subarray(map[start], map[start + 1]));\r\n    }\r\n\r\n    return arrays;\r\n  };\r\n\r\n  // TODO: Create a generic method that can work for any typed array\r\n  var mergeUint8Arrays = function(arrays) {\r\n    var size = 0;\r\n    var map = new Int32Array(arrays.length * 2);\r\n\r\n    var lastIndex = 0;\r\n    var length;\r\n\r\n    // Find size of each array\r\n    arrays.forEach((_array, index) => {\r\n      length = _array.length;\r\n      size += length;\r\n      map.set([lastIndex, lastIndex + length], index * 2);\r\n      lastIndex += length;\r\n    });\r\n\r\n    // Create a new array of total size\r\n    var mergedArray = new Uint8Array(size);\r\n\r\n    // Add each array to the new array\r\n    arrays.forEach((_array, index) => {\r\n      mergedArray.set(_array, map[index * 2]);\r\n    });\r\n\r\n    return [\r\n      mergedArray,\r\n      map\r\n    ];\r\n  };\r\n\r\n  // TODO: Dedupe with splitFloat32Array\r\n  var splitUint8Array = function(data) {\r\n    var arr = data[0];\r\n    var map = data[1];\r\n\r\n    var start;\r\n    var arrays = [];\r\n\r\n    // Iterate over map\r\n    for (var i = 0; i < map.length / 2; i++) {\r\n      start = i * 2;\r\n      arrays.push(arr.subarray(map[start], map[start + 1]));\r\n    }\r\n\r\n    return arrays;\r\n  };\r\n\r\n  // Merge multiple attribute objects into a single attribute object\r\n  //\r\n  // Attribute objects must all use the same attribute keys\r\n  var mergeAttributes = function(attributes) {\r\n    var lengths = {};\r\n\r\n    // Find array lengths\r\n    attributes.forEach(_attributes => {\r\n      for (var k in _attributes) {\r\n        if (!lengths[k]) {\r\n          lengths[k] = 0;\r\n        }\r\n\r\n        lengths[k] += _attributes[k].length;\r\n      }\r\n    });\r\n\r\n    var mergedAttributes = {};\r\n\r\n    // Set up arrays to merge into\r\n    for (var k in lengths) {\r\n      mergedAttributes[k] = new Float32Array(lengths[k]);\r\n    }\r\n\r\n    var lastLengths = {};\r\n\r\n    attributes.forEach(_attributes => {\r\n      for (var k in _attributes) {\r\n        if (!lastLengths[k]) {\r\n          lastLengths[k] = 0;\r\n        }\r\n\r\n        mergedAttributes[k].set(_attributes[k], lastLengths[k]);\r\n\r\n        lastLengths[k] += _attributes[k].length;\r\n      }\r\n    });\r\n\r\n    return mergedAttributes;\r\n  };\r\n\r\n  var createLineGeometry = function(lines, offset) {\r\n    var geometry = new THREE.BufferGeometry();\r\n\r\n    var vertices = new Float32Array(lines.verticesCount * 3);\r\n    var colours = new Float32Array(lines.verticesCount * 3);\r\n\r\n    var pickingIds;\r\n    if (lines.pickingIds) {\r\n      // One component per vertex (1)\r\n      pickingIds = new Float32Array(lines.verticesCount);\r\n    }\r\n\r\n    var _vertices;\r\n    var _colour;\r\n    var _pickingId;\r\n\r\n    var lastIndex = 0;\r\n\r\n    for (var i = 0; i < lines.vertices.length; i++) {\r\n      _vertices = lines.vertices[i];\r\n      _colour = lines.colours[i];\r\n\r\n      if (pickingIds) {\r\n        _pickingId = lines.pickingIds[i];\r\n      }\r\n\r\n      for (var j = 0; j < _vertices.length; j++) {\r\n        var ax = _vertices[j][0] + offset.x;\r\n        var ay = _vertices[j][1];\r\n        var az = _vertices[j][2] + offset.y;\r\n\r\n        var c1 = _colour[j];\r\n\r\n        vertices[lastIndex * 3 + 0] = ax;\r\n        vertices[lastIndex * 3 + 1] = ay;\r\n        vertices[lastIndex * 3 + 2] = az;\r\n\r\n        colours[lastIndex * 3 + 0] = c1[0];\r\n        colours[lastIndex * 3 + 1] = c1[1];\r\n        colours[lastIndex * 3 + 2] = c1[2];\r\n\r\n        if (pickingIds) {\r\n          pickingIds[lastIndex] = _pickingId;\r\n        }\r\n\r\n        lastIndex++;\r\n      }\r\n    }\r\n\r\n    // itemSize = 3 because there are 3 values (components) per vertex\r\n    geometry.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\r\n    geometry.addAttribute('color', new THREE.BufferAttribute(colours, 3));\r\n\r\n    if (pickingIds) {\r\n      geometry.addAttribute('pickingId', new THREE.BufferAttribute(pickingIds, 1));\r\n    }\r\n\r\n    geometry.computeBoundingBox();\r\n\r\n    return geometry;\r\n  };\r\n\r\n  // TODO: Make picking IDs optional\r\n  var createGeometry = function(attributes, offset) {\r\n    var geometry = new THREE.BufferGeometry();\r\n\r\n    // Three components per vertex per face (3 x 3 = 9)\r\n    var vertices = new Float32Array(attributes.facesCount * 9);\r\n    var normals = new Float32Array(attributes.facesCount * 9);\r\n    var colours = new Float32Array(attributes.facesCount * 9);\r\n\r\n    var pickingIds;\r\n    if (attributes.pickingIds) {\r\n      // One component per vertex per face (1 x 3 = 3)\r\n      pickingIds = new Float32Array(attributes.facesCount * 3);\r\n    }\r\n\r\n    var pA = new THREE.Vector3();\r\n    var pB = new THREE.Vector3();\r\n    var pC = new THREE.Vector3();\r\n\r\n    var cb = new THREE.Vector3();\r\n    var ab = new THREE.Vector3();\r\n\r\n    var index;\r\n    var _faces;\r\n    var _vertices;\r\n    var _colour;\r\n    var _pickingId;\r\n    var lastIndex = 0;\r\n    for (var i = 0; i < attributes.faces.length; i++) {\r\n      _faces = attributes.faces[i];\r\n      _vertices = attributes.vertices[i];\r\n      _colour = attributes.colours[i];\r\n\r\n      if (pickingIds) {\r\n        _pickingId = attributes.pickingIds[i];\r\n      }\r\n\r\n      for (var j = 0; j < _faces.length; j++) {\r\n        // Array of vertex indexes for the face\r\n        index = _faces[j][0];\r\n\r\n        var ax = _vertices[index][0] + offset.x;\r\n        var ay = _vertices[index][1];\r\n        var az = _vertices[index][2] + offset.y;\r\n\r\n        var c1 = _colour[j][0];\r\n\r\n        index = _faces[j][1];\r\n\r\n        var bx = _vertices[index][0] + offset.x;\r\n        var by = _vertices[index][1];\r\n        var bz = _vertices[index][2] + offset.y;\r\n\r\n        var c2 = _colour[j][1];\r\n\r\n        index = _faces[j][2];\r\n\r\n        var cx = _vertices[index][0] + offset.x;\r\n        var cy = _vertices[index][1];\r\n        var cz = _vertices[index][2] + offset.y;\r\n\r\n        var c3 = _colour[j][2];\r\n\r\n        // Flat face normals\r\n        // From: http://threejs.org/examples/webgl_buffergeometry.html\r\n        pA.set(ax, ay, az);\r\n        pB.set(bx, by, bz);\r\n        pC.set(cx, cy, cz);\r\n\r\n        cb.subVectors(pC, pB);\r\n        ab.subVectors(pA, pB);\r\n        cb.cross(ab);\r\n\r\n        cb.normalize();\r\n\r\n        var nx = cb.x;\r\n        var ny = cb.y;\r\n        var nz = cb.z;\r\n\r\n        vertices[lastIndex * 9 + 0] = ax;\r\n        vertices[lastIndex * 9 + 1] = ay;\r\n        vertices[lastIndex * 9 + 2] = az;\r\n\r\n        normals[lastIndex * 9 + 0] = nx;\r\n        normals[lastIndex * 9 + 1] = ny;\r\n        normals[lastIndex * 9 + 2] = nz;\r\n\r\n        colours[lastIndex * 9 + 0] = c1[0];\r\n        colours[lastIndex * 9 + 1] = c1[1];\r\n        colours[lastIndex * 9 + 2] = c1[2];\r\n\r\n        vertices[lastIndex * 9 + 3] = bx;\r\n        vertices[lastIndex * 9 + 4] = by;\r\n        vertices[lastIndex * 9 + 5] = bz;\r\n\r\n        normals[lastIndex * 9 + 3] = nx;\r\n        normals[lastIndex * 9 + 4] = ny;\r\n        normals[lastIndex * 9 + 5] = nz;\r\n\r\n        colours[lastIndex * 9 + 3] = c2[0];\r\n        colours[lastIndex * 9 + 4] = c2[1];\r\n        colours[lastIndex * 9 + 5] = c2[2];\r\n\r\n        vertices[lastIndex * 9 + 6] = cx;\r\n        vertices[lastIndex * 9 + 7] = cy;\r\n        vertices[lastIndex * 9 + 8] = cz;\r\n\r\n        normals[lastIndex * 9 + 6] = nx;\r\n        normals[lastIndex * 9 + 7] = ny;\r\n        normals[lastIndex * 9 + 8] = nz;\r\n\r\n        colours[lastIndex * 9 + 6] = c3[0];\r\n        colours[lastIndex * 9 + 7] = c3[1];\r\n        colours[lastIndex * 9 + 8] = c3[2];\r\n\r\n        if (pickingIds) {\r\n          pickingIds[lastIndex * 3 + 0] = _pickingId;\r\n          pickingIds[lastIndex * 3 + 1] = _pickingId;\r\n          pickingIds[lastIndex * 3 + 2] = _pickingId;\r\n        }\r\n\r\n        lastIndex++;\r\n      }\r\n    }\r\n\r\n    // itemSize = 3 because there are 3 values (components) per vertex\r\n    geometry.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\r\n    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\r\n    geometry.addAttribute('color', new THREE.BufferAttribute(colours, 3));\r\n\r\n    if (pickingIds) {\r\n      geometry.addAttribute('pickingId', new THREE.BufferAttribute(pickingIds, 1));\r\n    }\r\n\r\n    geometry.computeBoundingBox();\r\n\r\n    return geometry;\r\n  };\r\n\r\n  var textEncoder = new TextEncoder('utf-8');\r\n  var textDecoder = new TextDecoder('utf-8');\r\n\r\n  var stringToUint8Array = function(str) {\r\n    return textEncoder.encode(str);\r\n  };\r\n\r\n  var uint8ArrayToString = function(ab) {\r\n    return textDecoder.decode(ab);\r\n  };\r\n\r\n  var fillTypedArray = function(arr, value) {\r\n    for (var i = 0; i < arr.length; i++) {\r\n      arr[i] = value;\r\n    }\r\n  };\r\n\r\n  return {\r\n    mergeFloat32Arrays: mergeFloat32Arrays,\r\n    splitFloat32Array: splitFloat32Array,\r\n    mergeUint8Arrays: mergeUint8Arrays,\r\n    splitUint8Array: splitUint8Array,\r\n    mergeAttributes: mergeAttributes,\r\n    createLineGeometry: createLineGeometry,\r\n    createGeometry: createGeometry,\r\n    stringToUint8Array: stringToUint8Array,\r\n    uint8ArrayToString: uint8ArrayToString,\r\n    fillTypedArray: fillTypedArray\r\n  };\r\n})();\r\n\r\nexport default Buffer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/Buffer.js","import THREE from 'three';\r\nimport PickingShader from './PickingShader';\r\n\r\n// FROM: https://github.com/brianxu/GPUPicker/blob/master/GPUPicker.js\r\n\r\nvar PickingMaterial = function() {\r\n  THREE.ShaderMaterial.call(this, {\r\n    uniforms: {\r\n      size: {\r\n        type: 'f',\r\n        value: 0.01,\r\n      },\r\n      scale: {\r\n        type: 'f',\r\n        value: 400,\r\n      }\r\n    },\r\n    // attributes: ['position', 'id'],\r\n    vertexShader: PickingShader.vertexShader,\r\n    fragmentShader: PickingShader.fragmentShader\r\n  });\r\n\r\n  this.linePadding = 2;\r\n};\r\n\r\nPickingMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);\r\n\r\nPickingMaterial.prototype.constructor = PickingMaterial;\r\n\r\nPickingMaterial.prototype.setPointSize = function(size) {\r\n  this.uniforms.size.value = size;\r\n};\r\n\r\nPickingMaterial.prototype.setPointScale = function(scale) {\r\n  this.uniforms.scale.value = scale;\r\n};\r\n\r\nexport default PickingMaterial;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/PickingMaterial.js","// FROM: https://github.com/brianxu/GPUPicker/blob/master/GPUPicker.js\r\n\r\nvar PickingShader = {\r\n  vertexShader: [\r\n\t\t'attribute float pickingId;',\r\n\t\t// '',\r\n\t\t// 'uniform float size;',\r\n\t\t// 'uniform float scale;',\r\n\t\t'',\r\n\t\t'varying vec4 worldId;',\r\n\t\t'',\r\n\t\t'void main() {',\r\n\t\t'  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );',\r\n\t\t// '  gl_PointSize = size * ( scale / length( mvPosition.xyz ) );',\r\n\t\t'  vec3 a = fract(vec3(1.0/255.0, 1.0/(255.0*255.0), 1.0/(255.0*255.0*255.0)) * pickingId);',\r\n\t\t'  a -= a.xxy * vec3(0.0, 1.0/255.0, 1.0/255.0);',\r\n\t\t'  worldId = vec4(a,1);',\r\n\t\t'  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n\t\t'}'\r\n\t].join('\\n'),\r\n\r\n  fragmentShader: [\r\n\t\t'#ifdef GL_ES\\n',\r\n\t\t'precision highp float;\\n',\r\n\t\t'#endif\\n',\r\n\t\t'',\r\n\t\t'varying vec4 worldId;',\r\n\t\t'',\r\n\t\t'void main() {',\r\n\t\t'  gl_FragColor = worldId;',\r\n\t\t'}'\r\n\t].join('\\n')\r\n};\r\n\r\nexport default PickingShader;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/engine/PickingShader.js","// TODO: Move duplicated logic between geometry layrs into GeometryLayer\r\n\r\n// TODO: Look at ways to drop unneeded references to array buffers, etc to\r\n// reduce memory footprint\r\n\r\n// TODO: Support dynamic updating / hiding / animation of geometry\r\n//\r\n// This could be pretty hard as it's all packed away within BufferGeometry and\r\n// may even be merged by another layer (eg. GeoJSONLayer)\r\n//\r\n// How much control should this layer support? Perhaps a different or custom\r\n// layer would be better suited for animation, for example.\r\n\r\n// TODO: Allow _setBufferAttributes to use a custom function passed in to\r\n// generate a custom mesh\r\n\r\nimport Layer from '../Layer';\r\nimport extend from 'lodash.assign';\r\nimport THREE from 'three';\r\nimport Geo from '../../geo/Geo';\r\nimport {latLon as LatLon} from '../../geo/LatLon';\r\nimport {point as Point} from '../../geo/Point';\r\nimport earcut from 'earcut';\r\nimport extrudePolygon from '../../util/extrudePolygon';\r\nimport PickingMaterial from '../../engine/PickingMaterial';\r\nimport Buffer from '../../util/Buffer';\r\n\r\nclass PolygonLayer extends Layer {\r\n  constructor(coordinates, options) {\r\n    var defaults = {\r\n      output: true,\r\n      interactive: false,\r\n      // Custom material override\r\n      //\r\n      // TODO: Should this be in the style object?\r\n      polygonMaterial: null,\r\n      onPolygonMesh: null,\r\n      onBufferAttributes: null,\r\n      // This default style is separate to Util.GeoJSON.defaultStyle\r\n      style: {\r\n        color: '#ffffff',\r\n        transparent: false,\r\n        opacity: 1,\r\n        blending: THREE.NormalBlending,\r\n        height: 0\r\n      }\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    super(_options);\r\n\r\n    // Return coordinates as array of polygons so it's easy to support\r\n    // MultiPolygon features (a single polygon would be a MultiPolygon with a\r\n    // single polygon in the array)\r\n    this._coordinates = (PolygonLayer.isSingle(coordinates)) ? [coordinates] : coordinates;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    return new Promise((resolve, reject) => {\r\n      this._setCoordinates();\r\n\r\n      if (this._options.interactive) {\r\n        // Only add to picking mesh if this layer is controlling output\r\n        //\r\n        // Otherwise, assume another component will eventually add a mesh to\r\n        // the picking scene\r\n        if (this.isOutput()) {\r\n          this._pickingMesh = new THREE.Object3D();\r\n          this.addToPicking(this._pickingMesh);\r\n        }\r\n\r\n        this._setPickingId();\r\n        this._addPickingEvents();\r\n      }\r\n\r\n      PolygonLayer.SetBufferAttributes(this._projectedCoordinates, this._options).then((result) => {\r\n        this._bufferAttributes = Buffer.mergeAttributes(result.attributes);\r\n\r\n        if (result.outlineAttributes.length > 0) {\r\n          this._outlineBufferAttributes = Buffer.mergeAttributes(result.outlineAttributes);\r\n        }\r\n\r\n        this._flat = result.flat;\r\n\r\n        if (this.isOutput()) {\r\n          var attributeLengths = {\r\n            positions: 3,\r\n            normals: 3,\r\n            colors: 3,\r\n            tops: 1\r\n          };\r\n\r\n          if (this._options.interactive) {\r\n            attributeLengths.pickingIds = 1;\r\n          }\r\n\r\n          var style = this._options.style;\r\n\r\n          // Set mesh if not merging elsewhere\r\n          PolygonLayer.SetMesh(this._bufferAttributes, attributeLengths, this._flat, style, this._options, this._world._environment._skybox).then((result) => {\r\n            // Output mesh\r\n            this.add(result.mesh);\r\n\r\n            if (result.pickingMesh) {\r\n              this._pickingMesh.add(result.pickingMesh);\r\n            }\r\n          });\r\n        }\r\n\r\n        result.attributes = null;\r\n        result.outlineAttributes = null;\r\n        result = null;\r\n\r\n        resolve(this);\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  // Return center of polygon as a LatLon\r\n  //\r\n  // This is used for things like placing popups / UI elements on the layer\r\n  //\r\n  // TODO: Find proper center position instead of returning first coordinate\r\n  // SEE: https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polygon.js#L15\r\n  getCenter() {\r\n    return this._center;\r\n  }\r\n\r\n  // Return polygon bounds in geographic coordinates\r\n  //\r\n  // TODO: Implement getBounds()\r\n  getBounds() {}\r\n\r\n  // Get unique ID for picking interaction\r\n  _setPickingId() {\r\n    this._pickingId = this._options.pickingId = this.getPickingId();\r\n  }\r\n\r\n  // Set up and re-emit interaction events\r\n  _addPickingEvents() {\r\n    // TODO: Find a way to properly remove this listener on destroy\r\n    this._world.on('pick-click-' + this._pickingId, (point2d, point3d, intersects) => {\r\n      // Re-emit click event from the layer\r\n      this.emit('click', this, point2d, point3d, intersects);\r\n    });\r\n\r\n    this._world.on('pick-hover-' + this._pickingId, (point2d, point3d, intersects) => {\r\n      // Re-emit click event from the layer\r\n      this.emit('hover', this, point2d, point3d, intersects);\r\n    });\r\n  }\r\n\r\n  // Create and store reference to THREE.BufferAttribute data for this layer\r\n  static SetBufferAttributes(coordinates, options) {\r\n    return new Promise((resolve) => {\r\n      var height = 0;\r\n\r\n      // Convert height into world units\r\n      if (options.style.height && options.style.height !== 0) {\r\n        height = Geo.metresToWorld(options.style.height, options.pointScale);\r\n      }\r\n\r\n      var colour = new THREE.Color();\r\n      colour.set(options.style.color);\r\n\r\n      // Light and dark colours used for poor-mans AO gradient on object sides\r\n      var light = new THREE.Color(0xffffff);\r\n      var shadow  = new THREE.Color(0x666666);\r\n\r\n      var flat = true;\r\n\r\n      var outlineAttributes = [];\r\n\r\n      // For each polygon\r\n      var attributes = coordinates.map(_coordinates => {\r\n        // Convert coordinates to earcut format\r\n        var _earcut = PolygonLayer.ToEarcut(_coordinates);\r\n\r\n        // Triangulate faces using earcut\r\n        var faces = PolygonLayer.Triangulate(_earcut.vertices, _earcut.holes, _earcut.dimensions);\r\n\r\n        var groupedVertices = [];\r\n        for (i = 0, il = _earcut.vertices.length; i < il; i += _earcut.dimensions) {\r\n          groupedVertices.push(_earcut.vertices.slice(i, i + _earcut.dimensions));\r\n        }\r\n\r\n        var extruded = extrudePolygon(groupedVertices, faces, {\r\n          bottom: 0,\r\n          top: height\r\n        });\r\n\r\n        var topColor = colour.clone().multiply(light);\r\n        var bottomColor = colour.clone().multiply(shadow);\r\n\r\n        var _vertices = extruded.positions;\r\n        var _faces = [];\r\n        var _colours = [];\r\n        var _tops = [];\r\n\r\n        var _colour;\r\n        extruded.top.forEach((face, fi) => {\r\n          _colour = [];\r\n\r\n          _colour.push([colour.r, colour.g, colour.b]);\r\n          _colour.push([colour.r, colour.g, colour.b]);\r\n          _colour.push([colour.r, colour.g, colour.b]);\r\n\r\n          _tops.push([true, true, true]);\r\n\r\n          _faces.push(face);\r\n          _colours.push(_colour);\r\n        });\r\n\r\n        if (extruded.sides) {\r\n          flat = false;\r\n\r\n          // Set up colours for every vertex with poor-mans AO on the sides\r\n          extruded.sides.forEach((face, fi) => {\r\n            _colour = [];\r\n\r\n            // First face is always bottom-bottom-top\r\n            if (fi % 2 === 0) {\r\n              _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\r\n              _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\r\n              _colour.push([topColor.r, topColor.g, topColor.b]);\r\n\r\n              _tops.push([false, false, true]);\r\n            // Reverse winding for the second face\r\n            // top-top-bottom\r\n            } else {\r\n              _colour.push([topColor.r, topColor.g, topColor.b]);\r\n              _colour.push([topColor.r, topColor.g, topColor.b]);\r\n              _colour.push([bottomColor.r, bottomColor.g, bottomColor.b]);\r\n\r\n              _tops.push([true, true, false]);\r\n            }\r\n\r\n            _faces.push(face);\r\n            _colours.push(_colour);\r\n          });\r\n        }\r\n\r\n        // Skip bottom as there's no point rendering it\r\n        // allFaces.push(extruded.faces);\r\n\r\n        var polygon = {\r\n          vertices: _vertices,\r\n          faces: _faces,\r\n          colours: _colours,\r\n          tops: _tops,\r\n          facesCount: _faces.length\r\n        };\r\n\r\n        if (options.style.outline) {\r\n          var outlineColour = new THREE.Color();\r\n          outlineColour.set(options.style.outlineColor || 0x000000);\r\n\r\n          outlineAttributes.push(PolygonLayer.Set2DOutline(_coordinates, outlineColour));\r\n        }\r\n\r\n        if (options.interactive && options.pickingId) {\r\n          // Inject picking ID\r\n          polygon.pickingId = options.pickingId;\r\n        }\r\n\r\n        // Convert polygon representation to proper attribute arrays\r\n        return PolygonLayer.ToAttributes(polygon);\r\n      });\r\n\r\n      resolve({\r\n        attributes: attributes,\r\n        outlineAttributes: outlineAttributes,\r\n        flat: flat\r\n      });\r\n    });\r\n  }\r\n\r\n  getBufferAttributes() {\r\n    return this._bufferAttributes;\r\n  }\r\n\r\n  getOutlineBufferAttributes() {\r\n    return this._outlineBufferAttributes;\r\n  }\r\n\r\n  // Used by external components to clear some memory when the attributes\r\n  // are no longer required to be stored in this layer\r\n  //\r\n  // For example, you would want to clear the attributes here after merging them\r\n  // using something like the GeoJSONLayer\r\n  clearBufferAttributes() {\r\n    this._bufferAttributes = null;\r\n    this._outlineBufferAttributes = null;\r\n  }\r\n\r\n  // Threshold angle is currently in rads\r\n  static Set2DOutline(coordinates, colour) {\r\n    var _vertices = [];\r\n\r\n    coordinates.forEach((ring) => {\r\n      var _ring = ring.map((coordinate) => {\r\n        return [coordinate.x, 0, coordinate.y];\r\n      });\r\n\r\n      // Add in duplicate vertices for line segments to work\r\n      var verticeCount = _ring.length;\r\n      var first = true;\r\n      while (--verticeCount) {\r\n        if (first || verticeCount === 0) {\r\n          first = false;\r\n          continue;\r\n        }\r\n\r\n        _ring.splice(verticeCount + 1, 0, _ring[verticeCount]);\r\n      }\r\n\r\n      _vertices = _vertices.concat(_ring);\r\n    });\r\n\r\n    _colour = [colour.r, colour.g, colour.b];\r\n\r\n    var vertices = new Float32Array(_vertices.length * 3);\r\n    var colours = new Float32Array(_vertices.length * 3);\r\n\r\n    var lastIndex = 0;\r\n\r\n    for (var i = 0; i < _vertices.length; i++) {\r\n      var ax = _vertices[i][0];\r\n      var ay = _vertices[i][1];\r\n      var az = _vertices[i][2];\r\n\r\n      var c1 = _colour;\r\n\r\n      vertices[lastIndex * 3 + 0] = ax;\r\n      vertices[lastIndex * 3 + 1] = ay;\r\n      vertices[lastIndex * 3 + 2] = az;\r\n\r\n      colours[lastIndex * 3 + 0] = c1[0];\r\n      colours[lastIndex * 3 + 1] = c1[1];\r\n      colours[lastIndex * 3 + 2] = c1[2];\r\n\r\n      lastIndex++;\r\n    }\r\n\r\n    var attributes = {\r\n      positions: vertices,\r\n      colors: colours\r\n    };\r\n\r\n    return attributes;\r\n  }\r\n\r\n  // Used by external components to clear some memory when the coordinates\r\n  // are no longer required to be stored in this layer\r\n  //\r\n  // For example, you would want to clear the coordinates here after this\r\n  // layer is merged in something like the GeoJSONLayer\r\n  clearCoordinates() {\r\n    this._coordinates = null;\r\n    this._projectedCoordinates = null;\r\n  }\r\n\r\n  static SetMesh(attributes, attributeLengths, flat, style, options, skybox) {\r\n    var geometry = new THREE.BufferGeometry();\r\n\r\n    for (var key in attributes) {\r\n      geometry.addAttribute(key.slice(0, -1), new THREE.BufferAttribute(attributes[key], attributeLengths[key]));\r\n    }\r\n\r\n    geometry.computeBoundingBox();\r\n\r\n    var material;\r\n    if (options.polygonMaterial && options.polygonMaterial instanceof THREE.Material) {\r\n      material = options.polygonMaterial;\r\n    } else if (!skybox) {\r\n      material = new THREE.MeshPhongMaterial({\r\n        vertexColors: THREE.VertexColors,\r\n        side: THREE.BackSide,\r\n        transparent: style.transparent,\r\n        opacity: style.opacity,\r\n        blending: style.blending\r\n      });\r\n    } else {\r\n      material = new THREE.MeshStandardMaterial({\r\n        vertexColors: THREE.VertexColors,\r\n        side: THREE.BackSide,\r\n        transparent: style.transparent,\r\n        opacity: style.opacity,\r\n        blending: style.blending\r\n      });\r\n      material.roughness = 1;\r\n      material.metalness = 0.1;\r\n      material.envMapIntensity = 3;\r\n      material.envMap = skybox.getRenderTarget();\r\n    }\r\n\r\n    var mesh;\r\n\r\n    // Pass mesh through callback, if defined\r\n    if (typeof options.onPolygonMesh === 'function') {\r\n      mesh = options.onPolygonMesh(geometry, material);\r\n    } else {\r\n      mesh = new THREE.Mesh(geometry, material);\r\n\r\n      mesh.castShadow = true;\r\n      mesh.receiveShadow = true;\r\n    }\r\n\r\n    if (flat || style.renderOrder !== undefined) {\r\n      if (!style.ignoreDepth) {\r\n        material.depthWrite = false;\r\n      }\r\n\r\n      var renderOrder = (style.renderOrder !== undefined) ? style.renderOrder : 3;\r\n      mesh.renderOrder = renderOrder;\r\n    }\r\n\r\n    if (options.interactive) {\r\n      material = new PickingMaterial();\r\n      material.side = THREE.BackSide;\r\n\r\n      var pickingMesh = new THREE.Mesh(geometry, material);\r\n    }\r\n\r\n    return Promise.resolve({\r\n      mesh: mesh,\r\n      pickingMesh: pickingMesh\r\n    });\r\n  }\r\n\r\n  // Convert and project coordinates\r\n  //\r\n  // TODO: Calculate bounds\r\n  _setCoordinates() {\r\n    this._bounds = [];\r\n    this._coordinates = this._convertCoordinates(this._coordinates);\r\n\r\n    this._projectedBounds = [];\r\n    this._projectedCoordinates = this._projectCoordinates();\r\n\r\n    this._center = this._coordinates[0][0][0];\r\n  }\r\n\r\n  // Recursively convert input coordinates into LatLon objects\r\n  //\r\n  // Calculate geographic bounds at the same time\r\n  //\r\n  // TODO: Calculate geographic bounds\r\n  _convertCoordinates(coordinates) {\r\n    return coordinates.map(_coordinates => {\r\n      return _coordinates.map(ring => {\r\n        return ring.map(coordinate => {\r\n          return LatLon(coordinate[1], coordinate[0]);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  // Recursively project coordinates into world positions\r\n  //\r\n  // Calculate world bounds, offset and pointScale at the same time\r\n  //\r\n  // TODO: Calculate world bounds\r\n  _projectCoordinates() {\r\n    var point;\r\n    return this._coordinates.map(_coordinates => {\r\n      return _coordinates.map(ring => {\r\n        return ring.map(latlon => {\r\n          point = this._world.latLonToPoint(latlon);\r\n\r\n          // TODO: Is offset ever being used or needed?\r\n          if (!this._offset) {\r\n            this._offset = Point(0, 0);\r\n            this._offset.x = -1 * point.x;\r\n            this._offset.y = -1 * point.y;\r\n\r\n            this._options.pointScale = this._world.pointScale(latlon);\r\n          }\r\n\r\n          return point;\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  // Convert coordinates array to something earcut can understand\r\n  static ToEarcut(coordinates) {\r\n    var dim = 2;\r\n    var result = {vertices: [], holes: [], dimensions: dim};\r\n    var holeIndex = 0;\r\n\r\n    for (var i = 0; i < coordinates.length; i++) {\r\n      for (var j = 0; j < coordinates[i].length; j++) {\r\n        // for (var d = 0; d < dim; d++) {\r\n        result.vertices.push(coordinates[i][j].x);\r\n        result.vertices.push(coordinates[i][j].y);\r\n        // }\r\n      }\r\n      if (i > 0) {\r\n        holeIndex += coordinates[i - 1].length;\r\n        result.holes.push(holeIndex);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // Triangulate earcut-based input using earcut\r\n  static Triangulate(contour, holes, dim) {\r\n    // console.time('earcut');\r\n\r\n    var faces = earcut(contour, holes, dim);\r\n    var result = [];\r\n\r\n    for (i = 0, il = faces.length; i < il; i += 3) {\r\n      result.push(faces.slice(i, i + 3));\r\n    }\r\n\r\n    // console.timeEnd('earcut');\r\n\r\n    return result;\r\n  }\r\n\r\n  // Transform polygon representation into attribute arrays that can be used by\r\n  // THREE.BufferGeometry\r\n  //\r\n  // TODO: Can this be simplified? It's messy and huge\r\n  static ToAttributes(polygon) {\r\n    // Three components per vertex per face (3 x 3 = 9)\r\n    var positions = new Float32Array(polygon.facesCount * 9);\r\n    var normals = new Float32Array(polygon.facesCount * 9);\r\n    var colours = new Float32Array(polygon.facesCount * 9);\r\n\r\n    // One component per vertex per face (1 x 3 = 3)\r\n    var tops = new Float32Array(polygon.facesCount * 3);\r\n\r\n    var pickingIds;\r\n    if (polygon.pickingId) {\r\n      // One component per vertex per face (1 x 3 = 3)\r\n      pickingIds = new Float32Array(polygon.facesCount * 3);\r\n    }\r\n\r\n    var pA = new THREE.Vector3();\r\n    var pB = new THREE.Vector3();\r\n    var pC = new THREE.Vector3();\r\n\r\n    var cb = new THREE.Vector3();\r\n    var ab = new THREE.Vector3();\r\n\r\n    var index;\r\n\r\n    var _faces = polygon.faces;\r\n    var _vertices = polygon.vertices;\r\n    var _colour = polygon.colours;\r\n    var _tops = polygon.tops;\r\n\r\n    var _pickingId;\r\n    if (pickingIds) {\r\n      _pickingId = polygon.pickingId;\r\n    }\r\n\r\n    var lastIndex = 0;\r\n\r\n    for (var i = 0; i < _faces.length; i++) {\r\n      // Array of vertex indexes for the face\r\n      index = _faces[i][0];\r\n\r\n      var ax = _vertices[index][0];\r\n      var ay = _vertices[index][1];\r\n      var az = _vertices[index][2];\r\n\r\n      var c1 = _colour[i][0];\r\n      var t1 = _tops[i][0];\r\n\r\n      index = _faces[i][1];\r\n\r\n      var bx = _vertices[index][0];\r\n      var by = _vertices[index][1];\r\n      var bz = _vertices[index][2];\r\n\r\n      var c2 = _colour[i][1];\r\n      var t2 = _tops[i][1];\r\n\r\n      index = _faces[i][2];\r\n\r\n      var cx = _vertices[index][0];\r\n      var cy = _vertices[index][1];\r\n      var cz = _vertices[index][2];\r\n\r\n      var c3 = _colour[i][2];\r\n      var t3 = _tops[i][2];\r\n\r\n      // Flat face normals\r\n      // From: http://threejs.org/examples/webgl_buffergeometry.html\r\n      pA.set(ax, ay, az);\r\n      pB.set(bx, by, bz);\r\n      pC.set(cx, cy, cz);\r\n\r\n      cb.subVectors(pC, pB);\r\n      ab.subVectors(pA, pB);\r\n      cb.cross(ab);\r\n\r\n      cb.normalize();\r\n\r\n      var nx = cb.x;\r\n      var ny = cb.y;\r\n      var nz = cb.z;\r\n\r\n      positions[lastIndex * 9 + 0] = ax;\r\n      positions[lastIndex * 9 + 1] = ay;\r\n      positions[lastIndex * 9 + 2] = az;\r\n\r\n      normals[lastIndex * 9 + 0] = nx;\r\n      normals[lastIndex * 9 + 1] = ny;\r\n      normals[lastIndex * 9 + 2] = nz;\r\n\r\n      colours[lastIndex * 9 + 0] = c1[0];\r\n      colours[lastIndex * 9 + 1] = c1[1];\r\n      colours[lastIndex * 9 + 2] = c1[2];\r\n\r\n      positions[lastIndex * 9 + 3] = bx;\r\n      positions[lastIndex * 9 + 4] = by;\r\n      positions[lastIndex * 9 + 5] = bz;\r\n\r\n      normals[lastIndex * 9 + 3] = nx;\r\n      normals[lastIndex * 9 + 4] = ny;\r\n      normals[lastIndex * 9 + 5] = nz;\r\n\r\n      colours[lastIndex * 9 + 3] = c2[0];\r\n      colours[lastIndex * 9 + 4] = c2[1];\r\n      colours[lastIndex * 9 + 5] = c2[2];\r\n\r\n      positions[lastIndex * 9 + 6] = cx;\r\n      positions[lastIndex * 9 + 7] = cy;\r\n      positions[lastIndex * 9 + 8] = cz;\r\n\r\n      normals[lastIndex * 9 + 6] = nx;\r\n      normals[lastIndex * 9 + 7] = ny;\r\n      normals[lastIndex * 9 + 8] = nz;\r\n\r\n      colours[lastIndex * 9 + 6] = c3[0];\r\n      colours[lastIndex * 9 + 7] = c3[1];\r\n      colours[lastIndex * 9 + 8] = c3[2];\r\n\r\n      tops[lastIndex * 3 + 0] = t1;\r\n      tops[lastIndex * 3 + 1] = t2;\r\n      tops[lastIndex * 3 + 2] = t3;\r\n\r\n      if (pickingIds) {\r\n        pickingIds[lastIndex * 3 + 0] = _pickingId;\r\n        pickingIds[lastIndex * 3 + 1] = _pickingId;\r\n        pickingIds[lastIndex * 3 + 2] = _pickingId;\r\n      }\r\n\r\n      lastIndex++;\r\n    }\r\n\r\n    var attributes = {\r\n      positions: positions,\r\n      normals: normals,\r\n      colors: colours,\r\n      tops: tops\r\n    };\r\n\r\n    if (pickingIds) {\r\n      attributes.pickingIds = pickingIds;\r\n    }\r\n\r\n    return attributes;\r\n  }\r\n\r\n  // Returns true if the polygon is flat (has no height)\r\n  isFlat() {\r\n    return this._flat;\r\n  }\r\n\r\n  // Returns true if coordinates refer to a single geometry\r\n  //\r\n  // For example, not coordinates for a MultiPolygon GeoJSON feature\r\n  static isSingle(coordinates) {\r\n    return !Array.isArray(coordinates[0][0][0]);\r\n  }\r\n\r\n  // TODO: Make sure this is cleaning everything\r\n  destroy() {\r\n    if (this._pickingMesh) {\r\n      // TODO: Properly dispose of picking mesh\r\n      this._pickingMesh = null;\r\n    }\r\n\r\n    this.clearCoordinates();\r\n    this.clearBufferAttributes();\r\n\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default PolygonLayer;\r\n\r\nvar noNew = function(coordinates, options) {\r\n  return new PolygonLayer(coordinates, options);\r\n};\r\n\r\nexport {noNew as polygonLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/geometry/PolygonLayer.js","// TODO: Move duplicated logic between geometry layrs into GeometryLayer\r\n\r\n// TODO: Look at ways to drop unneeded references to array buffers, etc to\r\n// reduce memory footprint\r\n\r\n// TODO: Provide alternative output using tubes and splines / curves\r\n\r\n// TODO: Support dynamic updating / hiding / animation of geometry\r\n//\r\n// This could be pretty hard as it's all packed away within BufferGeometry and\r\n// may even be merged by another layer (eg. GeoJSONLayer)\r\n//\r\n// How much control should this layer support? Perhaps a different or custom\r\n// layer would be better suited for animation, for example.\r\n\r\n// TODO: Allow _setBufferAttributes to use a custom function passed in to\r\n// generate a custom mesh\r\n\r\nimport Layer from '../Layer';\r\nimport extend from 'lodash.assign';\r\nimport THREE from 'three';\r\nimport Geo from '../../geo/Geo';\r\nimport {latLon as LatLon} from '../../geo/LatLon';\r\nimport {point as Point} from '../../geo/Point';\r\nimport PickingMaterial from '../../engine/PickingMaterial';\r\nimport Buffer from '../../util/Buffer';\r\n\r\nclass PolylineLayer extends Layer {\r\n  constructor(coordinates, options) {\r\n    var defaults = {\r\n      output: true,\r\n      interactive: false,\r\n      // Custom material override\r\n      //\r\n      // TODO: Should this be in the style object?\r\n      polylineMaterial: null,\r\n      onPolylineMesh: null,\r\n      onBufferAttributes: null,\r\n      // This default style is separate to Util.GeoJSON.defaultStyle\r\n      style: {\r\n        lineOpacity: 1,\r\n        lineTransparent: false,\r\n        lineColor: '#ffffff',\r\n        lineWidth: 1,\r\n        lineBlending: THREE.NormalBlending\r\n      }\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    super(_options);\r\n\r\n    // Return coordinates as array of lines so it's easy to support\r\n    // MultiLineString features (a single line would be a MultiLineString with a\r\n    // single line in the array)\r\n    this._coordinates = (PolylineLayer.isSingle(coordinates)) ? [coordinates] : coordinates;\r\n\r\n    // Polyline features are always flat (for now at least)\r\n    this._flat = true;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    return new Promise((resolve, reject) => {\r\n      this._setCoordinates();\r\n\r\n      if (this._options.interactive) {\r\n        // Only add to picking mesh if this layer is controlling output\r\n        //\r\n        // Otherwise, assume another component will eventually add a mesh to\r\n        // the picking scene\r\n        if (this.isOutput()) {\r\n          this._pickingMesh = new THREE.Object3D();\r\n          this.addToPicking(this._pickingMesh);\r\n        }\r\n\r\n        this._setPickingId();\r\n        this._addPickingEvents();\r\n      }\r\n\r\n      // Store geometry representation as instances of THREE.BufferAttribute\r\n      PolylineLayer.SetBufferAttributes(this._projectedCoordinates, this._options).then((result) => {\r\n        this._bufferAttributes = Buffer.mergeAttributes(result.attributes);\r\n        this._flat = result.flat;\r\n\r\n        var attributeLengths = {\r\n          positions: 3,\r\n          colors: 3\r\n        };\r\n\r\n        if (this._options.interactive) {\r\n          attributeLengths.pickingIds = 1;\r\n        }\r\n\r\n        if (this.isOutput()) {\r\n          var style = this._options.style;\r\n\r\n          // Set mesh if not merging elsewhere\r\n          PolylineLayer.SetMesh(this._bufferAttributes, attributeLengths, this._flat, style, this._options).then((result) => {\r\n            // Output mesh\r\n            this.add(result.mesh);\r\n\r\n            if (result.pickingMesh) {\r\n              this._pickingMesh.add(result.pickingMesh);\r\n            }\r\n          });\r\n        }\r\n\r\n        result.attributes = null;\r\n        result = null;\r\n\r\n        resolve(this);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Return center of polyline as a LatLon\r\n  //\r\n  // This is used for things like placing popups / UI elements on the layer\r\n  //\r\n  // TODO: Find proper center position instead of returning first coordinate\r\n  // SEE: https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L59\r\n  getCenter() {\r\n    return this._center;\r\n  }\r\n\r\n  // Return line bounds in geographic coordinates\r\n  //\r\n  // TODO: Implement getBounds()\r\n  getBounds() {}\r\n\r\n  // Get unique ID for picking interaction\r\n  _setPickingId() {\r\n    this._pickingId = this._options.pickingId = this.getPickingId();\r\n  }\r\n\r\n  // Set up and re-emit interaction events\r\n  _addPickingEvents() {\r\n    // TODO: Find a way to properly remove this listener on destroy\r\n    this._world.on('pick-click-' + this._pickingId, (point2d, point3d, intersects) => {\r\n      // Re-emit click event from the layer\r\n      this.emit('click', this, point2d, point3d, intersects);\r\n    });\r\n\r\n    this._world.on('pick-hover-' + this._pickingId, (point2d, point3d, intersects) => {\r\n      // Re-emit click event from the layer\r\n      this.emit('hover', this, point2d, point3d, intersects);\r\n    });\r\n  }\r\n\r\n  static SetBufferAttributes(coordinates, options) {\r\n    return new Promise((resolve) => {\r\n      var height = 0;\r\n\r\n      // Convert height into world units\r\n      if (options.style.lineHeight) {\r\n        height = Geo.metresToWorld(options.style.lineHeight, options.pointScale);\r\n      }\r\n\r\n      var colour = new THREE.Color();\r\n      colour.set(options.style.lineColor);\r\n\r\n      var flat = true;\r\n\r\n      // For each line\r\n      var attributes = coordinates.map(_projectedCoordinates => {\r\n        var _vertices = [];\r\n        var _colours = [];\r\n\r\n        // Connect coordinate with the next to make a pair\r\n        //\r\n        // LineSegments requires pairs of vertices so repeat the last point if\r\n        // there's an odd number of vertices\r\n        var nextCoord;\r\n        _projectedCoordinates.forEach((coordinate, index) => {\r\n          _colours.push([colour.r, colour.g, colour.b]);\r\n          _vertices.push([coordinate.x, height, coordinate.y]);\r\n\r\n          nextCoord = (_projectedCoordinates[index + 1]) ? _projectedCoordinates[index + 1] : coordinate;\r\n\r\n          _colours.push([colour.r, colour.g, colour.b]);\r\n          _vertices.push([nextCoord.x, height, nextCoord.y]);\r\n        });\r\n\r\n        var line = {\r\n          vertices: _vertices,\r\n          colours: _colours,\r\n          verticesCount: _vertices.length\r\n        };\r\n\r\n        if (options.interactive && options.pickingId) {\r\n          // Inject picking ID\r\n          line.pickingId = options.pickingId;\r\n        }\r\n\r\n        // Convert line representation to proper attribute arrays\r\n        return PolylineLayer.ToAttributes(line);\r\n      });\r\n\r\n      resolve({\r\n        attributes: attributes,\r\n        flat: flat\r\n      });\r\n    });\r\n  }\r\n\r\n  getBufferAttributes() {\r\n    return this._bufferAttributes;\r\n  }\r\n\r\n  // Used by external components to clear some memory when the attributes\r\n  // are no longer required to be stored in this layer\r\n  //\r\n  // For example, you would want to clear the attributes here after merging them\r\n  // using something like the GeoJSONLayer\r\n  clearBufferAttributes() {\r\n    this._bufferAttributes = null;\r\n  }\r\n\r\n  // Used by external components to clear some memory when the coordinates\r\n  // are no longer required to be stored in this layer\r\n  //\r\n  // For example, you would want to clear the coordinates here after this\r\n  // layer is merged in something like the GeoJSONLayer\r\n  clearCoordinates() {\r\n    this._coordinates = null;\r\n    this._projectedCoordinates = null;\r\n  }\r\n\r\n  static SetMesh(attributes, attributeLengths, flat, style, options) {\r\n    var geometry = new THREE.BufferGeometry();\r\n\r\n    for (var key in attributes) {\r\n      geometry.addAttribute(key.slice(0, -1), new THREE.BufferAttribute(attributes[key], attributeLengths[key]));\r\n    }\r\n\r\n    geometry.computeBoundingBox();\r\n\r\n    var material;\r\n    if (options.polylineMaterial && options.polylineMaterial instanceof THREE.Material) {\r\n      material = options.polylineMaterial;\r\n    } else {\r\n      material = new THREE.LineBasicMaterial({\r\n        vertexColors: THREE.VertexColors,\r\n        linewidth: style.lineWidth,\r\n        transparent: style.lineTransparent,\r\n        opacity: style.lineOpacity,\r\n        blending: style.lineBlending\r\n      });\r\n    }\r\n\r\n    var mesh;\r\n\r\n    // Pass mesh through callback, if defined\r\n    if (typeof options.onPolylineMesh === 'function') {\r\n      mesh = options.onPolylineMesh(geometry, material);\r\n    } else {\r\n      mesh = new THREE.LineSegments(geometry, material);\r\n\r\n      if (style.lineRenderOrder !== undefined) {\r\n        material.depthWrite = false;\r\n        mesh.renderOrder = style.lineRenderOrder;\r\n      }\r\n\r\n      mesh.castShadow = true;\r\n      // mesh.receiveShadow = true;\r\n    }\r\n\r\n    if (options.interactive) {\r\n      material = new PickingMaterial();\r\n      // material.side = THREE.BackSide;\r\n\r\n      // Make the line wider / easier to pick\r\n      material.linewidth = style.lineWidth + material.linePadding;\r\n\r\n      var pickingMesh = new THREE.LineSegments(geometry, material);\r\n    }\r\n\r\n    return Promise.resolve({\r\n      mesh: mesh,\r\n      pickingMesh: pickingMesh\r\n    });\r\n  }\r\n\r\n  // Convert and project coordinates\r\n  //\r\n  // TODO: Calculate bounds\r\n  _setCoordinates() {\r\n    this._bounds = [];\r\n    this._coordinates = this._convertCoordinates(this._coordinates);\r\n\r\n    this._projectedBounds = [];\r\n    this._projectedCoordinates = this._projectCoordinates();\r\n\r\n    this._center = this._coordinates[0][0];\r\n  }\r\n\r\n  // Recursively convert input coordinates into LatLon objects\r\n  //\r\n  // Calculate geographic bounds at the same time\r\n  //\r\n  // TODO: Calculate geographic bounds\r\n  _convertCoordinates(coordinates) {\r\n    return coordinates.map(_coordinates => {\r\n      return _coordinates.map(coordinate => {\r\n        return LatLon(coordinate[1], coordinate[0]);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Recursively project coordinates into world positions\r\n  //\r\n  // Calculate world bounds, offset and pointScale at the same time\r\n  //\r\n  // TODO: Calculate world bounds\r\n  _projectCoordinates() {\r\n    var point;\r\n    return this._coordinates.map(_coordinates => {\r\n      return _coordinates.map(latlon => {\r\n        point = this._world.latLonToPoint(latlon);\r\n\r\n        // TODO: Is offset ever being used or needed?\r\n        if (!this._offset) {\r\n          this._offset = Point(0, 0);\r\n          this._offset.x = -1 * point.x;\r\n          this._offset.y = -1 * point.y;\r\n\r\n          this._options.pointScale = this._world.pointScale(latlon);\r\n        }\r\n\r\n        return point;\r\n      });\r\n    });\r\n  }\r\n\r\n  static ToAttributes(line) {\r\n    // Three components per vertex\r\n    var vertices = new Float32Array(line.verticesCount * 3);\r\n    var colours = new Float32Array(line.verticesCount * 3);\r\n\r\n    var pickingIds;\r\n    if (line.pickingId) {\r\n      // One component per vertex\r\n      pickingIds = new Float32Array(line.verticesCount);\r\n    }\r\n\r\n    var _vertices = line.vertices;\r\n    var _colour = line.colours;\r\n\r\n    var _pickingId;\r\n    if (pickingIds) {\r\n      _pickingId = line.pickingId;\r\n    }\r\n\r\n    var lastIndex = 0;\r\n\r\n    for (var i = 0; i < _vertices.length; i++) {\r\n      var ax = _vertices[i][0];\r\n      var ay = _vertices[i][1];\r\n      var az = _vertices[i][2];\r\n\r\n      var c1 = _colour[i];\r\n\r\n      vertices[lastIndex * 3 + 0] = ax;\r\n      vertices[lastIndex * 3 + 1] = ay;\r\n      vertices[lastIndex * 3 + 2] = az;\r\n\r\n      colours[lastIndex * 3 + 0] = c1[0];\r\n      colours[lastIndex * 3 + 1] = c1[1];\r\n      colours[lastIndex * 3 + 2] = c1[2];\r\n\r\n      if (pickingIds) {\r\n        pickingIds[lastIndex] = _pickingId;\r\n      }\r\n\r\n      lastIndex++;\r\n    }\r\n\r\n    var attributes = {\r\n      positions: vertices,\r\n      colors: colours\r\n    };\r\n\r\n    if (pickingIds) {\r\n      attributes.pickingIds = pickingIds;\r\n    }\r\n\r\n    return attributes;\r\n  }\r\n\r\n  // Returns true if the line is flat (has no height)\r\n  isFlat() {\r\n    return this._flat;\r\n  }\r\n\r\n  // Returns true if coordinates refer to a single geometry\r\n  //\r\n  // For example, not coordinates for a MultiLineString GeoJSON feature\r\n  static isSingle(coordinates) {\r\n    return !Array.isArray(coordinates[0][0]);\r\n  }\r\n\r\n  destroy() {\r\n    if (this._pickingMesh) {\r\n      // TODO: Properly dispose of picking mesh\r\n      this._pickingMesh = null;\r\n    }\r\n\r\n    this.clearCoordinates();\r\n    this.clearBufferAttributes();\r\n\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default PolylineLayer;\r\n\r\nvar noNew = function(coordinates, options) {\r\n  return new PolylineLayer(coordinates, options);\r\n};\r\n\r\nexport {noNew as polylineLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/geometry/PolylineLayer.js","// TODO: Move duplicated logic between geometry layrs into GeometryLayer\r\n\r\n// TODO: Look at ways to drop unneeded references to array buffers, etc to\r\n// reduce memory footprint\r\n\r\n// TODO: Point features may be using custom models / meshes and so an approach\r\n// needs to be found to allow these to be brokwn down into buffer attributes for\r\n// merging\r\n//\r\n// Can probably use fromGeometry() or setFromObject() from THREE.BufferGeometry\r\n// and pull out the attributes\r\n\r\n// TODO: Support sprite objects using textures\r\n\r\n// TODO: Provide option to billboard geometry so it always faces the camera\r\n\r\n// TODO: Support dynamic updating / hiding / animation of geometry\r\n//\r\n// This could be pretty hard as it's all packed away within BufferGeometry and\r\n// may even be merged by another layer (eg. GeoJSONLayer)\r\n//\r\n// How much control should this layer support? Perhaps a different or custom\r\n// layer would be better suited for animation, for example.\r\n\r\nimport Layer from '../Layer';\r\nimport extend from 'lodash.assign';\r\nimport THREE from 'three';\r\nimport Geo from '../../geo/Geo';\r\nimport {latLon as LatLon} from '../../geo/LatLon';\r\nimport {point as Point} from '../../geo/Point';\r\nimport PickingMaterial from '../../engine/PickingMaterial';\r\nimport Buffer from '../../util/Buffer';\r\nimport PolygonLayer from './PolygonLayer';\r\n\r\nclass PointLayer extends Layer {\r\n  constructor(coordinates, options) {\r\n    var defaults = {\r\n      output: true,\r\n      interactive: false,\r\n      // THREE.Geometry or THREE.BufferGeometry to use for point output\r\n      pointGeometry: null,\r\n      // Custom material override\r\n      //\r\n      // TODO: Should this be in the style object?\r\n      pointMaterial: null,\r\n      onPointMesh: null,\r\n      // This default style is separate to Util.GeoJSON.defaultStyle\r\n      style: {\r\n        pointColor: '#ff0000'\r\n      }\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    super(_options);\r\n\r\n    // Return coordinates as array of points so it's easy to support\r\n    // MultiPoint features (a single point would be a MultiPoint with a\r\n    // single point in the array)\r\n    this._coordinates = (PointLayer.isSingle(coordinates)) ? [coordinates] : coordinates;\r\n\r\n    this._flat = false;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    return new Promise((resolve, reject) => {\r\n      this._setCoordinates();\r\n\r\n      if (this._options.interactive) {\r\n        // Only add to picking mesh if this layer is controlling output\r\n        //\r\n        // Otherwise, assume another component will eventually add a mesh to\r\n        // the picking scene\r\n        if (this.isOutput()) {\r\n          this._pickingMesh = new THREE.Object3D();\r\n          this.addToPicking(this._pickingMesh);\r\n        }\r\n\r\n        this._setPickingId();\r\n        this._addPickingEvents();\r\n      }\r\n\r\n      // Store geometry representation as instances of THREE.BufferAttribute\r\n      PointLayer.SetBufferAttributes(this._projectedCoordinates, this._options).then((result) => {\r\n        this._bufferAttributes = Buffer.mergeAttributes(result.attributes);\r\n        this._flat = result.flat;\r\n\r\n        var attributeLengths = {\r\n          positions: 3,\r\n          normals: 3,\r\n          colors: 3\r\n        };\r\n\r\n        if (this._options.interactive) {\r\n          attributeLengths.pickingIds = 1;\r\n        }\r\n\r\n        if (this.isOutput()) {\r\n          var style = this._options.style;\r\n\r\n          // Set mesh if not merging elsewhere\r\n          // TODO: Dedupe with PolygonLayer as they are identical\r\n          PointLayer.SetMesh(this._bufferAttributes, attributeLengths, this._flat, style, this._options, this._world._environment._skybox).then((result) => {\r\n            // Output mesh\r\n            this.add(result.mesh);\r\n\r\n            if (result.pickingMesh) {\r\n              this._pickingMesh.add(result.pickingMesh);\r\n            }\r\n          });\r\n        }\r\n\r\n        result.attributes = null;\r\n        result = null;\r\n\r\n        resolve(this);\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  // Return center of point as a LatLon\r\n  //\r\n  // This is used for things like placing popups / UI elements on the layer\r\n  getCenter() {\r\n    return this._center;\r\n  }\r\n\r\n  // Return point bounds in geographic coordinates\r\n  //\r\n  // While not useful for single points, it could be useful for MultiPoint\r\n  //\r\n  // TODO: Implement getBounds()\r\n  getBounds() {}\r\n\r\n  // Get unique ID for picking interaction\r\n  _setPickingId() {\r\n    this._pickingId = this._options.pickingId = this.getPickingId();\r\n  }\r\n\r\n  // Set up and re-emit interaction events\r\n  _addPickingEvents() {\r\n    // TODO: Find a way to properly remove this listener on destroy\r\n    this._world.on('pick-click-' + this._pickingId, (point2d, point3d, intersects) => {\r\n      // Re-emit click event from the layer\r\n      this.emit('click', this, point2d, point3d, intersects);\r\n    });\r\n\r\n    this._world.on('pick-hover-' + this._pickingId, (point2d, point3d, intersects) => {\r\n      // Re-emit click event from the layer\r\n      this.emit('hover', this, point2d, point3d, intersects);\r\n    });\r\n  }\r\n\r\n  static SetBufferAttributes(coordinates, options) {\r\n    return new Promise((resolve) => {\r\n      var height = 0;\r\n\r\n      // Convert height into world units\r\n      if (options.style.pointHeight) {\r\n        height = Geo.metresToWorld(options.style.pointHeight, options.pointScale);\r\n      }\r\n\r\n      var colour = new THREE.Color();\r\n      colour.set(options.style.pointColor);\r\n\r\n      // Use default geometry if none has been provided or the provided geometry\r\n      // isn't valid\r\n      if (!options.pointGeometry || (!options.pointGeometry instanceof THREE.Geometry || !options.pointGeometry instanceof THREE.BufferGeometry)) {\r\n        // Debug geometry for points is a thin bar\r\n        //\r\n        // TODO: Allow point geometry to be customised / overridden\r\n        var geometryWidth = Geo.metresToWorld(25, options.pointScale);\r\n        var geometryHeight = Geo.metresToWorld(200, options.pointScale);\r\n        var _geometry = new THREE.BoxGeometry(geometryWidth, geometryHeight, geometryWidth);\r\n\r\n        // Shift geometry up so it sits on the ground\r\n        _geometry.translate(0, geometryHeight * 0.5, 0);\r\n\r\n        // Pull attributes out of debug geometry\r\n        geometry = new THREE.BufferGeometry().fromGeometry(_geometry);\r\n      } else {\r\n        if (options.geometry instanceof THREE.BufferGeometry) {\r\n          geometry = options.pointGeometry;\r\n        } else {\r\n          geometry = new THREE.BufferGeometry().fromGeometry(options.pointGeometry);\r\n        }\r\n      }\r\n\r\n      var attributes = coordinates.map((coordinate) => {\r\n        var _vertices = [];\r\n        var _normals = [];\r\n        var _colours = [];\r\n\r\n        var _geometry = geometry.clone();\r\n        _geometry.translate(coordinate.x, height, coordinate.y);\r\n\r\n        var _vertices = _geometry.attributes.position.clone().array;\r\n        var _normals = _geometry.attributes.normal.clone().array;\r\n        var _colours = _geometry.attributes.color.clone().array;\r\n\r\n        for (var i = 0; i < _colours.length; i += 3) {\r\n          _colours[i] = colour.r;\r\n          _colours[i + 1] = colour.g;\r\n          _colours[i + 2] = colour.b;\r\n        }\r\n\r\n        var _point = {\r\n          positions: _vertices,\r\n          normals: _normals,\r\n          colors: _colours\r\n        };\r\n\r\n        if (options.interactive && options.pickingId) {\r\n          // Inject picking ID\r\n          _point.pickingId = options.pickingId;\r\n        }\r\n\r\n        return _point;\r\n      });\r\n\r\n      resolve({\r\n        attributes: attributes,\r\n        flat: false\r\n      });\r\n    });\r\n  }\r\n\r\n  getBufferAttributes() {\r\n    return this._bufferAttributes;\r\n  }\r\n\r\n  // Used by external components to clear some memory when the attributes\r\n  // are no longer required to be stored in this layer\r\n  //\r\n  // For example, you would want to clear the attributes here after merging them\r\n  // using something like the GeoJSONLayer\r\n  clearBufferAttributes() {\r\n    this._bufferAttributes = null;\r\n  }\r\n\r\n  // Used by external components to clear some memory when the coordinates\r\n  // are no longer required to be stored in this layer\r\n  //\r\n  // For example, you would want to clear the coordinates here after this\r\n  // layer is merged in something like the GeoJSONLayer\r\n  clearCoordinates() {\r\n    this._coordinates = null;\r\n    this._projectedCoordinates = null;\r\n  }\r\n\r\n  static SetMesh(attributes, attributeLengths, flat, style, options, skybox) {\r\n    var geometry = new THREE.BufferGeometry();\r\n\r\n    for (var key in attributes) {\r\n      geometry.addAttribute(key.slice(0, -1), new THREE.BufferAttribute(attributes[key], attributeLengths[key]));\r\n    }\r\n\r\n    geometry.computeBoundingBox();\r\n\r\n    var material;\r\n    if (options.pointMaterial && options.pointMaterial instanceof THREE.Material) {\r\n      material = options.pointMaterial;\r\n    } else if (!skybox) {\r\n      material = new THREE.MeshPhongMaterial({\r\n        vertexColors: THREE.VertexColors,\r\n        // side: THREE.BackSide,\r\n        transparent: style.transparent,\r\n        opacity: style.opacity,\r\n        blending: style.blending\r\n      });\r\n    } else {\r\n      material = new THREE.MeshStandardMaterial({\r\n        vertexColors: THREE.VertexColors,\r\n        // side: THREE.BackSide,\r\n        transparent: style.transparent,\r\n        opacity: style.opacity,\r\n        blending: style.blending\r\n      });\r\n      material.roughness = 1;\r\n      material.metalness = 0.1;\r\n      material.envMapIntensity = 3;\r\n      material.envMap = skybox.getRenderTarget();\r\n    }\r\n\r\n    var mesh;\r\n\r\n    // Pass mesh through callback, if defined\r\n    if (typeof options.onPolygonMesh === 'function') {\r\n      mesh = options.onPolygonMesh(geometry, material);\r\n    } else {\r\n      mesh = new THREE.Mesh(geometry, material);\r\n\r\n      mesh.castShadow = true;\r\n      mesh.receiveShadow = true;\r\n    }\r\n\r\n    if (flat) {\r\n      material.depthWrite = false;\r\n      mesh.renderOrder = 4;\r\n    }\r\n\r\n    if (options.interactive) {\r\n      material = new PickingMaterial();\r\n      material.side = THREE.BackSide;\r\n\r\n      var pickingMesh = new THREE.Mesh(geometry, material);\r\n    }\r\n\r\n    return Promise.resolve({\r\n      mesh: mesh,\r\n      pickingMesh: pickingMesh\r\n    });\r\n  }\r\n\r\n  // Convert and project coordinates\r\n  //\r\n  // TODO: Calculate bounds\r\n  _setCoordinates() {\r\n    this._bounds = [];\r\n    this._coordinates = this._convertCoordinates(this._coordinates);\r\n\r\n    this._projectedBounds = [];\r\n    this._projectedCoordinates = this._projectCoordinates();\r\n\r\n    this._center = this._coordinates;\r\n  }\r\n\r\n  // Recursively convert input coordinates into LatLon objects\r\n  //\r\n  // Calculate geographic bounds at the same time\r\n  //\r\n  // TODO: Calculate geographic bounds\r\n  _convertCoordinates(coordinates) {\r\n    return coordinates.map(coordinate => {\r\n      return LatLon(coordinate[1], coordinate[0]);\r\n    });\r\n  }\r\n\r\n  // Recursively project coordinates into world positions\r\n  //\r\n  // Calculate world bounds, offset and pointScale at the same time\r\n  //\r\n  // TODO: Calculate world bounds\r\n  _projectCoordinates() {\r\n    var _point;\r\n    return this._coordinates.map(latlon => {\r\n      _point = this._world.latLonToPoint(latlon);\r\n\r\n      // TODO: Is offset ever being used or needed?\r\n      if (!this._offset) {\r\n        this._offset = Point(0, 0);\r\n        this._offset.x = -1 * _point.x;\r\n        this._offset.y = -1 * _point.y;\r\n\r\n        this._options.pointScale = this._world.pointScale(latlon);\r\n      }\r\n\r\n      return _point;\r\n    });\r\n  }\r\n\r\n  // Returns true if the line is flat (has no height)\r\n  isFlat() {\r\n    return this._flat;\r\n  }\r\n\r\n  // Returns true if coordinates refer to a single geometry\r\n  //\r\n  // For example, not coordinates for a MultiPoint GeoJSON feature\r\n  static isSingle(coordinates) {\r\n    return !Array.isArray(coordinates[0]);\r\n  }\r\n\r\n  destroy() {\r\n    if (this._pickingMesh) {\r\n      // TODO: Properly dispose of picking mesh\r\n      this._pickingMesh = null;\r\n    }\r\n\r\n    this.clearCoordinates();\r\n    this.clearBufferAttributes();\r\n\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default PointLayer;\r\n\r\nvar noNew = function(coordinates, options) {\r\n  return new PointLayer(coordinates, options);\r\n};\r\n\r\nexport {noNew as pointLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/geometry/PointLayer.js","import Layer from './Layer';\r\nimport extend from 'lodash.assign';\r\nimport reqwest from 'reqwest';\r\nimport GeoJSON from '../util/GeoJSON';\r\nimport Worker from '../util/Worker';\r\nimport Buffer from '../util/Buffer';\r\nimport Stringify from '../util/Stringify';\r\nimport PolygonLayer from './geometry/PolygonLayer';\r\nimport PolylineLayer from './geometry/PolylineLayer';\r\nimport PointLayer from './geometry/PointLayer';\r\nimport {latLon as LatLon} from '../geo/LatLon';\r\nimport {point as Point} from '../geo/Point';\r\nimport Geo from '../geo/Geo';\r\nimport PickingMaterial from '../engine/PickingMaterial';\r\n\r\n// TODO: Allow filter method to be run inside a worker to improve performance\r\n// TODO: Allow onEachFeature method to be run inside a worker to improve performance\r\n\r\nclass GeoJSONWorkerLayer extends Layer {\r\n  constructor(geojson, options) {\r\n    var defaults = {\r\n      topojson: false,\r\n      style: GeoJSON.defaultStyle,\r\n      onEachFeature: null,\r\n      onEachFeatureWorker: null,\r\n      onAddAttributes: null,\r\n      interactive: false,\r\n      pointGeometry: null,\r\n      onClick: null,\r\n      headers: {}\r\n    };\r\n\r\n    var _options = extend({}, defaults, options);\r\n\r\n    if (typeof options.style === 'object') {\r\n      _options.style = extend({}, defaults.style, options.style);\r\n    }\r\n\r\n    super(_options);\r\n\r\n    this._aborted = false;\r\n    this._geojson = geojson;\r\n  }\r\n\r\n  _onAdd(world) {\r\n    if (this._options.interactive) {\r\n      // Worker layer always controls output to add a picking mesh\r\n      this._pickingMesh = new THREE.Object3D();\r\n    }\r\n\r\n    // Process GeoJSON\r\n    return this._process(this._geojson).catch((err) => {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  // Use workers to request and process GeoJSON, returning data structure\r\n  // containing geometry and any supplementary data for output\r\n  _process(_geojson) {\r\n    return new Promise((resolve, reject) => {\r\n      var style = this._options.style;\r\n\r\n      // TODO: Convert to buffer and use transferrable objects\r\n      if (typeof this._options.style === 'function') {\r\n        style = Stringify.functionToString(this._options.style);\r\n      }\r\n\r\n      var pointGeometry = this._options.pointGeometry;\r\n\r\n      // TODO: Convert to buffer and use transferrable objects\r\n      if (typeof this._options.pointGeometry === 'function') {\r\n        pointGeometry = Stringify.functionToString(this._options.pointGeometry);\r\n      }\r\n\r\n      var geojson = _geojson;\r\n      var transferrables = [];\r\n\r\n      if (typeof geojson !== 'string') {\r\n        this._geojson = geojson = Buffer.stringToUint8Array(JSON.stringify(geojson));\r\n        transferrables.push(geojson.buffer);\r\n        this._execWorker(geojson, this._options.topojson, this._world._originPoint, style, this._options.interactive, pointGeometry, transferrables).then(() => {\r\n          resolve();\r\n        }).catch(reject);\r\n      } else if (typeof this._options.filter === 'function' || typeof this._options.onEachFeature === 'function') {\r\n        GeoJSONWorkerLayer.RequestGeoJSON(geojson).then((res) => {\r\n          // if (this._aborted) {\r\n          //   resolve();\r\n          //   return;\r\n          // }\r\n\r\n          var fc = GeoJSON.collectFeatures(res, this._options.topojson);\r\n          var features = fc.features;\r\n\r\n          // Run filter, if provided\r\n          if (this._options.filter) {\r\n            fc.features = features.filter(this._options.filter);\r\n          }\r\n\r\n          if (this._options.onEachFeature) {\r\n            var feature;\r\n            for (var i = 0; i < features.length; i++) {\r\n              feature = features[i];\r\n              this._options.onEachFeature(feature);\r\n            };\r\n          }\r\n\r\n          this._geojson = geojson = Buffer.stringToUint8Array(JSON.stringify(fc));\r\n          transferrables.push(geojson.buffer);\r\n\r\n          this._execWorker(geojson, false, this._options.headers, this._world._originPoint, style, this._options.interactive, pointGeometry, transferrables).then(() => {\r\n            resolve();\r\n          }).catch(reject);\r\n        });\r\n      } else {\r\n        this._execWorker(geojson, this._options.topojson, this._options.headers, this._world._originPoint, style, this._options.interactive, pointGeometry, transferrables).then(() => {\r\n          resolve();\r\n        }).catch(reject);\r\n      }\r\n    });\r\n  }\r\n\r\n  _execWorker(geojson, topojson, headers, originPoint, style, interactive, pointGeometry, transferrables) {\r\n    return new Promise((resolve, reject) => {\r\n      // console.time('Worker round trip');\r\n\r\n      Worker.exec('GeoJSONWorkerLayer.Process', [geojson, topojson, headers, originPoint, style, interactive, pointGeometry], transferrables).then((results) => {\r\n        // console.timeEnd('Worker round trip');\r\n\r\n        // if (this._aborted) {\r\n        //   resolve();\r\n        //   return;\r\n        // }\r\n\r\n        var processPromises = [];\r\n\r\n        if (results.polygons) {\r\n          processPromises.push(this._processPolygonResults(results.polygons));\r\n        }\r\n\r\n        if (results.polylines) {\r\n          processPromises.push(this._processPolylineResults(results.polylines));\r\n        }\r\n\r\n        if (results.points) {\r\n          processPromises.push(this._processPointResults(results.points));\r\n        }\r\n\r\n        if (processPromises.length > 0) {\r\n          Promise.all(processPromises).then(() => {\r\n            resolve();\r\n          }).catch(reject);\r\n        } else {\r\n          resolve();\r\n        }\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  // TODO: Dedupe with polyline method\r\n  _processPolygonResults(results) {\r\n    return new Promise((resolve, reject) => {\r\n      var splitPositions = Buffer.splitFloat32Array(results.attributes.positions);\r\n      var splitNormals = Buffer.splitFloat32Array(results.attributes.normals);\r\n      var splitColors = Buffer.splitFloat32Array(results.attributes.colors);\r\n      var splitTops = Buffer.splitFloat32Array(results.attributes.tops);\r\n\r\n      var splitOutlinePositions;\r\n      var splitOutlineColors;\r\n\r\n      if (results.outlineAttributes) {\r\n        splitOutlinePositions = Buffer.splitFloat32Array(results.outlineAttributes.positions);\r\n        splitOutlineColors = Buffer.splitFloat32Array(results.outlineAttributes.colors);\r\n      }\r\n\r\n      var splitProperties;\r\n      if (results.properties) {\r\n        splitProperties = Buffer.splitUint8Array(results.properties);\r\n      }\r\n\r\n      var flats = results.flats;\r\n\r\n      var objects = [];\r\n      var outlineObjects = [];\r\n\r\n      var obj;\r\n      var pickingId;\r\n      var pickingIds;\r\n      var properties;\r\n\r\n      var polygonAttributeLengths = {\r\n        positions: 3,\r\n        normals: 3,\r\n        colors: 3,\r\n        tops: 1\r\n      };\r\n\r\n      var polygonOutlineAttributeLengths = {\r\n        positions: 3,\r\n        colors: 3\r\n      };\r\n\r\n      for (var i = 0; i < splitPositions.length; i++) {\r\n        if (splitProperties && splitProperties[i]) {\r\n          properties = JSON.parse(Buffer.uint8ArrayToString(splitProperties[i]));\r\n        } else {\r\n          properties = {};\r\n        }\r\n\r\n        // WORKERS: obj.attributes should actually an array of polygons for\r\n        // the feature, though the current logic isn't aware of that\r\n        obj = {\r\n          attributes: [{\r\n            positions: splitPositions[i],\r\n            normals: splitNormals[i],\r\n            colors: splitColors[i],\r\n            tops: splitTops[i]\r\n          }],\r\n          properties: properties,\r\n          flat: flats[i]\r\n        };\r\n\r\n        // WORKERS: If interactive, generate unique ID for each feature, create\r\n        // the buffer attributes and set up event listeners\r\n        if (this._options.interactive) {\r\n          pickingId = this.getPickingId();\r\n\r\n          pickingIds = new Float32Array(splitPositions[i].length / 3);\r\n          Buffer.fillTypedArray(pickingIds, pickingId);\r\n\r\n          obj.attributes[0].pickingIds = pickingIds;\r\n\r\n          polygonAttributeLengths.pickingIds = 1;\r\n\r\n          this._addPicking(pickingId, properties);\r\n        }\r\n\r\n        // TODO: Make this specific to polygon attributes\r\n        if (typeof this._options.onAddAttributes === 'function') {\r\n          var customAttributes = this._options.onAddAttributes(obj.attributes[0], properties);\r\n          var customAttribute;\r\n          for (var key in customAttributes) {\r\n            customAttribute = customAttributes[key];\r\n            obj.attributes[0][key] = customAttribute.value;\r\n            polygonAttributeLengths[key] = customAttribute.length;\r\n          }\r\n        }\r\n\r\n        objects.push(obj);\r\n      }\r\n\r\n      for (var i = 0; i < splitOutlinePositions.length; i++) {\r\n        obj = {\r\n          attributes: [{\r\n            positions: splitOutlinePositions[i],\r\n            colors: splitOutlineColors[i]\r\n          }],\r\n          flat: true\r\n        };\r\n\r\n        outlineObjects.push(obj);\r\n      }\r\n\r\n      var polygonAttributes = [];\r\n      var polygonOutlineAttributes = [];\r\n\r\n      var polygonFlat = true;\r\n\r\n      for (var i = 0; i < objects.length; i++) {\r\n        obj = objects[i];\r\n\r\n        // TODO: Work out why obj.flat is rarely set to something other than\r\n        // true or false. Potentially undefined.\r\n        if (polygonFlat && obj.flat === false) {\r\n          polygonFlat = false;\r\n        }\r\n\r\n        var bufferAttributes = Buffer.mergeAttributes(obj.attributes);\r\n        polygonAttributes.push(bufferAttributes);\r\n      };\r\n\r\n      for (var i = 0; i < outlineObjects.length; i++) {\r\n        obj = outlineObjects[i];\r\n\r\n        var bufferAttributes = Buffer.mergeAttributes(obj.attributes);\r\n        polygonOutlineAttributes.push(bufferAttributes);\r\n      };\r\n\r\n      var outputPromises = [];\r\n\r\n      var style;\r\n\r\n      if (polygonAttributes.length > 0) {\r\n        var mergedPolygonAttributes = Buffer.mergeAttributes(polygonAttributes);\r\n\r\n        // TODO: Make this work when style is a function per feature\r\n        style = (typeof this._options.style === 'function') ? this._options.style(objects[0]) : this._options.style;\r\n        style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n        outputPromises.push(this._setPolygonMesh(mergedPolygonAttributes, polygonAttributeLengths, style, polygonFlat));\r\n      }\r\n\r\n      if (polygonOutlineAttributes.length > 0) {\r\n        var mergedPolygonOutlineAttributes = Buffer.mergeAttributes(polygonOutlineAttributes);\r\n\r\n        style = (typeof this._options.style === 'function') ? this._options.style(objects[0]) : this._options.style;\r\n        style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n        if (style.outlineRenderOrder !== undefined) {\r\n          style.lineRenderOrder = style.outlineRenderOrder;\r\n        } else {\r\n          style.lineRenderOrder = (style.renderOrder) ? style.renderOrder + 1 : 4;\r\n        }\r\n\r\n        if (style.outlineWidth) {\r\n          style.lineWidth = style.outlineWidth;\r\n        }\r\n\r\n        outputPromises.push(this._setPolylineMesh(mergedPolygonOutlineAttributes, polygonOutlineAttributeLengths, style, true));\r\n      }\r\n\r\n      Promise.all(outputPromises).then((results) => {\r\n        var [polygonResult, outlineResult] = results;\r\n\r\n        if (polygonResult) {\r\n          this._polygonMesh = polygonResult.mesh;\r\n          this.add(this._polygonMesh);\r\n\r\n          if (polygonResult.pickingMesh) {\r\n            this._pickingMesh.add(polygonResult.pickingMesh);\r\n          }\r\n        }\r\n\r\n        if (outlineResult) {\r\n          this.add(outlineResult.mesh);\r\n        }\r\n\r\n        resolve();\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  // TODO: Dedupe with polygon method\r\n  _processPolylineResults(results) {\r\n    return new Promise((resolve, reject) => {\r\n      var splitPositions = Buffer.splitFloat32Array(results.attributes.positions);\r\n      var splitColors = Buffer.splitFloat32Array(results.attributes.colors);\r\n\r\n      var splitProperties;\r\n      if (results.properties) {\r\n        splitProperties = Buffer.splitUint8Array(results.properties);\r\n      }\r\n\r\n      var flats = results.flats;\r\n\r\n      var objects = [];\r\n      var obj;\r\n      var pickingId;\r\n      var pickingIds;\r\n      var properties;\r\n\r\n      var polylineAttributeLengths = {\r\n        positions: 3,\r\n        colors: 3\r\n      };\r\n\r\n      for (var i = 0; i < splitPositions.length; i++) {\r\n        if (splitProperties && splitProperties[i]) {\r\n          properties = JSON.parse(Buffer.uint8ArrayToString(splitProperties[i]));\r\n        } else {\r\n          properties = {};\r\n        }\r\n\r\n        // WORKERS: obj.attributes should actually an array of polygons for\r\n        // the feature, though the current logic isn't aware of that\r\n        obj = {\r\n          attributes: [{\r\n            positions: splitPositions[i],\r\n            colors: splitColors[i]\r\n          }],\r\n          properties: properties,\r\n          flat: flats[i]\r\n        };\r\n\r\n        // WORKERS: If interactive, generate unique ID for each feature, create\r\n        // the buffer attributes and set up event listeners\r\n        if (this._options.interactive) {\r\n          pickingId = this.getPickingId();\r\n\r\n          pickingIds = new Float32Array(splitPositions[i].length / 3);\r\n          Buffer.fillTypedArray(pickingIds, pickingId);\r\n\r\n          obj.attributes[0].pickingIds = pickingIds;\r\n\r\n          polylineAttributeLengths.pickingIds = 1;\r\n\r\n          this._addPicking(pickingId, properties);\r\n        }\r\n\r\n        // TODO: Make this specific to polyline attributes\r\n        if (typeof this._options.onAddAttributes === 'function') {\r\n          var customAttributes = this._options.onAddAttributes(obj.attributes[0], properties);\r\n          var customAttribute;\r\n          for (var key in customAttributes) {\r\n            customAttribute = customAttributes[key];\r\n            obj.attributes[0][key] = customAttribute.value;\r\n            polylineAttributeLengths[key] = customAttribute.length;\r\n          }\r\n        }\r\n\r\n        objects.push(obj);\r\n      }\r\n\r\n      var polylineAttributes = [];\r\n\r\n      var polylineFlat = true;\r\n\r\n      for (var i = 0; i < objects.length; i++) {\r\n        obj = objects[i];\r\n\r\n        if (polylineFlat && !obj.flat) {\r\n          polylineFlat = false;\r\n        }\r\n\r\n        var bufferAttributes = Buffer.mergeAttributes(obj.attributes);\r\n        polylineAttributes.push(bufferAttributes);\r\n      };\r\n\r\n      if (polylineAttributes.length > 0) {\r\n        var mergedPolylineAttributes = Buffer.mergeAttributes(polylineAttributes);\r\n\r\n        // TODO: Make this work when style is a function per feature\r\n        var style = (typeof this._options.style === 'function') ? this._options.style(objects[0]) : this._options.style;\r\n        style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n        this._setPolylineMesh(mergedPolylineAttributes, polylineAttributeLengths, style, polylineFlat).then((result) => {\r\n          this._polylineMesh = result.mesh;\r\n          this.add(this._polylineMesh);\r\n\r\n          if (result.pickingMesh) {\r\n            this._pickingMesh.add(result.pickingMesh);\r\n          }\r\n\r\n          resolve();\r\n        }).catch(reject);\r\n      } else {\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  _processPointResults(results) {\r\n    return new Promise((resolve, reject) => {\r\n      var splitPositions = Buffer.splitFloat32Array(results.attributes.positions);\r\n      var splitNormals = Buffer.splitFloat32Array(results.attributes.normals);\r\n      var splitColors = Buffer.splitFloat32Array(results.attributes.colors);\r\n\r\n      var splitProperties;\r\n      if (results.properties) {\r\n        splitProperties = Buffer.splitUint8Array(results.properties);\r\n      }\r\n\r\n      var flats = results.flats;\r\n\r\n      var objects = [];\r\n      var obj;\r\n      var pickingId;\r\n      var pickingIds;\r\n      var properties;\r\n\r\n      var pointAttributeLengths = {\r\n        positions: 3,\r\n        normals: 3,\r\n        colors: 3\r\n      };\r\n\r\n      for (var i = 0; i < splitPositions.length; i++) {\r\n        if (splitProperties && splitProperties[i]) {\r\n          properties = JSON.parse(Buffer.uint8ArrayToString(splitProperties[i]));\r\n        } else {\r\n          properties = {};\r\n        }\r\n\r\n        // WORKERS: obj.attributes should actually an array of polygons for\r\n        // the feature, though the current logic isn't aware of that\r\n        obj = {\r\n          attributes: [{\r\n            positions: splitPositions[i],\r\n            normals: splitNormals[i],\r\n            colors: splitColors[i]\r\n          }],\r\n          properties: properties,\r\n          flat: flats[i]\r\n        };\r\n\r\n        // WORKERS: If interactive, generate unique ID for each feature, create\r\n        // the buffer attributes and set up event listeners\r\n        if (this._options.interactive) {\r\n          pickingId = this.getPickingId();\r\n\r\n          pickingIds = new Float32Array(splitPositions[i].length / 3);\r\n          Buffer.fillTypedArray(pickingIds, pickingId);\r\n\r\n          obj.attributes[0].pickingIds = pickingIds;\r\n\r\n          pointAttributeLengths.pickingIds = 1;\r\n\r\n          this._addPicking(pickingId, properties);\r\n        }\r\n\r\n        // TODO: Make this specific to polygon attributes\r\n        if (typeof this._options.onAddAttributes === 'function') {\r\n          var customAttributes = this._options.onAddAttributes(obj.attributes[0], properties);\r\n          var customAttribute;\r\n          for (var key in customAttributes) {\r\n            customAttribute = customAttributes[key];\r\n            obj.attributes[0][key] = customAttribute.value;\r\n            pointAttributeLengths[key] = customAttribute.length;\r\n          }\r\n        }\r\n\r\n        objects.push(obj);\r\n      }\r\n\r\n      var pointAttributes = [];\r\n\r\n      var pointFlat = true;\r\n\r\n      for (var i = 0; i < objects.length; i++) {\r\n        obj = objects[i];\r\n\r\n        if (pointFlat && !obj.flat) {\r\n          pointFlat = false;\r\n        }\r\n\r\n        var bufferAttributes = Buffer.mergeAttributes(obj.attributes);\r\n        pointAttributes.push(bufferAttributes);\r\n      };\r\n\r\n      if (pointAttributes.length > 0) {\r\n        var mergedPointAttributes = Buffer.mergeAttributes(pointAttributes);\r\n\r\n        // TODO: Make this work when style is a function per feature\r\n        var style = (typeof this._options.style === 'function') ? this._options.style(objects[0]) : this._options.style;\r\n        style = extend({}, GeoJSON.defaultStyle, style);\r\n\r\n        this._setPointMesh(mergedPointAttributes, pointAttributeLengths, style, pointFlat).then((result) => {\r\n          this._pointMesh = result.mesh;\r\n          this.add(this._pointMesh);\r\n\r\n          if (result.pickingMesh) {\r\n            this._pickingMesh.add(result.pickingMesh);\r\n          }\r\n\r\n          resolve();\r\n        }).catch(reject);\r\n      } else {\r\n        resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  // TODO: At some point this needs to return all the features to the main thread\r\n  // so it can generate meshes and output to the scene, as well as perhaps creating\r\n  // individual layers / components for each feature to track things like picking\r\n  // and properties\r\n  //\r\n  // TODO: Find a way so the origin point isn't needed to be passed in as it\r\n  // feels a bit messy and against the idea of a static Geo class\r\n  //\r\n  // TODO: Support passing custom geometry for point layers\r\n  static Process(geojson, topojson, headers, originPoint, _style, _properties, _pointGeometry) {\r\n    return new Promise((resolve, reject) => {\r\n      GeoJSONWorkerLayer.ProcessGeoJSON(geojson, headers).then((res) => {\r\n        // Collects features into a single FeatureCollection\r\n        //\r\n        // Also converts TopoJSON to GeoJSON if instructed\r\n        var geojson = GeoJSON.collectFeatures(res, topojson);\r\n\r\n        // TODO: Check that GeoJSON is valid / usable\r\n\r\n        var features = geojson.features;\r\n\r\n        // TODO: Run filter, if provided (must be static)\r\n\r\n        var pointScale;\r\n        var polygons = [];\r\n        var polylines = [];\r\n        var points = [];\r\n\r\n        // Deserialise style function if provided\r\n        if (typeof _style === 'string') {\r\n          _style = Stringify.stringToFunction(_style);\r\n        }\r\n\r\n        // Assume that a style won't be set per feature\r\n        var style = _style;\r\n\r\n        var pointGeometry;\r\n        // Deserialise pointGeometry function if provided\r\n        if (typeof _pointGeometry === 'string') {\r\n          pointGeometry = Stringify.stringToFunction(_pointGeometry);\r\n        }\r\n\r\n        var feature;\r\n        for (var i = 0; i < features.length; i++) {\r\n          feature = features[i];\r\n\r\n          var geometry = feature.geometry;\r\n          var coordinates = (geometry.coordinates) ? geometry.coordinates : null;\r\n\r\n          if (!coordinates || !geometry) {\r\n            return;\r\n          }\r\n\r\n          // Get per-feature style object, if provided\r\n          if (typeof _style === 'function') {\r\n            style = extend({}, GeoJSON.defaultStyle, _style(feature));\r\n            // console.log(feature, style);\r\n          }\r\n\r\n          if (geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\r\n            coordinates = (PolygonLayer.isSingle(coordinates)) ? [coordinates] : coordinates;\r\n\r\n            var converted = coordinates.map(_coordinates => {\r\n              return _coordinates.map(ring => {\r\n                return ring.map(coordinate => {\r\n                  return LatLon(coordinate[1], coordinate[0]);\r\n                });\r\n              });\r\n            });\r\n\r\n            var point;\r\n            var projected = converted.map((_coordinates) => {\r\n              return _coordinates.map((ring) => {\r\n                return ring.map((latlon) => {\r\n                  point = Geo.latLonToPoint(latlon)._subtract(originPoint);\r\n\r\n                  if (!pointScale) {\r\n                    pointScale = Geo.pointScale(latlon);\r\n                  }\r\n\r\n                  return point;\r\n                });\r\n              });\r\n            });\r\n\r\n            var polygon = {\r\n              projected: projected,\r\n              options: {\r\n                pointScale: pointScale,\r\n                style: style\r\n              }\r\n            };\r\n\r\n            if (_properties) {\r\n              polygon.properties = feature.properties;\r\n            }\r\n\r\n            polygons.push(polygon);\r\n          }\r\n\r\n          if (geometry.type === 'LineString' || geometry.type === 'MultiLineString') {\r\n            coordinates = (PolylineLayer.isSingle(coordinates)) ? [coordinates] : coordinates;\r\n\r\n            var converted = coordinates.map(_coordinates => {\r\n              return _coordinates.map(coordinate => {\r\n                return LatLon(coordinate[1], coordinate[0]);\r\n              });\r\n            });\r\n\r\n            var point;\r\n            var projected = converted.map((_coordinates) => {\r\n              return _coordinates.map((latlon) => {\r\n                point = Geo.latLonToPoint(latlon)._subtract(originPoint);\r\n\r\n                if (!pointScale) {\r\n                  pointScale = Geo.pointScale(latlon);\r\n                }\r\n\r\n                return point;\r\n              });\r\n            });\r\n\r\n            var polyline = {\r\n              projected: projected,\r\n              options: {\r\n                pointScale: pointScale,\r\n                style: style\r\n              }\r\n            };\r\n\r\n            if (_properties) {\r\n              polyline.properties = feature.properties;\r\n            }\r\n\r\n            polylines.push(polyline);\r\n          }\r\n\r\n          if (geometry.type === 'Point' || geometry.type === 'MultiPoint') {\r\n            coordinates = (PointLayer.isSingle(coordinates)) ? [coordinates] : coordinates;\r\n\r\n            var converted = coordinates.map(coordinate => {\r\n              return LatLon(coordinate[1], coordinate[0]);\r\n            });\r\n\r\n            var point;\r\n            var projected = converted.map((latlon) => {\r\n              point = Geo.latLonToPoint(latlon)._subtract(originPoint);\r\n\r\n              if (!pointScale) {\r\n                pointScale = Geo.pointScale(latlon);\r\n              }\r\n\r\n              return point;\r\n            });\r\n\r\n            var point = {\r\n              projected: projected,\r\n              options: {\r\n                pointGeometry: pointGeometry(feature),\r\n                pointScale: pointScale,\r\n                style: style\r\n              }\r\n            };\r\n\r\n            if (_properties) {\r\n              point.properties = feature.properties;\r\n            }\r\n\r\n            points.push(point);\r\n          }\r\n        };\r\n\r\n        var polygonBufferPromises = [];\r\n        var polylineBufferPromises = [];\r\n        var pointBufferPromises = [];\r\n\r\n        var polygon;\r\n        for (var i = 0; i < polygons.length; i++) {\r\n          polygon = polygons[i];\r\n          polygonBufferPromises.push(PolygonLayer.SetBufferAttributes(polygon.projected, polygon.options));\r\n        };\r\n\r\n        var polyline;\r\n        for (var i = 0; i < polylines.length; i++) {\r\n          polyline = polylines[i];\r\n          polylineBufferPromises.push(PolylineLayer.SetBufferAttributes(polyline.projected, polyline.options));\r\n        };\r\n\r\n        var point;\r\n        for (var i = 0; i < points.length; i++) {\r\n          point = points[i];\r\n          pointBufferPromises.push(PointLayer.SetBufferAttributes(point.projected, point.options));\r\n        };\r\n\r\n        var data = {};\r\n        var transferrables = [];\r\n\r\n        // TODO: Make this work with polylines too\r\n        // TODO: Make this so it's not a nest of promises\r\n        GeoJSONWorkerLayer.ProcessPolygons(polygonBufferPromises, polygons, _properties).then((result) => {\r\n          data.polygons = result.data;\r\n          transferrables = transferrables.concat(result.transferrables);\r\n\r\n          GeoJSONWorkerLayer.ProcessPolylines(polylineBufferPromises, polylines, _properties).then((result) => {\r\n            data.polylines = result.data;\r\n            transferrables = transferrables.concat(result.transferrables);\r\n\r\n            GeoJSONWorkerLayer.ProcessPoints(pointBufferPromises, points, _properties).then((result) => {\r\n              data.points = result.data;\r\n              transferrables = transferrables.concat(result.transferrables);\r\n\r\n              resolve({\r\n                data: data,\r\n                transferrables: transferrables\r\n              });\r\n            });\r\n          });\r\n        });\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  static ProcessPolygons(polygonPromises, polygons, _properties) {\r\n    return new Promise((resolve, reject) => {\r\n      Promise.all(polygonPromises).then((results) => {\r\n        var transferrables = [];\r\n\r\n        var positions = [];\r\n        var normals = [];\r\n        var colors = [];\r\n        var tops = [];\r\n\r\n        var outlinePositions = [];\r\n        var outlineColors = [];\r\n\r\n        var properties = [];\r\n\r\n        var flats = [];\r\n        var polygon;\r\n\r\n        var result;\r\n        for (var i = 0; i < results.length; i++) {\r\n          result = results[i];\r\n\r\n          polygon = polygons[i];\r\n\r\n          // WORKERS: Making this a typed array will speed up transfer time\r\n          // As things stand this adds on a few milliseconds\r\n          flats.push(result.flat);\r\n\r\n          // WORKERS: result.attributes is actually an array of polygons for each\r\n          // feature, though the current logic isn't keeping these all together\r\n\r\n          var attributes;\r\n          for (var j = 0; j < result.attributes.length; j++) {\r\n            attributes = result.attributes[j];\r\n\r\n            positions.push(attributes.positions);\r\n            normals.push(attributes.normals);\r\n            colors.push(attributes.colors);\r\n            tops.push(attributes.tops);\r\n\r\n            if (_properties) {\r\n              properties.push(Buffer.stringToUint8Array(JSON.stringify(polygon.properties)));\r\n            }\r\n          };\r\n\r\n          var outlineAttributes;\r\n          for (var j = 0; j < result.outlineAttributes.length; j++) {\r\n            outlineAttributes = result.outlineAttributes[j];\r\n\r\n            outlinePositions.push(outlineAttributes.positions);\r\n            outlineColors.push(outlineAttributes.colors);\r\n          };\r\n        };\r\n\r\n        var mergedAttributes = {\r\n          positions: Buffer.mergeFloat32Arrays(positions),\r\n          normals: Buffer.mergeFloat32Arrays(normals),\r\n          colors: Buffer.mergeFloat32Arrays(colors),\r\n          tops: Buffer.mergeFloat32Arrays(tops)\r\n        };\r\n\r\n        var mergedOutlineAttributes = {\r\n          positions: Buffer.mergeFloat32Arrays(outlinePositions),\r\n          colors: Buffer.mergeFloat32Arrays(outlineColors)\r\n        };\r\n\r\n        transferrables.push(mergedAttributes.positions[0].buffer);\r\n        transferrables.push(mergedAttributes.positions[1].buffer);\r\n\r\n        transferrables.push(mergedAttributes.normals[0].buffer);\r\n        transferrables.push(mergedAttributes.normals[1].buffer);\r\n\r\n        transferrables.push(mergedAttributes.colors[0].buffer);\r\n        transferrables.push(mergedAttributes.colors[1].buffer);\r\n\r\n        transferrables.push(mergedAttributes.tops[0].buffer);\r\n        transferrables.push(mergedAttributes.tops[1].buffer);\r\n\r\n        transferrables.push(mergedOutlineAttributes.positions[0].buffer);\r\n        transferrables.push(mergedOutlineAttributes.positions[1].buffer);\r\n\r\n        transferrables.push(mergedOutlineAttributes.colors[0].buffer);\r\n        transferrables.push(mergedOutlineAttributes.colors[1].buffer);\r\n\r\n        var mergedProperties;\r\n        if (_properties) {\r\n          mergedProperties = Buffer.mergeUint8Arrays(properties);\r\n\r\n          transferrables.push(mergedProperties[0].buffer);\r\n          transferrables.push(mergedProperties[1].buffer);\r\n        }\r\n\r\n        var output = {\r\n          attributes: mergedAttributes,\r\n          outlineAttributes: mergedOutlineAttributes,\r\n          flats: flats\r\n        };\r\n\r\n        if (_properties) {\r\n          output.properties = mergedProperties;\r\n        }\r\n\r\n        // TODO: Also return GeoJSON features that can be mapped to objects on\r\n        // the main thread. Allow user to provide filter / toggles to only return\r\n        // properties from the GeoJSON that they need (eg. don't return geometry,\r\n        // or don't return properties.height)\r\n        resolve({\r\n          data: output,\r\n          transferrables: transferrables\r\n        });\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  static ProcessPolylines(polylinePromises, polylines, _properties) {\r\n    return new Promise((resolve, reject) => {\r\n      Promise.all(polylinePromises).then((results) => {\r\n        var transferrables = [];\r\n\r\n        var positions = [];\r\n        var colors = [];\r\n\r\n        var properties = [];\r\n\r\n        var flats = [];\r\n        var polyline;\r\n\r\n        var result;\r\n        for (var i = 0; i < results.length; i++) {\r\n          result = results[i];\r\n\r\n          polyline = polylines[i];\r\n\r\n          // WORKERS: Making this a typed array will speed up transfer time\r\n          // As things stand this adds on a few milliseconds\r\n          flats.push(result.flat);\r\n\r\n          // WORKERS: result.attributes is actually an array of polygons for each\r\n          // feature, though the current logic isn't keeping these all together\r\n\r\n          var attributes;\r\n          for (var j = 0; j < result.attributes.length; j++) {\r\n            attributes = result.attributes[j];\r\n\r\n            positions.push(attributes.positions);\r\n            colors.push(attributes.colors);\r\n\r\n            if (_properties) {\r\n              properties.push(Buffer.stringToUint8Array(JSON.stringify(polyline.properties)));\r\n            }\r\n          };\r\n        };\r\n\r\n        var mergedAttributes = {\r\n          positions: Buffer.mergeFloat32Arrays(positions),\r\n          colors: Buffer.mergeFloat32Arrays(colors)\r\n        };\r\n\r\n        transferrables.push(mergedAttributes.positions[0].buffer);\r\n        transferrables.push(mergedAttributes.positions[1].buffer);\r\n\r\n        transferrables.push(mergedAttributes.colors[0].buffer);\r\n        transferrables.push(mergedAttributes.colors[1].buffer);\r\n\r\n        var mergedProperties;\r\n        if (_properties) {\r\n          mergedProperties = Buffer.mergeUint8Arrays(properties);\r\n\r\n          transferrables.push(mergedProperties[0].buffer);\r\n          transferrables.push(mergedProperties[1].buffer);\r\n        }\r\n\r\n        var output = {\r\n          attributes: mergedAttributes,\r\n          flats: flats\r\n        };\r\n\r\n        if (_properties) {\r\n          output.properties = mergedProperties;\r\n        }\r\n\r\n        // TODO: Also return GeoJSON features that can be mapped to objects on\r\n        // the main thread. Allow user to provide filter / toggles to only return\r\n        // properties from the GeoJSON that they need (eg. don't return geometry,\r\n        // or don't return properties.height)\r\n        resolve({\r\n          data: output,\r\n          transferrables: transferrables\r\n        });\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  // TODO: Dedupe with ProcessPolygons as they are identical\r\n  static ProcessPoints(pointPromises, points, _properties) {\r\n    return new Promise((resolve, reject) => {\r\n      Promise.all(pointPromises).then((results) => {\r\n        var transferrables = [];\r\n\r\n        var positions = [];\r\n        var normals = [];\r\n        var colors = [];\r\n\r\n        var properties = [];\r\n\r\n        var flats = [];\r\n        var point;\r\n\r\n        var result;\r\n        for (var i = 0; i < results.length; i++) {\r\n          result = results[i];\r\n\r\n          point = points[i];\r\n\r\n          // WORKERS: Making this a typed array will speed up transfer time\r\n          // As things stand this adds on a few milliseconds\r\n          flats.push(result.flat);\r\n\r\n          // WORKERS: result.attributes is actually an array of polygons for each\r\n          // feature, though the current logic isn't keeping these all together\r\n\r\n          var attributes;\r\n          for (var j = 0; j < result.attributes.length; j++) {\r\n            attributes = result.attributes[j];\r\n\r\n            positions.push(attributes.positions);\r\n            normals.push(attributes.normals);\r\n            colors.push(attributes.colors);\r\n\r\n            if (_properties) {\r\n              properties.push(Buffer.stringToUint8Array(JSON.stringify(polygon.properties)));\r\n            }\r\n          };\r\n        };\r\n\r\n        var mergedAttributes = {\r\n          positions: Buffer.mergeFloat32Arrays(positions),\r\n          normals: Buffer.mergeFloat32Arrays(normals),\r\n          colors: Buffer.mergeFloat32Arrays(colors)\r\n        };\r\n\r\n        transferrables.push(mergedAttributes.positions[0].buffer);\r\n        transferrables.push(mergedAttributes.positions[1].buffer);\r\n\r\n        transferrables.push(mergedAttributes.normals[0].buffer);\r\n        transferrables.push(mergedAttributes.normals[1].buffer);\r\n\r\n        transferrables.push(mergedAttributes.colors[0].buffer);\r\n        transferrables.push(mergedAttributes.colors[1].buffer);\r\n\r\n        var mergedProperties;\r\n        if (_properties) {\r\n          mergedProperties = Buffer.mergeUint8Arrays(properties);\r\n\r\n          transferrables.push(mergedProperties[0].buffer);\r\n          transferrables.push(mergedProperties[1].buffer);\r\n        }\r\n\r\n        var output = {\r\n          attributes: mergedAttributes,\r\n          flats: flats\r\n        };\r\n\r\n        if (_properties) {\r\n          output.properties = mergedProperties;\r\n        }\r\n\r\n        // TODO: Also return GeoJSON features that can be mapped to objects on\r\n        // the main thread. Allow user to provide filter / toggles to only return\r\n        // properties from the GeoJSON that they need (eg. don't return geometry,\r\n        // or don't return properties.height)\r\n        resolve({\r\n          data: output,\r\n          transferrables: transferrables\r\n        });\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  static ProcessGeoJSON(geojson, headers) {\r\n    if (typeof geojson === 'string') {\r\n      return GeoJSONWorkerLayer.RequestGeoJSON(geojson, headers);\r\n    } else {\r\n      return Promise.resolve(JSON.parse(Buffer.uint8ArrayToString(geojson)));\r\n    }\r\n  }\r\n\r\n  static RequestGeoJSON(path, headers) {\r\n    return reqwest({\r\n      url: path,\r\n      type: 'json',\r\n      crossOrigin: true,\r\n      headers: headers\r\n    });\r\n  }\r\n\r\n  // Create and store mesh from buffer attributes\r\n  //\r\n  // Could make this an abstract method for each geometry layer\r\n  _setPolygonMesh(attributes, attributeLengths, style, flat) {\r\n    if (!this._world) {\r\n      return Promise.reject();\r\n    }\r\n\r\n    return PolygonLayer.SetMesh(attributes, attributeLengths, flat, style, this._options, this._world._environment._skybox);\r\n  }\r\n\r\n  _setPolylineMesh(attributes, attributeLengths, style, flat) {\r\n    if (!this._world) {\r\n      return Promise.reject();\r\n    }\r\n\r\n    return PolylineLayer.SetMesh(attributes, attributeLengths, flat, style, this._options);\r\n  }\r\n\r\n  _setPointMesh(attributes, attributeLengths, style, flat) {\r\n    if (!this._world) {\r\n      return Promise.reject();\r\n    }\r\n\r\n    return PointLayer.SetMesh(attributes, attributeLengths, flat, style, this._options, this._world._environment._skybox);\r\n  }\r\n\r\n  // Set up and re-emit interaction events\r\n  _addPicking(pickingId, properties) {\r\n    this._world.on('pick-click-' + pickingId, (pickingId, point2d, point3d, intersects) => {\r\n      this._world.emit('click', this, properties, point2d, point3d);\r\n    });\r\n\r\n    this._world.on('pick-hover-' + pickingId, (pickingId, point2d, point3d, intersects) => {\r\n      this._world.emit('hover', this, properties, point2d, point3d);\r\n    });\r\n  }\r\n\r\n  // TODO: Finish cleanup\r\n  destroy() {\r\n    // Run common destruction logic from parent\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport default GeoJSONWorkerLayer;\r\n\r\nvar noNew = function(geojson, options) {\r\n  return new GeoJSONWorkerLayer(geojson, options);\r\n};\r\n\r\nexport {noNew as geoJSONWorkerLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/GeoJSONWorkerLayer.js","import WorkerPool from './WorkerPool';\r\n\r\nvar Worker = (function() {\r\n  var _maxWorkers = 2;\r\n  var pool;\r\n\r\n  var createWorkers = function(maxWorkers, workerScript) {\r\n    pool = new WorkerPool({\r\n      numThreads: (maxWorkers) ? maxWorkers : _maxWorkers,\r\n      workerScript: (workerScript) ? workerScript : 'vizicities-worker.js'\r\n    });\r\n\r\n    return pool.createWorkers();\r\n  };\r\n\r\n  var exec = function(method, args, transferrables) {\r\n    return pool.exec(method, args, transferrables);\r\n  };\r\n\r\n  return {\r\n    createWorkers: createWorkers,\r\n    exec: exec\r\n  };\r\n})();\r\n\r\nexport default Worker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/Worker.js","import WorkerPoolWorker from './WorkerPoolWorker';\r\n\r\nconst DEBUG = false;\r\n\r\n// Polyfill for Array.find\r\nif (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function(predicate) {\r\n      'use strict';\r\n      if (this == null) {\r\n        throw new TypeError('Array.prototype.find called on null or undefined');\r\n      }\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n      var list = Object(this);\r\n      var length = list.length >>> 0;\r\n      var thisArg = arguments[1];\r\n      var value;\r\n\r\n      for (var i = 0; i < length; i++) {\r\n        value = list[i];\r\n        if (predicate.call(thisArg, value, i, list)) {\r\n          return value;\r\n        }\r\n      }\r\n      return undefined;\r\n    }\r\n  });\r\n}\r\n\r\nclass WorkerPool {\r\n  constructor(options) {\r\n    this.numThreads = options.numThreads || 2;\r\n    this.workerScript = options.workerScript;\r\n\r\n    this.workers = [];\r\n    this.tasks = [];\r\n  }\r\n\r\n  createWorkers() {\r\n    return new Promise((resolve, reject) => {\r\n      var workerPromises = [];\r\n\r\n      for (var i = 0; i < this.numThreads; i++) {\r\n        workerPromises.push(this.createWorker());\r\n      }\r\n\r\n      Promise.all(workerPromises).then(() => {\r\n        if (DEBUG) { console.log('All workers ready', (performance || Date).now()); }\r\n        resolve();\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  createWorker() {\r\n    return new Promise((resolve, reject) => {\r\n      // Initialise worker\r\n      var worker = new WorkerPoolWorker({\r\n        workerScript: this.workerScript\r\n      });\r\n\r\n      // Start worker and wait for it to be ready\r\n      return worker.start().then(() => {\r\n        if (DEBUG) { console.log('Worker ready', (performance || Date).now()); }\r\n\r\n        // Add worker to pool\r\n        this.workers.push(worker);\r\n\r\n        resolve();\r\n      }).catch(reject);\r\n    });\r\n  }\r\n\r\n  getFreeWorker() {\r\n    return this.workers.find((worker) => {\r\n      return !worker.busy;\r\n    });\r\n  }\r\n\r\n  // Execute task on a worker\r\n  exec(method, args, transferrables) {\r\n    var deferred = Promise.deferred();\r\n\r\n    // Create task\r\n    var task = {\r\n      method: method,\r\n      args: args,\r\n      transferrables: transferrables,\r\n      deferred: deferred\r\n    };\r\n\r\n    // Add task to queue\r\n    this.tasks.push(task);\r\n\r\n    // Trigger task processing\r\n    this.processTasks();\r\n\r\n    // Return task promise\r\n    return task.deferred.promise;\r\n  }\r\n\r\n  processTasks() {\r\n    if (DEBUG) { console.log('Processing tasks'); }\r\n\r\n    if (this.tasks.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // Find free worker\r\n    var worker = this.getFreeWorker();\r\n\r\n    if (!worker) {\r\n      if (DEBUG) { console.log('No workers free'); }\r\n      return;\r\n    }\r\n\r\n    // Get oldest task\r\n    var task = this.tasks.shift();\r\n\r\n    // Execute task on worker\r\n    worker.exec(task.method, task.args, task.transferrables).then((result) => {\r\n      // Trigger task processing\r\n      this.processTasks();\r\n\r\n      // Return result in deferred task promise\r\n      task.deferred.resolve(result);\r\n    }).catch((err) => {\r\n      // Trigger task processing\r\n      this.processTasks();\r\n\r\n      task.deferred.reject(err);\r\n    });\r\n  }\r\n}\r\n\r\nexport default WorkerPool;\r\n\r\n// Quick shim to create deferred native promises\r\nPromise.deferred = function() {\r\n  var result = {};\r\n\r\n  result.promise = new Promise((resolve, reject) => {\r\n    result.resolve = resolve;\r\n    result.reject = reject;\r\n  });\r\n\r\n  return result;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/WorkerPool.js","const DEBUG = false;\r\n\r\nclass WorkerPoolWorker {\r\n  constructor(options) {\r\n    this.workerScript = options.workerScript;\r\n\r\n    this.ready = false;\r\n    this.busy = false;\r\n    this.deferred = null;\r\n  }\r\n\r\n  start() {\r\n    return new Promise((resolve, reject) => {\r\n      this.worker = new Worker(this.workerScript);\r\n\r\n      var onStartup = (event) => {\r\n        if (!event.data || event.data.type !== 'startup') {\r\n          reject();\r\n          return;\r\n        }\r\n\r\n        this.ready = true;\r\n\r\n        // Remove temporary message handler\r\n        this.worker.removeEventListener('message', onStartup);\r\n\r\n        // Set up listener to respond to normal events now\r\n        this.worker.addEventListener('message', (event) => {\r\n          this.onMessage(event);\r\n        });\r\n\r\n        // Resolve once worker is ready\r\n        resolve();\r\n      };\r\n\r\n      // Set up temporary event listener for warmup\r\n      this.worker.addEventListener('message', onStartup);\r\n    });\r\n  }\r\n\r\n  exec(method, args, transferrables) {\r\n    if (DEBUG) { console.log('Execute', method, args, transferrables); }\r\n\r\n    var deferred = Promise.deferred();\r\n\r\n    this.busy = true;\r\n    this.deferred = deferred;\r\n\r\n    this.worker.postMessage({\r\n      method: method,\r\n      args: args\r\n    }, transferrables);\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  onMessage(event) {\r\n    if (DEBUG) { console.log('Message received from worker', (performance || Date).now()); }\r\n\r\n    this.busy = false;\r\n\r\n    if (!event.data || event.data.type === 'error' || event.data.type !== 'result') {\r\n      this.deferred.reject(event.data.payload);\r\n      return;\r\n    }\r\n\r\n    this.deferred.resolve(event.data.payload);\r\n  }\r\n}\r\n\r\nexport default WorkerPoolWorker;\r\n\r\n// Quick shim to create deferred native promises\r\nPromise.deferred = function() {\r\n  var result = {};\r\n\r\n  result.promise = new Promise((resolve, reject) => {\r\n    result.resolve = resolve;\r\n    result.reject = reject;\r\n  });\r\n\r\n  return result;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/WorkerPoolWorker.js","var Stringify = (function() {\r\n  var functionToString = function(f) {\r\n    return f.toString();\r\n  };\r\n\r\n  // Based on https://github.com/tangrams/tangram/blob/2a31893c814cf15d5077f87ffa10af20160716b9/src/utils/utils.js#L245\r\n  var stringToFunction = function(str) {\r\n    if (typeof str === 'string' && str.match(/^\\s*function\\s*\\w*\\s*\\([\\s\\S]*\\)\\s*\\{[\\s\\S]*\\}/m) != null) {\r\n      var f;\r\n\r\n      try {\r\n        eval('f = ' + str);\r\n        return f;\r\n      } catch (err) {\r\n        return str;\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    functionToString: functionToString,\r\n    stringToFunction: stringToFunction\r\n  };\r\n})();\r\n\r\nexport default Stringify;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/Stringify.js","import GeoJSONTileLayer from './GeoJSONTileLayer';\r\nimport extend from 'lodash.assign';\r\n\r\nclass TopoJSONTileLayer extends GeoJSONTileLayer {\r\n  constructor(path, options) {\r\n    var defaults = {\r\n      topojson: true\r\n    };\r\n\r\n    options = extend({}, defaults, options);\r\n\r\n    super(path, options);\r\n  }\r\n}\r\n\r\nexport default TopoJSONTileLayer;\r\n\r\nvar noNew = function(path, options) {\r\n  return new TopoJSONTileLayer(path, options);\r\n};\r\n\r\nexport {noNew as topoJSONTileLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/tile/TopoJSONTileLayer.js","import GeoJSONLayer from './GeoJSONLayer';\r\nimport extend from 'lodash.assign';\r\n\r\nclass TopoJSONLayer extends GeoJSONLayer {\r\n  constructor(topojson, options) {\r\n    var defaults = {\r\n      topojson: true\r\n    };\r\n\r\n    options = extend({}, defaults, options);\r\n\r\n    super(topojson, options);\r\n  }\r\n}\r\n\r\nexport default TopoJSONLayer;\r\n\r\nvar noNew = function(topojson, options) {\r\n  return new TopoJSONLayer(topojson, options);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as topoJSONLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/TopoJSONLayer.js","import GeoJSONWorkerLayer from './GeoJSONWorkerLayer';\r\nimport extend from 'lodash.assign';\r\n\r\nclass TopoJSONWorkerLayer extends GeoJSONWorkerLayer {\r\n  constructor(topojson, options) {\r\n    var defaults = {\r\n      topojson: true\r\n    };\r\n\r\n    options = extend({}, defaults, options);\r\n\r\n    super(topojson, options);\r\n  }\r\n}\r\n\r\nexport default TopoJSONWorkerLayer;\r\n\r\nvar noNew = function(topojson, options) {\r\n  return new TopoJSONWorkerLayer(topojson, options);\r\n};\r\n\r\n// Initialise without requiring new keyword\r\nexport {noNew as topoJSONWorkerLayer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/TopoJSONWorkerLayer.js","// TODO: A lot of these utils don't need to be in separate, tiny files\r\n\r\nimport wrapNum from './wrapNum';\r\nimport extrudePolygon from './extrudePolygon';\r\nimport GeoJSON from './GeoJSON';\r\nimport Buffer from './Buffer';\r\nimport Worker from './Worker';\r\nimport Stringify from './Stringify';\r\n\r\nconst Util = {};\r\n\r\nUtil.wrapNum = wrapNum;\r\nUtil.extrudePolygon = extrudePolygon;\r\nUtil.GeoJSON = GeoJSON;\r\nUtil.Buffer = Buffer;\r\nUtil.Worker = Worker;\r\nUtil.Stringify = Stringify;\r\n\r\nexport default Util;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/index.js","/*\r\n * Wrap the given number to lie within a certain range (eg. longitude)\r\n *\r\n * Based on:\r\n * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\r\n */\r\n\r\nvar wrapNum = function(x, range, includeMax) {\r\n  var max = range[1];\r\n  var min = range[0];\r\n  var d = max - min;\r\n  return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\r\n};\r\n\r\nexport default wrapNum;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/wrapNum.js"]}